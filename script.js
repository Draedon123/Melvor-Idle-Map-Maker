(()=>{var t={6528:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(5144),o=r(6069);n.DisplayObject.mixin(o.accessibleTarget);class a{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(i.utils.isMobile.tablet||i.utils.isMobile.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let t=0;t<e.length;t++)this.updateAccessibleObjects(e[t])}update(){const t=performance.now();if(i.utils.isMobile.android.device&&t<this.androidUpdateCount)return;if(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:r,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=n/o*l,u=s/a*l;let c=this.div;c.style.left=`${e}px`,c.style.top=`${r}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.renderId!==this.renderId)e._accessibleActive=!1,i.utils.removeItems(this.children,t,1),this.div.removeChild(e._accessibleDiv),this.pool.push(e._accessibleDiv),e._accessibleDiv=null,t--;else{c=e._accessibleDiv;let t=e.hitArea;const r=e.worldTransform;e.hitArea?(c.style.left=(r.tx+t.x*r.a)*h+"px",c.style.top=(r.ty+t.y*r.d)*u+"px",c.style.width=t.width*r.a*h+"px",c.style.height=t.height*r.d*u+"px"):(t=e.getBounds(),this.capHitArea(t),c.style.left=t.x*h+"px",c.style.top=t.y*u+"px",c.style.width=t.width*h+"px",c.style.height=t.height*u+"px",c.title!==e.accessibleTitle&&null!==e.accessibleTitle&&(c.title=e.accessibleTitle),c.getAttribute("aria-label")!==e.accessibleHint&&null!==e.accessibleHint&&c.setAttribute("aria-label",e.accessibleHint)),e.accessibleTitle===c.title&&e.tabIndex===c.tabIndex||(c.title=e.accessibleTitle,c.tabIndex=e.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:r}=t.target,i=this.renderer.events.rootBoundary,n=Object.assign(new s.FederatedEvent(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,e.forEach((t=>i.dispatchEvent(n,t)))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){9===t.keyCode&&this.activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}a.extension={name:"accessibility",type:[i.ExtensionType.RendererPlugin,i.ExtensionType.CanvasRendererPlugin]},i.extensions.add(a),e.AccessibilityManager=a},6069:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1}},3080:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6528),n=r(6069);e.AccessibilityManager=i.AccessibilityManager,e.accessibleTarget=n.accessibleTarget},9323:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075);const s=class{constructor(t){this.stage=new n.Container,t=Object.assign({forceCanvas:!1},t),this.renderer=i.autoDetectRenderer(t),s._plugins.forEach((e=>{e.init.call(this,t)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=s._plugins.slice(0);r.reverse(),r.forEach((t=>{t.destroy.call(this)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let o=s;o._plugins=[],i.extensions.handleByList(i.ExtensionType.Application,o._plugins),e.Application=o},2944:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);class n{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:i}=this._resizeTo;t=r,e=i}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}n.extension=i.ExtensionType.Application,i.extensions.add(n),e.ResizePlugin=n},8328:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9323),n=r(2944);e.Application=i.Application,e.ResizePlugin=n.ResizePlugin},4816:(t,e,r)=>{"use strict";var i=r(6428);const n={loader:i.ExtensionType.LoadParser,resolver:i.ExtensionType.ResolveParser,cache:i.ExtensionType.CacheParser,detection:i.ExtensionType.DetectionParser};i.extensions.handle(i.ExtensionType.Asset,(t=>{const e=t.ref;Object.entries(n).filter((([t])=>!!e[t])).forEach((([t,r])=>i.extensions.add(Object.assign(e[t],{extension:e[t].extension??r}))))}),(t=>{const e=t.ref;Object.keys(n).filter((t=>!!e[t])).forEach((t=>i.extensions.remove(e[t])))}))},1408:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4512),s=r(6620),o=r(4712);r(2264);var a=r(7139),l=r(6908),h=r(9248),u=r(8808);class c{constructor(){this._detections=[],this._initialized=!1,this.resolver=new a.Resolver,this.loader=new o.Loader,this.cache=s.Cache,this._backgroundLoader=new n.BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,r="number"==typeof e?[e]:e;let i=[];if(t.texturePreference?.format){const e=t.texturePreference?.format;i="string"==typeof e?[e]:e;for(const t of this._detections)await t.test()||(i=await t.remove(i))}else for(const t of this._detections)await t.test()&&(i=await t.add(i));this.resolver.prefer({params:{format:i,resolution:r}})}add(t,e,r){this.resolver.add(t,e,r)}async load(t,e){this._initialized||await this.init();const r=h.isSingleItem(t),i=l.convertToList(t).map((t=>"string"!=typeof t?(this.resolver.add(t.src,t),t.src):t)),n=this.resolver.resolve(i),s=await this._mapLoadToResolve(n,e);return r?s[i[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;"string"==typeof t&&(r=!0,t=[t]);const i=this.resolver.resolveBundle(t),n={},s=Object.keys(i);let o=0,a=0;const l=()=>{e?.(++o/a)},h=s.map((t=>{const e=i[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,l).then((e=>{n[t]=e}))}));return await Promise.all(h),r?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach((t=>{this._backgroundLoader.add(Object.values(t))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"==typeof t)return s.Cache.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=s.Cache.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),i=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(r,e);this._backgroundLoader.active=!0;const o={};return r.forEach(((t,e)=>{const r=n[t.src],a=[t.src];t.alias&&a.push(...t.alias),o[i[e]]=r,s.Cache.set(a,r)})),o}async unload(t){this._initialized||await this.init();const e=l.convertToList(t).map((t=>"string"!=typeof t?t.src:t)),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=l.convertToList(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map((t=>this._unloadFromResolved(e[t])));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach((t=>{s.Cache.remove(t.src)})),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return u.loadTextures.config.preferWorkers}set preferWorkers(t){u.loadTextures.config.preferWorkers=t}}const d=new c;i.extensions.handleByList(i.ExtensionType.LoadParser,d.loader.parsers).handleByList(i.ExtensionType.ResolveParser,d.resolver.parsers).handleByList(i.ExtensionType.CacheParser,d.cache.parsers).handleByList(i.ExtensionType.DetectionParser,d.detections),e.Assets=d,e.AssetsClass=c},4512:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BackgroundLoader=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach((t=>{this._assetList.push(t)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}},6620:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);r(5816);var n=r(6908);const s=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=n.convertToList(t);let s;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];if(i.test(e)){s=i.getCacheableAssets(r,e);break}}s||(s={},r.forEach((t=>{s[t]=e})));const o=Object.keys(s),a={cacheKeys:o,keys:r};if(r.forEach((t=>{this._cacheMap.set(t,a)})),o.forEach((t=>{this._cache.has(t)&&this._cache.get(t)!==e&&console.warn("[Cache] already has key:",t),this._cache.set(t,s[t])})),e instanceof i.Texture){const t=e;r.forEach((e=>{t.baseTexture!==i.Texture.EMPTY.baseTexture&&i.BaseTexture.addToCache(t.baseTexture,e),i.Texture.addToCache(t,e)}))}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t))return void console.warn(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}};e.Cache=s},3440:()=>{},5328:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6620);r(3440),r(9800),e.Cache=i.Cache},1528:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={extension:i.ExtensionType.CacheParser,test:t=>Array.isArray(t)&&t.every((t=>t instanceof i.Texture)),getCacheableAssets:(t,e)=>{const r={};return t.forEach((t=>{e.forEach(((e,i)=>{r[t+(0===i?"":i+1)]=e}))})),r}};i.extensions.add(n),e.cacheTextureArray=n},9800:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1528);e.cacheTextureArray=i.cacheTextureArray},2576:(t,e,r)=>{"use strict";r(7768)},4800:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={extension:{type:i.ExtensionType.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await i.settings.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"avif"],remove:async t=>t.filter((t=>"avif"!==t))};i.extensions.add(n),e.detectAvif=n},7792:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n=["png","jpg","jpeg"],s={extension:{type:i.ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...n],remove:async t=>t.filter((t=>!n.includes(t)))};i.extensions.add(s),e.detectDefaults=s},400:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={extension:{type:i.ExtensionType.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await i.settings.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"webp"],remove:async t=>t.filter((t=>"webp"!==t))};i.extensions.add(n),e.detectWebp=n},7768:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4800),n=r(400),s=r(7792);e.detectAvif=i.detectAvif,e.detectWebp=n.detectWebp,e.detectDefaults=s.detectDefaults},5896:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(4816);var i=r(1408);r(5328),r(2576),r(2900),r(712),r(5816);var n=r(6620),s=r(1528),o=r(4800),a=r(400),l=r(7792),h=r(1184),u=r(184),c=r(2936),d=r(9200),p=r(8236),f=r(8808),g=r(4908),m=r(748),v=r(7211),y=r(7552),_=r(6908),x=r(8724),b=r(1392),E=r(9248);e.Assets=i.Assets,e.AssetsClass=i.AssetsClass,e.Cache=n.Cache,e.cacheTextureArray=s.cacheTextureArray,e.detectAvif=o.detectAvif,e.detectWebp=a.detectWebp,e.detectDefaults=l.detectDefaults,e.LoaderParserPriority=h.LoaderParserPriority,e.loadJson=u.loadJson,e.loadTxt=c.loadTxt,e.getFontFamilyName=d.getFontFamilyName,e.loadWebFont=d.loadWebFont,e.loadSVG=p.loadSVG,e.loadImageBitmap=f.loadImageBitmap,e.loadTextures=f.loadTextures,e.createTexture=g.createTexture,e.resolveTextureUrl=m.resolveTextureUrl,e.checkDataUrl=v.checkDataUrl,e.checkExtension=y.checkExtension,e.convertToList=_.convertToList,e.copySearchParams=x.copySearchParams,e.createStringVariations=b.createStringVariations,e.isSingleItem=E.isSingleItem},4712:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);r(5816);var n=r(9248),s=r(6908);e.Loader=class{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{let i=null;for(let n=0;n<this.parsers.length;n++){const s=this.parsers[n];if(s.load&&s.test?.(t,e,this)){i=await s.load(t,e,this),r.parser=s;break}}if(!r.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let t=0;t<this.parsers.length;t++){const n=this.parsers[t];n.parse&&n.parse&&await(n.testParse?.(i,e,this))&&(i=await n.parse(i,e,this)||i,r.parser=n)}return i})(),r}async load(t,e){let r=0;const o={},a=n.isSingleItem(t),l=s.convertToList(t,(t=>({src:t}))),h=l.length,u=l.map((async t=>{const n=i.utils.path.toAbsolute(t.src);if(!o[t.src])try{this.promiseCache[n]||(this.promiseCache[n]=this._getLoadPromiseAndParser(n,t)),o[t.src]=await this.promiseCache[n].promise,e&&e(++r/h)}catch(e){throw delete this.promiseCache[n],delete o[t.src],new Error(`[Loader.load] Failed to load ${n}.\n${e}`)}}));return await Promise.all(u),a?o[l[0].src]:o}async unload(t){const e=s.convertToList(t,(t=>({src:t}))).map((async t=>{const e=i.utils.path.toAbsolute(t.src),r=this.promiseCache[e];if(r){const i=await r.promise;r.parser?.unload?.(i,t,this),delete this.promiseCache[e]}}));await Promise.all(e)}get parsers(){return this._parsers}}},2900:(t,e,r)=>{"use strict";r(2264),r(2448)},1184:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(r||{});e.LoaderParserPriority=r},3656:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r,i=0;const n={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    "},s={id:"loadImageBitmap",code:"\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };"};let o;const a=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((t=>{const e=URL.createObjectURL(new Blob([n.code],{type:"application/javascript"})),r=new Worker(e);r.addEventListener("message",(i=>{r.terminate(),URL.revokeObjectURL(e),t(i.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===r&&(r=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<r&&(o||(o=URL.createObjectURL(new Blob([s.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(o),t.addEventListener("message",(t=>{this.complete(t.data),this.returnWorker(t.target),this.next()}))),t}returnWorker(t){this.workerPool.push(t)}complete(t){void 0!==t.error?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise(((r,i)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:i})}));return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[i]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:i++,id:r})}};e.WorkerManager=a},2264:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1184),n=r(184),s=r(2936),o=r(9200);r(7760),e.LoaderParserPriority=i.LoaderParserPriority,e.loadJson=n.loadJson,e.loadTxt=s.loadTxt,e.getFontFamilyName=o.getFontFamilyName,e.loadWebFont=o.loadWebFont},184:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1184);const s={extension:{type:i.ExtensionType.LoadParser,priority:n.LoaderParserPriority.Low},test:t=>".json"===i.utils.path.extname(t).toLowerCase(),async load(t){const e=await i.settings.ADAPTER.fetch(t);return await e.json()}};i.extensions.add(s),e.loadJson=s},2936:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1184);const s={extension:{type:i.ExtensionType.LoadParser,priority:n.LoaderParserPriority.Low},test:t=>".txt"===i.utils.path.extname(t).toLowerCase(),async load(t){const e=await i.settings.ADAPTER.fetch(t);return await e.text()}};i.extensions.add(s),e.loadTxt=s},9200:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(7211),s=r(7552),o=r(1184);const a=["normal","bold","100","200","300","400","500","600","700","800","900"],l=[".ttf",".otf",".woff",".woff2"],h=["font/ttf","font/otf","font/woff","font/woff2"];function u(t){const e=i.utils.path.extname(t);return i.utils.path.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}const c={extension:{type:i.ExtensionType.LoadParser,priority:o.LoaderParserPriority.Low},test:t=>n.checkDataUrl(t,h)||s.checkExtension(t,l),async load(t,e){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=i.settings.ADAPTER.getFontFaceSet();if(r){const i=[],n=e.data?.family??u(t),s=e.data?.weights?.filter((t=>a.includes(t)))??["normal"],o=e.data??{};for(let e=0;e<s.length;e++){const a=s[e],l=new FontFace(n,`url(${encodeURI(t)})`,{...o,weight:a});await l.load(),r.add(l),i.push(l)}return 1===i.length?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach((t=>i.settings.ADAPTER.getFontFaceSet().delete(t)))}};i.extensions.add(c),e.getFontFamilyName=u,e.loadWebFont=c},7760:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8236),n=r(8808);r(8588),e.loadSVG=i.loadSVG,e.loadImageBitmap=n.loadImageBitmap,e.loadTextures=n.loadTextures},8236:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1184),s=r(8808),o=r(4908);const a={extension:{type:i.ExtensionType.LoadParser,priority:n.LoaderParserPriority.High},test:t=>".svg"===i.utils.path.extname(t).toLowerCase(),testParse:async t=>i.SVGResource.test(t),async parse(t,e,r){const n=new i.SVGResource(t,e?.data?.resourceOptions),s=new i.BaseTexture(n,{resolution:i.utils.getResolutionOfUrl(t),...e?.data});s.resource.src=t;const a=o.createTexture(s,r,t);return e?.data?.resourceOptions?.autoLoad||await n.load(),a},load:async(t,e)=>(await i.settings.ADAPTER.fetch(t)).text(),unload:s.loadTextures.unload};i.extensions.add(a),e.loadSVG=a},8808:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(7211),s=r(7552),o=r(1184),a=r(3656),l=r(4908);const h=[".jpeg",".jpg",".png",".webp",".avif"],u=["image/jpeg","image/png","image/webp","image/avif"];async function c(t){const e=await i.settings.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const d={extension:{type:i.ExtensionType.LoadParser,priority:o.LoaderParserPriority.High},config:{preferWorkers:!0},test:t=>n.checkDataUrl(t,u)||s.checkExtension(t,h),async load(t,e,r){let n=null;n=globalThis.createImageBitmap?this.config.preferWorkers&&await a.WorkerManager.isImageBitmapSupported()?await a.WorkerManager.loadImageBitmap(t):await c(t):await new Promise((e=>{n=new Image,n.crossOrigin="anonymous",n.src=t,n.complete?e(n):n.onload=()=>{e(n)}}));const s=new i.BaseTexture(n,{resolution:i.utils.getResolutionOfUrl(t),...e.data});return s.resource.src=t,l.createTexture(s,r,t)},unload(t){t.destroy(!0)}};i.extensions.add(d),e.loadImageBitmap=c,e.loadTextures=d},4908:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);e.createTexture=function(t,e,r){const n=new i.Texture(t);return n.baseTexture.on("dispose",(()=>{delete e.promiseCache[r]})),n}},8588:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4908);e.createTexture=i.createTexture},2448:()=>{},7139:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6908),s=r(1392),o=r(9248);e.Resolver=class{constructor(){this._bundleIdConnector="-",this._createBundleAssetId=(t,e)=>`${t}${this._bundleIdConnector}${e}`,this._extractAssetIdFromBundle=(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,""),this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}setDefaultSearchParams(t){if("string"==typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach((e=>{if("string"==typeof e.name){const i=this._createBundleAssetId(t,e.name);r.push(i),this.add([e.name,i],e.srcs,e.data)}else{const i=e.name.map((e=>this._createBundleAssetId(t,e)));i.forEach((t=>{r.push(t)})),this.add([...e.name,...i],e.srcs)}})):Object.keys(e).forEach((i=>{r.push(this._createBundleAssetId(t,i)),this.add([i,this._createBundleAssetId(t,i)],e[i])})),this._bundles[t]=r}add(t,e,r){const o=n.convertToList(t);o.forEach((t=>{this._assetMap[t]&&console.warn(`[Resolver] already has key: ${t} overwriting`)})),Array.isArray(e)||(e="string"==typeof e?s.createStringVariations(e):[e]);const a=e.map((t=>{let e=t;if("string"==typeof t){let r=!1;for(let i=0;i<this._parsers.length;i++){const n=this._parsers[i];if(n.test(t)){e=n.parse(t),r=!0;break}}r||(e={src:t})}return e.format||(e.format=e.src.split(".").pop()),e.alias||(e.alias=o),(this._basePath||this._rootPath)&&(e.src=i.utils.path.toAbsolute(e.src,this._basePath,this._rootPath)),e.src=this._appendDefaultSearchParams(e.src),e.data=e.data??r,e}));o.forEach((t=>{this._assetMap[t]=a}))}resolveBundle(t){const e=o.isSingleItem(t);t=n.convertToList(t);const r={};return t.forEach((t=>{const e=this._bundles[t];if(e){const i=this.resolve(e),n={};for(const e in i){const r=i[e];n[this._extractAssetIdFromBundle(t,e)]=r}r[t]=n}})),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if("string"!=typeof t){const t={};for(const r in e)t[r]=e[r].src;return t}return e.src}resolve(t){const e=o.isSingleItem(t);t=n.convertToList(t);const r={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const r=this._getPreferredOrder(e),i=e[0];r?.priority.forEach((t=>{r.params[t].forEach((r=>{const i=e.filter((e=>!!e[t]&&e[t]===r));i.length&&(e=i)}))})),this._resolverHash[t]=e[0]??i}else{let e=t;(this._basePath||this._rootPath)&&(e=i.utils.path.toAbsolute(e,this._basePath,this._rootPath)),e=this._appendDefaultSearchParams(e),this._resolverHash[t]={src:e}}r[t]=this._resolverHash[t]})),e?r[t[0]]:r}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],r=this._preferredOrder.find((t=>t.params.format.includes(e.format)));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;return`${t}${/\?/.test(t)?"&":"?"}${this._defaultSearchParams}`}}},712:(t,e,r)=>{"use strict";r(4432),r(8952)},4432:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(748);e.resolveTextureUrl=i.resolveTextureUrl},748:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);r(2900);var n=r(8808);const s={extension:i.ExtensionType.ResolveParser,test:n.loadTextures.test,parse:t=>({resolution:parseFloat(i.settings.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};i.extensions.add(s),e.resolveTextureUrl=s},8952:()=>{},7211:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkDataUrl=function(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}},7552:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);e.checkExtension=function(t,e){const r=t.split("?")[0],n=i.utils.path.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}},6908:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.convertToList=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map((t=>"string"==typeof t?e(t):t)):t)},8724:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.copySearchParams=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t}},1392:(t,e)=>{"use strict";function r(t,e,i,n,s){const o=e[i];for(let a=0;a<o.length;a++){const l=o[a];i<e.length-1?r(t.replace(n[i],l),e,i+1,n,s):s.push(t.replace(n[i],l))}}Object.defineProperty(e,"__esModule",{value:!0}),e.createStringVariations=function(t){const e=t.match(/\{(.*?)\}/g),i=[];if(e){const n=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");n.push(e)})),r(t,n,0,e,i)}else i.push(t);return i}},5816:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7211),n=r(7552),s=r(6908),o=r(8724),a=r(1392),l=r(9248);e.checkDataUrl=i.checkDataUrl,e.checkExtension=n.checkExtension,e.convertToList=s.convertToList,e.copySearchParams=o.copySearchParams,e.createStringVariations=a.createStringVariations,e.isSingleItem=l.isSingleItem},9248:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.isSingleItem=t=>!Array.isArray(t)},4076:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(r||{});const i={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};e.INTERNAL_FORMATS=r,e.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=i},2384:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4076);r(8072),r(1812),r(7272);var n=r(7800),s=r(7956),o=r(5752),a=r(6049),l=r(9036),h=r(9124),u=r(7184),c=r(9728);e.INTERNAL_FORMATS=i.INTERNAL_FORMATS,e.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,e.detectCompressedTextures=n.detectCompressedTextures,e.loadDDS=s.loadDDS,e.loadKTX=o.loadKTX,e.resolveCompressedTextureUrl=a.resolveCompressedTextureUrl,e.parseDDS=l.parseDDS,e.FORMATS_TO_COMPONENTS=h.FORMATS_TO_COMPONENTS,e.TYPES_TO_BYTES_PER_COMPONENT=h.TYPES_TO_BYTES_PER_COMPONENT,e.TYPES_TO_BYTES_PER_PIXEL=h.TYPES_TO_BYTES_PER_PIXEL,e.parseKTX=h.parseKTX,e.BlobResource=u.BlobResource,e.CompressedTextureResource=c.CompressedTextureResource},7772:()=>{},7800:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);let n,s;function o(){s={s3tc:n.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:n.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:n.getExtension("WEBGL_compressed_texture_etc"),etc1:n.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:n.getExtension("WEBGL_compressed_texture_atc"),astc:n.getExtension("WEBGL_compressed_texture_astc")}}const a={extension:{type:i.ExtensionType.DetectionParser,priority:2},test:async()=>{const t=i.settings.ADAPTER.createCanvas().getContext("webgl");return t?(n=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{s||o();const e=[];for(const t in s){s[t]&&e.push(t)}return[...e,...t]},remove:async t=>(s||o(),t.filter((t=>!(t in s))))};i.extensions.add(a),e.detectCompressedTextures=a},8072:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(7772);var i=r(7800),n=r(7956),s=r(5752),o=r(6049);e.detectCompressedTextures=i.detectCompressedTextures,e.loadDDS=n.loadDDS,e.loadKTX=s.loadKTX,e.resolveCompressedTextureUrl=o.resolveCompressedTextureUrl},7956:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5896),n=r(6428);r(1812);var s=r(9036);const o={extension:{type:n.ExtensionType.LoadParser,priority:i.LoaderParserPriority.High},test:t=>i.checkExtension(t,".dds"),async load(t,e,r){const o=await n.settings.ADAPTER.fetch(t),a=await o.arrayBuffer(),l=s.parseDDS(a).map((s=>{const o=new n.BaseTexture(s,{mipmap:n.MIPMAP_MODES.OFF,alphaMode:n.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:n.utils.getResolutionOfUrl(t),...e.data});return i.createTexture(o,r,t)}));return 1===l.length?l[0]:l},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};n.extensions.add(o),e.loadDDS=o},5752:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5896),n=r(6428);r(1812);var s=r(9124);const o={extension:{type:n.ExtensionType.LoadParser,priority:i.LoaderParserPriority.High},test:t=>i.checkExtension(t,".ktx"),async load(t,e,r){const o=await n.settings.ADAPTER.fetch(t),a=await o.arrayBuffer(),{compressed:l,uncompressed:h,kvData:u}=s.parseKTX(t,a),c=l??h,d={mipmap:n.MIPMAP_MODES.OFF,alphaMode:n.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:n.utils.getResolutionOfUrl(t),...e.data},p=c.map((e=>{c===h&&Object.assign(d,{type:e.type,format:e.format});const s=new n.BaseTexture(e,d);return s.ktxKeyValueData=u,i.createTexture(s,r,t)}));return 1===p.length?p[0]:p},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};n.extensions.add(o),e.loadKTX=o},6049:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={extension:i.ExtensionType.ResolveParser,test:t=>{const e=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some((e=>t.endsWith(e))))return{resolution:parseFloat(i.settings.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e.find((e=>t.endsWith(e))),src:t}}return{resolution:parseFloat(i.settings.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};i.extensions.add(n),e.resolveCompressedTextureUrl=n},1812:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9036),n=r(9124);e.parseDDS=i.parseDDS,e.FORMATS_TO_COMPONENTS=n.FORMATS_TO_COMPONENTS,e.TYPES_TO_BYTES_PER_COMPONENT=n.TYPES_TO_BYTES_PER_COMPONENT,e.TYPES_TO_BYTES_PER_PIXEL=n.TYPES_TO_BYTES_PER_PIXEL,e.parseKTX=n.parseKTX},9036:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4076);r(7272);var n=r(9728);const s=124,o=3,a=4,l=7,h=19,u=2,c=0,d=1,p=2,f=3;const g={827611204:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},m={70:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};e.parseDDS=function(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,s/Uint32Array.BYTES_PER_ELEMENT),v=r[o],y=r[a],_=r[l],x=new Uint32Array(t,h*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),b=x[1];if(4&b){const r=x[u];if(808540228!==r){const e=g[r],i=new Uint8Array(t,128);return[new n.CompressedTextureResource(i,{format:e,width:y,height:v,levels:_})]}const s=128,o=new Uint32Array(e.buffer,s,20/Uint32Array.BYTES_PER_ELEMENT),a=o[c],l=o[d],h=o[p],b=o[f],E=m[a];if(void 0===E)throw new Error(`DDSParser cannot parse texture data with DXGI format ${a}`);if(4===h)throw new Error("DDSParser does not support cubemap textures");if(6===l)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,S=148;if(1===b)T.push(new Uint8Array(t,S));else{const e=i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[E];let r=0,n=y,s=v;for(let t=0;t<_;t++){r+=Math.max(1,n+3&-4)*Math.max(1,s+3&-4)*e,n>>>=1,s>>>=1}let o=S;for(let e=0;e<b;e++)T.push(new Uint8Array(t,o,r)),o+=r}return T.map((t=>new n.CompressedTextureResource(t,{format:E,width:y,height:v,levels:_})))}if(64&b)throw new Error("DDSParser does not support uncompressed texture data.");if(512&b)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&b)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&b)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}},9124:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4076);r(7272);var s=r(9728);const o=[171,75,84,88,32,49,49,187,13,10,26,10],a=12,l=16,h=24,u=28,c=36,d=40,p=44,f=48,g=52,m=56,v=60,y=64,_={[i.TYPES.UNSIGNED_BYTE]:1,[i.TYPES.UNSIGNED_SHORT]:2,[i.TYPES.INT]:4,[i.TYPES.UNSIGNED_INT]:4,[i.TYPES.FLOAT]:4,[i.TYPES.HALF_FLOAT]:8},x={[i.FORMATS.RGBA]:4,[i.FORMATS.RGB]:3,[i.FORMATS.RG]:2,[i.FORMATS.RED]:1,[i.FORMATS.LUMINANCE]:1,[i.FORMATS.LUMINANCE_ALPHA]:2,[i.FORMATS.ALPHA]:1},b={[i.TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[i.TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[i.TYPES.UNSIGNED_SHORT_5_6_5]:2};function E(t){switch(t){case i.FORMATS.RGBA:return i.FORMATS.RGBA_INTEGER;case i.FORMATS.RGB:return i.FORMATS.RGB_INTEGER;case i.FORMATS.RG:return i.FORMATS.RG_INTEGER;case i.FORMATS.RED:return i.FORMATS.RED_INTEGER;default:return t}}e.FORMATS_TO_COMPONENTS=x,e.TYPES_TO_BYTES_PER_COMPONENT=_,e.TYPES_TO_BYTES_PER_PIXEL=b,e.parseKTX=function(t,e,r=!1){const T=new DataView(e);if(!function(t,e){for(let r=0;r<o.length;r++)if(e.getUint8(r)!==o[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}(t,T))return null;const S=67305985===T.getUint32(a,!0),w=T.getUint32(l,S),A=T.getUint32(h,S),M=T.getUint32(u,S),R=T.getUint32(c,S),P=T.getUint32(d,S)||1,C=T.getUint32(p,S)||1,O=T.getUint32(f,S)||1,I=T.getUint32(g,S),D=T.getUint32(m,S),B=T.getUint32(v,S);if(0===P||1!==C)throw new Error("Only 2D textures are supported");if(1!==I)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==O)throw new Error("WebGL does not support array textures");const F=R+3&-4,N=P+3&-4,L=new Array(O);let k,U=R*P;if(0===w&&(U=F*N),k=0!==w?_[w]?_[w]*x[A]:b[w]:n.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[M],void 0===k)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const G=r?function(t,e,r){const i=new Map;let n=0;for(;n<e;){const s=t.getUint32(y+n,r),o=y+n+4,a=3-(s+3)%4;if(0===s||s>e-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==t.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=(new TextDecoder).decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);i.set(h,u),n+=4+s+a}return i}(T,B,S):null;let j=U*k,H=R,z=P,W=F,X=N,Y=y+B;for(let t=0;t<D;t++){const r=T.getUint32(Y,S);let i=Y+4;for(let r=0;r<O;r++){let n=L[r];n||(n=L[r]=new Array(D)),n[t]={levelID:t,levelWidth:D>1||0!==w?H:W,levelHeight:D>1||0!==w?z:X,levelBuffer:new Uint8Array(e,i,j)},i+=j}Y+=r+4,Y=Y%4!=0?Y+4-Y%4:Y,H=H>>1||1,z=z>>1||1,W=H+4-1&-4,X=z+4-1&-4,j=W*X*k}return 0!==w?{uncompressed:L.map((t=>{let e=t[0].levelBuffer,r=!1;return w===i.TYPES.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):w===i.TYPES.UNSIGNED_INT?(r=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):w===i.TYPES.INT&&(r=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new i.BufferResource(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:w,format:r?E(A):A}})),kvData:G}:{compressed:L.map((t=>new s.CompressedTextureResource(null,{format:M,width:R,height:P,levels:D,levelBuffers:t}))),kvData:G}}},7184:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);class n extends i.BufferResource{constructor(t,e={width:1,height:1,autoLoad:!0}){let r,n;"string"==typeof t?(r=t,n=new Uint8Array):(r=null,n=t),super(n,e),this.origin=r,this.buffer=n?new i.ViewableBuffer(n):null,this.origin&&!1!==e.autoLoad&&this.load(),n?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const t=await fetch(this.origin),e=await t.blob(),r=await e.arrayBuffer();return this.data=new Uint32Array(r),this.buffer=new i.ViewableBuffer(r),this.loaded=!0,this.onBlobLoaded(r),this.update(),this}}e.BlobResource=n},9728:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4076),n=r(7184);class s extends n.BlobResource{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=s._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||s._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,r){const i=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let t=0,e=this.levels;t<e;t++){const{levelID:e,levelWidth:r,levelHeight:n,levelBuffer:s}=this._levelBuffers[t];i.compressedTexImage2D(i.TEXTURE_2D,e,this.format,r,n,0,s)}return!0}onBlobLoaded(){this._levelBuffers=s._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,r,n,s,o,a){const l=new Array(r);let h=t.byteOffset,u=o,c=a,d=u+n-1&~(n-1),p=c+s-1&~(s-1),f=d*p*i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[e];for(let o=0;o<r;o++)l[o]={levelID:o,levelWidth:r>1?u:d,levelHeight:r>1?c:p,levelBuffer:new Uint8Array(t.buffer,h,f)},h+=f,u=u>>1||1,c=c>>1||1,d=u+n-1&~(n-1),p=c+s-1&~(s-1),f=d*p*i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[e];return l}}e.CompressedTextureResource=s},7272:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7184),n=r(9728);e.BlobResource=i.BlobResource,e.CompressedTextureResource=n.CompressedTextureResource},1780:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(r||{}),i=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(i||{}),n=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(n||{}),s=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(s||{}),o=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(o||{}),a=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(a||{}),l=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(l||{}),h=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(h||{}),u=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(u||{}),c=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(c||{}),d=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(d||{}),p=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(p||{}),f=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(f||{}),g=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(g||{}),m=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(m||{}),v=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(v||{}),y=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(y||{}),_=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(_||{}),x=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(x||{}),b=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(b||{});e.ALPHA_MODES=f,e.BLEND_MODES=s,e.BUFFER_BITS=n,e.BUFFER_TYPE=b,e.CLEAR_MODES=g,e.COLOR_MASK_BITS=_,e.DRAW_MODES=o,e.ENV=r,e.FORMATS=a,e.GC_MODES=m,e.MASK_TYPES=y,e.MIPMAP_MODES=p,e.MSAA_QUALITY=x,e.PRECISION=v,e.RENDERER_TYPE=i,e.SAMPLER_TYPES=u,e.SCALE_MODES=c,e.TARGETS=l,e.TYPES=h,e.WRAP_MODES=d},9536:()=>{},3083:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427),s=r(2424),o=r(5564),a=r(2492),l=r(5960);const h=class extends l.SystemManager{constructor(t){super(),t=Object.assign({},s.settings.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new a.UniformGroup({projectionMatrix:new n.Matrix},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:h.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(o.deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha);const r={hello:t.hello,_plugin:h.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r),this.options=t}static test(t){return!t?.forceCanvas&&o.isWebGLSupported()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return o.deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return o.deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return o.deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return o.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){o.deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return o.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){o.deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return o.deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let u=h;u.extension={type:i.ExtensionType.Renderer,priority:1},u.__plugins={},u.__systems={},i.extensions.handleByMap(i.ExtensionType.RendererPlugin,u.__plugins),i.extensions.handleByMap(i.ExtensionType.RendererSystem,u.__systems),i.extensions.add(u),e.Renderer=u},3672:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160);const n=[];i.extensions.handleByList(i.ExtensionType.Renderer,n),e.autoDetectRenderer=function(t){for(const e of n)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}},2872:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(5564);class s{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"==typeof t.color?n.string2hex(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=n.hex2string(t),n.hex2rgb(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}s.extension={type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem],name:"background"},i.extensions.add(s),e.BackgroundSystem=s},6968:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.BatchDrawCall=class{constructor(){this.texArray=null,this.blend=0,this.type=i.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}},1672:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6332),s=r(1452);class o extends s.Geometry{constructor(t=!1){super(),this._buffer=new n.Buffer(null,t,!1),this._indexBuffer=new n.Buffer(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,i.TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,i.TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,i.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,i.TYPES.FLOAT).addIndex(this._indexBuffer)}}e.BatchGeometry=o},264:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(2424),o=r(5564),a=r(6243),l=r(168),h=r(8460),u=r(6992),c=r(6968),d=r(1672),p=r(4520),f=r(1352),g=r(2760),m=r(952),v=r(2152),y=r(5992),_=r(3544);const x=class extends v.ObjectRenderer{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=d.BatchGeometry,this.vertexSize=6,this.state=h.State.for2d(),this.size=4*x.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??m.maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??g.canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return o.deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return _.default}static get defaultFragmentTemplate(){return y.default}setShaderGenerator({vertex:t=x.defaultVertexSrc,fragment:e=x.defaultFragmentTemplate}={}){this.shaderGenerator=new p.BatchShaderGenerator(t,e)}contextChange(){const t=this.renderer.gl;s.settings.PREFER_ENV===i.ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x.defaultMaxTextures),this.maxTextures=l.checkMaxIfStatementsInShader(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=x,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new c.BatchDrawCall);for(;e.length<i;)e.push(new f.BatchTextureArray);for(let t=0;t<this.maxTextures;t++)this._tempBoundTextures[t]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=x._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++u.BaseTexture._globalBatch,a=0,l=r[0],h=0;i.copyBoundTextures(n,e);for(let u=0;u<this._bufferSize;++u){const c=t[u];t[u]=null,c._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,n,o,e),this.buildDrawCalls(l,h,u),h=u,l=r[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(i.boundArray(l,n,o,e),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let t=0;t<n.length;t++)n[t]=null;u.BaseTexture._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:i,_attributeBuffer:n,_indexBuffer:s,vertexSize:a}=this,l=x._drawCallPool;let h=this._dcIndex,u=this._aIndex,c=this._iIndex,d=l[h];d.start=this._iIndex,d.texArray=t;for(let p=e;p<r;++p){const r=i[p],f=r._texture.baseTexture,g=o.premultiplyBlendMode[f.alphaMode?1:0][r.blendMode];i[p]=null,e<p&&d.blend!==g&&(d.size=c-d.start,e=p,d=l[++h],d.texArray=t,d.start=c),this.packInterleavedGeometry(r,n,s,u,c),u+=r.vertexData.length/2*a,c+=r.indices.length,d.blend=g}e<r&&(d.size=c-d.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;x.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,i=x._drawCallPool;let n=null;for(let s=0;s<t;s++){const{texArray:t,type:o,size:a,start:l,blend:h}=i[s];n!==t&&(n=t,this.bindAndClearTexArray(t)),this.state.blendMode=h,r.set(this.state),e.drawElements(o,a,e.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),x.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=o.nextPow2(Math.ceil(t/8)),r=o.log2(e),i=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new a.ViewableBuffer(i*this.vertexSize*4)),n}getIndexBuffer(t){const e=o.nextPow2(Math.ceil(t/12)),r=o.log2(e),i=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n}packInterleavedGeometry(t,e,r,i,n){const{uint32View:s,float32View:a}=e,l=i/this.vertexSize,h=t.uvs,u=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?o.premultiplyTint(t._tintRGB,p):t._tintRGB+(255*p<<24);for(let t=0;t<c.length;t+=2)a[i++]=c[t],a[i++]=c[t+1],a[i++]=h[t],a[i++]=h[t+1],s[i++]=f,a[i++]=d;for(let t=0;t<u.length;t++)r[n++]=l+u[t]}};let b=x;b.defaultBatchSize=4096,b.extension={name:"batch",type:n.ExtensionType.RendererPlugin},b._drawCallPool=[],b._textureArrayPool=[],n.extensions.add(b),e.BatchRenderer=b},4520:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3427),n=r(5680),s=r(2320),o=r(2492);e.BatchShaderGenerator=class{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=o.UniformGroup.from({uSamplers:e},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new n.Program(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new i.Matrix,default:this.defaultGroupCache[t]};return new s.Shader(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}},8992:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(2152);class s{constructor(t){this.renderer=t,this.emptyRenderer=new n.ObjectRenderer(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,e,r,i){const{elements:n,ids:s,count:o}=t;let a=0;for(let t=0;t<o;t++){const o=n[t],l=o._batchLocation;if(l>=0&&l<i&&e[l]===o)s[t]=l;else for(;a<i;){const i=e[a];if(!i||i._batchEnabled!==r||i._batchLocation!==a){s[t]=a,o._batchLocation=a,e[a]=o;break}a++}}}destroy(){this.renderer=null}}s.extension={type:i.ExtensionType.RendererSystem,name:"batch"},i.extensions.add(s),e.BatchSystem=s},1352:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BatchTextureArray=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}},2152:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ObjectRenderer=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}},2760:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424);e.canUploadSameBuffer=function(){return!i.isMobile.apple.device}},952:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424);e.maxRecommendedTextures=function(t){let e=!0;const r=i.settings.ADAPTER.getNavigator();if(i.isMobile.tablet||i.isMobile.phone){if(i.isMobile.apple.device){const t=r.userAgent.match(/OS (\d+)_(\d+)?/);if(t){parseInt(t[1],10)<11&&(e=!1)}}if(i.isMobile.android.device){const t=r.userAgent.match(/Android\s([0-9.]*)/);if(t){parseInt(t[1],10)<7&&(e=!1)}}}return e?t:4}},5992:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"},3544:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"},6384:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(2424);let o=0;class a{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=o++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=o++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(s.settings.PREFER_ENV>=i.ENV.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}a.extension={type:n.ExtensionType.RendererSystem,name:"context"},n.extensions.add(a),e.ContextSystem=a},7308:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(5680),s=r(2320),o=r(8460),a=r(2545),l=r(7836);const h=class extends s.Shader{constructor(t,e,r){super(n.Program.from(t||h.defaultVertexSrc,e||h.defaultFragmentSrc),r),this.padding=0,this.resolution=h.defaultResolution,this.multisample=h.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new o.State}apply(t,e,r,i,n){t.applyFilter(this,e,r,i)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return l.default}static get defaultFragmentSrc(){return a.default}};let u=h;u.defaultResolution=1,u.defaultMultisample=i.MSAA_QUALITY.NONE,e.Filter=u},2052:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(3427);e.FilterState=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.MSAA_QUALITY.NONE,this.sourceFrame=new n.Rectangle,this.destinationFrame=new n.Rectangle,this.bindingSourceFrame=new n.Rectangle,this.bindingDestinationFrame=new n.Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}},1992:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(3427),o=r(4201),a=r(2492),l=r(4036),h=r(1744),u=r(2052);const c=[new s.Point,new s.Point,new s.Point,new s.Point],d=new s.Matrix;class p{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new o.RenderTexturePool,this.statePool=[],this.quad=new l.Quad,this.quadUv=new h.QuadUv,this.tempRect=new s.Rectangle,this.activeState={},this.globalUniforms=new a.UniformGroup({outputFrame:new s.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new u.FilterState,s=this.renderer.renderTexture;let o=e[0].resolution,a=e[0].multisample,l=e[0].padding,h=e[0].autoFit,c=e[0].legacy??!0;for(let t=1;t<e.length;t++){const r=e[t];o=Math.min(o,r.resolution),a=Math.min(a,r.multisample),l=this.useMaxPadding?Math.max(l,r.padding):l+r.padding,h=h&&r.autoFit,c=c||(r.legacy??!0)}1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.multisample=a,n.legacy=c,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(l);const p=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(d.copyFrom(r.projection.transform).invert(),p),h?(n.sourceFrame.fit(p),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(p)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o,a),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=n.sourceFrame.width,f.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,f),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){const t=n.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,l.renderTexture,i.CLEAR_MODES.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,n=this.getOptimalFilterTexture(t.width,t.height,e.resolution);n.filterFrame=t.filterFrame;let s=0;for(s=0;s<r.length-1;++s){1===s&&e.multisample>1&&(n=this.getOptimalFilterTexture(t.width,t.height,e.resolution),n.filterFrame=t.filterFrame),r[s].apply(this,t,n,i.CLEAR_MODES.CLEAR,e);const o=t;t=n,n=o}r[s].apply(this,t,l.renderTexture,i.CLEAR_MODES.BLEND,e),s>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(n)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=i.CLEAR_MODES.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,r.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=1&n.stateId||this.forceClear;(e===i.CLEAR_MODES.CLEAR||e===i.CLEAR_MODES.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(i.DRAW_MODES.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(i.DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:n}=e._texture,o=t.set(i.width,0,0,i.height,r.x,r.y),a=e.worldTransform.copyTo(s.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=i.MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if("number"==typeof t){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||i.MSAA_QUALITY.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=c[0],i=c[1],n=c[2],s=c[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);const o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),l=Math.max(r.x,i.x,n.x,s.x),h=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=l-o,e.height=h-a}roundFrame(t,e,r,i,n){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(n){const{a:t,b:e,c:r,d:i}=n;if((Math.abs(e)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4))return}(n=n?d.copyFrom(n):d.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}p.extension={type:n.ExtensionType.RendererSystem,name:"filter"},n.extensions.add(p),e.FilterSystem=p},2700:()=>{},2545:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},7836:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},3612:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3427),n=r(6844),s=r(7308),o=r(1344),a=r(8696);class l extends s.Filter{constructor(t,e,r){let n=null;"string"!=typeof t&&void 0===e&&void 0===r&&(n=t,t=void 0,e=void 0,r=void 0),super(t||a.default,e||o.default,r),this.maskSprite=n,this.maskMatrix=new i.Matrix}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new n.TextureMatrix(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))}}e.SpriteMaskFilter=l},1344:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"},8696:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n"},8008:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"},5956:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},5044:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8008),n=r(5956);const s=i.default,o=n.default;e.defaultFilterVertex=o,e.defaultVertex=s},9544:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(3756),s=r(6992),o=r(1376);e.Framebuffer=class{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.Runner("disposeFramebuffer"),this.multisample=i.MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new s.BaseTexture(null,{scaleMode:i.SCALE_MODES.NEAREST,resolution:1,mipmap:i.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new s.BaseTexture(new o.DepthResource(null,{width:this.width,height:this.height}),{scaleMode:i.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.MIPMAP_MODES.OFF,format:i.FORMATS.DEPTH_COMPONENT,type:i.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}},5811:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(3427),o=r(2424),a=r(9544),l=r(6648);const h=new s.Rectangle;class u{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new a.Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new s.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;o.settings.PREFER_ENV===i.ENV.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:i}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=r),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const r=t.colorTextures[e];this.renderer.texture.unbind(r.parentTextureArray||r)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>r,i=e.height>>r,n=t/e.width;this.setViewport(e.x*n,e.y*n,t,i)}else{const e=t.width>>r,i=t.height>>r;this.setViewport(0,0,e,i)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,i){const n=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),i=Math.round(i),n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,s=i.BUFFER_BITS.COLOR|i.BUFFER_BITS.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,r=new l.GLFramebuffer(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const i=t.colorTextures;let n=i.length;e.drawBuffers||(n=Math.min(n,1));for(let s=0;s<n;s++){const n=i[s],o=n.parentTextureArray||n;this.renderer.texture.bind(o,0),0===s&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let s=n.length;r.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const o=[];for(let a=0;a<s;a++){const s=n[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===a&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,s.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(r.COLOR_ATTACHMENT0+a))}if(o.length>1&&r.drawBuffers(o),t.depthTexture){if(this.writeDepthTexture){const i=t.depthTexture;this.renderer.texture.bind(i,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,i._glTextures[this.CONTEXT_UID].texture,e)}}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=i.MSAA_QUALITY.NONE;if(t<=1||null===e)return r;for(let i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return 1===r&&(r=i.MSAA_QUALITY.NONE),r}blit(t,e,r){const{current:i,renderer:n,gl:s,CONTEXT_UID:o}=this;if(2!==n.context.webGLVersion)return;if(!i)return;const l=i.glFramebuffers[o];if(!l)return;if(!t){if(!l.msaaBuffer)return;const e=i.colorTextures[0];if(!e)return;l.blitFramebuffer||(l.blitFramebuffer=new a.Framebuffer(i.width,i.height),l.blitFramebuffer.addColorTexture(0,e)),(t=l.blitFramebuffer).colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===i.width&&t.height===i.height||(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}e||((e=h).width=i.width,e.height=i.height),r||(r=e);const u=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,u?s.NEAREST:s.LINEAR)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const r=t.width,i=t.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,r,i):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),e.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new s.Rectangle}destroy(){this.renderer=null}}u.extension={type:n.ExtensionType.RendererSystem,name:"framebuffer"},n.extensions.add(u),e.FramebufferSystem=u},6648:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.GLFramebuffer=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}},3200:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160);class s{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=i.MSAA_QUALITY.HIGH?this.multisample=i.MSAA_QUALITY.HIGH:e>=i.MSAA_QUALITY.MEDIUM?this.multisample=i.MSAA_QUALITY.MEDIUM:e>=i.MSAA_QUALITY.LOW?this.multisample=i.MSAA_QUALITY.LOW:this.multisample=i.MSAA_QUALITY.NONE}destroy(){}}s.extension={type:n.ExtensionType.RendererSystem,name:"_multisample"},n.extensions.add(s),e.MultisampleSystem=s},4223:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);class n{constructor(t,e=0,r=!1,n=i.TYPES.FLOAT,s,o,a,l=1){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,r,i,s){return new n(t,e,r,i,s)}}e.Attribute=n},6332:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(3756);let s=0;class o{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=s++,this.disposeRunner=new n.Runner("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?i.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:i.BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===i.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new o(t)}}e.Buffer=o},1320:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(6179);class s{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,r){const{gl:i,CONTEXT_UID:n}=this;r=r||0;const s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,e||0,s.buffer,256*r,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,e.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new n.GLBuffer(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}s.extension={type:i.ExtensionType.RendererSystem,name:"buffer"},i.extensions.add(s),e.BufferSystem=s},6179:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GLBuffer=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}},1452:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(3756),s=r(5564),o=r(4223),a=r(6332),l=r(4868);const h={5126:4,5123:2,5121:1};let u=0;const c={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class d{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=u++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.Runner("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,i=!1,n,s,l,h=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof a.Buffer||(e instanceof Array&&(e=new Float32Array(e)),e=new a.Buffer(e));const u=t.split("|");if(u.length>1){for(let t=0;t<u.length;t++)this.addAttribute(u[t],e,r,i,n);return this}let c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new o.Attribute(c,r,i,n,s,l,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof a.Buffer||(t instanceof Array&&(t=new Uint16Array(t)),t=new a.Buffer(t)),t.type=i.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],r=new a.Buffer;let i;for(i in this.attributes){const r=this.attributes[i],n=this.buffers[r.buffer];t.push(n.data),e.push(r.size*h[r.type]/4),r.buffer=0}for(r.data=l.interleaveTypedArrays(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new d;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new a.Buffer(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new o.Attribute(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=i.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new d,r=[],n=[],o=[];let l;for(let e=0;e<t.length;e++){l=t[e];for(let t=0;t<l.buffers.length;t++)n[t]=n[t]||0,n[t]+=l.buffers[t].data.length,o[t]=0}for(let t=0;t<l.buffers.length;t++)r[t]=new(c[s.getBufferType(l.buffers[t].data)])(n[t]),e.buffers[t]=new a.Buffer(r[t]);for(let e=0;e<t.length;e++){l=t[e];for(let t=0;t<l.buffers.length;t++)r[t].set(l.buffers[t].data,o[t]),o[t]+=l.buffers[t].data.length}if(e.attributes=l.attributes,l.indexBuffer){e.indexBuffer=e.buffers[l.buffers.indexOf(l.indexBuffer)],e.indexBuffer.type=i.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let r=0,n=0,s=0,o=0;for(let t=0;t<l.buffers.length;t++)if(l.buffers[t]!==l.indexBuffer){o=t;break}for(const t in l.attributes){const e=l.attributes[t];(0|e.buffer)===o&&(n+=e.size*h[e.type]/4)}for(let i=0;i<t.length;i++){const a=t[i].indexBuffer.data;for(let t=0;t<a.length;t++)e.indexBuffer.data[t+s]+=r;r+=t[i].buffers[o].data.length/n,s+=a.length}}return e}}e.Geometry=d},4376:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(2424);const o={5126:4,5123:2,5121:1};class a{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;s.settings.PREFER_ENV===i.ENV.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,i,n,s)=>e.drawElementsInstancedANGLE(t,r,i,n,s),t.drawArraysInstanced=(t,r,i,n)=>e.drawArraysInstancedANGLE(t,r,i,n)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);const s=i[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const i=t.buffers[r];e.update(i)}}checkCompatibility(t,e){const r=t.attributes,i=e.attributeData;for(const t in i)if(!r[t])throw new Error(`shader and geometry incompatible, geometry missing the "${t}" attribute`)}getSignature(t,e){const r=t.attributes,i=e.attributeData,n=["g",t.id];for(const t in r)i[t]&&n.push(t,i[t].location);return n.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,l=e.program;l.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,l);const h=this.getSignature(t,l),u=t.glVertexArrayObjects[this.CONTEXT_UID];let c=u[h];if(c)return u[l.id]=c,c;const d=t.buffers,p=t.attributes,f={},g={};for(const t in d)f[t]=0,g[t]=0;for(const t in p)!p[t].size&&l.attributeData[t]?p[t].size=l.attributeData[t].size:p[t].size||console.warn(`PIXI Geometry attribute '${t}' size cannot be determined (likely the bound shader does not have the attribute)`),f[p[t].buffer]+=p[t].size*o[p[t].type];for(const t in p){const e=p[t],r=e.size;void 0===e.stride&&(f[e.buffer]===r*o[e.type]?e.stride=0:e.stride=f[e.buffer]),void 0===e.start&&(e.start=g[e.buffer],g[e.buffer]+=r*o[e.type])}c=n.createVertexArray(),n.bindVertexArray(c);for(let t=0;t<d.length;t++){const e=d[t];a.bind(e),r&&e._glBuffers[s].refCount++}return this.activateVao(t,l),u[l.id]=c,u[h]=c,n.bindVertexArray(null),a.unbind(i.BUFFER_TYPE.ARRAY_BUFFER),c}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers,s=this.renderer?.buffer;if(t.disposeRunner.remove(this),r){if(s)for(let t=0;t<n.length;t++){const r=n[t]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(n[t],e))}if(!e)for(const t in r)if("g"===t[0]){const e=r[t];this._activeVao===e&&this.unbind(),i.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,i=this.CONTEXT_UID,n=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let a=null;for(const t in o){const l=o[t],h=s[l.buffer],u=h._glBuffers[i];if(e.attributeData[t]){a!==u&&(n.bind(h),a=u);const i=e.attributeData[t].location;if(r.enableVertexAttribArray(i),r.vertexAttribPointer(i,l.size,l.type||r.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(i,l.divisor)}}}}draw(t,e,r,i){const{gl:n}=this,s=this._activeGeometry;if(s.indexBuffer){const o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(r||0)*o,i||1):n.drawElements(t,e||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(t,r,e||s.getSize(),i||1):n.drawArrays(t,r,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}a.extension={type:n.ExtensionType.RendererSystem,name:"geometry"},n.extensions.add(a),e.GeometrySystem=a},6243:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ViewableBuffer=class{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}},4868:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5564);const n={Float32Array,Uint32Array,Int32Array,Uint8Array};e.interleaveTypedArrays=function(t,e){let r=0,s=0;const o={};for(let i=0;i<t.length;i++)s+=e[i],r+=t[i].length;const a=new ArrayBuffer(4*r);let l=null,h=0;for(let r=0;r<t.length;r++){const u=e[r],c=t[r],d=i.getBufferType(c);o[d]||(o[d]=new n[d](a)),l=o[d];for(let t=0;t<c.length;t++){l[(t/u|0)*s+h+t%u]=c[t]}h+=u}return new Float32Array(a)}},6428:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(7920);var i=r(1780),n=r(6160),s=r(3427),o=r(3756),a=r(2424),l=r(8580),h=r(5564),u=r(3672),c=r(2872),d=r(6968),p=r(1672),f=r(264),g=r(4520),m=r(8992),v=r(1352),y=r(2152),_=r(6384),x=r(7308),b=r(2052),E=r(1992);r(2700);var T=r(3612),S=r(5044),w=r(9544),A=r(5811),M=r(6648),R=r(3200),P=r(4223),C=r(6332),O=r(1320),I=r(1452),D=r(4376),B=r(6243);r(9536);var F=r(2327),N=r(4032),L=r(200),k=r(9864),U=r(1684),G=r(6548),j=r(8300),H=r(3083),z=r(8384),W=r(7528),X=r(4900),Y=r(4201),V=r(12),$=r(6760),q=r(5680),K=r(2320),Z=r(1928),Q=r(2492),J=r(168),tt=r(6828),et=r(4072),rt=r(7276),it=r(1464),nt=r(3792),st=r(2660),ot=r(8460),at=r(392);r(3848),r(5804);var lt=r(6992),ht=r(1640);r(9552);var ut=r(5704),ct=r(4228),dt=r(6844),pt=r(8936),ft=r(5104),gt=r(2764),mt=r(9880),vt=r(4036),yt=r(1744),_t=r(8560),xt=r(5960),bt=r(856),Et=r(8124),Tt=r(7728),St=r(8200),wt=r(4096),At=r(5880),Mt=r(4976),Rt=r(9232),Pt=r(4348),Ct=r(9048),Ot=r(3252),It=r(4248);function Dt(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,e}var Bt=Dt(h);e.utils=Bt,e.autoDetectRenderer=u.autoDetectRenderer,e.BackgroundSystem=c.BackgroundSystem,e.BatchDrawCall=d.BatchDrawCall,e.BatchGeometry=p.BatchGeometry,e.BatchRenderer=f.BatchRenderer,e.BatchShaderGenerator=g.BatchShaderGenerator,e.BatchSystem=m.BatchSystem,e.BatchTextureArray=v.BatchTextureArray,e.ObjectRenderer=y.ObjectRenderer,e.ContextSystem=_.ContextSystem,e.Filter=x.Filter,e.FilterState=b.FilterState,e.FilterSystem=E.FilterSystem,e.SpriteMaskFilter=T.SpriteMaskFilter,e.defaultFilterVertex=S.defaultFilterVertex,e.defaultVertex=S.defaultVertex,e.Framebuffer=w.Framebuffer,e.FramebufferSystem=A.FramebufferSystem,e.GLFramebuffer=M.GLFramebuffer,e.MultisampleSystem=R.MultisampleSystem,e.Attribute=P.Attribute,e.Buffer=C.Buffer,e.BufferSystem=O.BufferSystem,e.Geometry=I.Geometry,e.GeometrySystem=D.GeometrySystem,e.ViewableBuffer=B.ViewableBuffer,e.MaskData=F.MaskData,e.MaskSystem=N.MaskSystem,e.ScissorSystem=L.ScissorSystem,e.StencilSystem=k.StencilSystem,e.PluginSystem=U.PluginSystem,e.ProjectionSystem=G.ProjectionSystem,e.ObjectRendererSystem=j.ObjectRendererSystem,e.Renderer=H.Renderer,e.BaseRenderTexture=z.BaseRenderTexture,e.GenerateTextureSystem=W.GenerateTextureSystem,e.RenderTexture=X.RenderTexture,e.RenderTexturePool=Y.RenderTexturePool,e.RenderTextureSystem=V.RenderTextureSystem,e.GLProgram=$.GLProgram,e.IGLUniformData=$.IGLUniformData,e.Program=q.Program,e.Shader=K.Shader,e.ShaderSystem=Z.ShaderSystem,e.UniformGroup=Q.UniformGroup,e.checkMaxIfStatementsInShader=J.checkMaxIfStatementsInShader,e.generateProgram=tt.generateProgram,e.createUBOElements=et.createUBOElements,e.generateUniformBufferSync=et.generateUniformBufferSync,e.getUBOData=et.getUBOData,e.getTestContext=rt.getTestContext,e.uniformParsers=it.uniformParsers,e.unsafeEvalSupported=nt.unsafeEvalSupported,e.StartupSystem=st.StartupSystem,e.State=ot.State,e.StateSystem=at.StateSystem,e.BaseTexture=lt.BaseTexture,e.GLTexture=ht.GLTexture,e.Texture=ut.Texture,e.TextureGCSystem=ct.TextureGCSystem,e.TextureMatrix=dt.TextureMatrix,e.TextureSystem=pt.TextureSystem,e.TextureUvs=ft.TextureUvs,e.TransformFeedback=gt.TransformFeedback,e.TransformFeedbackSystem=mt.TransformFeedbackSystem,e.Quad=vt.Quad,e.QuadUv=yt.QuadUv,e.ViewSystem=_t.ViewSystem,e.SystemManager=xt.SystemManager,e.BaseImageResource=bt.BaseImageResource,e.Resource=Et.Resource,e.AbstractMultiResource=Tt.AbstractMultiResource,e.ArrayResource=St.ArrayResource,e.INSTALLED=wt.INSTALLED,e.autoDetectResource=wt.autoDetectResource,e.BufferResource=At.BufferResource,e.CanvasResource=Mt.CanvasResource,e.CubeResource=Rt.CubeResource,e.ImageBitmapResource=Pt.ImageBitmapResource,e.ImageResource=Ct.ImageResource,e.SVGResource=Ot.SVGResource,e.VideoResource=It.VideoResource,e.VERSION="7.1.1",Object.keys(i).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})})),Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.keys(s).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})),Object.keys(o).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})),Object.keys(a).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})),Object.keys(l).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}))},7979:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AbstractMaskSystem=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==r&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}},2327:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(7308);e.MaskData=class{constructor(t=null){this.type=i.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=n.Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=i.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}},4032:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(3612),o=r(2327);class a{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const t=this.maskDataPool.pop()||new o.MaskData;t.pooled=!0,t.maskObject=e,r=t}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==i.MASK_TYPES.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case i.MASK_TYPES.SCISSOR:this.renderer.scissor.push(r);break;case i.MASK_TYPES.STENCIL:this.renderer.stencil.push(r);break;case i.MASK_TYPES.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case i.MASK_TYPES.COLOR:this.pushColorMask(r)}r.type===i.MASK_TYPES.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.MASK_TYPES.SCISSOR:this.renderer.scissor.pop(e);break;case i.MASK_TYPES.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.MASK_TYPES.SPRITE:this.popSpriteMask(e);break;case i.MASK_TYPES.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===i.MASK_TYPES.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=i.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.MASK_TYPES.SCISSOR:t.type=i.MASK_TYPES.STENCIL:t.type=i.MASK_TYPES.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new s.SpriteMaskFilter]));const n=this.renderer,o=n.renderTexture;let a,l;if(o.current){const e=o.current;a=t.resolution||e.resolution,l=t.multisample??e.multisample}else a=t.resolution||n.resolution,l=t.multisample??n.multisample;i[0].resolution=a,i[0].multisample=l,i[0].maskSprite=e;const h=r.filterArea;r.filterArea=e.getBounds(!0),n.filter.push(r,i),r.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}a.extension={type:n.ExtensionType.RendererSystem,name:"mask"},n.extensions.add(a),e.MaskSystem=a},200:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427),s=r(2424),o=r(7979);const a=new n.Matrix,l=[],h=class extends o.AbstractMaskSystem{constructor(t){super(t),this.glConst=s.settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,l.pop()??new n.Rectangle);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:i,d:n}=t;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(h.isMatrixRotated(e.worldTransform))return!1;if(h.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,i,n){h.isMatrixRotated(n)||((n=n?a.copyFrom(n):a.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(n,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&l.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let u=h;u.extension={type:i.ExtensionType.RendererSystem,name:"scissor"},i.extensions.add(u),e.ScissorSystem=u},9864:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(2424),s=r(7979);class o extends s.AbstractMaskSystem{constructor(t){super(t),this.glConst=n.settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;0!==n&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(t._colorMask=n,r.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;0!==i&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(r._colorMask=i,e.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}o.extension={type:i.ExtensionType.RendererSystem,name:"stencil"},i.extensions.add(o),e.StencilSystem=o},1684:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(5564);class s{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(n.deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract)},prepare:{enumerable:!1,get:()=>(n.deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare)},interaction:{enumerable:!1,get:()=>(n.deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events)}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}s.extension={type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem],name:"_plugin"},i.extensions.add(s),e.PluginSystem=s},6548:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427);class s{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new n.Matrix,this.transform=null}update(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,r,i){const n=this.projectionMatrix,s=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=s*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-s-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}s.extension={type:i.ExtensionType.RendererSystem,name:"projection"},i.extensions.add(s),e.ProjectionSystem=s},8384:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(9544),s=r(6992);class o extends s.BaseTexture{constructor(t={}){if("number"==typeof t){t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=i.MSAA_QUALITY.NONE),super(null,t),this.mipmap=i.MIPMAP_MODES.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new n.Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}e.BaseRenderTexture=o},7528:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427),s=r(4900);const o=new n.Transform;class a{constructor(t){this.renderer=t,this._tempMatrix=new n.Matrix}generateTexture(t,e){const{region:r,...i}=e||{},n=r||t.getLocalBounds(null,!0);0===n.width&&(n.width=1),0===n.height&&(n.height=1);const a=s.RenderTexture.create({width:n.width,height:n.height,...i});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=t.transform;return t.transform=o,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}a.extension={type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem],name:"textureGenerator"},i.extensions.add(a),e.GenerateTextureSystem=a},4900:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5704),n=r(8384);class s extends i.Texture{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const i=this.baseTexture.resolution,n=Math.round(t*i)/i,s=Math.round(e*i)/i;this.valid=n>0&&s>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(n,s),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new s(new n.BaseRenderTexture(t))}}e.RenderTexture=s},4201:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(5564),s=r(8384),o=r(4900);class a{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=i.MSAA_QUALITY.NONE){const n=new s.BaseRenderTexture(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new o.RenderTexture(n)}getOptimalTexture(t,e,r=1,s=i.MSAA_QUALITY.NONE){let o;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(t=n.nextPow2(t)))<<16|65535&(e=n.nextPow2(e)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,s)),a.filterPoolKey=o,a.setResolution(r),a}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||i.MSAA_QUALITY.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}a.SCREEN_KEY=-1,e.RenderTexturePool=a},12:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427);const s=new n.Rectangle,o=new n.Rectangle;class a{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new n.Rectangle,this.destinationFrame=new n.Rectangle,this.viewportFrame=new n.Rectangle}bind(t=null,e,r){const i=this.renderer;let n,a,l;this.current=t,t?(n=t.baseTexture,l=n.resolution,e||(s.width=t.frame.width,s.height=t.frame.height,e=s),r||(o.x=t.frame.x,o.y=t.frame.y,o.width=e.width,o.height=e.height,r=o),a=n.framebuffer):(l=i.resolution,e||(s.width=i._view.screen.width,s.height=i._view.screen.height,e=s),r||((r=s).width=e.width,r.height=e.height));const h=this.viewportFrame;h.x=r.x*l,h.y=r.y*l,h.width=r.width*l,h.height=r.height*l,t||(h.y=i.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(r,e,l,!a),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer._view.screen,n=r.width!==i.width||r.height!==i.height;if(n){let{x:t,y:e,width:r,height:i}=this.viewportFrame;t=Math.round(t),e=Math.round(e),r=Math.round(r),i=Math.round(i),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,r,i)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}a.extension={type:i.ExtensionType.RendererSystem,name:"renderTexture"},i.extensions.add(a),e.RenderTextureSystem=a},8300:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160);class n{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let i,n,s,o;if(e&&(i=e.renderTexture,n=e.clear,s=e.transform,o=e.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(i||(this.lastObjectRendered=t),!o){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(n??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),i&&(e.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}n.extension={type:i.ExtensionType.RendererSystem,name:"objectRenderer"},i.extensions.add(n),e.ObjectRendererSystem=n},7920:(t,e,r)=>{"use strict";var i=r(1780),n=r(2424),s=r(5564),o=r(264),a=r(7308),l=r(5680);r(5804);var h=r(6992),u=r(4228);n.settings.PREFER_ENV=i.ENV.WEBGL2,n.settings.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(n.settings,{WRAP_MODE:{get:()=>h.BaseTexture.defaultOptions.wrapMode,set(t){s.deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),h.BaseTexture.defaultOptions.wrapMode=t}},SCALE_MODE:{get:()=>h.BaseTexture.defaultOptions.scaleMode,set(t){s.deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),h.BaseTexture.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get:()=>h.BaseTexture.defaultOptions.mipmap,set(t){s.deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),h.BaseTexture.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get:()=>h.BaseTexture.defaultOptions.anisotropicLevel,set(t){s.deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),h.BaseTexture.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get:()=>(s.deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),a.Filter.defaultResolution),set(t){a.Filter.defaultResolution=t}},FILTER_MULTISAMPLE:{get:()=>(s.deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),a.Filter.defaultMultisample),set(t){a.Filter.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get:()=>o.BatchRenderer.defaultMaxTextures,set(t){s.deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),o.BatchRenderer.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get:()=>o.BatchRenderer.defaultBatchSize,set(t){s.deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),o.BatchRenderer.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get:()=>o.BatchRenderer.canUploadSameBuffer,set(t){s.deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),o.BatchRenderer.canUploadSameBuffer=t}},GC_MODE:{get:()=>u.TextureGCSystem.defaultMode,set(t){s.deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),u.TextureGCSystem.defaultMode=t}},GC_MAX_IDLE:{get:()=>u.TextureGCSystem.defaultMaxIdle,set(t){s.deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),u.TextureGCSystem.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get:()=>u.TextureGCSystem.defaultCheckCountMax,set(t){s.deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),u.TextureGCSystem.defaultCheckCountMax=t}},PRECISION_VERTEX:{get:()=>l.Program.defaultVertexPrecision,set(t){s.deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),l.Program.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get:()=>l.Program.defaultFragmentPrecision,set(t){s.deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),l.Program.defaultFragmentPrecision=t}}})},6760:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GLProgram=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}},e.IGLUniformData=class{}},5680:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(5564),s=r(7013),o=r(88);r(4592);var a=r(2624),l=r(4728);let h=0;const u={},c=class{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=h++,this.vertexSrc=t||c.defaultVertexSrc,this.fragmentSrc=e||c.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),u[r]?(u[r]++,r+=`-${u[r]}`):u[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=a.setPrecision(this.vertexSrc,c.defaultVertexPrecision,i.PRECISION.HIGH),this.fragmentSrc=a.setPrecision(this.fragmentSrc,c.defaultFragmentPrecision,l.getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return o.default}static get defaultFragmentSrc(){return s.default}static from(t,e,r){const i=t+e;let s=n.ProgramCache[i];return s||(n.ProgramCache[i]=s=new c(t,e,r)),s}};let d=c;d.defaultVertexPrecision=i.PRECISION.HIGH,d.defaultFragmentPrecision=n.isMobile.apple.device?i.PRECISION.HIGH:i.PRECISION.MEDIUM,e.Program=d},2320:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3756),n=r(5680),s=r(2492);class o{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof s.UniformGroup?this.uniformGroup=e:this.uniformGroup=new s.UniformGroup(e):this.uniformGroup=new s.UniformGroup({}),this.disposeRunner=new i.Runner("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const i=n.Program.from(t,e);return new o(i,r)}}e.Shader=o},1928:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160);r(4592);var n=r(6828),s=r(4072),o=r(3792),a=r(6244);let l=0;const h={textureCount:0,uboCount:0};class u{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=l++}systemCheck(){if(!o.unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(h.textureCount=0,h.uboCount=0,this.syncUniformGroup(t.uniformGroup,h)),i}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=a.generateUniformsSync(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;const i=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),i(r.uniformData,t.uniforms,this.renderer,h,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=s.generateUniformBufferSync(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(a.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const i=t.uniforms,n=[`${r}-`];for(const t in i)n.push(t),e[t]&&n.push(e[t].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,i=n.generateProgram(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}u.extension={type:i.ExtensionType.RendererSystem,name:"shader"},i.extensions.add(u),e.ShaderSystem=u},2492:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6332);let s=0;class o{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=s++,this.static=!!e,this.ubo=!!r,t instanceof n.Buffer?(this.buffer=t,this.buffer.type=i.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new n.Buffer(new Float32Array(1)),this.buffer.type=i.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new o(e,r)}static from(t,e,r){return new o(t,e,r)}static uboFrom(t,e){return new o(t,e??!0,!0)}}e.UniformGroup=o},7013:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},88:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},168:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function i(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}e.checkMaxIfStatementsInShader=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const s=r.replace(/%forloop%/gi,i(t));if(e.shaderSource(n,s),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}},4176:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compileShader=function(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}},3872:(t,e)=>{"use strict";function r(t){const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=!1;return e}Object.defineProperty(e,"__esModule",{value:!0}),e.defaultValue=function(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}},6828:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6760),n=r(4176),s=r(3872),o=r(6e3),a=r(3988),l=r(9965);e.generateProgram=function(t,e){const r=n.compileShader(t,t.VERTEX_SHADER,e.vertexSrc),h=n.compileShader(t,t.FRAGMENT_SHADER,e.fragmentSrc),u=t.createProgram();t.attachShader(u,r),t.attachShader(u,h);const c=e.extra?.transformFeedbackVaryings;if(c&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(u,c.names,"separate"===c.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)||l.logProgramError(t,u,r,h),e.attributeData=o.getAttributeData(u,t),e.uniformData=a.getUniformData(u,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const r=Object.keys(e.attributeData);r.sort(((t,e)=>t>e?1:-1));for(let i=0;i<r.length;i++)e.attributeData[r[i]].location=i,t.bindAttribLocation(u,i,r[i]);t.linkProgram(u)}t.deleteShader(r),t.deleteShader(h);const d={};for(const r in e.uniformData){const i=e.uniformData[r];d[r]={location:t.getUniformLocation(u,r),value:s.defaultValue(i.type,i.size)}}return new i.GLProgram(u,d)}},4072:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(4592);var i=r(1464),n=r(6296);function s(t,e,r,i,n){r.buffer.update(n)}const o={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},a={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function l(t){const e=t.map((t=>({data:t,offset:0,dataLen:0,dirty:0})));let r=0,i=0,n=0;for(let t=0;t<e.length;t++){const s=e[t];if(r=a[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,i%r!=0&&i<16){const t=i%r%16;i+=t,n+=t}i+r>16?(n=16*Math.ceil(n/16),s.offset=n,n+=r,i=r):(s.offset=n,i+=r,n+=r)}return n=16*Math.ceil(n/16),{uboElements:e,size:n}}function h(t,e){const r=[];for(const i in t)e[i]&&r.push(e[i]);return r.sort(((t,e)=>t.index-e.index)),r}e.createUBOElements=l,e.generateUniformBufferSync=function(t,e){if(!t.autoManage)return{size:0,syncFunc:s};const r=h(t.uniforms,e),{uboElements:u,size:c}=l(r),d=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let e=0;e<u.length;e++){const r=u[e],s=t.uniforms[r.data.name],l=r.data.name;let h=!1;for(let t=0;t<i.uniformParsers.length;t++){const e=i.uniformParsers[t];if(e.codeUbo&&e.test(r.data,s)){d.push(`offset = ${r.offset/4};`,i.uniformParsers[t].codeUbo(r.data.name,s)),h=!0;break}}if(!h)if(r.data.size>1){const t=n.mapSize(r.data.type),e=Math.max(a[r.data.type]/16,1),i=t/e,s=(4-i%4)%4;d.push(`\n                cv = ud.${l}.value;\n                v = uv.${l};\n                offset = ${r.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${r.data.size*e}; i++)\n                {\n                    for(var j = 0; j < ${i}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${s};\n                }\n\n                `)}else{const t=o[r.data.type];d.push(`\n                cv = ud.${l}.value;\n                v = uv.${l};\n                offset = ${r.offset/4};\n                ${t};\n                `)}}return d.push("\n       renderer.buffer.update(buffer);\n    "),{size:c,syncFunc:new Function("ud","uv","renderer","syncData","buffer",d.join("\n"))}},e.getUBOData=h},6244:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1464);const n={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},s={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};e.generateUniformsSync=function(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const o in t.uniforms){const a=e[o];if(!a){t.uniforms[o]?.group&&(t.uniforms[o].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${o}, '${o}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${o}, syncData);\n                    `));continue}const l=t.uniforms[o];let h=!1;for(let t=0;t<i.uniformParsers.length;t++)if(i.uniformParsers[t].test(a,l)){r.push(i.uniformParsers[t].code(o,l)),h=!0;break}if(!h){const t=(1!==a.size||a.isArray?s:n)[a.type].replace("location",`ud["${o}"].location`);r.push(`\n            cu = ud["${o}"];\n            cv = cu.value;\n            v = uv["${o}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}},6e3:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6296),n=r(8092);e.getAttributeData=function(t,e){const r={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const s=e.getActiveAttrib(t,o);if(s.name.startsWith("gl_"))continue;const a=n.mapType(e,s.type),l={type:a,name:s.name,size:i.mapSize(a),location:e.getAttribLocation(t,s.name)};r[s.name]=l}return r}},4728:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(7276);let s;e.getMaxFragmentPrecision=function(){if(!s){s=i.PRECISION.MEDIUM;const t=n.getTestContext();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);s=e.precision?i.PRECISION.HIGH:i.PRECISION.MEDIUM}}return s}},7276:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(2424);const s={};let o=s;e.getTestContext=function(){if(o===s||o?.isContextLost()){const t=n.settings.ADAPTER.createCanvas();let e;n.settings.PREFER_ENV>=i.ENV.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),o=e}return o}},3988:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3872),n=r(8092);e.getUniformData=function(t,e){const r={},s=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<s;o++){const s=e.getActiveUniform(t,o),a=s.name.replace(/\[.*?\]$/,""),l=!!s.name.match(/\[.*?\]$/),h=n.mapType(e,s.type);r[a]={name:a,index:o,type:h,size:s.size,isArray:l,value:i.defaultValue(h,s.size)}}return r}},4592:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(168),n=r(4176),s=r(3872),o=r(6244),a=r(4728),l=r(7276),h=r(9965),u=r(6296),c=r(8092),d=r(2624),p=r(1464),f=r(3792);e.checkMaxIfStatementsInShader=i.checkMaxIfStatementsInShader,e.compileShader=n.compileShader,e.defaultValue=s.defaultValue,e.generateUniformsSync=o.generateUniformsSync,e.getMaxFragmentPrecision=a.getMaxFragmentPrecision,e.getTestContext=l.getTestContext,e.logProgramError=h.logProgramError,e.mapSize=u.mapSize,e.mapType=c.mapType,e.setPrecision=d.setPrecision,e.uniformParsers=p.uniformParsers,e.unsafeEvalSupported=f.unsafeEvalSupported},9965:(t,e)=>{"use strict";function r(t,e){const r=t.getShaderSource(e).split("\n").map(((t,e)=>`${e}: ${t}`)),i=t.getShaderInfoLog(e),n=i.split("\n"),s={},o=n.map((t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((t=>!(!t||s[t])&&(s[t]=!0,!0))),a=[""];o.forEach((t=>{r[t-1]=`%c${r[t-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}Object.defineProperty(e,"__esModule",{value:!0}),e.logProgramError=function(t,e,i,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||r(t,i),t.getShaderParameter(n,t.COMPILE_STATUS)||r(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}},6296:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.mapSize=function(t){return r[t]}},8092:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=null;const i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};e.mapType=function(t,e){if(!r){const e=Object.keys(i);r={};for(let n=0;n<e.length;++n){const s=e[n];r[t[s]]=i[s]}}return r[e]}},2624:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.setPrecision=function(t,e,r){if("precision"!==t.substring(0,9)){let n=e;return e===i.PRECISION.HIGH&&r!==i.PRECISION.HIGH&&(n=i.PRECISION.MEDIUM),`precision ${n} float;\n${t}`}return r!==i.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}},1464:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.uniformParsers=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}]},3792:(t,e)=>{"use strict";let r;Object.defineProperty(e,"__esModule",{value:!0}),e.unsafeEvalSupported=function(){if("boolean"==typeof r)return r;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");r=!0===t({a:"b"},"a","b")}catch(t){r=!1}return r}},2660:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160);class n{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.1 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}n.extension={type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem],name:"startup"},i.extensions.add(n),e.StartupSystem=n},8460:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);class n{constructor(){this.data=0,this.blendMode=i.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==i.BLEND_MODES.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new n;return t.depthTest=!1,t.blend=!0,t}}e.State=n},392:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(8460),o=r(1336);const a=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new s.State,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=o.mapWebGLBlendModesToPixi(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(a.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(a.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let l=a;l.extension={type:n.ExtensionType.RendererSystem,name:"state"},n.extensions.add(l),e.StateSystem=l},1336:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.mapWebGLBlendModesToPixi=function(t,e=[]){return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NONE]=[0,0],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}},3848:()=>{},5960:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3756),n=r(5564);class s extends n.EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter((e=>t.systems[e])),r=[...e,...Object.keys(t.systems).filter((t=>!e.includes(t)))];for(const e of r)this.addSystem(t.systems[e],e)}addRunners(...t){t.forEach((t=>{this.runners[t]=new i.Runner(t)}))}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const t in this.runners)this.runners[t].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach((i=>{const n=r.find((t=>this._systemsHash[t]===i));i[t.name](e[n])}))}destroy(){Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash={}}}e.SystemManager=s},5804:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2872),n=r(8992),s=r(6384),o=r(1992),a=r(5811),l=r(4376),h=r(4032),u=r(200),c=r(9864),d=r(1684),p=r(6548),f=r(7528),g=r(12),m=r(1928),v=r(2660),y=r(392),_=r(5960),x=r(4228),b=r(8936),E=r(9880),T=r(8560);e.BackgroundSystem=i.BackgroundSystem,e.BatchSystem=n.BatchSystem,e.ContextSystem=s.ContextSystem,e.FilterSystem=o.FilterSystem,e.FramebufferSystem=a.FramebufferSystem,e.GeometrySystem=l.GeometrySystem,e.MaskSystem=h.MaskSystem,e.ScissorSystem=u.ScissorSystem,e.StencilSystem=c.StencilSystem,e.PluginSystem=d.PluginSystem,e.ProjectionSystem=p.ProjectionSystem,e.GenerateTextureSystem=f.GenerateTextureSystem,e.RenderTextureSystem=g.RenderTextureSystem,e.ShaderSystem=m.ShaderSystem,e.StartupSystem=v.StartupSystem,e.StateSystem=y.StateSystem,e.SystemManager=_.SystemManager,e.TextureGCSystem=x.TextureGCSystem,e.TextureSystem=b.TextureSystem,e.TransformFeedbackSystem=E.TransformFeedbackSystem,e.ViewSystem=T.ViewSystem},6992:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(2424),s=r(5564),o=r(4096),a=r(5880),l=r(8124);const h={scaleMode:i.SCALE_MODES.NEAREST,format:i.FORMATS.RGBA,alphaMode:i.ALPHA_MODES.NPM},u=class extends s.EventEmitter{constructor(t=null,e=null){super(),e=Object.assign({},u.defaultOptions,e);const{alphaMode:r,mipmap:i,anisotropicLevel:a,scaleMode:h,width:c,height:d,wrapMode:p,format:f,type:g,target:m,resolution:v,resourceOptions:y}=e;!t||t instanceof l.Resource||((t=o.autoDetectResource(t,y)).internal=!0),this.resolution=v||n.settings.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((d||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=a,this._wrapMode=p,this._scaleMode=h,this.format=f,this.type=g,this.target=m,this.alphaMode=r,this.uid=s.uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&d>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=s.isPow2(this.realWidth)&&s.isPow2(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete s.BaseTextureCache[this.cacheId],delete s.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),u.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=n.settings.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let o=null;if(i)o=t;else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${s.uid()}`}o=t._pixiId}let a=s.BaseTextureCache[o];if(i&&r&&!a)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return a||(a=new u(t,e),a.cacheId=o,u.addToCache(a,o)),a}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const s=new a.BufferResource(t,{width:e,height:r}),o=t instanceof Float32Array?i.TYPES.FLOAT:i.TYPES.UNSIGNED_BYTE;return new u(s,Object.assign({},h,n||{width:e,height:r,type:o}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),s.BaseTextureCache[e]&&s.BaseTextureCache[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),s.BaseTextureCache[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=s.BaseTextureCache[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete s.BaseTextureCache[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete s.BaseTextureCache[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let c=u;c.defaultOptions={mipmap:i.MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:i.SCALE_MODES.LINEAR,wrapMode:i.WRAP_MODES.CLAMP,alphaMode:i.ALPHA_MODES.UNPACK,target:i.TARGETS.TEXTURE_2D,format:i.FORMATS.RGBA,type:i.TYPES.UNSIGNED_BYTE},c._globalBatch=0,e.BaseTexture=c},1640:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.GLTexture=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.TYPES.UNSIGNED_BYTE,this.internalFormat=i.FORMATS.RGBA,this.samplerType=0}}},5704:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3427),n=r(2424),s=r(5564),o=r(6992),a=r(9048),l=r(5104);const h=new l.TextureUvs;function u(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class c extends s.EventEmitter{constructor(t,e,r,n,s,o){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new i.Rectangle(0,0,1,1)),t instanceof c&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=h,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new i.Point(o.x,o.y):new i.Point(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&s.TextureCache[t.url]&&c.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,c.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new c(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===h&&(this._uvs=new l.TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=n.settings.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let a=null;if(i)a=t;else if(t instanceof o.BaseTexture){if(!t.cacheId){const r=e?.pixiIdPrefix||"pixiid";t.cacheId=`${r}-${s.uid()}`,o.BaseTexture.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${s.uid()}`}a=t._pixiId}let l=s.TextureCache[a];if(i&&r&&!l)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return l||t instanceof o.BaseTexture?!l&&t instanceof o.BaseTexture&&(l=new c(t),c.addToCache(l,a)):(e.resolution||(e.resolution=s.getResolutionOfUrl(t)),l=new c(new o.BaseTexture(t,e)),l.baseTexture.cacheId=a,o.BaseTexture.addToCache(l.baseTexture,a),c.addToCache(l,a)),l}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e?.resourceOptions),i=c.from(t,Object.assign({resourceOptions:r},e),!1),n=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):n.load().then((()=>Promise.resolve(i)))}static fromBuffer(t,e,r,i){return new c(o.BaseTexture.fromBuffer(t,e,r,i))}static fromLoader(t,e,r,i){const n=new o.BaseTexture(t,Object.assign({scaleMode:o.BaseTexture.defaultOptions.scaleMode,resolution:s.getResolutionOfUrl(e)},i)),{resource:l}=n;l instanceof a.ImageResource&&(l.url=e);const h=new c(n);return r||(r=e),o.BaseTexture.addToCache(h.baseTexture,r),c.addToCache(h,r),r!==e&&(o.BaseTexture.addToCache(h.baseTexture,e),c.addToCache(h,e)),h.baseTexture.valid?Promise.resolve(h):new Promise((t=>{h.baseTexture.once("loaded",(()=>t(h)))}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),s.TextureCache[e]&&s.TextureCache[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),s.TextureCache[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=s.TextureCache[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete s.TextureCache[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)s.TextureCache[t.textureCacheIds[e]]===t&&delete s.TextureCache[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:i,height:n}=t,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){const t=s&&o?"and":"or",a=`X: ${e} + ${i} = ${e+i} > ${this.baseTexture.width}`,l=`Y: ${r} + ${n} = ${r+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${t} ${l}`)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return c._EMPTY||(c._EMPTY=new c(new o.BaseTexture),u(c._EMPTY),u(c._EMPTY.baseTexture)),c._EMPTY}static get WHITE(){if(!c._WHITE){const t=n.settings.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),c._WHITE=new c(o.BaseTexture.from(t)),u(c._WHITE),u(c._WHITE.baseTexture)}return c._WHITE}}e.Texture=c},4228:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160);const s=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=s.defaultMaxIdle,this.checkCountMax=s.defaultCheckCountMax,this.mode=s.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==i.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let i=0;i<e.length;i++){const n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&(e[t++]=e[r]);e.length=t}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let e=t.children.length-1;e>=0;e--)this.unload(t.children[e])}destroy(){this.renderer=null}};let o=s;o.defaultMode=i.GC_MODES.AUTO,o.defaultMaxIdle=3600,o.defaultCheckCountMax=600,o.extension={type:n.ExtensionType.RendererSystem,name:"textureGC"},n.extensions.add(o),e.TextureGCSystem=o},6844:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3427);const n=new i.Matrix;e.TextureMatrix=class{constructor(t,e){this._texture=t,this.mapCoord=new i.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let i=0;i<t.length;i+=2){const n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=e.orig,s=e.trim;s&&(n.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(n));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(e._frame.x+l+h)/o.width,a[1]=(e._frame.y+l+h)/o.height,a[2]=(e._frame.x+e._frame.width-l+h)/o.width,a[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0}}},8936:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(6160),s=r(5564),o=r(6992),a=r(1640),l=r(9820);class h{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new o.BaseTexture,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=l.mapTypeAndFormatToInternalFormat(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let t=0;t<e;t++)this.boundTextures[t]=null;this.emptyTextures={};const r=new a.GLTexture(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new a.GLTexture(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let e=0;e<6;e++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let t=0;t<this.boundTextures.length;t++)this.bind(null,t)}bind(t,e=0){const{gl:r}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<r.length;t++)r[t]===this.unknownTexture&&this.bind(null,t)}for(let i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let r=t-1;r>=0;--r){const t=e[r];if(t){t._glTextures[n].samplerType!==i.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(t)}}}initTexture(t){const e=new a.GLTexture(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===i.TYPES.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(r,t,e))e.samplerType!==i.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,n=t.realHeight,s=r.gl;(e.width!==i||e.height!==n||e.dirtyId<0)&&(e.width=i,e.height=n,s.texImage2D(t.target,0,e.internalFormat,i,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&s.removeItems(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.WRAP_MODES.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==i.MIPMAP_MODES.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===i.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===i.SCALE_MODES.LINEAR){const i=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===i.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===i.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}h.extension={type:n.ExtensionType.RendererSystem,name:"texture"},n.extensions.add(h),e.TextureSystem=h},5104:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3427);e.TextureUvs=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,s=e.height;if(r){const e=t.width/2/n,o=t.height/2/s,a=t.x/n+e,l=t.y/s+o;r=i.groupD8.add(r,i.groupD8.NW),this.x0=a+e*i.groupD8.uX(r),this.y0=l+o*i.groupD8.uY(r),r=i.groupD8.add(r,2),this.x1=a+e*i.groupD8.uX(r),this.y1=l+o*i.groupD8.uY(r),r=i.groupD8.add(r,2),this.x2=a+e*i.groupD8.uX(r),this.y2=l+o*i.groupD8.uY(r),r=i.groupD8.add(r,2),this.x3=a+e*i.groupD8.uX(r),this.y3=l+o*i.groupD8.uY(r)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}},7728:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6992),n=r(4096),s=r(8124);class o extends s.Resource{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let e=0;e<t;e++){const t=new i.BaseTexture;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof s.Resource?this.addResourceAt(t[r],r):this.addResourceAt(n.autoDetectResource(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map((t=>t.resource)).filter((t=>t)).map((t=>t.load()));return this._load=Promise.all(t).then((()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)})),this._load}}e.AbstractMultiResource=o},8200:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(7728);class s extends n.AbstractMultiResource{constructor(t,e){const{width:r,height:i}=e||{};let n,s;Array.isArray(t)?(n=t,s=t.length):s=t,super(s,{width:r,height:i}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=i.TARGETS.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:i,itemDirtyIds:n,items:s}=this,{gl:o}=t;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,e.format,r.type,null);for(let t=0;t<i;t++){const i=s[t];n[t]<i.dirtyId&&(n[t]=i.dirtyId,i.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,t,i.resource.width,i.resource.height,1,e.format,r.type,i.resource.source))}return!0}}e.ArrayResource=s},856:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(5564),s=r(8124);class o extends s.Resource{constructor(t){const e=t;super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous"):t.crossOrigin=n.determineCrossOrigin(e)}upload(t,e,r,n){const s=t.gl,o=e.realWidth,a=e.realHeight;if(n=n||this.source,"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement&&n.readyState<=1&&0===n.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.ALPHA_MODES.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||r.width!==o||r.height!==a?(r.width=o,r.height=a,s.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,r.type,n),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}e.BaseImageResource=o},5880:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(8124);class s extends n.Resource{constructor(t,e){const{width:r,height:i}=e||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=t}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.ALPHA_MODES.UNPACK);const s=e.realWidth,o=e.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}e.BufferResource=s},4976:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(856);class n extends i.BaseImageResource{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}e.CanvasResource=n},9232:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(7728);const s=class extends n.AbstractMultiResource{constructor(t,e){const{width:r,height:n,autoLoad:o,linkBaseTexture:a}=e||{};if(t&&t.length!==s.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let t=0;t<s.SIDES;t++)this.items[t].target=i.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+t;this.linkBaseTexture=!1!==a,t&&this.initFromArray(t,e),!1!==o&&this.load()}bind(t){super.bind(t),t.target=i.TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const i=this.itemDirtyIds;for(let n=0;n<s.SIDES;n++){const s=this.items[n];(i[n]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===s.SIDES}};let o=s;o.SIDES=6,e.CubeResource=o},1376:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(5880);class s extends n.BufferResource{upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.ALPHA_MODES.UNPACK);const s=e.realWidth,o=e.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,this.data)),!0}}e.DepthResource=s},4348:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(2424),s=r(856);class o extends s.BaseImageResource{constructor(t,e){let r,i;e=e||{},"string"==typeof t?(r=o.EMPTY,i=t):(r=t,i=null),super(r),this.url=i,this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(t,e)=>{if(null!==this.url)try{const e=await n.settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await e.blob();if(this.destroyed)return;const s=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===i.ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(t){if(this.destroyed)return;e(t),this.onError.emit(t)}else t(this)}))),this._load}upload(t,e,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof t||t instanceof ImageBitmap)}static get EMPTY(){return o._EMPTY=o._EMPTY??n.settings.ADAPTER.createCanvas(0,0),o._EMPTY}}e.ImageBitmapResource=o},9048:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780),n=r(2424),s=r(856);class o extends s.BaseImageResource{constructor(t,e){if(e=e||{},"string"==typeof t){const r=new Image;s.BaseImageResource.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??n.settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(((t,e)=>{const r=this.source;this.url=r.src;const i=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?i():(r.onload=i,r.onerror=t=>{e(t),this.onError.emit(t)})}))),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((t=>t.blob())).then((r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===i.ALPHA_MODES.UNPACK?"premultiply":"none"}))).then((t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let t=!0;const i=e._glTextures;for(const n in i){const s=i[n];if(s!==r&&s.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!=typeof HTMLImageElement&&("string"==typeof t||t instanceof HTMLImageElement)}}e.ImageResource=o},8124:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3756);e.Resource=class{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new i.Runner("setRealSize"),this.onUpdate=new i.Runner("update"),this.onError=new i.Runner("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}},3252:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424),n=r(5564),s=r(856);const o=class extends s.BaseImageResource{constructor(t,e){e=e||{},super(i.settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},o.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const t=new Image;s.BaseImageResource.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*e,s=this._overrideHeight||this._overrideWidth/e*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${n.uid()}`,o.getContext("2d").drawImage(t,0,0,e,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(t){const e=o.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&o.SVG_XML.test(t)}};let a=o;a.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,a.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SVGResource=a},4248:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8580),n=r(856);const s=class extends n.BaseImageResource{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];n.BaseImageResource.crossOrigin(r,i,e.crossorigin);for(let e=0;e<t.length;++e){const i=document.createElement("source");let{src:n,mime:o}=t[e];n=n||t[e];const a=n.split("?").shift().toLowerCase(),l=a.slice(a.lastIndexOf(".")+1);o=o||s.MIME_TYPES[l]||`video/${l}`,i.src=n,i.type=o,r.appendChild(i)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=i.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e=>{this.valid?e(this):(this._resolve=e,t.load())})),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(i.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(i.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(i.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(i.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(i.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||s.TYPES.includes(e)}};let o=s;o.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],o.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e.VideoResource=o},4096:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=[];e.INSTALLED=r,e.autoDetectResource=function(t,e){if(!t)return null;let i="";if("string"==typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(i=e[1].toLowerCase())}for(let n=r.length-1;n>=0;--n){const s=r[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}},9552:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8200),n=r(4096),s=r(5880),o=r(4976),a=r(9232),l=r(4348),h=r(9048),u=r(3252),c=r(4248),d=r(856),p=r(8124),f=r(7728);n.INSTALLED.push(l.ImageBitmapResource,h.ImageResource,o.CanvasResource,c.VideoResource,u.SVGResource,s.BufferResource,a.CubeResource,i.ArrayResource),e.ArrayResource=i.ArrayResource,e.INSTALLED=n.INSTALLED,e.autoDetectResource=n.autoDetectResource,e.BufferResource=s.BufferResource,e.CanvasResource=o.CanvasResource,e.CubeResource=a.CubeResource,e.ImageBitmapResource=l.ImageBitmapResource,e.ImageResource=h.ImageResource,e.SVGResource=u.SVGResource,e.VideoResource=c.VideoResource,e.BaseImageResource=d.BaseImageResource,e.Resource=p.Resource,e.AbstractMultiResource=f.AbstractMultiResource},9820:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);e.mapTypeAndFormatToInternalFormat=function(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[i.TYPES.UNSIGNED_BYTE]:{[i.FORMATS.RGBA]:t.RGBA8,[i.FORMATS.RGB]:t.RGB8,[i.FORMATS.RG]:t.RG8,[i.FORMATS.RED]:t.R8,[i.FORMATS.RGBA_INTEGER]:t.RGBA8UI,[i.FORMATS.RGB_INTEGER]:t.RGB8UI,[i.FORMATS.RG_INTEGER]:t.RG8UI,[i.FORMATS.RED_INTEGER]:t.R8UI,[i.FORMATS.ALPHA]:t.ALPHA,[i.FORMATS.LUMINANCE]:t.LUMINANCE,[i.FORMATS.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[i.TYPES.BYTE]:{[i.FORMATS.RGBA]:t.RGBA8_SNORM,[i.FORMATS.RGB]:t.RGB8_SNORM,[i.FORMATS.RG]:t.RG8_SNORM,[i.FORMATS.RED]:t.R8_SNORM,[i.FORMATS.RGBA_INTEGER]:t.RGBA8I,[i.FORMATS.RGB_INTEGER]:t.RGB8I,[i.FORMATS.RG_INTEGER]:t.RG8I,[i.FORMATS.RED_INTEGER]:t.R8I},[i.TYPES.UNSIGNED_SHORT]:{[i.FORMATS.RGBA_INTEGER]:t.RGBA16UI,[i.FORMATS.RGB_INTEGER]:t.RGB16UI,[i.FORMATS.RG_INTEGER]:t.RG16UI,[i.FORMATS.RED_INTEGER]:t.R16UI,[i.FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[i.TYPES.SHORT]:{[i.FORMATS.RGBA_INTEGER]:t.RGBA16I,[i.FORMATS.RGB_INTEGER]:t.RGB16I,[i.FORMATS.RG_INTEGER]:t.RG16I,[i.FORMATS.RED_INTEGER]:t.R16I},[i.TYPES.UNSIGNED_INT]:{[i.FORMATS.RGBA_INTEGER]:t.RGBA32UI,[i.FORMATS.RGB_INTEGER]:t.RGB32UI,[i.FORMATS.RG_INTEGER]:t.RG32UI,[i.FORMATS.RED_INTEGER]:t.R32UI,[i.FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[i.TYPES.INT]:{[i.FORMATS.RGBA_INTEGER]:t.RGBA32I,[i.FORMATS.RGB_INTEGER]:t.RGB32I,[i.FORMATS.RG_INTEGER]:t.RG32I,[i.FORMATS.RED_INTEGER]:t.R32I},[i.TYPES.FLOAT]:{[i.FORMATS.RGBA]:t.RGBA32F,[i.FORMATS.RGB]:t.RGB32F,[i.FORMATS.RG]:t.RG32F,[i.FORMATS.RED]:t.R32F,[i.FORMATS.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[i.TYPES.HALF_FLOAT]:{[i.FORMATS.RGBA]:t.RGBA16F,[i.FORMATS.RGB]:t.RGB16F,[i.FORMATS.RG]:t.RG16F,[i.FORMATS.RED]:t.R16F},[i.TYPES.UNSIGNED_SHORT_5_6_5]:{[i.FORMATS.RGB]:t.RGB565},[i.TYPES.UNSIGNED_SHORT_4_4_4_4]:{[i.FORMATS.RGBA]:t.RGBA4},[i.TYPES.UNSIGNED_SHORT_5_5_5_1]:{[i.FORMATS.RGBA]:t.RGB5_A1},[i.TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[i.FORMATS.RGBA]:t.RGB10_A2,[i.FORMATS.RGBA_INTEGER]:t.RGB10_A2UI},[i.TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[i.FORMATS.RGB]:t.R11F_G11F_B10F},[i.TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[i.FORMATS.RGB]:t.RGB9_E5},[i.TYPES.UNSIGNED_INT_24_8]:{[i.FORMATS.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[i.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[i.FORMATS.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[i.TYPES.UNSIGNED_BYTE]:{[i.FORMATS.RGBA]:t.RGBA,[i.FORMATS.RGB]:t.RGB,[i.FORMATS.ALPHA]:t.ALPHA,[i.FORMATS.LUMINANCE]:t.LUMINANCE,[i.FORMATS.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[i.TYPES.UNSIGNED_SHORT_5_6_5]:{[i.FORMATS.RGB]:t.RGB},[i.TYPES.UNSIGNED_SHORT_4_4_4_4]:{[i.FORMATS.RGBA]:t.RGBA},[i.TYPES.UNSIGNED_SHORT_5_5_5_1]:{[i.FORMATS.RGBA]:t.RGBA}},e}},2764:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3756);e.TransformFeedback=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new i.Runner("disposeTransformFeedback")}bindBuffer(t,e){this.buffers[t]=e}destroy(){this.disposeRunner.emit(this,!1)}}},9880:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160);class n{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:i}=this;e&&i.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:i}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[i]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let n=0;n<t.buffers.length;n++){const s=t.buffers[n];s&&(r.buffer.update(s),s._glBuffers[i].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,s._glBuffers[i].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let r=0;r<t.buffers.length;r++){const i=t.buffers[r];if(!i)continue;const s=i._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||e||n.dispose(i,e))}r&&(e||i.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}n.extension={type:i.ExtensionType.RendererSystem,name:"transformFeedback"},i.extensions.add(n),e.TransformFeedbackSystem=n},4036:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1452);class n extends i.Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}e.Quad=n},1744:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6332),n=r(1452);class s extends n.Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new i.Buffer(this.vertices),this.uvBuffer=new i.Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}e.QuadUv=s},8560:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(3427),s=r(2424);class o{constructor(t){this.renderer=t}init(t){this.screen=new n.Rectangle(0,0,t.width,t.height),this.element=t.view||s.settings.ADAPTER.createCanvas(),this.resolution=t.resolution||s.settings.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}o.extension={type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem],name:"_view"},i.extensions.add(o),e.ViewSystem=o},8816:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);e.Bounds=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:((t=t||new i.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:i,c:n,d:s,tx:o,ty:a}=t,l=r*e.x+n*e.y+o,h=i*e.x+s*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[2],o=t[3],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[4],o=t[5],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[6],o=t[7],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n}addFrame(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)}addFrameMatrix(t,e,r,i,n){const s=t.a,o=t.b,a=t.c,l=t.d,h=t.tx,u=t.ty;let c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=s*e+a*r+h,m=o*e+l*r+u;c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*i+a*r+h,m=o*i+l*r+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*e+a*n+h,m=o*e+l*n+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*i+a*n+h,m=o*i+l*n+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f}addVertexData(t,e,r){let i=this.minX,n=this.minY,s=this.maxX,o=this.maxY;for(let a=e;a<r;a+=2){const e=t[a],r=t[a+1];i=e<i?e:i,n=r<n?r:n,s=e>s?e:s,o=r>o?r:o}this.minX=i,this.minY=n,this.maxX=s,this.maxY=o}addVertices(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)}addVerticesMatrix(t,e,r,i,n=0,s=n){const o=t.a,a=t.b,l=t.c,h=t.d,u=t.tx,c=t.ty;let d=this.minX,p=this.minY,f=this.maxX,g=this.maxY;for(let t=r;t<i;t+=2){const r=e[t],i=e[t+1],m=o*r+l*i+u,v=h*i+a*r+c;d=Math.min(d,m-n),f=Math.max(f,m+n),p=Math.min(p,v-s),g=Math.max(g,v+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=g}addBounds(t){const e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=i<e?i:e,this.maxX=n>o?n:o,this.maxY=s>a?s:a}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=i<e?i:e,this.maxX=n>o?n:o,this.maxY=s>a?s:a}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,i,n,s){t-=n,e-=s,r+=n,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i}}},3952:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(7460);const s=new i.Matrix;function o(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const a=class extends n.DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=a.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);i.utils.removeItems(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,i.utils.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,i.utils.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,i=e-r;let n;if(i>0&&i<=e){n=this.children.splice(r,i);for(let t=0;t<n.length;++t)n[t].parent=null,n[t].transform&&(n[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<n.length;++t)n[t].emit("removed",this),this.emit("childRemoved",n[t],this,t);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(o),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==a.prototype._render&&(r=this.getBounds(!0));const n=t.projection.transform;if(n&&(i?(i=s.copyFrom(i),i.prepend(n)):i=n),r&&e.intersects(r,i))this._render(t);else if(this.cullArea)return;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e],i=r.cullable;r.cullable=i||!this.cullArea,r.render(t),r.cullable=i}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const n=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==i.MASK_TYPES.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof t?t:t?.children,r=this.removeChildren(0,this.children.length);if(e)for(let e=0;e<r.length;++e)r[e].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let l=a;l.defaultSortableChildren=!1,l.prototype.containerUpdateTransform=l.prototype.updateTransform,e.Container=l},7460:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(8816);class s extends i.utils.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new i.Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new n.Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const i=e[r];Object.defineProperty(s.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new i.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new n.Bounds);const e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-o,a}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,r=1,i=1,n=0,s=0,o=0,a=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new o),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*i.RAD_TO_DEG}set angle(t){this.transform.rotation=t*i.DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class o extends s{constructor(){super(...arguments),this.sortDirty=null}}s.prototype.displayObjectUpdateTransform=s.prototype.updateTransform,e.DisplayObject=s,e.TemporaryDisplayObject=o},4075:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(3600);var i=r(8816),n=r(3952),s=r(7460);e.Bounds=i.Bounds,e.Container=n.Container,e.DisplayObject=s.DisplayObject,e.TemporaryDisplayObject=s.TemporaryDisplayObject},3600:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(3952);Object.defineProperties(i.settings,{SORTABLE_CHILDREN:{get:()=>n.Container.defaultSortableChildren,set(t){i.utils.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),n.Container.defaultSortableChildren=t}}}),Object.defineProperty(e,"settings",{enumerable:!0,get:function(){return i.settings}})},2364:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(992),s=r(2548),o=r(1519);const a=new i.Point,l=new i.Point;e.EventBoundary=class{constructor(t){this.dispatch=new i.utils.EventEmitter,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(((t,e)=>t.priority-e.priority))}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,i=e.length;r<i;r++)e[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const r=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,a.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let i=0,n=r.length-1;i<n;i++)if(t.currentTarget=r[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(t.currentTarget=r[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const i=r.children;if(i)for(let r=0;r<i.length;r++)this.all(t,e,i[r]);t.currentTarget=r,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let r=0;r<2048&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,r,i,n){if(!t||!t.visible)return null;if(n(t,r))return null;if(t.interactiveChildren&&t.children){const s=t.children;for(let o=s.length-1;o>=0;o--){const a=s[o],l=this.hitTestRecursive(a,e||a.interactive,r,i,n);if(l){if(l.length>0&&!l[l.length-1].parent)continue;return(l.length>0||t.interactive)&&l.push(t),l}}}return e&&i(t,r)?t.interactive?[t]:[]:null}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,l),!t.hitArea.contains(l.x,l.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!r.containsPoint?.(e))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t.containsPoint&&t.containsPoint(e)}notifyTarget(t,e){const r=`on${e=e??t.type}`;t.currentTarget[r]?.(t);const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t),r="mouse"===e.pointerType||"pen"===e.pointerType,i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&n!==e.target){const i="mousemove"===t.type?"mouseout":"pointerout",s=this.createPointerEvent(t,i,n);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(n)){const i=this.createPointerEvent(t,"pointerleave",n);for(i.eventPhase=i.AT_TARGET;i.target&&!e.composedPath().includes(i.target);)i.currentTarget=i.target,this.notifyTarget(i),r&&this.notifyTarget(i,"mouseleave"),i.target=i.target.parent;this.freeEvent(i)}this.freeEvent(s)}if(n!==e.target){const i="mousemove"===t.type?"mouseover":"pointerover",s=this.clonePointerEvent(e,i);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let o=n?.parent;for(;o&&o!==this.rootTarget.parent&&o!==e.target;)o=o.parent;if(!o||o===this.rootTarget.parent){const t=this.clonePointerEvent(e,"pointerenter");for(t.eventPhase=t.AT_TARGET;t.target&&t.target!==n&&t.target!==this.rootTarget.parent;)t.currentTarget=t.target,this.notifyTarget(t),r&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(s)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](e,"pointermove"),this.all(e,"globalpointermove"),"touch"===e.pointerType&&(this[o](e,"touchmove"),this.all(e,"globaltouchmove")),r&&(this[o](e,"mousemove"),this.all(e,"globalmousemove"),this.cursor=e.target?.cursor),i.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const n=this.clonePointerEvent(r,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const r="mouse"===t.pointerType||"pen"===t.pointerType,i=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",i);this.dispatchEvent(n),r&&this.dispatchEvent(n,"mouseout");const s=this.createPointerEvent(t,"pointerleave",i);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}const i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[t.button]);let o=n;if(n&&!r.composedPath().includes(n)){let e=n;for(;e&&!r.composedPath().includes(e);){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete i.pressTargetsByButton[t.button],o=e}if(o){const n=this.clonePointerEvent(r,"click");n.target=o,n.path=null,i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:n.target,timeStamp:e});const s=i.clicksByButton[t.button];s.target===n.target&&e-s.timeStamp<200?++s.clickCount:s.clickCount=1,s.target=n.target,s.timeStamp=e,n.detail=s.clickCount,"mouse"===n.pointerType?this.dispatchEvent(n,"click"):"touch"===n.pointerType&&this.dispatchEvent(n,"tap"),this.dispatchEvent(n,"pointertap"),this.freeEvent(n)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof s.FederatedPointerEvent))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),i=this.createPointerEvent(t);if(r){let n=r;for(;n;)i.currentTarget=n,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(i)}mapWheel(t){if(!(t instanceof o.FederatedWheelEvent))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length&&t[r].parent===e;r++)e=t[r];return e}createPointerEvent(t,e,r){const i=this.allocateEvent(s.FederatedPointerEvent);return this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=r??this.hitTest(i.global.x,i.global.y),"string"==typeof e&&(i.type=e),i}createWheelEvent(t){const e=this.allocateEvent(o.FederatedWheelEvent);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent(s.FederatedPointerEvent);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof s.FederatedPointerEvent&&e instanceof s.FederatedPointerEvent&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof n.FederatedMouseEvent&&e instanceof n.FederatedMouseEvent&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const r=t.currentTarget._events[e];if(r)if("fn"in r)r.fn.call(r.context,t);else for(let e=0,i=r.length;e<i&&!t.propagationImmediatelyStopped;e++)r[e].fn.call(r[e].context,t)}}},4300:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(2364),s=r(2548),o=r(1519);const a={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class l{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new n.EventBoundary(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new s.FederatedPointerEvent(null),this.rootWheelEvent=new o.FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){(t.cancelable||!("cancelable"in t))&&t.preventDefault()}for(let t=0,r=e.length;t<r;t++){const r=e[t],i=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",i=this.normalizeToPointerData(t);for(let t=0,e=i.length;t<e;t++){const e=this.bootstrapEvent(this.rootPointerEvent,i[t]);e.type+=r,this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let t=0,r=e.length;t<r;t++){const r=this.bootstrapEvent(this.rootPointerEvent,e[t]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let i;i=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;t.x=(e-i.left)*(this.domElement.width/i.width)*n,t.y=(r-i.top)*(this.domElement.height/i.height)*n}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,i=t.changedTouches.length;r<i;r++){const i=t.changedTouches[r];void 0===i.button&&(i.button=0),void 0===i.buttons&&(i.buttons=1),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{const r=t;void 0===r.isPrimary&&(r.isPrimary=!0),void 0===r.width&&(r.width=1),void 0===r.height&&(r.height=1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="mouse"),void 0===r.pointerId&&(r.pointerId=1),void 0===r.pressure&&(r.pressure=.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=a[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}l.extension={name:"events",type:[i.ExtensionType.RendererSystem,i.ExtensionType.CanvasRendererSystem]},i.extensions.add(l),e.EventSystem=l},1544:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);class n{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=n.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new i.Point,this.page=new i.Point,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,i,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}e.FederatedEvent=n},7680:()=>{},1704:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4075),n=r(1544);const s={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const i="function"==typeof e?void 0:e;t="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,r){const i="function"==typeof e?void 0:e;t="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof n.FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};i.DisplayObject.mixin(s),e.FederatedDisplayObject=s},992:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1544);class s extends n.FederatedEvent{constructor(){super(...arguments),this.client=new i.Point,this.movement=new i.Point,this.offset=new i.Point,this.global=new i.Point,this.screen=new i.Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,i,n,s,o,a,l,h,u,c,d,p,f){throw new Error("Method not implemented.")}}e.FederatedMouseEvent=s},2548:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(992);class n extends i.FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}e.FederatedPointerEvent=n},1519:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(992);class n extends i.FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}e.FederatedWheelEvent=n},5144:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2364),n=r(4300),s=r(1544);r(7680);var o=r(1704),a=r(992),l=r(2548),h=r(1519);e.EventBoundary=i.EventBoundary,e.EventSystem=n.EventSystem,e.FederatedEvent=s.FederatedEvent,e.FederatedDisplayObject=o.FederatedDisplayObject,e.FederatedMouseEvent=a.FederatedMouseEvent,e.FederatedPointerEvent=l.FederatedPointerEvent,e.FederatedWheelEvent=h.FederatedWheelEvent},6160:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(r||{});const i=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},n=(t,e)=>i(t).priority??e,s={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(i).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(...t){return t.map(i).forEach((t=>{t.type.forEach((e=>{const r=this._addHandlers,i=this._queue;r[e]?r[e](t):(i[e]=i[e]||[],i[e].push(t))}))})),this},handle(t,e,r){const i=this._addHandlers,n=this._removeHandlers;if(i[t]||n[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,n[t]=r;const s=this._queue;return s[t]&&(s[t].forEach((t=>e(t))),delete s[t]),this},handleByMap(t,e){return this.handle(t,(t=>{e[t.name]=t.ref}),(t=>{delete e[t.name]}))},handleByList(t,e,r=-1){return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>n(e,r)-n(t,r))))}),(t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)}))}};e.ExtensionType=r,e.extensions=s},8708:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n=new i.Rectangle,s=class{constructor(t){this.renderer=t}async image(t,e,r){const i=new Image;return i.src=await this.base64(t,e,r),i}async base64(t,e,r){const i=this.canvas(t);if(void 0!==i.toDataURL)return i.toDataURL(e,r);if(void 0!==i.convertToBlob){const t=await i.convertToBlob({type:e,quality:r});return await new Promise((e=>{const r=new FileReader;r.onload=()=>e(r.result),r.readAsDataURL(t)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const r=this.renderer;let o,a,l=!1,h=!1;t&&(t instanceof i.RenderTexture?a=t:(a=this.renderer.generateTexture(t),h=!0)),a?(o=a.baseTexture.resolution,e=e??a.frame,l=!1,r.renderTexture.bind(a)):(o=r.resolution,e||((e=n).width=r.width,e.height=r.height),l=!0,r.renderTexture.bind(null));const u=Math.round(e.width*o),c=Math.round(e.height*o);let d=new i.utils.CanvasRenderTarget(u,c,1);const p=new Uint8Array(4*u*c),f=r.gl;f.readPixels(Math.round(e.x*o),Math.round(e.y*o),u,c,f.RGBA,f.UNSIGNED_BYTE,p);const g=d.context.getImageData(0,0,u,c);if(s.arrayPostDivide(p,g.data),d.context.putImageData(g,0,0),l){const t=new i.utils.CanvasRenderTarget(d.width,d.height,1);t.context.scale(1,-1),t.context.drawImage(d.canvas,0,-c),d.destroy(),d=t}return h&&a.destroy(!0),d.canvas}pixels(t,e){const r=this.renderer;let o,a,l=!1;t&&(t instanceof i.RenderTexture?a=t:(a=this.renderer.generateTexture(t),l=!0)),a?(o=a.baseTexture.resolution,e=e??a.frame,r.renderTexture.bind(a)):(o=r.resolution,e||((e=n).width=r.width,e.height=r.height),r.renderTexture.bind(null));const h=Math.round(e.width*o),u=Math.round(e.height*o),c=new Uint8Array(4*h*u),d=r.gl;return d.readPixels(Math.round(e.x*o),Math.round(e.y*o),h,u,d.RGBA,d.UNSIGNED_BYTE,c),l&&a.destroy(!0),s.arrayPostDivide(c,c),c}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let r=0;r<t.length;r+=4){const i=e[r+3]=t[r+3];0!==i?(e[r]=Math.round(Math.min(255*t[r]/i,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/i,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}}};let o=s;o.extension={name:"extract",type:i.ExtensionType.RendererSystem},i.extensions.add(o),e.Extract=o},2504:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8708);e.Extract=i.Extract},5568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(892);class s extends i.Filter{constructor(t=1){super(i.defaultVertex,n.default,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}e.AlphaFilter=s},892:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"},9392:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5568);e.AlphaFilter=i.AlphaFilter},776:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1568);class s extends i.Filter{constructor(t=8,e=4,r=i.Filter.defaultResolution,s=5){super(),this.blurXFilter=new n.BlurFilterPass(!0,t,e,r,s),this.blurYFilter=new n.BlurFilterPass(!1,t,e,r,s),this.resolution=r,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,r,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,i.CLEAR_MODES.CLEAR),this.blurYFilter.apply(t,s,r,n),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,r,n):this.blurXFilter.apply(t,e,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}e.BlurFilter=s},1568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(5920),s=r(9784);class o extends i.Filter{constructor(t,e=8,r=4,o=i.Filter.defaultResolution,a=5){super(s.generateBlurVertSource(a,t),n.generateBlurFragSource(a)),this.horizontal=t,this.resolution=o,this._quality=0,this.quality=r,this.blur=e}apply(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{const s=t.getFilterTexture(),o=t.renderer;let a=e,l=s;this.state.blend=!1,t.applyFilter(this,a,l,i.CLEAR_MODES.CLEAR);for(let e=1;e<this.passes-1;e++){t.bindAndClear(a,i.CLEAR_MODES.BLIT),this.uniforms.uSampler=l;const e=l;l=a,a=e,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,r,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}e.BlurFilterPass=o},5920:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");e.generateBlurFragSource=function(t){const e=r[t],n=e.length;let s,o=i,a="";for(let r=0;r<t;r++){let i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",r.toString());s=r,r>=n&&(s=t-r-1),i=i.replace("%value%",e[s].toString()),a+=i,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",t.toString()),o}},9784:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.generateBlurVertSource=function(t,e){const r=Math.ceil(t/2);let i,n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let e=0;e<t;e++){let t=i.replace("%index%",e.toString());t=t.replace("%sampleIndex%",e-(r-1)+".0"),s+=t,s+="\n"}return n=n.replace("%blur%",s),n=n.replace("%size%",t.toString()),n}},3132:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(776),n=r(1568);e.BlurFilter=i.BlurFilter,e.BlurFilterPass=n.BlurFilterPass},3732:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(996);class s extends i.Filter{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(i.defaultFilterVertex,n.default,t),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const r=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(r,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}blackAndWhite(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),i=Math.sin(t),n=1/3,s=(0,Math.sqrt)(n),o=[r+(1-r)*n,n*(1-r)-s*i,n*(1-r)+s*i,0,0,n*(1-r)+s*i,r+n*(1-r),n*(1-r)-s*i,0,0,n*(1-r)-s*i,n*(1-r)+s*i,r+n*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)}contrast(t,e){const r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const r=2*t/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)}sepia(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)}technicolor(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)}polaroid(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)}toBGR(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)}kodachrome(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)}browni(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)}vintage(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)}colorTone(t,e,r,i,n){const s=((r=r||16770432)>>16&255)/255,o=(r>>8&255)/255,a=(255&r)/255,l=((i=i||3375104)>>16&255)/255,h=(i>>8&255)/255,u=(255&i)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,l,h,u,e=e||.15,0,s-l,o-h,a-u,0,0];this._loadMatrix(c,n)}night(t,e){const r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}s.prototype.grayscale=s.prototype.greyscale,e.ColorMatrixFilter=s},996:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"},9488:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3732);e.ColorMatrixFilter=i.ColorMatrixFilter},7164:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(5136),s=r(3048);class o extends i.Filter{constructor(t,e){const r=new i.Matrix;t.renderable=!1,super(s.default,n.default,{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,null==e&&(e=20),this.scale=new i.Point(e,e)}apply(t,e,r,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,s=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=n.a/s,this.uniforms.rotation[1]=n.b/s,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,r,i)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}e.DisplacementFilter=o},5136:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n"},3048:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n"},3176:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7164);e.DisplacementFilter=i.DisplacementFilter},1816:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6360),s=r(7456);class o extends i.Filter{constructor(){super(s.default,n.default)}}e.FXAAFilter=o},6360:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default='varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'},7456:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n"},1292:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1816);e.FXAAFilter=i.FXAAFilter},4956:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(9932);class s extends i.Filter{constructor(t=.5,e=Math.random()){super(i.defaultFilterVertex,n.default,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}e.NoiseFilter=s},8768:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4956);e.NoiseFilter=i.NoiseFilter},9932:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"},4672:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(5764),o=r(6148),a=r(8136),l=r(2684);r(4107);var h=r(3548),u=r(948),c=r(6316);const d=new Float32Array(3),p={},f=class extends n.Container{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new a.FillStyle,this._lineStyle=new l.LineStyle,this._matrix=null,this._holeMode=!1,this.state=i.State.for2d(),this._geometry=t||new o.GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new f(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r=1,i=.5,n=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:r,alignment:i,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:i.Texture.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:s.LINE_CAP.BUTT,join:s.LINE_JOIN.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new i.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new i.Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,i){this._initCurve();const n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),h.QuadraticUtils.curveTo(t,e,r,i,n),this}bezierCurveTo(t,e,r,i,n,s){return this._initCurve(),u.BezierUtils.curveTo(t,e,r,i,n,s,this.currentPath.points),this}arcTo(t,e,r,i,n){this._initCurve(t,e);const s=this.currentPath.points,o=c.ArcUtils.curveTo(t,e,r,i,n,s);if(o){const{cx:t,cy:e,radius:r,startAngle:i,endAngle:n,anticlockwise:s}=o;this.arc(t,e,r,i,n,s)}return this}arc(t,e,r,n,s,o=!1){if(n===s)return this;!o&&s<=n?s+=i.PI_2:o&&n<=s&&(n+=i.PI_2);if(0===s-n)return this;const a=t+Math.cos(n)*r,l=e+Math.sin(n)*r,h=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const t=Math.abs(u[u.length-2]-a),e=Math.abs(u[u.length-1]-l);t<h&&e<h||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return c.ArcUtils.arc(a,l,t,e,r,n,s,o,u),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:i.Texture.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:i.Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new i.Rectangle(t,e,r,n))}drawRoundedRect(t,e,r,n,s){return this.drawShape(new i.RoundedRectangle(t,e,r,n,s))}drawCircle(t,e,r){return this.drawShape(new i.Circle(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new i.Ellipse(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):e=Array.isArray(t[0])?t[0]:t;const s=new i.Polygon(e);return s.closeStroke=r,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==i.SHAPES.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const r=t.batches[n],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),l={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:i.utils.hex2rgb(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=l}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,i=this.tint,n=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*n,s.tint[1]=(i>>8&255)/255*n,s.tint[2]=(255&i)/255*n,s.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let e=0,i=o.length;e<i;e++)this._renderDrawCallDirect(t,r.drawCalls[e])}_renderDrawCallDirect(t,e){const{texArray:r,type:i,size:n,start:s}=e,o=r.count;for(let e=0;e<o;e++)t.texture.bind(r.elements[e],e);t.geometry.draw(i,n,s)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!p[r]){const{maxTextures:e}=t.plugins[r],n=new Int32Array(e);for(let t=0;t<e;t++)n[t]=t;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new i.Matrix,default:i.UniformGroup.from({uSamplers:n},!0)},o=t.plugins[r]._shader.program;p[r]=new i.Shader(o,s)}e=p[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:i,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,r,i,n)}containsPoint(t){return this.worldTransform.applyInverse(t,f._TEMP_POINT),this._geometry.containsPoint(f._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=i.utils.hex2rgb(this.tint,d);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],i=r._batchRGB,n=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let t=0;t<l.length;t+=2){const e=l[t],c=l[t+1];h[u++]=r*e+n*c+o,h[u++]=s*c+i*e+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let g=f;g.curves=s.curves,g._TEMP_POINT=new i.Point,e.Graphics=g},7596:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e=null,r=null,i=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type}clone(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}e.GraphicsData=r},6148:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(7596),o=r(4107),a=r(6896),l=r(6420),h=r(2184);const u=new i.Point,c=class extends i.BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new n.Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),o.DRAW_CALL_POOL.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),o.BATCH_POOL.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,i=null){const n=new s.GraphicsData(t,e,r,i);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new s.GraphicsData(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const i=e[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,u):u.copyFrom(t),i.shape.contains(u.x,u.y)))){let t=!1;if(i.holes)for(let e=0;e<i.holes.length;e++){if(i.holes[e].shape.contains(u.x,u.y)){t=!0;break}}if(!t)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let s=this.shapeIndex;s<e.length;s++){this.shapeIndex++;const l=e[s],h=l.fillStyle,u=l.lineStyle;o.FILL_COMMANDS[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||u.visible)&&this.processHoles(l.holes);for(let e=0;e<2;e++){const s=0===e?h:u;if(!s.visible)continue;const c=s.texture.baseTexture,d=this.indices.length,p=this.points.length/2;c.wrapMode=i.WRAP_MODES.REPEAT,0===e?this.processFill(l):this.processLine(l);const f=this.points.length/2-p;0!==f&&(r&&!this._compareStyles(n,s)&&(r.end(d,p),r=null),r||(r=o.BATCH_POOL.pop()||new a.BatchPart,r.begin(s,d,p),this.batches.push(r),n=s),this.addUvs(this.points,t,s.texture,p,f,s.matrix))}}const s=this.indices.length,l=this.points.length/2;if(r&&r.end(s,l),0===this.batches.length)return void(this.batchable=!0);const h=l>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&h===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=h?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const e=this.graphicsData[t],r=e.fillStyle,i=e.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const r=t[e];for(let t=0;t<r.size;t++){const e=r.start+t;this.indicesUint16[e]=this.indicesUint16[e]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*c.BATCHABLE_SIZE}buildDrawCalls(){let t=++i.BaseTexture._globalBatch;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),o.DRAW_CALL_POOL.push(this.drawCalls[t]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=o.DRAW_CALL_POOL.pop();n||(n=new i.BatchDrawCall,n.texArray=new i.BatchTextureArray),n.texArray.count=0,n.start=0,n.size=0,n.type=i.DRAW_MODES.TRIANGLES;let s=0,a=null,l=0,h=!1,u=i.DRAW_MODES.TRIANGLES,c=0;this.drawCalls.push(n);for(let d=0;d<this.batches.length;d++){const p=this.batches[d],f=8,g=p.style,m=g.texture.baseTexture;h!==!!g.native&&(h=!!g.native,u=h?i.DRAW_MODES.LINES:i.DRAW_MODES.TRIANGLES,a=null,s=f,t++),a!==m&&(a=m,m._batchEnabled!==t&&(s===f&&(t++,s=0,n.size>0&&(n=o.DRAW_CALL_POOL.pop(),n||(n=new i.BatchDrawCall,n.texArray=new i.BatchTextureArray),this.drawCalls.push(n)),n.start=c,n.size=0,n.texArray.count=0,n.type=u),m.touched=1,m._batchEnabled=t,m._batchLocation=s,m.wrapMode=i.WRAP_MODES.REPEAT,n.texArray.elements[n.texArray.count++]=m,s++)),n.size+=p.size,c+=p.size,l=m._batchLocation,this.addColors(e,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(r,l,p.attribSize,p.attribStart)}i.BaseTexture._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*t.length*4),s=new Float32Array(n),o=new Uint32Array(n);let a=0;for(let n=0;n<t.length/2;n++)s[a++]=t[2*n],s[a++]=t[2*n+1],s[a++]=e[2*n],s[a++]=e[2*n+1],o[a++]=r[n],s[a++]=i[n];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){if(t.holes.length)l.buildPoly.triangulate(t,this);else{o.FILL_COMMANDS[t.type].triangulate(t,this)}}processLine(t){h.buildLine(t,this);for(let e=0;e<t.holes.length;e++)h.buildLine(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];o.FILL_COMMANDS[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}}addColors(t,e,r,n,s=0){const o=(e>>16)+(65280&e)+((255&e)<<16),a=i.utils.premultiplyTint(o,r);t.length=Math.max(t.length,s+n);for(let e=0;e<n;e++)t[s+e]=a}addTextureIds(t,e,r,i=0){t.length=Math.max(t.length,i+r);for(let n=0;n<r;n++)t[i+n]=e}addUvs(t,e,r,i,n,s=null){let o=0;const a=e.length,l=r.frame;for(;o<n;){let r=t[2*(i+o)],n=t[2*(i+o)+1];if(s){const t=s.a*r+s.c*n+s.tx;n=s.b*r+s.d*n+s.ty,r=t}o++,e.push(r/l.width,n/l.height)}const h=r.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(e,r,a,n)}adjustUvs(t,e,r,i){const n=e.baseTexture,s=1e-6,o=r+2*i,a=e.frame,l=a.width/n.width,h=a.height/n.height;let u=a.x/a.width,c=a.y/a.height,d=Math.floor(t[r]+s),p=Math.floor(t[r+1]+s);for(let e=r+2;e<o;e+=2)d=Math.min(d,Math.floor(t[e]+s)),p=Math.min(p,Math.floor(t[e+1]+s));u-=d,c-=p;for(let e=r;e<o;e+=2)t[e]=(t[e]+u)*l,t[e+1]=(t[e+1]+c)*h}};let d=c;d.BATCHABLE_SIZE=100,e.GraphicsGeometry=d},5764:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(r||{}),i=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(i||{});const n={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},s=n;e.GRAPHICS_CURVES=s,e.LINE_CAP=i,e.LINE_JOIN=r,e.curves=n},7550:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4107),n=r(5764),s=r(4672),o=r(7596),a=r(6148),l=r(8136),h=r(2684),u=r(6420),c=r(152),d=r(3852),p=r(8688),f=r(2184),g=r(6316),m=r(948),v=r(3548),y=r(6896);const _={buildPoly:u.buildPoly,buildCircle:c.buildCircle,buildRectangle:d.buildRectangle,buildRoundedRectangle:p.buildRoundedRectangle,buildLine:f.buildLine,ArcUtils:g.ArcUtils,BezierUtils:m.BezierUtils,QuadraticUtils:v.QuadraticUtils,BatchPart:y.BatchPart,FILL_COMMANDS:i.FILL_COMMANDS,BATCH_POOL:i.BATCH_POOL,DRAW_CALL_POOL:i.DRAW_CALL_POOL};e.GRAPHICS_CURVES=n.GRAPHICS_CURVES,e.LINE_CAP=n.LINE_CAP,e.LINE_JOIN=n.LINE_JOIN,e.curves=n.curves,e.Graphics=s.Graphics,e.GraphicsData=o.GraphicsData,e.GraphicsGeometry=a.GraphicsGeometry,e.FillStyle=l.FillStyle,e.LineStyle=h.LineStyle,e.graphicsUtils=_},8136:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);class n{constructor(){this.color=16777215,this.alpha=1,this.texture=i.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new n;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=i.Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}e.FillStyle=n},2684:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5764),n=r(8136);class s extends n.FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=i.LINE_CAP.BUTT,this.join=i.LINE_JOIN.MITER,this.miterLimit=10}clone(){const t=new s;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}e.LineStyle=s},6316:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(5764);e.ArcUtils=class{static curveTo(t,e,r,i,n,s){const o=s[s.length-2],a=s[s.length-1]-e,l=o-t,h=i-e,u=r-t,c=Math.abs(a*u-l*h);if(c<1e-8||0===n)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;const d=a*a+l*l,p=h*h+u*u,f=a*h+l*u,g=n*Math.sqrt(d)/c,m=n*Math.sqrt(p)/c,v=g*f/d,y=m*f/p,_=g*u+m*l,x=g*h+m*a,b=l*(m+v),E=a*(m+v),T=u*(g+y),S=h*(g+y);return{cx:_+t,cy:x+e,radius:n,startAngle:Math.atan2(E-x,b-_),endAngle:Math.atan2(S-x,T-_),anticlockwise:l*h>u*a}}static arc(t,e,r,s,o,a,l,h,u){const c=l-a,d=n.curves._segmentsCount(Math.abs(c)*o,40*Math.ceil(Math.abs(c)/i.PI_2)),p=c/(2*d),f=2*p,g=Math.cos(p),m=Math.sin(p),v=d-1,y=v%1/v;for(let t=0;t<=v;++t){const e=p+a+f*(t+y*t),i=Math.cos(e),n=-Math.sin(e);u.push((g*i+m*n)*o+r,(g*-n+m*i)*o+s)}}}},6896:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BatchPart=class{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}},948:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5764);class n{static curveLength(t,e,r,i,n,s,o,a){let l=0,h=0,u=0,c=0,d=0,p=0,f=0,g=0,m=0,v=0,y=0,_=t,x=e;for(let b=1;b<=10;++b)h=b/10,u=h*h,c=u*h,d=1-h,p=d*d,f=p*d,g=f*t+3*p*h*r+3*d*u*n+c*o,m=f*e+3*p*h*i+3*d*u*s+c*a,v=_-g,y=x-m,_=g,x=m,l+=Math.sqrt(v*v+y*y);return l}static curveTo(t,e,r,s,o,a,l){const h=l[l.length-2],u=l[l.length-1];l.length-=2;const c=i.curves._segmentsCount(n.curveLength(h,u,t,e,r,s,o,a));let d=0,p=0,f=0,g=0,m=0;l.push(h,u);for(let i=1,n=0;i<=c;++i)n=i/c,d=1-n,p=d*d,f=p*d,g=n*n,m=g*n,l.push(f*h+3*p*n*t+3*d*g*r+m*o,f*u+3*p*n*e+3*d*g*s+m*a)}}e.BezierUtils=n},3548:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5764);class n{static curveLength(t,e,r,i,n,s){const o=t-2*r+n,a=e-2*i+s,l=2*r-2*t,h=2*i-2*e,u=4*(o*o+a*a),c=4*(o*l+a*h),d=l*l+h*h,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),g=2*u*f,m=2*Math.sqrt(d),v=c/f;return(g*p+f*c*(p-m)+(4*d*u-c*c)*Math.log((2*f+v+p)/(v+m)))/(4*g)}static curveTo(t,e,r,s,o){const a=o[o.length-2],l=o[o.length-1],h=i.curves._segmentsCount(n.curveLength(a,l,t,e,r,s));let u=0,c=0;for(let i=1;i<=h;++i){const n=i/h;u=a+(t-a)*n,c=l+(e-l)*n,o.push(u+(t+(r-t)*n-u)*n,c+(e+(s-e)*n-c)*n)}}}e.QuadraticUtils=n},152:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={build(t){const e=t.points;let r,n,s,o,a,l;if(t.type===i.SHAPES.CIRC){const e=t.shape;r=e.x,n=e.y,a=l=e.radius,s=o=0}else if(t.type===i.SHAPES.ELIP){const e=t.shape;r=e.x,n=e.y,a=e.width,l=e.height,s=o=0}else{const e=t.shape,i=e.width/2,h=e.height/2;r=e.x+i,n=e.y+h,a=l=Math.max(0,Math.min(e.radius,Math.min(i,h))),s=i-a,o=h-l}if(!(a>=0&&l>=0&&s>=0&&o>=0))return void(e.length=0);const h=Math.ceil(2.3*Math.sqrt(a+l)),u=8*h+(s?4:0)+(o?4:0);if(e.length=u,0===u)return;if(0===h)return e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=n+o,e[2]=e[4]=r-s,void(e[5]=e[7]=n-o);let c=0,d=4*h+(s?2:0)+2,p=d,f=u;{const t=s+a,i=o,l=r+t,h=r-t,u=n+i;if(e[c++]=l,e[c++]=u,e[--d]=u,e[--d]=h,o){const t=n-i;e[p++]=h,e[p++]=t,e[--f]=t,e[--f]=l}}for(let t=1;t<h;t++){const i=Math.PI/2*(t/h),u=s+Math.cos(i)*a,g=o+Math.sin(i)*l,m=r+u,v=r-u,y=n+g,_=n-g;e[c++]=m,e[c++]=y,e[--d]=y,e[--d]=v,e[p++]=v,e[p++]=_,e[--f]=_,e[--f]=m}{const t=o+l,i=r+s,a=r-s,h=n+t,u=n-t;e[c++]=i,e[c++]=h,e[--f]=u,e[--f]=i,s&&(e[c++]=a,e[c++]=h,e[--f]=u,e[--f]=a)}},triangulate(t,e){const r=t.points,n=e.points,s=e.indices;if(0===r.length)return;let o=n.length/2;const a=o;let l,h;if(t.type!==i.SHAPES.RREC){const e=t.shape;l=e.x,h=e.y}else{const e=t.shape;l=e.x+e.width/2,h=e.y+e.height/2}const u=t.matrix;n.push(t.matrix?u.a*l+u.c*h+u.tx:l,t.matrix?u.b*l+u.d*h+u.ty:h),o++,n.push(r[0],r[1]);for(let t=2;t<r.length;t+=2)n.push(r[t],r[t+1]),s.push(o++,a,o);s.push(a+1,a,o)}};e.buildCircle=n},2184:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(5764);function s(t,e,r,i,n,s,o,a){let l,h;o?(l=i,h=-r):(l=-i,h=r);const u=t-r*n+l,c=e-i*n+h,d=t+r*s+l,p=e+i*s+h;return a.push(u,c),a.push(d,p),2}function o(t,e,r,i,n,s,o,a){const l=r-t,h=i-e;let u=Math.atan2(l,h),c=Math.atan2(n-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);let d=u;const p=c-u,f=Math.abs(p),g=Math.sqrt(l*l+h*h),m=1+(15*f*Math.sqrt(g)/Math.PI>>0),v=p/m;if(d+=v,a){o.push(t,e),o.push(r,i);for(let r=1,i=d;r<m;r++,i+=v)o.push(t,e),o.push(t+Math.sin(i)*g,e+Math.cos(i)*g);o.push(t,e),o.push(n,s)}else{o.push(r,i),o.push(t,e);for(let r=1,i=d;r<m;r++,i+=v)o.push(t+Math.sin(i)*g,e+Math.cos(i)*g),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*m}e.buildLine=function(t,e){t.lineStyle.native?function(t,e){let r=0;const n=t.shape,s=t.points||n.points,o=n.type!==i.SHAPES.POLY||n.closeStroke;if(0===s.length)return;const a=e.points,l=e.indices,h=s.length/2,u=a.length/2;let c=u;for(a.push(s[0],s[1]),r=1;r<h;r++)a.push(s[2*r],s[2*r+1]),l.push(c,c+1),c++;o&&l.push(c,u)}(t,e):function(t,e){const r=t.shape;let a=t.points||r.points.slice();const l=e.closePointEps;if(0===a.length)return;const h=t.lineStyle,u=new i.Point(a[0],a[1]),c=new i.Point(a[a.length-2],a[a.length-1]),d=r.type!==i.SHAPES.POLY||r.closeStroke,p=Math.abs(u.x-c.x)<l&&Math.abs(u.y-c.y)<l;if(d){a=a.slice(),p&&(a.pop(),a.pop(),c.set(a[a.length-2],a[a.length-1]));const t=.5*(u.x+c.x),e=.5*(c.y+u.y);a.unshift(t,e),a.push(t,e)}const f=e.points,g=a.length/2;let m=a.length;const v=f.length/2,y=h.width/2,_=y*y,x=h.miterLimit*h.miterLimit;let b=a[0],E=a[1],T=a[2],S=a[3],w=0,A=0,M=-(E-S),R=b-T,P=0,C=0,O=Math.sqrt(M*M+R*R);M/=O,R/=O,M*=y,R*=y;const I=h.alignment,D=2*(1-I),B=2*I;d||(h.cap===n.LINE_CAP.ROUND?m+=o(b-M*(D-B)*.5,E-R*(D-B)*.5,b-M*D,E-R*D,b+M*B,E+R*B,f,!0)+2:h.cap===n.LINE_CAP.SQUARE&&(m+=s(b,E,M,R,D,B,!0,f))),f.push(b-M*D,E-R*D),f.push(b+M*B,E+R*B);for(let t=1;t<g-1;++t){b=a[2*(t-1)],E=a[2*(t-1)+1],T=a[2*t],S=a[2*t+1],w=a[2*(t+1)],A=a[2*(t+1)+1],M=-(E-S),R=b-T,O=Math.sqrt(M*M+R*R),M/=O,R/=O,M*=y,R*=y,P=-(S-A),C=T-w,O=Math.sqrt(P*P+C*C),P/=O,C/=O,P*=y,C*=y;const e=T-b,r=E-S,i=T-w,s=A-S,l=e*i+r*s,u=r*i-s*e,c=u<0;if(Math.abs(u)<.001*Math.abs(l)){f.push(T-M*D,S-R*D),f.push(T+M*B,S+R*B),l>=0&&(h.join===n.LINE_JOIN.ROUND?m+=o(T,S,T-M*D,S-R*D,T-P*D,S-C*D,f,!1)+4:m+=2,f.push(T-P*B,S-C*B),f.push(T+P*D,S+C*D));continue}const d=(-M+b)*(-R+S)-(-M+T)*(-R+E),p=(-P+w)*(-C+S)-(-P+T)*(-C+A),g=(e*p-i*d)/u,v=(s*d-r*p)/u,I=(g-T)*(g-T)+(v-S)*(v-S),F=T+(g-T)*D,N=S+(v-S)*D,L=T-(g-T)*B,k=S-(v-S)*B,U=c?D:B;I<=Math.min(e*e+r*r,i*i+s*s)+U*U*_?h.join===n.LINE_JOIN.BEVEL||I/_>x?(c?(f.push(F,N),f.push(T+M*B,S+R*B),f.push(F,N),f.push(T+P*B,S+C*B)):(f.push(T-M*D,S-R*D),f.push(L,k),f.push(T-P*D,S-C*D),f.push(L,k)),m+=2):h.join===n.LINE_JOIN.ROUND?c?(f.push(F,N),f.push(T+M*B,S+R*B),m+=o(T,S,T+M*B,S+R*B,T+P*B,S+C*B,f,!0)+4,f.push(F,N),f.push(T+P*B,S+C*B)):(f.push(T-M*D,S-R*D),f.push(L,k),m+=o(T,S,T-M*D,S-R*D,T-P*D,S-C*D,f,!1)+4,f.push(T-P*D,S-C*D),f.push(L,k)):(f.push(F,N),f.push(L,k)):(f.push(T-M*D,S-R*D),f.push(T+M*B,S+R*B),h.join===n.LINE_JOIN.ROUND?m+=c?o(T,S,T+M*B,S+R*B,T+P*B,S+C*B,f,!0)+2:o(T,S,T-M*D,S-R*D,T-P*D,S-C*D,f,!1)+2:h.join===n.LINE_JOIN.MITER&&I/_<=x&&(c?(f.push(L,k),f.push(L,k)):(f.push(F,N),f.push(F,N)),m+=2),f.push(T-P*D,S-C*D),f.push(T+P*B,S+C*B),m+=2)}b=a[2*(g-2)],E=a[2*(g-2)+1],T=a[2*(g-1)],S=a[2*(g-1)+1],M=-(E-S),R=b-T,O=Math.sqrt(M*M+R*R),M/=O,R/=O,M*=y,R*=y,f.push(T-M*D,S-R*D),f.push(T+M*B,S+R*B),d||(h.cap===n.LINE_CAP.ROUND?m+=o(T-M*(D-B)*.5,S-R*(D-B)*.5,T-M*D,S-R*D,T+M*B,S+R*B,f,!1)+2:h.cap===n.LINE_CAP.SQUARE&&(m+=s(T,S,M,R,D,B,!1,f)));const F=e.indices,N=n.curves.epsilon*n.curves.epsilon;for(let t=v;t<m+v-2;++t)b=f[2*t],E=f[2*t+1],T=f[2*(t+1)],S=f[2*(t+1)+1],w=f[2*(t+2)],A=f[2*(t+2)+1],Math.abs(b*(S-A)+T*(A-E)+w*(E-S))<N||F.push(t,t+1,t+2)}(t,e)}},6420:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);function n(t,e=!1){const r=t.length;if(r<6)return;let i=0;for(let e=0,n=t[r-2],s=t[r-1];e<r;e+=2){const r=t[e],o=t[e+1];i+=(r-n)*(o+s),n=r,s=o}if(!e&&i>0||e&&i<=0){const e=r/2;for(let i=e+e%2;i<r;i+=2){const e=r-i-2,n=r-i-1,s=i,o=i+1;[t[e],t[s]]=[t[s],t[e]],[t[n],t[o]]=[t[o],t[n]]}}}const s={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const s=t.holes,o=e.points,a=e.indices;if(r.length>=6){n(r,!1);const t=[];for(let e=0;e<s.length;e++){const i=s[e];n(i.points,!0),t.push(r.length/2),r=r.concat(i.points)}const e=i.utils.earcut(r,t,2);if(!e)return;const l=o.length/2;for(let t=0;t<e.length;t+=3)a.push(e[t]+l),a.push(e[t+1]+l),a.push(e[t+2]+l);for(let t=0;t<r.length;t++)o.push(r[t])}}};e.buildPoly=s},3852:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={build(t){const e=t.shape,r=e.x,i=e.y,n=e.width,s=e.height,o=t.points;o.length=0,n>=0&&s>=0&&o.push(r,i,r+n,i,r+n,i+s,r,i+s)},triangulate(t,e){const r=t.points,i=e.points;if(0===r.length)return;const n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};e.buildRectangle=r},8688:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(152);const n={build(t){i.buildCircle.build(t)},triangulate(t,e){i.buildCircle.triangulate(t,e)}};e.buildRoundedRectangle=n},4107:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(152),s=r(6420),o=r(3852),a=r(8688),l=r(6316),h=r(6896),u=r(948),c=r(2184),d=r(3548);const p={[i.SHAPES.POLY]:s.buildPoly,[i.SHAPES.CIRC]:n.buildCircle,[i.SHAPES.ELIP]:n.buildCircle,[i.SHAPES.RECT]:o.buildRectangle,[i.SHAPES.RREC]:a.buildRoundedRectangle};e.buildCircle=n.buildCircle,e.buildPoly=s.buildPoly,e.buildRectangle=o.buildRectangle,e.buildRoundedRectangle=a.buildRoundedRectangle,e.ArcUtils=l.ArcUtils,e.BatchPart=h.BatchPart,e.BezierUtils=u.BezierUtils,e.buildLine=c.buildLine,e.QuadraticUtils=d.QuadraticUtils,e.BATCH_POOL=[],e.DRAW_CALL_POOL=[],e.FILL_COMMANDS=p},7776:()=>{},9656:()=>{},1836:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648),n=r(1296);class s{constructor(t=1,e=0,r=0,i=1,n=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new n.Point;const r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e}applyInverse(t,e){e=e||new n.Point;const r=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return e.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,s=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this}setTransform(t,e,r,i,n,s,o,a,l){return this.a=Math.cos(o+l)*n,this.b=Math.sin(o+l)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),l=Math.atan2(r,e),h=Math.abs(a+l);return h<1e-5||Math.abs(i.PI_2-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*s),t}invert(){const t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new s}static get TEMP_MATRIX(){return new s}}e.Matrix=s},3368:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e,r=0,i=0){this._x=r,this._y=i,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new r(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}e.ObservablePoint=r},1296:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new r(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}e.Point=r},7328:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1836),n=r(3368);const s=class{constructor(){this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this.position=new n.ObservablePoint(this.onChange,this,0,0),this.scale=new n.ObservablePoint(this.onChange,this,1,1),this.pivot=new n.ObservablePoint(this.onChange,this,0,0),this.skew=new n.ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let o=s;o.IDENTITY=new s,e.Transform=o},7648:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=2*Math.PI,i=180/Math.PI,n=Math.PI/180;var s=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(s||{});e.DEG_TO_RAD=n,e.PI_2=r,e.RAD_TO_DEG=i,e.SHAPES=s},9971:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1836);const n=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],h=[],u=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];l.push(e);for(let r=0;r<16;r++){const i=u(n[t]*n[r]+o[t]*s[r]),l=u(s[t]*n[r]+a[t]*s[r]),h=u(n[t]*o[r]+o[t]*a[r]),c=u(s[t]*o[r]+a[t]*a[r]);for(let t=0;t<16;t++)if(n[t]===i&&s[t]===l&&o[t]===h&&a[t]===c){e.push(t);break}}}for(let t=0;t<16;t++){const e=new i.Matrix;e.set(n[t],s[t],o[t],a[t],0,0),h.push(e)}}();const c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>n[t],uY:t=>s[t],vX:t=>o[t],vY:t=>a[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>l[t][e],sub:(t,e)=>l[t][c.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?c.S:c.N:2*Math.abs(e)<=Math.abs(t)?t>0?c.E:c.W:e>0?t>0?c.SE:c.SW:t>0?c.NE:c.NW,matrixAppendRotationInv:(t,e,r=0,i=0)=>{const n=h[c.inv(e)];n.tx=r,n.ty=i,t.append(n)}};e.groupD8=c},3427:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9012),n=r(552),s=r(8956),o=r(8100),a=r(2352),l=r(9971);r(7776),r(9656);var h=r(1836),u=r(3368),c=r(1296),d=r(7328),p=r(7648);e.Circle=i.Circle,e.Ellipse=n.Ellipse,e.Polygon=s.Polygon,e.Rectangle=o.Rectangle,e.RoundedRectangle=a.RoundedRectangle,e.groupD8=l.groupD8,e.Matrix=h.Matrix,e.ObservablePoint=u.ObservablePoint,e.Point=c.Point,e.Transform=d.Transform,e.DEG_TO_RAD=p.DEG_TO_RAD,e.PI_2=p.PI_2,e.RAD_TO_DEG=p.RAD_TO_DEG,e.SHAPES=p.SHAPES},9012:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648),n=r(8100);class s{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=i.SHAPES.CIRC}clone(){return new s(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-t,n=this.y-e;return i*=i,n*=n,i+n<=r}getBounds(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}e.Circle=s},552:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648),n=r(8100);class s{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=i.SHAPES.ELIP}clone(){return new s(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,i=(e-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}e.Ellipse=s},8956:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648);class n{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let r=0,i=e.length;r<i;r++)t.push(e[r].x,e[r].y);e=t}this.points=e,this.type=i.SHAPES.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new n(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const i=this.points.length/2;for(let n=0,s=i-1;n<i;s=n++){const i=this.points[2*n],o=this.points[2*n+1],a=this.points[2*s],l=this.points[2*s+1];o>e!=l>e&&t<(e-o)/(l-o)*(a-i)+i&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce(((t,e)=>`${t}, ${e}`),"")}]`}}e.Polygon=n},8100:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648),n=r(1296);const s=[new n.Point,new n.Point,new n.Point,new n.Point];class o{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=i.SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new o(0,0,0,0)}clone(){return new o(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}const r=this.left,i=this.right,n=this.top,o=this.bottom;if(i<=r||o<=n)return!1;const a=s[0].set(t.left,t.top),l=s[1].set(t.left,t.bottom),h=s[2].set(t.right,t.top),u=s[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(0===c)return!1;if(e.apply(a,a),e.apply(l,l),e.apply(h,h),e.apply(u,u),Math.max(a.x,l.x,h.x,u.x)<=r||Math.min(a.x,l.x,h.x,u.x)>=i||Math.max(a.y,l.y,h.y,u.y)<=n||Math.min(a.y,l.y,h.y,u.y)>=o)return!1;const d=c*(l.y-a.y),p=c*(a.x-l.x),f=d*r+p*n,g=d*i+p*n,m=d*r+p*o,v=d*i+p*o;if(Math.max(f,g,m,v)<=d*a.x+p*a.y||Math.min(f,g,m,v)>=d*u.x+p*u.y)return!1;const y=c*(a.y-h.y),_=c*(h.x-a.x),x=y*r+_*n,b=y*i+_*n,E=y*r+_*o,T=y*i+_*o;return!(Math.max(x,b,E,T)<=y*a.x+_*a.y||Math.min(x,b,E,T)>=y*u.x+_*u.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=n-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}e.Rectangle=o},2352:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7648);class n{constructor(t=0,e=0,r=0,n=0,s=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=s,this.type=i.SHAPES.RREC}clone(){return new n(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let i=t-(this.x+r),n=e-(this.y+r);const s=r*r;if(i*i+n*n<=s)return!0;if(i=t-(this.x+this.width-r),i*i+n*n<=s)return!0;if(n=e-(this.y+this.height-r),i*i+n*n<=s)return!0;if(i=t-(this.x+r),i*i+n*n<=s)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}e.RoundedRectangle=n},1200:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(708);class s extends n.SimplePlane{constructor(t,e=10,r=10,n=10,s=10){super(i.Texture.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e,this._rightWidth=n,this._topHeight=r,this._bottomHeight=s,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(e,i)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const r=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}e.NineSlicePlane=s},8292:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6432);class s extends n.Mesh{constructor(t=i.Texture.EMPTY,e,r,s,o){const a=new n.MeshGeometry(e,r,s);a.getBuffer("aVertexPosition").static=!1;super(a,new n.MeshMaterial(t),null,o),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}e.SimpleMesh=s},708:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6432),s=r(7888);class o extends n.Mesh{constructor(t,e,r){super(new s.PlaneGeometry(t.width,t.height,e,r),new n.MeshMaterial(i.Texture.WHITE)),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:r}=this.shader.texture;!this.autoResize||t.width===e&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}e.SimplePlane=o},1416:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6432),s=r(1156);class o extends n.Mesh{constructor(t,e,r=0){const o=new s.RopeGeometry(t.height,e,r),a=new n.MeshMaterial(t);r>0&&(t.baseTexture.wrapMode=i.WRAP_MODES.REPEAT),super(o,a),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}e.SimpleRope=o},7888:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6432);class n extends i.MeshGeometry{constructor(t=100,e=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],r=[],i=[],n=this.segWidth-1,s=this.segHeight-1,o=this.width/n,a=this.height/s;for(let i=0;i<t;i++){const t=i%this.segWidth,l=i/this.segWidth|0;e.push(t*o,l*a),r.push(t/n,l/s)}const l=n*s;for(let t=0;t<l;t++){const e=t%n,r=t/n|0,s=r*this.segWidth+e,o=r*this.segWidth+e+1,a=(r+1)*this.segWidth+e,l=(r+1)*this.segWidth+e+1;i.push(s,o,a,o,l,a)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}e.PlaneGeometry=n},1156:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6432);class n extends i.MeshGeometry{constructor(t=200,e,r=0){super(new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1))),this.points=e,this._width=t,this.textureScale=r,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));const n=r.data,s=i.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;let o=0,a=t[0];const l=this._width*this.textureScale,h=t.length;for(let e=0;e<h;e++){const r=4*e;if(this.textureScale>0){const r=a.x-t[e].x,i=a.y-t[e].y,n=Math.sqrt(r*r+i*i);a=t[e],o+=n/l}else o=e/(h-1);n[r]=o,n[r+1]=0,n[r+2]=o,n[r+3]=1}let u=0;for(let t=0;t<h-1;t++){const e=2*t;s[u++]=e,s[u++]=e+1,s[u++]=e+2,s[u++]=e+2,s[u++]=e+1,s[u++]=e+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e,r=t[0],i=0,n=0;const s=this.buffers[0].data,o=t.length;for(let a=0;a<o;a++){const l=t[a],h=4*a;e=a<t.length-1?t[a+1]:l,n=-(e.x-r.x),i=e.y-r.y;let u=10*(1-a/(o-1));u>1&&(u=1);const c=Math.sqrt(i*i+n*n),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;i/=c,n/=c,i*=d,n*=d,s[h]=l.x+i,s[h+1]=l.y+n,s[h+2]=l.x-i,s[h+3]=l.y-n,r=l}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}e.RopeGeometry=n},4824:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(7888),n=r(1156),s=r(1200),o=r(8292),a=r(708),l=r(1416);e.PlaneGeometry=i.PlaneGeometry,e.RopeGeometry=n.RopeGeometry,e.NineSlicePlane=s.NineSlicePlane,e.SimpleMesh=o.SimpleMesh,e.SimplePlane=a.SimplePlane,e.SimpleRope=l.SimpleRope},4092:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(448);const o=new i.Point,a=new i.Polygon,l=class extends n.Container{constructor(t,e,r,n=i.DRAW_MODES.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||i.State.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=i.settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===i.DRAW_MODES.TRIANGLES&&e.length<2*l.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,u=n.ty,c=this.vertexData;for(let t=0;t<c.length/2;t++){const r=e[2*t],i=e[2*t+1];c[2*t]=s*r+a*i+h,c[2*t+1]=o*r+l*i+u}if(this._roundPixels){const t=i.settings.RESOLUTION;for(let e=0;e<c.length;++e)c[e]=Math.round(c[e]*t)/t}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new s.MeshBatchUvs(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);const e=this.geometry.getBuffer("aVertexPosition").data,r=a.points,i=this.geometry.getIndex().data,n=i.length,s=4===this.drawMode?3:1;for(let t=0;t+2<n;t+=s){const n=2*i[t],s=2*i[t+1],l=2*i[t+2];if(r[0]=e[n],r[1]=e[n+1],r[2]=e[s],r[3]=e[s+1],r[4]=e[l],r[5]=e[l+1],a.contains(o.x,o.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let h=l;h.BATCHABLE_SIZE=100,e.Mesh=h},448:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MeshBatchUvs=class{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}},3724:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);class n extends i.Geometry{constructor(t,e,r){super();const n=new i.Buffer(t),s=new i.Buffer(e,!0),o=new i.Buffer(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,i.TYPES.FLOAT).addAttribute("aTextureCoord",s,2,!1,i.TYPES.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}e.MeshGeometry=n},2488:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6100),s=r(4600);class o extends i.Shader{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:i.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(r,e.uniforms),super(e.program||i.Program.from(s.default,n.default),r),this._colorDirty=!1,this.uvMatrix=new i.TextureMatrix(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;i.utils.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}e.MeshMaterial=o},6432:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4092),n=r(448),s=r(3724),o=r(2488);e.Mesh=i.Mesh,e.MeshBatchUvs=n.MeshBatchUvs,e.MeshGeometry=s.MeshGeometry,e.MeshMaterial=o.MeshMaterial},6100:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"},4600:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n"},8784:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(1236);const o=new i.Matrix;n.DisplayObject.prototype._cacheAsBitmap=!1,n.DisplayObject.prototype._cacheData=null,n.DisplayObject.prototype._cacheAsBitmapResolution=null,n.DisplayObject.prototype._cacheAsBitmapMultisample=null;class a{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(n.DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new a),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),n.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},n.DisplayObject.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const t=this.filters[0].padding;r.pad(t)}r.ceil(i.settings.RESOLUTION);const n=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),l=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,u=i.RenderTexture.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${i.utils.uid()}`;this._cacheData.textureCacheId=c,i.BaseTexture.addToCache(u.baseTexture,c),i.Texture.addToCache(u,c);const d=this.transform.localTransform.copyTo(o).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:d,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(n,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const p=new s.Sprite(u);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)},n.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},n.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,a=t._projTransform;e.ceil(i.settings.RESOLUTION);const l=i.RenderTexture.create({width:e.width,height:e.height}),h=`cacheAsBitmap_${i.utils.uid()}`;this._cacheData.textureCacheId=h,i.BaseTexture.addToCache(l.baseTexture,h),i.Texture.addToCache(l,h);const u=o;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new s.Sprite(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-e.x/e.width,c.anchor.y=-e.y/e.height,c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)},n.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},n.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},n.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,i.BaseTexture.removeFromCache(this._cacheData.textureCacheId),i.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},e.CacheData=a},4928:(t,e,r)=>{"use strict";var i=r(4075);i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t,e){for(let e=0,r=this.children.length;e<r;e++)if(this.children[e].name===t)return this.children[e];if(e)for(let e=0,r=this.children.length;e<r;e++){const r=this.children[e];if(!r.getChildByName)continue;const i=r.getChildByName(t,!0);if(i)return i}return null}},7752:(t,e,r)=>{"use strict";var i=r(6428);r(4075).DisplayObject.prototype.getGlobalPosition=function(t=new i.Point,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},2475:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);e.ParticleBuffer=class{constructor(t,e,r){this.geometry=new i.Geometry,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||i.TYPES.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new i.Buffer(i.utils.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let t=0;t<this.dynamicProperties.length;++t){const r=this.dynamicProperties[t];r.offset=e,e+=r.size,this.dynamicStride+=r.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new i.Buffer(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let t=0;t<this.staticProperties.length;++t){const e=this.staticProperties[t];e.offset=n,n+=e.size,this.staticStride+=e.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new i.Buffer(this.staticData,!0,!1);for(let e=0;e<this.dynamicProperties.length;++e){const r=this.dynamicProperties[e];t.addAttribute(r.attributeName,this.dynamicBuffer,0,r.type===i.TYPES.UNSIGNED_BYTE,r.type,4*this.dynamicStride,4*r.offset)}for(let e=0;e<this.staticProperties.length;++e){const r=this.staticProperties[e];t.addAttribute(r.attributeName,this.staticBuffer,0,r.type===i.TYPES.UNSIGNED_BYTE,r.type,4*this.staticStride,4*r.offset)}}uploadDynamic(t,e,r){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,r,s.type===i.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,r){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,r,s.type===i.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}},4916:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075);class s extends n.Container{constructor(t=1500,e,r=16384,n=!1){super();r>16384&&(r=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=i.BLEND_MODES.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tint}set tint(t){this._tint=t,i.utils.hex2rgb(t,this.tintRgb)}render(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(()=>this.onChildrenChange(0)))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}e.ParticleContainer=s},9424:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(2475),s=r(3912),o=r(7936);class a extends i.ObjectRenderer{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new i.Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:i.TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=i.Shader.from(o.default,s.default,{}),this.state=i.State.for2d()}render(t){const e=t.children,r=t._maxSize,n=t._batchSize,s=this.renderer;let o=e.length;if(0===o)return;o>r&&!t.autoResize&&(o=r);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=i.utils.correctBlendMode(t.blendMode,h),s.state.set(this.state);const u=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=i.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let r=0,i=0;r<o;r+=n,i+=1){let l=o-r;l>n&&(l=n),i>=a.length&&a.push(this._generateOneMoreBuffer(t));const h=a[i];h.uploadDynamic(e,r,l);const c=t._bufferUpdateIDs[i]||0;d=d||h._updateID<c,d&&(h._updateID=t._updateID,h.uploadStatic(e,r,l)),s.geometry.bind(h.geometry),u.drawElements(u.TRIANGLES,6*l,u.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],r=t._maxSize,i=t._batchSize,s=t._properties;for(let t=0;t<r;t+=i)e.push(new n.ParticleBuffer(this.properties,s,i));return e}_generateOneMoreBuffer(t){const e=t._batchSize,r=t._properties;return new n.ParticleBuffer(this.properties,r,e)}uploadVertices(t,e,r,i,n,s){let o=0,a=0,l=0,h=0;for(let u=0;u<r;++u){const r=t[e+u],c=r._texture,d=r.scale.x,p=r.scale.y,f=c.trim,g=c.orig;f?(a=f.x-r.anchor.x*g.width,o=a+f.width,h=f.y-r.anchor.y*g.height,l=h+f.height):(o=g.width*(1-r.anchor.x),a=g.width*-r.anchor.x,l=g.height*(1-r.anchor.y),h=g.height*-r.anchor.y),i[s]=a*d,i[s+1]=h*p,i[s+n]=o*d,i[s+n+1]=h*p,i[s+2*n]=o*d,i[s+2*n+1]=l*p,i[s+3*n]=a*d,i[s+3*n+1]=l*p,s+=4*n}}uploadPosition(t,e,r,i,n,s){for(let o=0;o<r;o++){const r=t[e+o].position;i[s]=r.x,i[s+1]=r.y,i[s+n]=r.x,i[s+n+1]=r.y,i[s+2*n]=r.x,i[s+2*n+1]=r.y,i[s+3*n]=r.x,i[s+3*n+1]=r.y,s+=4*n}}uploadRotation(t,e,r,i,n,s){for(let o=0;o<r;o++){const r=t[e+o].rotation;i[s]=r,i[s+n]=r,i[s+2*n]=r,i[s+3*n]=r,s+=4*n}}uploadUvs(t,e,r,i,n,s){for(let o=0;o<r;++o){const r=t[e+o]._texture._uvs;r?(i[s]=r.x0,i[s+1]=r.y0,i[s+n]=r.x1,i[s+n+1]=r.y1,i[s+2*n]=r.x2,i[s+2*n+1]=r.y2,i[s+3*n]=r.x3,i[s+3*n+1]=r.y3,s+=4*n):(i[s]=0,i[s+1]=0,i[s+n]=0,i[s+n+1]=0,i[s+2*n]=0,i[s+2*n+1]=0,i[s+3*n]=0,i[s+3*n+1]=0,s+=4*n)}}uploadTint(t,e,r,n,s,o){for(let a=0;a<r;++a){const r=t[e+a],l=r._texture.baseTexture.alphaMode>0,h=r.alpha,u=h<1&&l?i.utils.premultiplyTint(r._tintRGB,h):r._tintRGB+(255*h<<24);n[o]=u,n[o+s]=u,n[o+2*s]=u,n[o+3*s]=u,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}a.extension={name:"particle",type:i.ExtensionType.RendererPlugin},i.extensions.add(a),e.ParticleRenderer=a},956:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4916),n=r(9424);e.ParticleContainer=i.ParticleContainer,e.ParticleRenderer=n.ParticleRenderer},3912:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}"},7936:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n"},484:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(8804),o=r(6363);function a(t,e){let r=!1;if(t?._textures?.length)for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof i.Texture){const i=t._textures[n].baseTexture;e.includes(i)||(e.push(i),r=!0)}return r}function l(t,e){if(t.baseTexture instanceof i.BaseTexture){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function h(t,e){if(t._texture&&t._texture instanceof i.Texture){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function u(t,e){return e instanceof s.Text&&(e.updateText(!0),!0)}function c(t,e){if(e instanceof s.TextStyle){const t=e.toFontString();return s.TextMetrics.measureFont(t),!0}return!1}function d(t,e){if(t instanceof s.Text){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function p(t,e){return t instanceof s.TextStyle&&(e.includes(t)||e.push(t),!0)}const f=class{constructor(t){this.limiter=new o.CountLimiter(f.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(d),this.registerFindHook(p),this.registerFindHook(a),this.registerFindHook(l),this.registerFindHook(h),this.registerUploadHook(u),this.registerUploadHook(c)}upload(t){return new Promise((e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,i.Ticker.system.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY))):e()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)i.Ticker.system.addOnce(this.tick,this,i.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&i.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let g=f;g.uploadsPerFrame=4,e.BasePrepare=g},6363:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CountLimiter=class{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}},296:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(7550),s=r(484);function o(t,e){return e instanceof i.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function a(t,e){if(!(e instanceof n.Graphics))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:i}=r;for(let e=0;e<i.length;e++){const{texture:r}=i[e].style;r&&o(t,r.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function l(t,e){return t instanceof n.Graphics&&(e.push(t),!0)}class h extends s.BasePrepare{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(l),this.registerUploadHook(o),this.registerUploadHook(a)}}h.extension={name:"prepare",type:i.ExtensionType.RendererSystem},i.extensions.add(h),e.Prepare=h},4840:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TimeLimiter=class{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}},4332:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(3199);var i=r(484),n=r(6363),s=r(296),o=r(4840);e.BasePrepare=i.BasePrepare,e.CountLimiter=n.CountLimiter,e.Prepare=s.Prepare,e.TimeLimiter=o.TimeLimiter},3199:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(484);Object.defineProperties(i.settings,{UPLOADS_PER_FRAME:{get:()=>n.BasePrepare.uploadsPerFrame,set(t){i.utils.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),n.BasePrepare.uploadsPerFrame=t}}}),Object.defineProperty(e,"settings",{enumerable:!0,get:function(){return i.settings}})},8420:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,i,n,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,c=h.length;u<c;u++)h[u][l](t,e,r,i,n,s,o,a);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}}),e.Runner=r},3756:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8420);e.Runner=i.Runner},1516:()=>{},560:()=>{},3180:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};e.BrowserAdapter=r},4648:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6668);e.default=i.default},6668:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=/iPhone/i,i=/iPod/i,n=/iPad/i,s=/\biOS-universal(?:.+)Mac\b/i,o=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,h=/Silk/i,u=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,d=/BlackBerry/i,p=/BB10/i,f=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,v=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};e.default=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var y=e.userAgent,_=y.split("[FBAN");void 0!==_[1]&&(y=_[0]),void 0!==(_=y.split("Twitter"))[1]&&(y=_[0]);var x=function(t){return function(e){return e.test(t)}}(y),b={apple:{phone:x(r)&&!x(u),ipod:x(i),tablet:!x(r)&&(x(n)||v(e))&&!x(u),universal:x(s),device:(x(r)||x(i)||x(n)||x(s)||v(e))&&!x(u)},amazon:{phone:x(l),tablet:!x(l)&&x(h),device:x(l)||x(h)},android:{phone:!x(u)&&x(l)||!x(u)&&x(o),tablet:!x(u)&&!x(l)&&!x(o)&&(x(h)||x(a)),device:!x(u)&&(x(l)||x(h)||x(o)||x(a))||x(/\bokhttp\b/i)},windows:{phone:x(u),tablet:x(c),device:x(u)||x(c)},other:{blackberry:x(d),blackberry10:x(p),opera:x(f),firefox:x(m),chrome:x(g),device:x(d)||x(p)||x(f)||x(m)||x(g)},any:!1,phone:!1,tablet:!1};return b.any=b.apple.device||b.android.device||b.windows.device||b.other.device,b.phone=b.apple.phone||b.android.phone||b.windows.phone,b.tablet=b.apple.tablet||b.android.tablet||b.windows.tablet,b}},2424:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3180);r(1516),r(560);var n=r(9648),s=r(6468);e.BrowserAdapter=i.BrowserAdapter,e.settings=n.settings,e.isMobile=s.isMobile},9648:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={ADAPTER:r(3180).BrowserAdapter,RESOLUTION:1,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};e.settings=i},6468:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(4648);const i=r(6668).default(globalThis.navigator);e.isMobile=i},9216:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1236);class s extends n.Sprite{constructor(t,e=!0){super(t[0]instanceof i.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(i.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(i.Ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){let r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];const i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let r=0;r<t.length;++r)e.push(i.Texture.from(t[r]));return new s(e)}static fromImages(t){const e=[];for(let r=0;r<t.length;++r)e.push(i.Texture.from(t[r]));return new s(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof i.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(i.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(i.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}}e.AnimatedSprite=s},6949:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9216);e.AnimatedSprite=i.AnimatedSprite},6864:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1236);const s=new i.Point;class o extends n.Sprite{constructor(t,e=100,r=100){super(t),this.tileTransform=new i.Transform,this._width=e,this._height=r,this.uvMatrix=this.texture.uvMatrix||new i.TextureMatrix(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)}getLocalBounds(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,s);const e=this._width,r=this._height,i=-e*this.anchor._x;if(s.x>=i&&s.x<i+e){const t=-r*this.anchor._y;if(s.y>=t&&s.y<t+r)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const r=t instanceof i.Texture?t:i.Texture.from(t,e);return new o(r,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}e.TilingSprite=o},8648:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(6656),s=r(9396),o=r(1880),a=r(32),l=r(9792);const h=new i.Matrix;class u extends i.ObjectRenderer{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new i.QuadUv,this.state=i.State.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=i.Shader.from(a.default,l.default,e),this.shader=t.context.webGLVersion>1?i.Shader.from(s.default,n.default,e):i.Shader.from(a.default,o.default,e)}render(t){const e=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=r.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,r.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,c=t.tileTransform.localTransform,d=t.uvMatrix;let p=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;p&&(l._glTextures[e.CONTEXT_UID]?p=l.wrapMode!==i.WRAP_MODES.CLAMP:l.wrapMode===i.WRAP_MODES.CLAMP&&(l.wrapMode=i.WRAP_MODES.REPEAT));const f=p?this.simpleShader:this.shader,g=a.width,m=a.height,v=t._width,y=t._height;h.set(c.a*g/v,c.b*g/y,c.c*m/v,c.d*m/y,c.tx/v,c.ty/y),h.invert(),p?h.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=h.toArray(!0),f.uniforms.uColor=i.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,u),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,e.shader.bind(f),e.geometry.bind(r),this.state.blendMode=i.utils.correctBlendMode(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}u.extension={name:"tilingSprite",type:i.ExtensionType.RendererPlugin},i.extensions.add(u),e.TilingSpriteRenderer=u},2664:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6864),n=r(8648);e.TilingSprite=i.TilingSprite,e.TilingSpriteRenderer=n.TilingSpriteRenderer},1880:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n"},32:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"},9792:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n"},6656:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n"},9396:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"},2192:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075);const s=new i.Point,o=new Uint16Array([0,1,2,0,2,3]);class a extends n.Container{constructor(t){super(),this._anchor=new i.ObservablePoint(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||i.Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=o,this.pluginName="batch",this.isSprite=!0,this._roundPixels=i.settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=i.utils.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=i.utils.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,l=e.ty,h=this.vertexData,u=t.trim,c=t.orig,d=this._anchor;let p=0,f=0,g=0,m=0;if(u?(f=u.x-d._x*c.width,p=f+u.width,m=u.y-d._y*c.height,g=m+u.height):(f=-d._x*c.width,p=f+c.width,m=-d._y*c.height,g=m+c.height),h[0]=r*f+s*m+a,h[1]=o*m+n*f+l,h[2]=r*p+s*m+a,h[3]=o*m+n*p+l,h[4]=r*p+s*g+a,h[5]=o*g+n*p+l,h[6]=r*f+s*g+a,h[7]=o*g+n*f+l,this._roundPixels){const t=i.settings.RESOLUTION;for(let e=0;e<h.length;++e)h[e]=Math.round(h[e]*t)/t}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,l=n.d,h=n.tx,u=n.ty,c=-i._x*r.width,d=c+r.width,p=-i._y*r.height,f=p+r.height;e[0]=s*c+a*p+h,e[1]=l*p+o*c+u,e[2]=s*d+a*p+h,e[3]=l*p+o*d+u,e[4]=s*d+a*f+h,e[5]=l*f+o*d+u,e[6]=s*c+a*f+h,e[7]=l*f+o*c+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new n.Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,s);const e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x;let n=0;return s.x>=i&&s.x<i+e&&(n=-r*this.anchor.y,s.y>=n&&s.y<n+r)}destroy(t){super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;if("boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof i.Texture?t:i.Texture.from(t,e);return new a(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=i.utils.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=i.utils.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||i.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}e.Sprite=a},1236:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2192);e.Sprite=i.Sprite},4676:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof i.Texture?t:null,this.baseTexture=t instanceof i.BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=i.utils.getResolutionOfUrl(t,null);return null===r&&(r=parseFloat(e??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise((t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=n.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(t){let e=t;const r=n.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const t=this._frameKeys[e],r=this._frames[t],n=r.frame;if(n){let e=null,s=null;const o=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,a=new i.Rectangle(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);e=r.rotated?new i.Rectangle(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new i.Rectangle(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(s=new i.Rectangle(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[t]=new i.Texture(this.baseTexture,e,a,s,r.rotated?2:0,r.anchor),i.Texture.addToCache(this.textures[t],t)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const i=t[e][r];this.animations[e].push(this.textures[i])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*n.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(t=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let s=n;s.BATCH_SIZE=1e3,e.Spritesheet=s},1148:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4676),n=r(2832);e.Spritesheet=i.Spritesheet,e.spritesheetAsset=n.spritesheetAsset},2832:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5896),n=r(6428),s=r(4676);const o=["jpg","png","jpeg","avif","webp"];function a(t,e,r){const i={};if(t.forEach((t=>{i[t]=e})),Object.keys(e.textures).forEach((t=>{i[t]=e.textures[t]})),!r){const r=n.utils.path.dirname(t[0]);e.linkedSheets.forEach(((t,n)=>{const s=a([`${r}/${e.data.meta.related_multi_packs[n]}`],t,!0);Object.assign(i,s)}))}return i}const l={extension:n.ExtensionType.Asset,cache:{test:t=>t instanceof s.Spritesheet,getCacheableAssets:(t,e)=>a(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),i=e.pop();return"json"===r&&o.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(n.settings.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:n.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal},testParse:async(t,e)=>".json"===n.utils.path.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,r){let o=n.utils.path.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a=o+t.meta.image;a=i.copySearchParams(a,e.src);const l=(await r.load([a]))[a],h=new s.Spritesheet(l.baseTexture,t,e.src);await h.parse();const u=t?.meta?.related_multi_packs;if(Array.isArray(u)){const t=[];for(const n of u){if("string"!=typeof n)continue;let s=o+n;e.data?.ignoreMultiPack||(s=i.copySearchParams(s,e.src),t.push(r.load({src:s,data:{ignoreMultiPack:!0}})))}const n=await Promise.all(t);h.linkedSheets=n,n.forEach((t=>{t.linkedSheets=[h].concat(h.linkedSheets.filter((e=>e!==t)))}))}return h},unload(t){t.destroy(!0)}}};n.extensions.add(l),e.spritesheetAsset=l},9588:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(8804),s=r(9744),o=r(6688);r(7804);var a=r(9220),l=r(380),h=r(3276);const u=class{constructor(t,e,r){const[n]=t.info,[s]=t.common,[o]=t.page,[a]=t.distanceField,l=i.utils.getResolutionOfUrl(o.file),h={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=h;for(let r=0;r<t.page.length;r++){const{id:n,file:s}=t.page[r];h[n]=e instanceof Array?e[r]:e[s],a?.fieldType&&"none"!==a.fieldType&&(h[n].baseTexture.alphaMode=i.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,h[n].baseTexture.mipmap=i.MIPMAP_MODES.OFF)}for(let e=0;e<t.char.length;e++){const{id:r,page:n}=t.char[e];let{x:s,y:o,width:a,height:u,xoffset:c,yoffset:d,xadvance:p}=t.char[e];s/=l,o/=l,a/=l,u/=l,c/=l,d/=l,p/=l;const f=new i.Rectangle(s+h[n].frame.x/l,o+h[n].frame.y/l,a,u);this.chars[r]={xOffset:c,yOffset:d,xAdvance:p,kerning:{},texture:new i.Texture(h[n].baseTexture,f),page:n}}for(let e=0;e<t.kerning.length;e++){let{first:r,second:i,amount:n}=t.kerning[e];r/=l,i/=l,n/=l,this.chars[i]&&(this.chars[i].kerning[r]=n)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof s.BitmapFontData)n=t;else{const e=o.autoDetectFormat(t);if(!e)throw new Error("Unrecognized data format for font.");n=e.parse(t)}e instanceof i.Texture&&(e=[e]);const a=new u(n,e,r);return u.available[a.font]=a,a}static uninstall(t){const e=u.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete u.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:o,padding:c,resolution:d,textureWidth:p,textureHeight:f,...g}=Object.assign({},u.defaultOptions,r),m=a.resolveCharacters(o),v=e instanceof n.TextStyle?e:new n.TextStyle(e),y=p,_=new s.BitmapFontData;_.info[0]={face:v.fontFamily,size:v.fontSize},_.common[0]={lineHeight:v.fontSize};let x,b,E,T=0,S=0,w=0;const A=[],M=[];for(let t=0;t<m.length;t++){x||(x=i.settings.ADAPTER.createCanvas(),x.width=p,x.height=f,b=x.getContext("2d"),E=new i.BaseTexture(x,{resolution:d,...g}),A.push(E),M.push(new i.Texture(E)),_.page.push({id:M.length-1,file:""}));const e=m[t],r=n.TextMetrics.measureText(e,v,!1,x),s=r.width,o=Math.ceil(r.height),a=Math.ceil(("italic"===v.fontStyle?2:1)*s);if(S>=f-o*d){if(0===S)throw new Error(`[BitmapFont] textureHeight ${f}px is too small (fontFamily: '${v.fontFamily}', fontSize: ${v.fontSize}px, char: '${e}')`);--t,x=null,b=null,E=null,S=0,T=0,w=0;continue}if(w=Math.max(o+r.fontProperties.descent,w),a*d+T>=y){if(0===T)throw new Error(`[BitmapFont] textureWidth ${p}px is too small (fontFamily: '${v.fontFamily}', fontSize: ${v.fontSize}px, char: '${e}')`);--t,S+=w*d,S=Math.ceil(S),T=0,w=0;continue}l.drawGlyph(x,b,r,T,S,d,v);const u=h.extractCharCode(r.text);_.char.push({id:u,page:M.length-1,x:T/d,y:S/d,width:a,height:o,xoffset:0,yoffset:0,xadvance:s-(v.dropShadow?v.dropShadowDistance:0)-(v.stroke?v.strokeThickness:0)}),T+=(a+2*c)*d,T=Math.ceil(T)}for(let t=0,e=m.length;t<e;t++){const r=m[t];for(let t=0;t<e;t++){const e=m[t],i=b.measureText(r).width,n=b.measureText(e).width,s=b.measureText(r+e).width-(i+n);s&&_.kerning.push({first:h.extractCharCode(r),second:h.extractCharCode(e),amount:s})}}const R=new u(_,M,!0);return void 0!==u.available[t]&&u.uninstall(t),u.available[t]=R,R}};let c=u;c.ALPHA=[["a","z"],["A","Z"]," "],c.NUMERIC=[["0","9"]],c.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],c.ASCII=[[" ","~"]],c.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:u.ALPHANUMERIC},c.available={},e.BitmapFont=c},9744:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BitmapFontData=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}},8892:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(4075),s=r(6432),o=r(9588),a=r(3916),l=r(3528);r(7804);var h=r(9260),u=r(3276);const c=[],d=[],p=[],f=class extends n.Container{constructor(t,e={}){super(),this._tint=16777215;const{align:r,tint:n,maxWidth:s,letterSpacing:a,fontName:l,fontSize:h}=Object.assign({},f.styleDefaults,e);if(!o.BitmapFont.available[l])throw new Error(`Missing BitmapFont "${l}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=n,this._font=void 0,this._fontName=l,this._fontSize=h,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new i.ObservablePoint((()=>{this.dirty=!0}),this,0,0),this._roundPixels=i.settings.ROUND_PIXELS,this.dirty=!0,this._resolution=i.settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=o.BitmapFont.available[this._fontName],e=this.fontSize,r=e/t.size,n=new i.Point,f=[],g=[],m=[],v=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",y=h.splitTextToCharacters(v),_=this._maxWidth*t.size/e,x="none"===t.distanceFieldType?c:d;let b=null,E=0,T=0,S=0,w=-1,A=0,M=0,R=0,P=0;for(let e=0;e<y.length;e++){const r=y[e],s=u.extractCharCode(r);if(/(?:\s)/.test(r)&&(w=e,A=E,P++),"\r"===r||"\n"===r){g.push(E),m.push(-1),T=Math.max(T,E),++S,++M,n.x=0,n.y+=t.lineHeight,b=null,P=0;continue}const o=t.chars[s];if(!o)continue;b&&o.kerning[b]&&(n.x+=o.kerning[b]);const a=p.pop()||{texture:i.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new i.Point};a.texture=o.texture,a.line=S,a.charCode=s,a.position.x=Math.round(n.x+o.xOffset+this._letterSpacing/2),a.position.y=Math.round(n.y+o.yOffset),a.prevSpaces=P,f.push(a),E=a.position.x+Math.max(o.xAdvance-o.xOffset,o.texture.orig.width),n.x+=o.xAdvance+this._letterSpacing,R=Math.max(R,o.yOffset+o.texture.height),b=s,-1!==w&&_>0&&n.x>_&&(++M,i.utils.removeItems(f,1+w-M,1+e-w),e=w,w=-1,g.push(A),m.push(f.length>0?f[f.length-1].prevSpaces:0),T=Math.max(T,A),S++,n.x=0,n.y+=t.lineHeight,b=null,P=0)}const C=y[y.length-1];"\r"!==C&&"\n"!==C&&(/(?:\s)/.test(C)&&(E=A),g.push(E),T=Math.max(T,E),m.push(-1));const O=[];for(let t=0;t<=S;t++){let e=0;"right"===this._align?e=T-g[t]:"center"===this._align?e=(T-g[t])/2:"justify"===this._align&&(e=m[t]<0?0:(T-g[t])/m[t]),O.push(e)}const I=f.length,D={},B=[],F=this._activePagesMeshData;x.push(...F);for(let e=0;e<I;e++){const r=f[e].texture,n=r.baseTexture.uid;if(!D[n]){let e=x.pop();if(!e){const r=new s.MeshGeometry;let n,o;"none"===t.distanceFieldType?(n=new s.MeshMaterial(i.Texture.EMPTY),o=i.BLEND_MODES.NORMAL):(n=new s.MeshMaterial(i.Texture.EMPTY,{program:i.Program.from(l.default,a.default),uniforms:{uFWidth:0}}),o=i.BLEND_MODES.NORMAL_NPM);const h=new s.Mesh(r,n);h.blendMode=o,e={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:h,vertices:null,uvs:null,indices:null}}e.index=0,e.indexCount=0,e.vertexCount=0,e.uvsCount=0,e.total=0;const{_textureCache:o}=this;o[n]=o[n]||new i.Texture(r.baseTexture),e.mesh.texture=o[n],e.mesh.tint=this._tint,B.push(e),D[n]=e}D[n].total++}for(let t=0;t<F.length;t++)B.includes(F[t])||this.removeChild(F[t].mesh);for(let t=0;t<B.length;t++)B[t].mesh.parent!==this&&this.addChild(B[t].mesh);this._activePagesMeshData=B;for(const t in D){const e=D[t],r=e.total;if(!(e.indices?.length>6*r)||e.vertices.length<2*s.Mesh.BATCHABLE_SIZE)e.vertices=new Float32Array(8*r),e.uvs=new Float32Array(8*r),e.indices=new Uint16Array(6*r);else{const t=e.total,r=e.vertices;for(let e=4*t*2;e<r.length;e++)r[e]=0}e.mesh.size=6*r}for(let t=0;t<I;t++){const e=f[t];let i=e.position.x+O[e.line]*("justify"===this._align?e.prevSpaces:1);this._roundPixels&&(i=Math.round(i));const n=i*r,s=e.position.y*r,o=e.texture,a=D[o.baseTexture.uid],l=o.frame,h=o._uvs,u=a.index++;a.indices[6*u+0]=0+4*u,a.indices[6*u+1]=1+4*u,a.indices[6*u+2]=2+4*u,a.indices[6*u+3]=0+4*u,a.indices[6*u+4]=2+4*u,a.indices[6*u+5]=3+4*u,a.vertices[8*u+0]=n,a.vertices[8*u+1]=s,a.vertices[8*u+2]=n+l.width*r,a.vertices[8*u+3]=s,a.vertices[8*u+4]=n+l.width*r,a.vertices[8*u+5]=s+l.height*r,a.vertices[8*u+6]=n,a.vertices[8*u+7]=s+l.height*r,a.uvs[8*u+0]=h.x0,a.uvs[8*u+1]=h.y0,a.uvs[8*u+2]=h.x1,a.uvs[8*u+3]=h.y1,a.uvs[8*u+4]=h.x2,a.uvs[8*u+5]=h.y2,a.uvs[8*u+6]=h.x3,a.uvs[8*u+7]=h.y3}this._textWidth=T*r,this._textHeight=(n.y+t.lineHeight)*r;for(const t in D){const e=D[t];if(0!==this.anchor.x||0!==this.anchor.y){let t=0;const r=this._textWidth*this.anchor.x,i=this._textHeight*this.anchor.y;for(let n=0;n<e.total;n++)e.vertices[t++]-=r,e.vertices[t++]-=i,e.vertices[t++]-=r,e.vertices[t++]-=i,e.vertices[t++]-=r,e.vertices[t++]-=i,e.vertices[t++]-=r,e.vertices[t++]-=i}this._maxLineHeight=R*r;const i=e.mesh.geometry.getBuffer("aVertexPosition"),n=e.mesh.geometry.getBuffer("aTextureCoord"),s=e.mesh.geometry.getIndex();i.data=e.vertices,n.data=e.uvs,s.data=e.indices,i.update(),n.update(),s.update()}for(let t=0;t<f.length;t++)p.push(f[t]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:i}=o.BitmapFont.available[this._fontName];if("none"!==r){const{a:r,b:n,c:s,d:o}=this.worldTransform,a=Math.sqrt(r*r+n*n),l=Math.sqrt(s*s+o*o),h=(Math.abs(a)+Math.abs(l))/2,u=this.fontSize/i,c=t._view.resolution;for(const t of this._activePagesMeshData)t.mesh.shader.uniforms.uFWidth=h*e*u*c}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=o.BitmapFont.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!o.BitmapFont.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??o.BitmapFont.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r="none"===o.BitmapFont.available[this._fontName].distanceFieldType?c:d;r.push(...this._activePagesMeshData);for(const t of this._activePagesMeshData)this.removeChild(t.mesh);this._activePagesMeshData=[],r.filter((t=>e[t.mesh.texture.baseTexture.uid])).forEach((t=>{t.mesh.texture=i.Texture.EMPTY}));for(const t in e){e[t].destroy(),delete e[t]}this._font=null,this._textureCache=null,super.destroy(t)}};let g=f;g.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e.BitmapText=g},6440:()=>{},8736:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9744);e.TextFormat=class{static test(t){return"string"==typeof t&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const t in e){const i=e[t].match(/^[a-z]+/gm)[0],n=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const t in n){const e=n[t].split("="),r=e[0],i=e[1].replace(/"/gm,""),o=parseFloat(i),a=isNaN(o)?i:o;s[r]=a}r[i].push(s)}const n=new i.BitmapFontData;return r.info.forEach((t=>n.info.push({face:t.face,size:parseInt(t.size,10)}))),r.common.forEach((t=>n.common.push({lineHeight:parseInt(t.lineHeight,10)}))),r.page.forEach((t=>n.page.push({id:parseInt(t.id,10),file:t.file}))),r.char.forEach((t=>n.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)}))),r.kerning.forEach((t=>n.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)}))),r.distanceField.forEach((t=>n.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType}))),n}}},8920:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9744);e.XMLFormat=class{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")}static parse(t){const e=new i.BitmapFontData,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let t=0;t<r.length;t++)e.info.push({face:r[t].getAttribute("face"),size:parseInt(r[t].getAttribute("size"),10)});for(let t=0;t<n.length;t++)e.common.push({lineHeight:parseInt(n[t].getAttribute("lineHeight"),10)});for(let t=0;t<s.length;t++)e.page.push({id:parseInt(s[t].getAttribute("id"),10)||0,file:s[t].getAttribute("file")});for(let t=0;t<o.length;t++){const r=o[t];e.char.push({id:parseInt(r.getAttribute("id"),10),page:parseInt(r.getAttribute("page"),10)||0,x:parseInt(r.getAttribute("x"),10),y:parseInt(r.getAttribute("y"),10),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10),xoffset:parseInt(r.getAttribute("xoffset"),10),yoffset:parseInt(r.getAttribute("yoffset"),10),xadvance:parseInt(r.getAttribute("xadvance"),10)})}for(let t=0;t<a.length;t++)e.kerning.push({first:parseInt(a[t].getAttribute("first"),10),second:parseInt(a[t].getAttribute("second"),10),amount:parseInt(a[t].getAttribute("amount"),10)});for(let t=0;t<l.length;t++)e.distanceField.push({fieldType:l[t].getAttribute("fieldType"),distanceRange:parseInt(l[t].getAttribute("distanceRange"),10)});return e}}},4632:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(8920);e.XMLStringFormat=class{static test(t){return!("string"!=typeof t||!t.includes("<font>"))&&n.XMLFormat.test(i.settings.ADAPTER.parseXML(t))}static parse(t){return n.XMLFormat.parse(i.settings.ADAPTER.parseXML(t))}}},6688:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8736),n=r(8920),s=r(4632);const o=[i.TextFormat,n.XMLFormat,s.XMLStringFormat];e.TextFormat=i.TextFormat,e.XMLFormat=n.XMLFormat,e.XMLStringFormat=s.XMLStringFormat,e.autoDetectFormat=function(t){for(let e=0;e<o.length;e++)if(o[e].test(t))return o[e];return null}},420:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9588),n=r(9744),s=r(8892);r(6440);var o=r(6688),a=r(4360),l=r(8736),h=r(8920),u=r(4632);e.BitmapFont=i.BitmapFont,e.BitmapFontData=n.BitmapFontData,e.BitmapText=s.BitmapText,e.autoDetectFormat=o.autoDetectFormat,e.loadBitmapFont=a.loadBitmapFont,e.TextFormat=l.TextFormat,e.XMLFormat=h.XMLFormat,e.XMLStringFormat=u.XMLStringFormat},4360:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5896),n=r(6428),s=r(9588);r(6688);var o=r(8736),a=r(4632);const l=[".xml",".fnt"],h={extension:{type:n.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal},test:t=>l.includes(n.utils.path.extname(t).toLowerCase()),testParse:async t=>o.TextFormat.test(t)||a.XMLStringFormat.test(t),async parse(t,e,r){const l=o.TextFormat.test(t)?o.TextFormat.parse(t):a.XMLStringFormat.parse(t),{src:h}=e,{page:u}=l,c=[];for(let t=0;t<u.length;++t){const e=u[t].file;let r=n.utils.path.join(n.utils.path.dirname(h),e);r=i.copySearchParams(r,h),c.push(r)}const d=await r.load(c),p=c.map((t=>d[t]));return s.BitmapFont.install(l,p,!0)},load:async(t,e)=>(await n.settings.ADAPTER.fetch(t)).text(),unload(t){t.destroy()}};n.extensions.add(h),e.loadBitmapFont=h},3916:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"},3528:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n"},380:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(3604);e.drawGlyph=function(t,e,r,s,o,a,l){const h=r.text,u=r.fontProperties;e.translate(s,o),e.scale(a,a);const c=l.strokeThickness/2,d=-l.strokeThickness/2;if(e.font=l.toFontString(),e.lineWidth=l.strokeThickness,e.textBaseline=l.textBaseline,e.lineJoin=l.lineJoin,e.miterLimit=l.miterLimit,e.fillStyle=n.generateFillStyle(t,e,l,a,[h],r),e.strokeStyle=l.stroke,l.dropShadow){const t=l.dropShadowColor,r=i.utils.hex2rgb("number"==typeof t?t:i.utils.string2hex(t)),n=l.dropShadowBlur*a,s=l.dropShadowDistance*a;e.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${l.dropShadowAlpha})`,e.shadowBlur=n,e.shadowOffsetX=Math.cos(l.dropShadowAngle)*s,e.shadowOffsetY=Math.sin(l.dropShadowAngle)*s}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;l.stroke&&l.strokeThickness&&e.strokeText(h,c,d+r.lineHeight-u.descent),l.fill&&e.fillText(h,c,d+r.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}},3276:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractCharCode=function(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}},3604:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8804);e.generateFillStyle=function(t,e,r,n,s,o){const a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];let l;const h=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=t.width/n-h-2*u,d=t.height/n-h-2*u,p=a.slice(),f=r.fillGradientStops.slice();if(!f.length){const t=p.length+1;for(let e=1;e<t;++e)f.push(e/t)}if(p.unshift(a[0]),f.unshift(0),p.push(a[a.length-1]),f.push(1),r.fillGradientType===i.TEXT_GRADIENT.LINEAR_VERTICAL){l=e.createLinearGradient(c/2,u,c/2,d+u);let t=0;const i=(o.fontProperties.fontSize+r.strokeThickness)/d;for(let e=0;e<s.length;e++){const r=o.lineHeight*e;for(let e=0;e<p.length;e++){let n=0;n="number"==typeof f[e]?f[e]:e/p.length;const s=r/d+n*i;let o=Math.max(t,s);o=Math.min(o,1),l.addColorStop(o,p[e]),t=o}}}else{l=e.createLinearGradient(u,d/2,c+u,d/2);const t=p.length+1;let r=1;for(let e=0;e<p.length;e++){let i;i="number"==typeof f[e]?f[e]:r/t,l.addColorStop(i,p[e]),r++}}return l}},7804:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(380),n=r(3276),s=r(3604),o=r(9220),a=r(9260);e.drawGlyph=i.drawGlyph,e.extractCharCode=n.extractCharCode,e.generateFillStyle=s.generateFillStyle,e.resolveCharacters=o.resolveCharacters,e.splitTextToCharacters=a.splitTextToCharacters},9220:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9260);e.resolveCharacters=function(t){"string"==typeof t&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const t=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<t)throw new Error("[BitmapFont]: Invalid character range.");for(let i=t,n=r;i<=n;i++)e.push(String.fromCharCode(i))}else e.push(...i.splitTextToCharacters(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}},9260:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitTextToCharacters=function(t){return Array.from?Array.from(t):t.split("")}},4488:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(1236),s=r(844),o=r(9080),a=r(6540);const l={texture:!0,children:!1,baseTexture:!0},h=class extends n.Sprite{constructor(t,e,r){let n=!1;r||(r=i.settings.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const s=i.Texture.from(r);s.orig=new i.Rectangle,s.trim=new i.Rectangle,super(s),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=h.defaultResolution??i.settings.RESOLUTION,this._autoResolution=h.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return o.TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(t){i.utils.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),o.TextMetrics.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=o.TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,a=n.height,l=n.lines,h=n.lineHeight,u=n.lineWidths,c=n.maxLineWidth,d=n.fontProperties;let p,f;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;const g=e.dropShadow?2:1;for(let t=0;t<g;++t){const s=e.dropShadow&&0===t,o=s?Math.ceil(Math.max(1,a)+2*e.padding):0,g=o*this._resolution;if(s){r.fillStyle="black",r.strokeStyle="black";const t=e.dropShadowColor,n=i.utils.hex2rgb("number"==typeof t?t:i.utils.string2hex(t)),s=e.dropShadowBlur*this._resolution,o=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${e.dropShadowAlpha})`,r.shadowBlur=s,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*o,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*o+g}else r.fillStyle=this._generateFillStyle(e,l,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let m=(h-d.fontSize)/2;h-d.fontSize<0&&(m=0);for(let t=0;t<l.length;t++)p=e.strokeThickness/2,f=e.strokeThickness/2+t*h+d.ascent+m,"right"===e.align?p+=c-u[t]:"center"===e.align&&(p+=(c-u[t])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(l[t],p+e.padding,f+e.padding-o,!0),e.fill&&this.drawLetterSpacing(l[t],p+e.padding,f+e.padding-o)}this.updateTexture()}drawLetterSpacing(t,e,r,i=!1){const n=this._style.letterSpacing;let s=!1;if(o.TextMetrics.experimentalLetterSpacingSupported&&(o.TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,s=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===n||s)return void(i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));let a=e;const l=o.TextMetrics.graphemeSegmenter(t);let h=this.context.measureText(t).width,u=0;for(let t=0;t<l.length;++t){const e=l[t];i?this.context.strokeText(e,a,r):this.context.fillText(e,a,r);let s="";for(let e=t+1;e<l.length;++e)s+=l[e];u=this.context.measureText(s).width,a+=h-u+n,h=u}}updateTexture(){const t=this.canvas;if(this._style.trim){const e=i.utils.trimCanvas(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let n;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-2*a,h=this.canvas.height/this._resolution-o-2*a,u=i.slice(),c=t.fillGradientStops.slice();if(!c.length){const t=u.length+1;for(let e=1;e<t;++e)c.push(e/t)}if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),t.fillGradientType===s.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,a,l/2,h+a);const i=r.fontProperties.fontSize+t.strokeThickness;for(let t=0;t<e.length;t++){const s=r.lineHeight*(t-1)+i,o=r.lineHeight*t;let a=o;t>0&&s>o&&(a=(o+s)/2);const l=o+i,d=r.lineHeight*(t+1);let p=l;t+1<e.length&&d<l&&(p=(l+d)/2);const f=(p-a)/h;for(let t=0;t<u.length;t++){let e=0;e="number"==typeof c[t]?c[t]:t/u.length;let r=Math.min(1,Math.max(0,a/h+e*f));r=Number(r.toFixed(5)),n.addColorStop(r,u[t])}}}else{n=this.context.createLinearGradient(a,h/2,l+a,h/2);const t=u.length+1;let e=1;for(let r=0;r<u.length;r++){let i;i="number"==typeof c[r]?c[r]:e/t,n.addColorStop(i,u[r]),e++}}return n}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},l,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=i.utils.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=i.utils.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){(t=t||{})instanceof a.TextStyle?this._style=t:this._style=new a.TextStyle(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let u=h;u.defaultAutoResolution=!0,e.Text=u},9080:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428);const n={willReadFrequently:!0},s=class{static get experimentalLetterSpacingSupported(){let t=s._experimentalLetterSpacingSupported;if(void 0!==t){const e=i.settings.ADAPTER.getCanvasRenderingContext2D().prototype;t=s._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,i,n,s,o,a,l){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,r,i=s._canvas){r=null==r?e.wordWrap:r;const o=e.toFontString(),a=s.measureFont(o);0===a.fontSize&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);const l=i.getContext("2d",n);l.font=o;const h=(r?s.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(h.length);let c=0;for(let t=0;t<h.length;t++){const r=s._measureText(h[t],e.letterSpacing,l);u[t]=r,c=Math.max(c,r)}let d=c+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);const p=e.lineHeight||a.fontSize+e.strokeThickness;let f=Math.max(p,a.fontSize+2*e.strokeThickness)+(h.length-1)*(p+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new s(t,e,d,f,h,u,p+e.leading,c,a)}static _measureText(t,e,r){let i=!1;s.experimentalLetterSpacingSupported&&(s.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let n=r.measureText(t).width;return n>0&&(i?n-=e:n+=(s.graphemeSegmenter(t).length-1)*e),n}static wordWrap(t,e,r=s._canvas){const i=r.getContext("2d",n);let o=0,a="",l="";const h=Object.create(null),{letterSpacing:u,whiteSpace:c}=e,d=s.collapseSpaces(c),p=s.collapseNewlines(c);let f=!d;const g=e.wordWrapWidth+u,m=s.tokenize(t);for(let t=0;t<m.length;t++){let r=m[t];if(s.isNewline(r)){if(!p){l+=s.addLine(a),f=!d,a="",o=0;continue}r=" "}if(d){const t=s.isBreakingSpace(r),e=s.isBreakingSpace(a[a.length-1]);if(t&&e)continue}const n=s.getFromCache(r,u,h,i);if(n>g)if(""!==a&&(l+=s.addLine(a),a="",o=0),s.canBreakWords(r,e.breakWords)){const t=s.wordWrapSplit(r);for(let n=0;n<t.length;n++){let c=t[n],d=c,p=1;for(;t[n+p];){const i=t[n+p];if(s.canBreakChars(d,i,r,n,e.breakWords))break;c+=i,d=i,p++}n+=p-1;const m=s.getFromCache(c,u,h,i);m+o>g&&(l+=s.addLine(a),f=!1,a="",o=0),a+=c,o+=m}}else{a.length>0&&(l+=s.addLine(a),a="",o=0);const e=t===m.length-1;l+=s.addLine(r,!e),f=!1,a="",o=0}else n+o>g&&(f=!1,l+=s.addLine(a),a="",o=0),(a.length>0||!s.isBreakingSpace(r)||f)&&(a+=r,o+=n)}return l+=s.addLine(a,!1),l}static addLine(t,e=!0){return t=s.trimRight(t),t=e?`${t}\n`:t}static getFromCache(t,e,r,i){let n=r[t];return"number"!=typeof n&&(n=s._measureText(t,e,i)+e,r[t]=n),n}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!=typeof t)return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!s.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&s._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"==typeof t&&s._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if("string"!=typeof t)return e;for(let i=0;i<t.length;i++){const n=t[i],o=t[i+1];s.isBreakingSpace(n,o)||s.isNewline(n)?(""!==r&&(e.push(r),r=""),e.push(n)):r+=n}return""!==r&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,i,n){return!0}static wordWrapSplit(t){return s.graphemeSegmenter(t)}static measureFont(t){if(s._fonts[t])return s._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=s._canvas,i=s._context;i.font=t;const n=s.METRICS_STRING+s.BASELINE_SYMBOL,o=Math.ceil(i.measureText(n).width);let a=Math.ceil(i.measureText(s.BASELINE_SYMBOL).width);const l=Math.ceil(s.HEIGHT_MULTIPLIER*a);if(a=a*s.BASELINE_MULTIPLIER|0,0===o||0===l)return s._fonts[t]=e,e;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,a);const h=i.getImageData(0,0,o,l).data,u=h.length,c=4*o;let d=0,p=0,f=!1;for(d=0;d<a;++d){for(let t=0;t<c;t+=4)if(255!==h[p+t]){f=!0;break}if(f)break;p+=c}for(e.ascent=a-d,p=u-c,f=!1,d=l;d>a;--d){for(let t=0;t<c;t+=4)if(255!==h[p+t]){f=!0;break}if(f)break;p-=c}return e.descent=d-a,e.fontSize=e.ascent+e.descent,s._fonts[t]=e,e}static clearMetrics(t=""){t?delete s._fonts[t]:s._fonts={}}static get _canvas(){if(!s.__canvas){let t;try{const e=new OffscreenCanvas(0,0),r=e.getContext("2d",n);if(r?.measureText)return s.__canvas=e,e;t=i.settings.ADAPTER.createCanvas()}catch(e){t=i.settings.ADAPTER.createCanvas()}t.width=t.height=10,s.__canvas=t}return s.__canvas}static get _context(){return s.__context||(s.__context=s._canvas.getContext("2d",n)),s.__context}};let o=s;o.METRICS_STRING="|ÉqÅ",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map((t=>t.segment))}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],e.TextMetrics=o},6540:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(844),n=r(6428);const s=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],o=class{constructor(t){this.styleID=0,this.reset(),u(this,t,t)}clone(){const t={};return u(t,this,o.defaultStyle),new o(t)}reset(){u(this,o.defaultStyle,o.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=h(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=h(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=h(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let t=e.length-1;t>=0;t--){let r=e[t].trim();/([\"\'])[^\'\"]+\1/.test(r)||s.includes(r)||(r=`"${r}"`),e[t]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let a=o;function l(t){return"number"==typeof t?n.utils.hex2string(t):("string"==typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function h(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=l(t[e]);return t}return l(t)}function u(t,e,r){for(const i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}a.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},e.TextStyle=a},844:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(r||{});e.TEXT_GRADIENT=r},8804:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(844),n=r(4488),s=r(9080),o=r(6540);e.TEXT_GRADIENT=i.TEXT_GRADIENT,e.Text=n.Text,e.TextMetrics=s.TextMetrics,e.TextStyle=o.TextStyle},1104:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(9816),n=r(6636);const s=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n.TickerListener(null,null,1/0),this.deltaMS=1/s.targetFPMS,this.elapsedMS=1/s.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=i.UPDATE_PRIORITY.NORMAL){return this._addListener(new n.TickerListener(t,e,r))}addOnce(t,e,r=i.UPDATE_PRIORITY.NORMAL){return this._addListener(new n.TickerListener(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*s.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,s.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!s._shared){const t=s._shared=new s;t.autoStart=!0,t._protected=!0}return s._shared}static get system(){if(!s._system){const t=s._system=new s;t.autoStart=!0,t._protected=!0}return s._system}};let o=s;o.targetFPMS=.06,e.Ticker=o},6636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TickerListener=class{constructor(t,e=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}},7368:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6160),n=r(9816),s=r(1104);class o{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,n.UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.Ticker.shared:new s.Ticker,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}o.extension=i.ExtensionType.Application,i.extensions.add(o),e.TickerPlugin=o},9816:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(r||{});e.UPDATE_PRIORITY=r},8580:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(3892);var i=r(9816),n=r(1104),s=r(7368);e.UPDATE_PRIORITY=i.UPDATE_PRIORITY,e.Ticker=n.Ticker,e.TickerPlugin=s.TickerPlugin},3892:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424),n=r(5564),s=r(1104);Object.defineProperties(i.settings,{TARGET_FPMS:{get:()=>s.Ticker.targetFPMS,set(t){n.deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),s.Ticker.targetFPMS=t}}}),Object.defineProperty(e,"settings",{enumerable:!0,get:function(){return i.settings}})},476:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3096);e.sayHello=function(){i.deprecation("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')},e.skipHello=function(){i.deprecation("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}},7304:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(984);var i=r(2424);let n;e.isWebGLSupported=function(){return void 0===n&&(n=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:i.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!i.settings.ADAPTER.getWebGLRenderingContext())return!1;const e=i.settings.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const n=!!r?.getContextAttributes()?.stencil;if(r){const t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,n}catch(t){return!1}}()),n}},9640:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1280);e.hex2rgb=function(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.string2hex=function(t){if("string"==typeof t&&("#"===(t=i.default[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,r,i]=t;t=e+e+r+r+i+i}return parseInt(t,16)}},8852:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1780);const n=function(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}();e.correctBlendMode=function(t,e){return n[e?1:0][t]},e.premultiplyBlendMode=n,e.premultiplyRgba=function(t,e,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let r=t>>16&255,i=t>>8&255,n=255&t;return r=r*e+.5|0,i=i*e+.5|0,n=n*e+.5|0,(255*e<<24)+(r<<16)+(i<<8)+n},e.premultiplyTintToRgba=function(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(i||void 0===i)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}},1016:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i},928:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createIndicesForQuads=function(t,e=null){const r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let t=0,i=0;t<r;t+=6,i+=4)e[t+0]=i+0,e[t+1]=i+1,e[t+2]=i+2,e[t+3]=i+0,e[t+4]=i+2,e[t+5]=i+3;return e}},8624:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBufferType=function(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}},6312:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(8624);const n={Float32Array,Uint32Array,Int32Array,Uint8Array};e.interleaveTypedArrays=function(t,e){let r=0,s=0;const o={};for(let i=0;i<t.length;i++)s+=e[i],r+=t[i].length;const a=new ArrayBuffer(4*r);let l=null,h=0;for(let r=0;r<t.length;r++){const u=e[r],c=t[r],d=i.getBufferType(c);o[d]||(o[d]=new n[d](a)),l=o[d];for(let t=0;t<c.length;t++){l[(t/u|0)*s+h+t%u]=c[t]}h+=u}return new Float32Array(a)}},4643:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){let e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,r=((t>>>=r)>15?1:0)<<2,e|=r,r=((t>>>=r)>3?1:0)<<1,e|=r,e|(t>>>=r)>>1},e.nextPow2=function(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}},2056:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeItems=function(t,e,r){const i=t.length;let n;if(e>=i||0===r)return;const s=i-(r=e+r>i?i-e:r);for(n=e;n<s;++n)t[n]=t[n+r];t.length=s}},3392:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sign=function(t){return 0===t?0:t<0?-1:1}},3824:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});let r=0;e.uid=function(){return++r}},1280:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="#f0f8ff",i="#faebd7",n="#00ffff",s="#7fffd4",o="#f0ffff",a="#f5f5dc",l="#ffe4c4",h="#000000",u="#ffebcd",c="#0000ff",d="#8a2be2",p="#a52a2a",f="#deb887",g="#5f9ea0",m="#7fff00",v="#d2691e",y="#ff7f50",_="#6495ed",x="#fff8dc",b="#dc143c",E="#00ffff",T="#00008b",S="#008b8b",w="#b8860b",A="#a9a9a9",M="#006400",R="#a9a9a9",P="#bdb76b",C="#8b008b",O="#556b2f",I="#ff8c00",D="#9932cc",B="#8b0000",F="#e9967a",N="#8fbc8f",L="#483d8b",k="#2f4f4f",U="#2f4f4f",G="#00ced1",j="#9400d3",H="#ff1493",z="#00bfff",W="#696969",X="#696969",Y="#1e90ff",V="#b22222",$="#fffaf0",q="#228b22",K="#ff00ff",Z="#dcdcdc",Q="#f8f8ff",J="#daa520",tt="#ffd700",et="#808080",rt="#008000",it="#adff2f",nt="#808080",st="#f0fff0",ot="#ff69b4",at="#cd5c5c",lt="#4b0082",ht="#fffff0",ut="#f0e68c",ct="#fff0f5",dt="#e6e6fa",pt="#7cfc00",ft="#fffacd",gt="#add8e6",mt="#f08080",vt="#e0ffff",yt="#fafad2",_t="#d3d3d3",xt="#90ee90",bt="#d3d3d3",Et="#ffb6c1",Tt="#ffa07a",St="#20b2aa",wt="#87cefa",At="#778899",Mt="#778899",Rt="#b0c4de",Pt="#ffffe0",Ct="#00ff00",Ot="#32cd32",It="#faf0e6",Dt="#ff00ff",Bt="#800000",Ft="#66cdaa",Nt="#0000cd",Lt="#ba55d3",kt="#9370db",Ut="#3cb371",Gt="#7b68ee",jt="#00fa9a",Ht="#48d1cc",zt="#c71585",Wt="#191970",Xt="#f5fffa",Yt="#ffe4e1",Vt="#ffe4b5",$t="#ffdead",qt="#000080",Kt="#fdf5e6",Zt="#808000",Qt="#6b8e23",Jt="#ffa500",te="#ff4500",ee="#da70d6",re="#eee8aa",ie="#98fb98",ne="#afeeee",se="#db7093",oe="#ffefd5",ae="#ffdab9",le="#cd853f",he="#ffc0cb",ue="#dda0dd",ce="#b0e0e6",de="#800080",pe="#663399",fe="#ff0000",ge="#bc8f8f",me="#4169e1",ve="#8b4513",ye="#fa8072",_e="#f4a460",xe="#2e8b57",be="#fff5ee",Ee="#a0522d",Te="#c0c0c0",Se="#87ceeb",we="#6a5acd",Ae="#708090",Me="#708090",Re="#fffafa",Pe="#00ff7f",Ce="#4682b4",Oe="#d2b48c",Ie="#008080",De="#d8bfd8",Be="#ff6347",Fe="#40e0d0",Ne="#ee82ee",Le="#f5deb3",ke="#ffffff",Ue="#f5f5f5",Ge="#ffff00",je="#9acd32",He={aliceblue:r,antiquewhite:i,aqua:n,aquamarine:s,azure:o,beige:a,bisque:l,black:h,blanchedalmond:u,blue:c,blueviolet:d,brown:p,burlywood:f,cadetblue:g,chartreuse:m,chocolate:v,coral:y,cornflowerblue:_,cornsilk:x,crimson:b,cyan:E,darkblue:T,darkcyan:S,darkgoldenrod:w,darkgray:A,darkgreen:M,darkgrey:R,darkkhaki:P,darkmagenta:C,darkolivegreen:O,darkorange:I,darkorchid:D,darkred:B,darksalmon:F,darkseagreen:N,darkslateblue:L,darkslategray:k,darkslategrey:U,darkturquoise:G,darkviolet:j,deeppink:H,deepskyblue:z,dimgray:W,dimgrey:X,dodgerblue:Y,firebrick:V,floralwhite:$,forestgreen:q,fuchsia:K,gainsboro:Z,ghostwhite:Q,goldenrod:J,gold:tt,gray:et,green:rt,greenyellow:it,grey:nt,honeydew:st,hotpink:ot,indianred:at,indigo:lt,ivory:ht,khaki:ut,lavenderblush:ct,lavender:dt,lawngreen:pt,lemonchiffon:ft,lightblue:gt,lightcoral:mt,lightcyan:vt,lightgoldenrodyellow:yt,lightgray:_t,lightgreen:xt,lightgrey:bt,lightpink:Et,lightsalmon:Tt,lightseagreen:St,lightskyblue:wt,lightslategray:At,lightslategrey:Mt,lightsteelblue:Rt,lightyellow:Pt,lime:Ct,limegreen:Ot,linen:It,magenta:Dt,maroon:Bt,mediumaquamarine:Ft,mediumblue:Nt,mediumorchid:Lt,mediumpurple:kt,mediumseagreen:Ut,mediumslateblue:Gt,mediumspringgreen:jt,mediumturquoise:Ht,mediumvioletred:zt,midnightblue:Wt,mintcream:Xt,mistyrose:Yt,moccasin:Vt,navajowhite:$t,navy:qt,oldlace:Kt,olive:Zt,olivedrab:Qt,orange:Jt,orangered:te,orchid:ee,palegoldenrod:re,palegreen:ie,paleturquoise:ne,palevioletred:se,papayawhip:oe,peachpuff:ae,peru:le,pink:he,plum:ue,powderblue:ce,purple:de,rebeccapurple:pe,red:fe,rosybrown:ge,royalblue:me,saddlebrown:ve,salmon:ye,sandybrown:_e,seagreen:xe,seashell:be,sienna:Ee,silver:Te,skyblue:Se,slateblue:we,slategray:Ae,slategrey:Me,snow:Re,springgreen:Pe,steelblue:Ce,tan:Oe,teal:Ie,thistle:De,tomato:Be,turquoise:Fe,violet:Ne,wheat:Le,white:ke,whitesmoke:Ue,yellow:Ge,yellowgreen:je};e.aliceblue=r,e.antiquewhite=i,e.aqua=n,e.aquamarine=s,e.azure=o,e.beige=a,e.bisque=l,e.black=h,e.blanchedalmond=u,e.blue=c,e.blueviolet=d,e.brown=p,e.burlywood=f,e.cadetblue=g,e.chartreuse=m,e.chocolate=v,e.coral=y,e.cornflowerblue=_,e.cornsilk=x,e.crimson=b,e.cyan=E,e.darkblue=T,e.darkcyan=S,e.darkgoldenrod=w,e.darkgray=A,e.darkgreen=M,e.darkgrey=R,e.darkkhaki=P,e.darkmagenta=C,e.darkolivegreen=O,e.darkorange=I,e.darkorchid=D,e.darkred=B,e.darksalmon=F,e.darkseagreen=N,e.darkslateblue=L,e.darkslategray=k,e.darkslategrey=U,e.darkturquoise=G,e.darkviolet=j,e.deeppink=H,e.deepskyblue=z,e.default=He,e.dimgray=W,e.dimgrey=X,e.dodgerblue=Y,e.firebrick=V,e.floralwhite=$,e.forestgreen=q,e.fuchsia=K,e.gainsboro=Z,e.ghostwhite=Q,e.gold=tt,e.goldenrod=J,e.gray=et,e.green=rt,e.greenyellow=it,e.grey=nt,e.honeydew=st,e.hotpink=ot,e.indianred=at,e.indigo=lt,e.ivory=ht,e.khaki=ut,e.lavender=dt,e.lavenderblush=ct,e.lawngreen=pt,e.lemonchiffon=ft,e.lightblue=gt,e.lightcoral=mt,e.lightcyan=vt,e.lightgoldenrodyellow=yt,e.lightgray=_t,e.lightgreen=xt,e.lightgrey=bt,e.lightpink=Et,e.lightsalmon=Tt,e.lightseagreen=St,e.lightskyblue=wt,e.lightslategray=At,e.lightslategrey=Mt,e.lightsteelblue=Rt,e.lightyellow=Pt,e.lime=Ct,e.limegreen=Ot,e.linen=It,e.magenta=Dt,e.maroon=Bt,e.mediumaquamarine=Ft,e.mediumblue=Nt,e.mediumorchid=Lt,e.mediumpurple=kt,e.mediumseagreen=Ut,e.mediumslateblue=Gt,e.mediumspringgreen=jt,e.mediumturquoise=Ht,e.mediumvioletred=zt,e.midnightblue=Wt,e.mintcream=Xt,e.mistyrose=Yt,e.moccasin=Vt,e.navajowhite=$t,e.navy=qt,e.oldlace=Kt,e.olive=Zt,e.olivedrab=Qt,e.orange=Jt,e.orangered=te,e.orchid=ee,e.palegoldenrod=re,e.palegreen=ie,e.paleturquoise=ne,e.palevioletred=se,e.papayawhip=oe,e.peachpuff=ae,e.peru=le,e.pink=he,e.plum=ue,e.powderblue=ce,e.purple=de,e.rebeccapurple=pe,e.red=fe,e.rosybrown=ge,e.royalblue=me,e.saddlebrown=ve,e.salmon=ye,e.sandybrown=_e,e.seagreen=xe,e.seashell=be,e.sienna=Ee,e.silver=Te,e.skyblue=Se,e.slateblue=we,e.slategray=Ae,e.slategrey=Me,e.snow=Re,e.springgreen=Pe,e.steelblue=Ce,e.tan=Oe,e.teal=Ie,e.thistle=De,e.tomato=Be,e.turquoise=Fe,e.violet=Ne,e.wheat=Le,e.white=ke,e.whitesmoke=Ue,e.yellow=Ge,e.yellowgreen=je},5564:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(984);var i=r(2424),n=r(9328),s=r(1948),o=r(5188),a=r(5808),l=r(476),h=r(7304),u=r(9640),c=r(8852),d=r(1016),p=r(928),f=r(8624),g=r(6312),m=r(4643),v=r(2056),y=r(3392),_=r(3824),x=r(3096),b=r(3336),E=r(9916),T=r(5347),S=r(5528),w=r(8148),A=r(7383),M=r(1884),R=r(352);function P(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}r(4684);var C=P(n),O=P(s);Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return i.isMobile}}),Object.defineProperty(e,"EventEmitter",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"earcut",{enumerable:!0,get:function(){return O.default}}),e.url=o.url,e.path=a.path,e.sayHello=l.sayHello,e.skipHello=l.skipHello,e.isWebGLSupported=h.isWebGLSupported,e.hex2rgb=u.hex2rgb,e.hex2string=u.hex2string,e.rgb2hex=u.rgb2hex,e.string2hex=u.string2hex,e.correctBlendMode=c.correctBlendMode,e.premultiplyBlendMode=c.premultiplyBlendMode,e.premultiplyRgba=c.premultiplyRgba,e.premultiplyTint=c.premultiplyTint,e.premultiplyTintToRgba=c.premultiplyTintToRgba,e.DATA_URI=d.DATA_URI,e.createIndicesForQuads=p.createIndicesForQuads,e.getBufferType=f.getBufferType,e.interleaveTypedArrays=g.interleaveTypedArrays,e.isPow2=m.isPow2,e.log2=m.log2,e.nextPow2=m.nextPow2,e.removeItems=v.removeItems,e.sign=y.sign,e.uid=_.uid,e.deprecation=x.deprecation,e.BoundingBox=b.BoundingBox,e.BaseTextureCache=E.BaseTextureCache,e.ProgramCache=E.ProgramCache,e.TextureCache=E.TextureCache,e.clearTextureCache=E.clearTextureCache,e.destroyTextureCache=E.destroyTextureCache,e.CanvasRenderTarget=T.CanvasRenderTarget,e.getCanvasBoundingBox=S.getCanvasBoundingBox,e.trimCanvas=w.trimCanvas,e.decomposeDataUri=A.decomposeDataUri,e.determineCrossOrigin=M.determineCrossOrigin,e.getResolutionOfUrl=R.getResolutionOfUrl},3096:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r={};e.deprecation=function(t,e,i=3){if(r[e])return;let n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(n))),r[e]=!0}},3336:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=class{constructor(t,e,r,i){this.left=t,this.top=e,this.right=r,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let i=r;i.EMPTY=new r(0,0,0,0),e.BoundingBox=i},5347:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424);e.CanvasRenderTarget=class{constructor(t,e,r){this._canvas=i.settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||i.settings.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}},9916:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=Object.create(null),i=Object.create(null);e.BaseTextureCache=i,e.ProgramCache={},e.TextureCache=r,e.clearTextureCache=function(){let t;for(t in r)delete r[t];for(t in i)delete i[t]},e.destroyTextureCache=function(){let t;for(t in r)r[t].destroy();for(t in i)i[t].destroy()}},5528:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(3336);function n(t,e,r){for(let i=0,n=4*r*e;i<e;++i,n+=4)if(0!==t[n+3])return!1;return!0}function s(t,e,r,i,n){const s=4*e;for(let e=i,o=i*s+4*r;e<=n;++e,o+=s)if(0!==t[o+3])return!1;return!0}e.getCanvasBoundingBox=function(t){const{width:e,height:r}=t,o=t.getContext("2d",{willReadFrequently:!0});if(null===o)throw new TypeError("Failed to get canvas 2D context");const a=o.getImageData(0,0,e,r).data;let l=0,h=0,u=e-1,c=r-1;for(;h<r&&n(a,e,h);)++h;if(h===r)return i.BoundingBox.EMPTY;for(;n(a,e,c);)--c;for(;s(a,e,l,h,c);)++l;for(;s(a,e,u,h,c);)--u;return++u,++c,new i.BoundingBox(l,h,u,c)}},8148:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5528);e.trimCanvas=function(t){const e=i.getCanvasBoundingBox(t),{width:r,height:n}=e;let s=null;if(!e.isEmpty()){const i=t.getContext("2d");if(null===i)throw new TypeError("Failed to get canvas 2D context");s=i.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:s}}},7383:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(1016);e.decomposeDataUri=function(t){const e=i.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}},1884:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(5188);let n;e.determineCrossOrigin=function(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,n||(n=document.createElement("a")),n.href=t;const r=i.url.parse(n.href),s=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&s&&r.protocol===e.protocol?"":"anonymous"}},352:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(984);var i=r(2424);e.getResolutionOfUrl=function(t,e=1){const r=i.settings.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}},5808:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424);function n(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function s(t){return t.split("?")[0].split("#")[0]}const o={toPosix:t=>function(t,e,r){return t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}(t,"\\","/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){n(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),s=/^[^/:]+:\//.exec(t);if(r||i||s){const n=r?.[0]||i?.[0]||s?.[0];e=n,t=t.slice(n.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const a=s(this.toPosix(e??i.settings.ADAPTER.getBaseUrl())),l=s(this.toPosix(r??this.rootname(a)));if(n(t),(t=this.toPosix(t)).startsWith("/"))return o.join(l,t.slice(1));return this.isAbsolute(t)?t:this.join(a,t)},normalize(t){if(n(t=this.toPosix(t)),0===t.length)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return(t=function(t,e){let r="",i=0,n=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(n===a-1||1===s);else if(n!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const t=r.lastIndexOf("/");if(t!==r.length-1){-1===t?(r="",i=0):(r=r.slice(0,t),i=r.length-1-r.lastIndexOf("/")),n=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,n=a,s=0;continue}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+=`/${t.slice(n+1,a)}`:r=t.slice(n+1,a),i=a-n-1;n=a,s=0}else 46===o&&-1!==s?++s:s=-1}return r}(t,!1)).length>0&&i&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return n(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let r=0;r<t.length;++r){const i=t[r];if(n(i),i.length>0)if(void 0===e)e=i;else{const n=t[r-1]??"";this.extname(n)?e+=`/../${i}`:e+=`/${i}`}}return void 0===e?".":this.normalize(e)},dirname(t){if(n(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const r=47===e;let i=-1,s=!0;const o=this.getProtocol(t),a=t;for(let r=(t=t.slice(o.length)).length-1;r>=1;--r)if(e=t.charCodeAt(r),47===e){if(!s){i=r;break}}else s=!1;return-1===i?r?"/":this.isUrl(a)?o+t:o:r&&1===i?"//":o+t.slice(0,i)},rootname(t){n(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);e=-1!==r?t.slice(0,r):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){n(t),e&&n(e),t=s(this.toPosix(t));let r,i=0,o=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let n=e.length-1,s=-1;for(r=t.length-1;r>=0;--r){const l=t.charCodeAt(r);if(47===l){if(!a){i=r+1;break}}else-1===s&&(a=!1,s=r+1),n>=0&&(l===e.charCodeAt(n)?-1==--n&&(o=r):(n=-1,o=s))}return i===o?o=s:-1===o&&(o=t.length),t.slice(i,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!a){i=r+1;break}}else-1===o&&(a=!1,o=r+1);return-1===o?"":t.slice(i,o)},extname(t){n(t);let e=-1,r=0,i=-1,o=!0,a=0;for(let n=(t=s(this.toPosix(t))).length-1;n>=0;--n){const s=t.charCodeAt(n);if(47!==s)-1===i&&(o=!1,i=n+1),46===s?-1===e?e=n:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){r=n+1;break}}return-1===e||-1===i||0===a||1===a&&e===i-1&&e===r+1?"":t.slice(e,i)},parse(t){n(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let r=(t=s(this.toPosix(t))).charCodeAt(0);const i=this.isAbsolute(t);let o;e.root=this.rootname(t),o=i||this.hasProtocol(t)?1:0;let a=-1,l=0,h=-1,u=!0,c=t.length-1,d=0;for(;c>=o;--c)if(r=t.charCodeAt(c),47!==r)-1===h&&(u=!1,h=c+1),46===r?-1===a?a=c:1!==d&&(d=1):-1!==a&&(d=-1);else if(!u){l=c+1;break}return-1===a||-1===h||0===d||1===d&&a===h-1&&a===l+1?-1!==h&&(e.base=e.name=0===l&&i?t.slice(1,h):t.slice(l,h)):(0===l&&i?(e.name=t.slice(1,a),e.base=t.slice(1,h)):(e.name=t.slice(l,a),e.base=t.slice(l,h)),e.ext=t.slice(a,h)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};e.path=o},984:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(2424);i.settings.RETINA_PREFIX=/@([0-9\.]+)x/,i.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,Object.defineProperty(e,"settings",{enumerable:!0,get:function(){return i.settings}})},4684:()=>{},5188:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(4776);const n={parse:i.parse,format:i.format,resolve:i.resolve};e.url=n},2768:(t,e,r)=>{"use strict";var i=r(6604),n=r(4572),s=n(i("String.prototype.indexOf"));t.exports=function(t,e){var r=i(t,!!e);return"function"==typeof r&&s(t,".prototype.")>-1?n(r):r}},4572:(t,e,r)=>{"use strict";var i=r(268),n=r(6604),s=r(2392),o=r(6556),a=n("%Function.prototype.apply%"),l=n("%Function.prototype.call%"),h=n("%Reflect.apply%",!0)||i.call(l,a),u=n("%Object.defineProperty%",!0),c=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch(t){u=null}t.exports=function(t){if("function"!=typeof t)throw new o("a function is required");var e=h(i,l,arguments);return s(e,1+c(0,t.length-(arguments.length-1)),!0)};var d=function(){return h(i,a,arguments)};u?u(t.exports,"apply",{value:d}):t.exports.apply=d},2828:t=>{var e=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=e},3042:(t,e,r)=>{"use strict";r.d(e,{c:()=>a});var i=r(5500),n=r.n(i),s=r(2312),o=r.n(s)()(n());o.push([t.id,'body{\n  margin: 0;\n}\n\nbody, html{\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n*::-webkit-scrollbar, *::webkit-scrollbar-thumb, *::webkit-scrollbar-track{\n  display: none;\n}\n\n*:not(.ATiWFx30D34Nf0Gy80SO):not(.ATiWFx30D34Nf0Gy80SO *):not(.Gg_KndglSoyxovvI1mWG):not(.Gg_KndglSoyxovvI1mWG *):not(.HYqM0P8o5Z0_ELaW_cbH):not(.HYqM0P8o5Z0_ELaW_cbH *){\n  overflow: hidden !important;\n}\n\n.WbLT7S__rUJWv5aTXESx{\n  font-size: medium !important;\n  color: red;\n}\n\n.mkyB37DI3esO4bCEd5La{\n  color: orange;\n}\n\n.ATiWFx30D34Nf0Gy80SO{\n  width: 98%;\n  border: 1px solid black;\n  min-height: 1rem;\n  font-size: smaller;\n  flex-grow: 1;\n  margin-bottom: 2vh;\n}\n\n.m_yEwx5PfA_k5t_8en11{\n  display: none !important;\n}\n\n.kxQvc8rJ79LoRKCb8nOw{\n  height: 100%;\n  width: 100%;\n  margin: 0 1vw;\n}\n\n.dGyjL76Km4SnH89G7Mnx{\n  position: sticky;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  background-color: rgb(254, 170, 106);\n}\n\n.HiKTcW3aRAWiuuGlF_hT{\n  height: 5vh;\n  text-align: center;\n  font-size: larger;\n  border-left: 1px solid white;\n  border-right: 1px solid white;\n  border-top: 0;\n  display: flex;\n  justify-content: center;\n  flex: 1 0 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.dGyjL76Km4SnH89G7Mnx > *:first-child{\n  border-left: none;\n}\n\n.dGyjL76Km4SnH89G7Mnx > :last-child{\n  border-right: none;\n}\n\na{\n  cursor: pointer;\n  text-decoration: none;\n  color: white;\n  height: 100%;\n  width: 100%;\n  margin: 0 1vw 0 1vw;\n}\n\n.lxvyohrr3HJwPWVCKKX4{\n  display: flex;\n  flex-direction: column;\n}\n\n.amzqhuVUZxDD19grYWkw{\n  flex-grow: 0;\n  flex-shrink: 0;\n  max-height: 80vh;\n}\n\n.ItourmMtefo1XjDifJzz{\n  margin: 0;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  overflow: scroll;\n}\n\ncanvas{\n  width: 100%;\n  height: 100%;\n  cursor: grab !important;\n  background-color: black;\n  position: relative;\n  top: 0;\n  z-index: 1;\n}\n\n.ws8IGo9rdHxsEAvRTL7a{\n  height: 100%;\n  width: 100%;\n  margin: 0 !important;\n  display: grid;\n  grid-template-columns: 5vh 1fr;\n  column-gap: 0;\n}\n\n.QnizrThSliSCMAMIKeaE{\n  border: 0;\n}\n\n.Gg_KndglSoyxovvI1mWG{\n  position: absolute;\n  z-index: 2;\n  top: 0;\n  left: 5vh;\n  background-color: white;\n  border: 1px solid black;\n  padding: 0.5ch;\n  max-width: 50vw;\n  max-height: 50vh;\n  border-radius: 1ch;\n}\n\n.XLzdtZKwYauBovXeAgZb {\n  position: relative;\n  display: inline-block;\n  border-bottom: 1px dotted black;\n}\n\n.XLzdtZKwYauBovXeAgZb .iF7yTdJDMO5YnsTS8C5w {\n  visibility: hidden;\n  width: 15ch;\n  background-color: black;\n  color: white;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px 0;\n  position: absolute;\n  opacity: 0;\n  transition: opacity 0.5s;\n  z-index: 999;\n}\n\n.XLzdtZKwYauBovXeAgZb:hover .iF7yTdJDMO5YnsTS8C5w {\n  visibility: visible;\n  opacity: 1;\n}\n\n.XLzdtZKwYauBovXeAgZb .iF7yTdJDMO5YnsTS8C5w::after {\n  content: " ";\n  position: absolute;\n  border-style: solid;\n  border-width: 0.5ch;\n}\n\n.XLzdtZKwYauBovXeAgZb .iF7yTdJDMO5YnsTS8C5w.gsr1rhMIwVi7egDwXPQK::after {\n  top: 100%;\n  left: 50%;\n  margin-left: -5px;\n  border-color: black transparent transparent transparent;\n}\n\n.XLzdtZKwYauBovXeAgZb .iF7yTdJDMO5YnsTS8C5w.AaYwmrRdWbEEBM85jHyQ::after {\n  top: 50%;\n  right: 100%;\n  margin-top: -5px;\n  border-color: transparent black transparent transparent;\n}\n\n.XLzdtZKwYauBovXeAgZb .AaYwmrRdWbEEBM85jHyQ {\n  top: 50%;\n  left: 105%;\n  transform: translate(0, -50%);\n}\n\n.XLzdtZKwYauBovXeAgZb .gsr1rhMIwVi7egDwXPQK {\n  bottom: 100%;\n  left: 50%;\n  margin-left: -50%;\n}\n\nlabel{\n  margin-bottom: 0.3ch;\n}\n\n.HYqM0P8o5Z0_ELaW_cbH{\n  background-color: #3e3e3e;\n  padding-top: 1%;\n}\n\n.HYqM0P8o5Z0_ELaW_cbH .L4k722fZ0rVaW5nN7f6l{\n  padding: 1px;\n  aspect-ratio: 1;\n  display: flex;\n  justify-content: center;\n  border: 0;\n}\n\n.HYqM0P8o5Z0_ELaW_cbH .L4k722fZ0rVaW5nN7f6l:hover{\n  background-color: #4d4d4d !important;\n  transition: background-color 0.2s ease-out;\n}\n\n.HYqM0P8o5Z0_ELaW_cbH .L4k722fZ0rVaW5nN7f6l img{\n  width: 100%;\n  aspect-ratio: 1;\n}\n\n.gRi_ma8LuyrjHavkZNtx *{\n  display: flex;\n}\n\n.pgiMoKMVsgiJROIKYUru{\n  width: calc(100vw - 5vh);\n  left: 5vh;\n  z-index: 50;\n  position: absolute;\n  top: 50%;\n}\n\n.NmepFspk4ogZ0G8t4RlA{\n  width: 100%;\n  font-size: xx-large;\n  text-align: center;\n  color: #ff4545;\n}\n\n.Bb4lAzhZE5WR5EnCEhKg{\n  width: 100%;\n  height: 10px;\n  border: 1px solid #ff4545;\n}\n\n.hDqeCabbfbpZ4dqYgE8p{\n  height: 100%;\n  width: 0;\n  background-color: #ff4545;\n}\n\n.jcSkj1dPVjaCcIyHrGAQ{\n  visibility: none;\n  opacity: 0;\n  transition: visibility 0s 2s, opacity 2s linear;\n}\n\n.FPmrO8F7w3UYu5A_hUCq{\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  z-index: 999;\n  background-color: gray;\n  color: white;\n  padding: 2px;\n}',""]),o.locals={logger:"ATiWFx30D34Nf0Gy80SO",mapBuilderForm:"Gg_KndglSoyxovvI1mWG",toolbar:"HYqM0P8o5Z0_ELaW_cbH",error:"WbLT7S__rUJWv5aTXESx",warn:"mkyB37DI3esO4bCEd5La",hidden:"m_yEwx5PfA_k5t_8en11",container:"kxQvc8rJ79LoRKCb8nOw",navigationBar:"dGyjL76Km4SnH89G7Mnx",navigationBarItem:"HiKTcW3aRAWiuuGlF_hT",fileGenerator:"lxvyohrr3HJwPWVCKKX4",fileGeneratorMain:"amzqhuVUZxDD19grYWkw",mainContainer:"ItourmMtefo1XjDifJzz",mapBuilder:"ws8IGo9rdHxsEAvRTL7a",mapBuilderCanvasContainer:"QnizrThSliSCMAMIKeaE",tooltip:"XLzdtZKwYauBovXeAgZb",tooltiptext:"iF7yTdJDMO5YnsTS8C5w",tooltiptext_up:"gsr1rhMIwVi7egDwXPQK",tooltiptext_right:"AaYwmrRdWbEEBM85jHyQ",toolbaritem:"L4k722fZ0rVaW5nN7f6l",mapBuilderToolbarFiltersForm:"gRi_ma8LuyrjHavkZNtx",mapBuilderCanvasLoading:"pgiMoKMVsgiJROIKYUru",mapBuilderCanvasLoadingText:"NmepFspk4ogZ0G8t4RlA",mapBuilderCanvasProgressBar:"Bb4lAzhZE5WR5EnCEhKg",mapBuilderCanvasProgressBarFill:"hDqeCabbfbpZ4dqYgE8p",fadeOut2Seconds:"jcSkj1dPVjaCcIyHrGAQ",version:"FPmrO8F7w3UYu5A_hUCq"};const a=o},2312:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",i=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),i&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),i&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,i,n,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var h=0;h<t.length;h++){var u=[].concat(t[h]);i&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),n&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=n):u[4]="".concat(n)),e.push(u))}},e}},5500:t=>{"use strict";t.exports=function(t){return t[1]}},5456:(t,e,r)=>{"use strict";var i=r(1188)(),n=r(6604),s=i&&n("%Object.defineProperty%",!0);if(s)try{s({},"a",{value:1})}catch(t){s=!1}var o=r(7668),a=r(6556),l=r(872);t.exports=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new a("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],c=!!l&&l(t,e);if(s)s(t,e,{configurable:null===h&&c?c.configurable:!h,enumerable:null===i&&c?c.enumerable:!i,value:r,writable:null===n&&c?c.writable:!n});else{if(!u&&(i||n||h))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}}},1948:t=>{"use strict";function e(t,e,i){i=i||2;var s,o,a,l,c,d,f,g=e&&e.length,m=g?e[0]*i:t.length,v=r(t,0,m,i,!0),y=[];if(!v||v.next===v.prev)return y;if(g&&(v=function(t,e,i,n){var s,o,a,l=[];for(s=0,o=e.length;s<o;s++)(a=r(t,e[s]*n,s<o-1?e[s+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),l.push(p(a));for(l.sort(h),s=0;s<l.length;s++)i=u(l[s],i);return i}(t,e,v,i)),t.length>80*i){s=a=t[0],o=l=t[1];for(var _=i;_<m;_+=i)(c=t[_])<s&&(s=c),(d=t[_+1])<o&&(o=d),c>a&&(a=c),d>l&&(l=d);f=0!==(f=Math.max(a-s,l-o))?32767/f:0}return n(v,y,i,s,o,f,0),y}function r(t,e,r,i,n){var s,o;if(n===A(t,e,r,i)>0)for(s=e;s<r;s+=i)o=T(s,t[s],t[s+1],o);else for(s=r-i;s>=e;s-=i)o=T(s,t[s],t[s+1],o);return o&&v(o,o.next)&&(S(o),o=o.next),o}function i(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!v(i,i.next)&&0!==m(i.prev,i,i.next))i=i.next;else{if(S(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function n(t,e,r,h,u,c,p){if(t){!p&&c&&function(t,e,r,i){var n=t;do{0===n.z&&(n.z=d(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,s,o,a,l,h=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,i=r,a=0,e=0;e<h&&(a++,i=i.nextZ);e++);for(l=h;a>0||l>0&&i;)0!==a&&(0===l||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;r=i}s.nextZ=null,h*=2}while(o>1)}(n)}(t,h,u,c);for(var f,g,m=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?o(t,h,u,c):s(t))e.push(f.i/r|0),e.push(t.i/r|0),e.push(g.i/r|0),S(t),t=g.next,m=g.next;else if((t=g)===m){p?1===p?n(t=a(i(t),e,r),e,r,h,u,c,2):2===p&&l(t,e,r,h,u,c):n(i(t),e,r,h,u,c,1);break}}}function s(t){var e=t.prev,r=t,i=t.next;if(m(e,r,i)>=0)return!1;for(var n=e.x,s=r.x,o=i.x,a=e.y,l=r.y,h=i.y,u=n<s?n<o?n:o:s<o?s:o,c=a<l?a<h?a:h:l<h?l:h,d=n>s?n>o?n:o:s>o?s:o,p=a>l?a>h?a:h:l>h?l:h,g=i.next;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=c&&g.y<=p&&f(n,a,s,l,o,h,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function o(t,e,r,i){var n=t.prev,s=t,o=t.next;if(m(n,s,o)>=0)return!1;for(var a=n.x,l=s.x,h=o.x,u=n.y,c=s.y,p=o.y,g=a<l?a<h?a:h:l<h?l:h,v=u<c?u<p?u:p:c<p?c:p,y=a>l?a>h?a:h:l>h?l:h,_=u>c?u>p?u:p:c>p?c:p,x=d(g,v,e,r,i),b=d(y,_,e,r,i),E=t.prevZ,T=t.nextZ;E&&E.z>=x&&T&&T.z<=b;){if(E.x>=g&&E.x<=y&&E.y>=v&&E.y<=_&&E!==n&&E!==o&&f(a,u,l,c,h,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,T.x>=g&&T.x<=y&&T.y>=v&&T.y<=_&&T!==n&&T!==o&&f(a,u,l,c,h,p,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;E&&E.z>=x;){if(E.x>=g&&E.x<=y&&E.y>=v&&E.y<=_&&E!==n&&E!==o&&f(a,u,l,c,h,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=b;){if(T.x>=g&&T.x<=y&&T.y>=v&&T.y<=_&&T!==n&&T!==o&&f(a,u,l,c,h,p,T.x,T.y)&&m(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function a(t,e,r){var n=t;do{var s=n.prev,o=n.next.next;!v(s,o)&&y(s,n,n.next,o)&&b(s,o)&&b(o,s)&&(e.push(s.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),S(n),S(n.next),n=t=o),n=n.next}while(n!==t);return i(n)}function l(t,e,r,s,o,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&g(l,h)){var u=E(l,h);return l=i(l,l.next),u=i(u,u.next),n(l,e,r,s,o,a,0),void n(u,e,r,s,o,a,0)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function u(t,e){var r=function(t,e){var r,i=e,n=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>o&&(o=a,r=i.x<i.next.x?i:i.next,a===n))return r}i=i.next}while(i!==e);if(!r)return null;var l,h=r,u=r.x,d=r.y,p=1/0;i=r;do{n>=i.x&&i.x>=u&&n!==i.x&&f(s<d?n:o,s,u,d,s<d?o:n,s,i.x,i.y)&&(l=Math.abs(s-i.y)/(n-i.x),b(i,t)&&(l<p||l===p&&(i.x>r.x||i.x===r.x&&c(r,i)))&&(r=i,p=l)),i=i.next}while(i!==h);return r}(t,e);if(!r)return e;var n=E(r,t);return i(n,n.next),i(r,r.next)}function c(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function f(t,e,r,i,n,s,o,a){return(n-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(n-o)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&y(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||v(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,r,i){var n=x(m(t,e,r)),s=x(m(t,e,i)),o=x(m(r,i,t)),a=x(m(r,i,e));return n!==s&&o!==a||(!(0!==n||!_(t,r,e))||(!(0!==s||!_(t,i,e))||(!(0!==o||!_(r,t,i))||!(0!==a||!_(r,e,i)))))}function _(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function E(t,e){var r=new w(t.i,t.x,t.y),i=new w(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function T(t,e,r,i){var n=new w(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,r,i){for(var n=0,s=e,o=r-i;s<r;s+=i)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,r,i){var n=e&&e.length,s=n?e[0]*r:t.length,o=Math.abs(A(t,0,s,r));if(n)for(var a=0,l=e.length;a<l;a++){var h=e[a]*r,u=a<l-1?e[a+1]*r:t.length;o-=Math.abs(A(t,h,u,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,p=i[a+1]*r,f=i[a+2]*r;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[n][s][o]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},9576:t=>{"use strict";t.exports=EvalError},2772:t=>{"use strict";t.exports=Error},5360:t=>{"use strict";t.exports=RangeError},2380:t=>{"use strict";t.exports=ReferenceError},7668:t=>{"use strict";t.exports=SyntaxError},6556:t=>{"use strict";t.exports=TypeError},568:t=>{"use strict";t.exports=URIError},9328:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,s||t,o),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events[a])return!1;var l,h,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,s),!0;case 6:return u.fn.call(u.context,e,i,n,s,o),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,p=u.length;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},a.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,h=[],u=a.length;l<u;l++)(a[l].fn!==e||n&&!a[l].once||i&&a[l].context!==i)&&h.push(a[l]);h.length?this._events[s]=1===h.length?h[0]:h:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},7840:t=>{"use strict";var e=Object.prototype.toString,r=Math.max,i=function(t,e){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var n=0;n<e.length;n+=1)r[n+t.length]=e[n];return r};t.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==e.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var s,o=function(t,e){for(var r=[],i=e||0,n=0;i<t.length;i+=1,n+=1)r[n]=t[i];return r}(arguments,1),a=r(0,n.length-o.length),l=[],h=0;h<a;h++)l[h]="$"+h;if(s=Function("binder","return function ("+function(t,e){for(var r="",i=0;i<t.length;i+=1)r+=t[i],i+1<t.length&&(r+=e);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var e=n.apply(this,i(o,arguments));return Object(e)===e?e:this}return n.apply(t,i(o,arguments))})),n.prototype){var u=function(){};u.prototype=n.prototype,s.prototype=new u,u.prototype=null}return s}},268:(t,e,r)=>{"use strict";var i=r(7840);t.exports=Function.prototype.bind||i},6604:(t,e,r)=>{"use strict";var i,n=r(2772),s=r(9576),o=r(5360),a=r(2380),l=r(7668),h=r(6556),u=r(568),c=Function,d=function(t){try{return c('"use strict"; return ('+t+").constructor;")()}catch(t){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(t){p=null}var f=function(){throw new h},g=p?function(){try{return f}catch(t){try{return p(arguments,"callee").get}catch(t){return f}}}():f,m=r(4308)(),v=r(7636)(),y=Object.getPrototypeOf||(v?function(t){return t.__proto__}:null),_={},x="undefined"!=typeof Uint8Array&&y?y(Uint8Array):i,b={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":m&&y?y([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":_,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&y?y(y([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&y?y((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":o,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&y?y((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&y?y(""[Symbol.iterator]()):i,"%Symbol%":m?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":x,"%TypeError%":h,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};if(y)try{null.error}catch(t){var E=y(y(t));b["%Error.prototype%"]=E}var T=function t(e){var r;if("%AsyncFunction%"===e)r=d("async function () {}");else if("%GeneratorFunction%"===e)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=d("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&y&&(r=y(n.prototype))}return b[e]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=r(268),A=r(5176),M=w.call(Function.call,Array.prototype.concat),R=w.call(Function.apply,Array.prototype.splice),P=w.call(Function.call,String.prototype.replace),C=w.call(Function.call,String.prototype.slice),O=w.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,B=function(t,e){var r,i=t;if(A(S,i)&&(i="%"+(r=S[i])[0]+"%"),A(b,i)){var n=b[i];if(n===_&&(n=T(i)),void 0===n&&!e)throw new h("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new h('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=C(t,0,1),r=C(t,-1);if("%"===e&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var i=[];return P(t,I,(function(t,e,r,n){i[i.length]=r?P(n,D,"$1"):e||t})),i}(t),i=r.length>0?r[0]:"",n=B("%"+i+"%",e),s=n.name,o=n.value,a=!1,u=n.alias;u&&(i=u[0],R(r,M([0,1],u)));for(var c=1,d=!0;c<r.length;c+=1){var f=r[c],g=C(f,0,1),m=C(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&d||(a=!0),A(b,s="%"+(i+="."+f)+"%"))o=b[s];else if(null!=o){if(!(f in o)){if(!e)throw new h("base intrinsic for "+t+" exists, but the property is not available.");return}if(p&&c+1>=r.length){var v=p(o,f);o=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:o[f]}else d=A(o,f),o=o[f];d&&!a&&(b[s]=o)}}return o}},872:(t,e,r)=>{"use strict";var i=r(6604)("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(t){i=null}t.exports=i},1188:(t,e,r)=>{"use strict";var i=r(6604)("%Object.defineProperty%",!0),n=function(){if(i)try{return i({},"a",{value:1}),!0}catch(t){return!1}return!1};n.hasArrayLengthDefineBug=function(){if(!n())return null;try{return 1!==i([],"length",{value:1}).length}catch(t){return!0}},t.exports=n},7636:t=>{"use strict";var e={foo:{}},r=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof r)}},4308:(t,e,r)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(1968);t.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},1968:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},5176:(t,e,r)=>{"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,s=r(268);t.exports=s.call(i,n)},3154:(t,e,r)=>{"use strict";function i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function n(t,e){return function(r){r&&(t[e]=r)}}function s(t,e,r){return function(i){i&&(t[e][r]=i)}}function o(t,e){return function(r){var i=r.prototype;t.forEach((function(t){e(i,t)}))}}r.r(e),r.d(e,{EVENTS:()=>_l,METHODS:()=>yl,PROPERTIES:()=>vl,default:()=>bl,getElementInfo:()=>El,makeAble:()=>Tl});var a="function",l="object",h="string",u="number",c="undefined",d=typeof window!==c,p=typeof document!==c&&document,f=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],g=1e-7,m={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function v(t,e,r,i){return(t*i+e*r)/(r+i)}function y(t){return typeof t===c}function _(t){return t&&typeof t===l}function x(t){return Array.isArray(t)}function b(t){return typeof t===h}function E(t){return typeof t===u}function T(t){return typeof t===a}function S(t,e,r,i,n){return w(t,e,r)?r:function(t,e,r,i,n){for(var s,o=function(r){var o=e[r].trim();if(o===t.close&&!w(t,e,r))return{value:r};var a=r,l=B(n,(function(t){return t.open===o}));if(l&&(a=S(l,e,r,i,n)),-1===a)return s=r,"break";s=r=a},a=r;a<i;++a){var l=o(a);if(a=s,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,r+1,i,n)}function w(t,e,r){if(!t.ignore)return null;var i=e.slice(Math.max(r-3,0),r+3).join("");return new RegExp(t.ignore).exec(i)}function A(t,e){var r=b(e)?{separator:e}:e,i=r.separator,n=void 0===i?",":i,s=r.isSeparateFirst,o=r.isSeparateOnlyOpenClose,a=r.isSeparateOpenClose,l=void 0===a?o:a,h=r.openCloseCharacters,u=void 0===h?f:h,c=u.map((function(t){var e=t.open,r=t.close;return e===r?e:e+"|"+r})).join("|"),d=new RegExp("(\\s*"+n+"\\s*|"+c+"|\\s+)","g"),p=t.split(d).filter((function(t){return t&&"undefined"!==t})),g=p.length,m=[],v=[];function y(){return!!v.length&&(m.push(v.join("")),v=[],!0)}for(var _,x=function(e){var r=p[e].trim(),i=e,a=B(u,(function(t){return t.open===r})),h=B(u,(function(t){return t.close===r}));if(a){if(-1!==(i=S(a,p,e,g,u))&&l)return y()&&s?(_=e,"break"):(m.push(p.slice(e,i+1).join("")),e=i,s?(_=e,"break"):(_=e,"continue"))}else{if(h&&!w(h,p,e)){var c=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}(u);return c.splice(u.indexOf(h),1),{value:A(t,{separator:n,isSeparateFirst:s,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:c})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(r,n)&&!o)return y(),s?(_=e,"break"):(_=e,"continue")}-1===i&&(i=g-1),v.push(p.slice(e,i+1).join("")),_=e=i},E=0;E<g;++E){var T=x(E);if(E=_,"object"==typeof T)return T.value;if("break"===T)break}return v.length&&m.push(v.join("")),m}function M(t){return A(t,"")}function R(t){return A(t,",")}function P(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function C(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var r=e[1],i=e[2];return{prefix:r,unit:e[3],value:parseFloat(i)}}function O(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,r,i){return""+r+e+i.toLowerCase()}))}function I(){return Date.now?Date.now():(new Date).getTime()}function D(t,e,r){void 0===r&&(r=-1);for(var i=t.length,n=0;n<i;++n)if(e(t[n],n,t))return n;return r}function B(t,e,r){var i=D(t,e);return i>-1?t[i]:r}var F=function(){var t=I(),e=d&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var r=I();return setTimeout((function(){e(r-t)}),1e3/60)}}(),N=function(){var t=d&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function L(t){return Object.keys(t)}function k(t,e){var r=C(t),i=r.value,n=r.unit;if(_(e)){var s=e[n];if(s){if(T(s))return s(i);if(m[n])return m[n](i,s)}}else if("%"===n)return i*e/100;return m[n]?m[n](i):i}function U(t,e,r){return Math.max(e,Math.min(t,r))}function G(t,e,r,i){return void 0===i&&(i=t[0]/t[1]),[[Y(e[0],g),Y(e[0]/i,g)],[Y(e[1]*i,g),Y(e[1],g)]].filter((function(t){return t.every((function(t,i){var n=e[i],s=Y(n,g);return r?t<=n||t<=s:t>=n||t>=s}))}))[0]||t}function j(t,e,r,i){if(!i)return t.map((function(t,i){return U(t,e[i],r[i])}));var n=t[0],s=t[1],o=!0===i?n/s:i,a=G(t,e,!1,o),l=a[0],h=a[1],u=G(t,r,!0,o),c=u[0],d=u[1];return n<l||s<h?(n=l,s=h):(n>c||s>d)&&(n=c,s=d),[n,s]}function H(t){for(var e=t.length,r=0,i=e-1;i>=0;--i)r+=t[i];return e?r/e:0}function z(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=Math.atan2(i,r);return n>=0?n:n+2*Math.PI}function W(t){var e=function(t){return[0,1].map((function(e){return H(t.map((function(t){return t[e]})))}))}(t),r=z(e,t[0]),i=z(e,t[1]);return r<i&&i-r<Math.PI||r>i&&i-r<-Math.PI?1:-1}function X(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Y(t,e){if(!e)return t;var r=1/e;return Math.round(t/e)/r}function V(t,e){return t.forEach((function(r,i){t[i]=Y(t[i],e)})),t}function $(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function q(t,e){-1===t.indexOf(e)&&t.push(e)}function K(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Z(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Q(t,e){if(t.classList)t.classList.remove(e);else{var r=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(r," ")}}function J(t,e,r,i){t.addEventListener(e,r,i)}function tt(t,e,r,i){t.removeEventListener(e,r,i)}function et(t){return(null==t?void 0:t.ownerDocument)||p}function rt(t){return et(t).documentElement}function it(t){return et(t).body}function nt(t){var e;return(null===(e=null==t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView)||window}function st(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function ot(t){return _(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}var at=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var r=this.keys,i=this.values,n=r.indexOf(t),s=-1===n?r.length:n;r[s]=t,i[s]=e},t}(),lt=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),ht="function"==typeof Map,ut=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var ct=function(){function t(t,e,r,i,n,s,o,a){this.prevList=t,this.list=e,this.added=r,this.removed=i,this.changed=n,this.maintained=s,this.changedBeforeAdded=o,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var r=[],i=[];return t.forEach((function(t){var e=t[0],n=t[1],s=new ut;r[e]=s,i[n]=s})),r.forEach((function(t,e){t.connect(r[e-1])})),t.filter((function(t,r){return!e[r]})).map((function(t,e){var n=t[0],s=t[1];if(n===s)return[0,0];var o=r[n],a=i[s-1],l=o.getIndex();return o.disconnect(),a?o.connect(a,a.next):o.connect(void 0,r[0]),[l,o.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,r=[];this.cacheOrdered=t.filter((function(t,i){var n=t[0],s=t[1],o=e[i],a=o[0],l=o[1];if(n!==s)return r.push([a,l]),!0})),this.cachePureChanged=r},t}();function dt(t,e,r){var i=ht?Map:r?lt:at,n=r||function(t){return t},s=[],o=[],a=[],l=t.map(n),h=e.map(n),u=new i,c=new i,d=[],p=[],f={},g=[],m=0,v=0;return l.forEach((function(t,e){u.set(t,e)})),h.forEach((function(t,e){c.set(t,e)})),l.forEach((function(t,e){var r=c.get(t);void 0===r?(++v,o.push(e)):f[r]=v})),h.forEach((function(t,e){var r=u.get(t);void 0===r?(s.push(e),++m):(a.push([r,e]),v=f[e]||0,d.push([r-v,e-m]),p.push(e===r),r!==e&&g.push([r,e]))})),o.reverse(),new ct(t,e,s,o,g,a,d,p)}var pt=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),r=dt(this.list,e,this.findKeyCallback);return this.list=e,r},t}();const ft=pt;var gt=function(t,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},gt(t,e)};function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var vt=function(){return vt=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},vt.apply(this,arguments)};function yt(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function _t(t,e,r){if(r||2===arguments.length)for(var i,n=0,s=e.length;n<s;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function xt(t){var e=0;return t.map((function(t){return null==t?"$compat".concat(++e):"".concat(t)}))}function bt(t){var e=[];return t.forEach((function(t){e=e.concat(x(t)?bt(t):t)})),e}function Et(t,e){if(!e)return t;for(var r in e)y(t[r])&&(t[r]=e[r]);return t}function Tt(t,e){if(t===e)return!1;for(var r in t)if(!(r in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function St(t){var e=t.className,r=yt(t,["className"]);return null!=e&&(r.class=e),delete r.style,delete r.children,r}function wt(t){var e={},r={};for(var i in t)0===i.indexOf("on")?r[i]=t[i]:e[i]=t[i];return[e,r]}function At(t){if(!t)return null;var e=t.b;return ot(e)?e:At(t.c)}function Mt(t){var e=t.parentNode;e&&e.removeChild(t)}function Rt(t){t.forEach((function(t){t()}))}function Pt(){return this.constructor(this.props,this.context)}var Ct=0,Ot=function(){function t(t,e,r,i,n,s,o){void 0===o&&(o={}),this.t=t,this.d=e,this.k=r,this.i=i,this.c=n,this.ref=s,this.ps=o,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(t,e,r,i,n){var s,o=this,a=o.d,l=bt((s=e,L(s).map((function(t){return s[t]}))).filter((function(t){return t.$_req})).map((function(t){return t.$_subs}))),h=B(l,(function(t){return t.d===a}));if(o.b&&!b(r)&&!n&&!o.s(r.props,i)&&!h)return l.reduce((function(t,e){var r=e.d;return t[0]?t[0].d===r&&t.push(e):r>a&&t.push(e),t}),[]).forEach((function(r){$t(r,r._ps,[r.o],t,e,!0)})),!1;o.o=r,o.ss(i);var u=o.ps;return b(r)||(o.ps=r.props,o.ref=r.ref),Bt(this),o.r(t,e,o.b?u:{},i),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this,e=t.ref,r=t.fr;e&&e(r?r.current:t.b)},t}();function It(){return Object.__CROACT_CURRENT_INSTNACE__}function Dt(){return Ct}function Bt(t){return Object.__CROACT_CURRENT_INSTNACE__=t,Ct=0,t}var Ft=function(){function t(t,e){void 0===t&&(t={}),this.props=t,this.context=e,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,e){return this.props!==t||this.state!==e},e.setState=function(t,e,r){var i=this;i.$_timer||(i.$_state={}),clearTimeout(i.$_timer),i.$_timer=0,i.$_state=vt(vt({},i.$_state),t),r?i.$_setState(e,r):i.$_timer=window.setTimeout((function(){i.$_timer=0,i.$_setState(e,r)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var r=[],i=this.$_p;$t(i.c,[i],[i.o],r,i._cs,vt(vt({},this.state),this.$_state),e)&&(t&&r.push(t),Rt(r),Bt(null))},t}(),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return Tt(this.props,t)||Tt(this.state,e)},e}(Ft);function Lt(t){var e=function(t){e.current=t};return e.current=t,e}function kt(t,e,r,i){var n,s;return(null===(n=null==t?void 0:t.prototype)||void 0===n?void 0:n.render)?s=new t(e,r):((s=new Ft(e,r)).constructor=t,t._fr?(i.fr=Lt(),s.render=function(){return this.constructor(this.props,i.fr)}):s.render=Pt),s.$_p=i,s}var Ut=function(t){function e(e,r,i,n,s,o,a){void 0===a&&(a={});var l=t.call(this,e,r,i,n,s,o,Et(a,e.defaultProps))||this;return l.typ="comp",l._usefs=[],l._uefs=[],l._defs=[],l}mt(e,t);var r=e.prototype;return r.s=function(t,e){var r=this.b;return!1!==r.shouldComponentUpdate(Et(t,this.t.defaultProps),e||r.state)},r.r=function(t,e,r){var i,n,s=this,o=s.t;s.ps=Et(s.ps,s.t.defaultProps);var a=s.ps,l=!s.b,h=o.contextType,u=s.b,c=null==h?void 0:h.get(s);s._cs=e,l?(u=kt(o,a,c,s),s.b=u):(u.props=a,u.context=c);var d=u.state;s._usefs=[],s._uefs=[];var p=u.render();0===(null===(n=null===(i=null==p?void 0:p.props)||void 0===i?void 0:i.children)||void 0===n?void 0:n.length)&&(p.props.children=s.ps.children);var f=vt(vt({},e),u.$_cs);$t(s,s._ps,p?[p]:[],t,f),l?s._uefs.push((function(){null==h||h.register(s),u.componentDidMount()})):s._uefs.push((function(){u.componentDidUpdate(r,d)})),t.push((function(){s._usefs.forEach((function(t){t()})),l?s.md():s.ud(),s._defs=s._uefs.map((function(t){return t()}))}))},r.ss=function(t){var e=this.b;e&&t&&(e.state=t)},r.un=function(){var t,e=this;e._ps.forEach((function(t){t.un()})),null===(t=e.t.contextType)||void 0===t||t.unregister(e),clearTimeout(e.b.$_timer),e._defs.forEach((function(t){t&&t()})),e.b.componentWillUnmount()},e}(Ot);function Gt(t,e){var r=L(t),i=L(e),n=dt(r,i,(function(t){return t})),s={},o={},a={};return n.added.forEach((function(t){var r=i[t];s[r]=e[r]})),n.removed.forEach((function(e){var i=r[e];o[i]=t[i]})),n.maintained.forEach((function(i){var n=i[0],s=r[n],o=[t[s],e[s]];t[s]!==e[s]&&(a[s]=o)})),{added:s,removed:o,changed:a}}var jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typ="elem",e._es={},e._svg=!1,e}mt(e,t);var r=e.prototype;return r.e=function(t,e){var r=this,i=r._es,n=r.b,s=function(t){return t.replace(/^on/g,"").toLowerCase()}(t);e?(tt(n,s,i[t]),delete i[t]):(i[t]=function(e){var i,n;null===(n=(i=r.ps)[t])||void 0===n||n.call(i,e)},J(n,s,i[t]))},r.s=function(t){return Tt(this.ps,t)},r.r=function(t,e,r){var i,n=this,s=!n.b,o=n.ps;if(s){var a=At(n.c),l=!1;l=!(!n._svg&&"svg"!==n.t)||a&&a.ownerSVGElement,n._svg=l;var h=null===(i=n._hyd)||void 0===i?void 0:i.splice(0,1)[0],u=n.t;if(h)n._hyd=[].slice.call(h.children||[]);else{var c=et(a);h=l?c.createElementNS("http://www.w3.org/2000/svg",u):c.createElement(u)}n.b=h}$t(n,n._ps,o.children,t,e);var d=n.b,p=wt(r),f=p[0],g=p[1],m=wt(o),v=m[0],y=m[1];return function(t,e,r){var i=Gt(St(t),St(e)),n=i.added,s=i.removed,o=i.changed;for(var a in n)r.setAttribute(a,n[a]);for(var l in o)r.setAttribute(l,o[l][1]);for(var h in s)r.removeAttribute(h)}(f,v,d),function(t,e,r){var i=Gt(t,e),n=i.added,s=i.removed;for(var o in s)r.e(o,!0);for(var a in n)r.e(a)}(g,y,n),function(t,e,r){var i=r.style,n=Gt(t,e),s=n.added,o=n.removed,a=n.changed;for(var l in s){var h=O(l,"-");i.setProperty(h,s[l])}for(var l in a){var u=O(l,"-");i.setProperty(u,a[l][1])}for(var l in o){var c=O(l,"-");i.removeProperty(c)}}(r.style||{},o.style||{},d),t.push((function(){s?n.md():n.ud()})),!0},r.un=function(){var t=this,e=t._es,r=t.b;for(var i in e)tt(r,i,e[i]);t._ps.forEach((function(t){t.un()})),t._es={},t._sel||Mt(r)},e}(Ot);function Ht(t){if(!t||ot(t))return t;var e=t.$_p._ps;return e.length?Ht(e[0].b):null}function zt(t){if(t){if(t.b&&ot(t.b))return t;var e=t._ps;return e.length?zt(e[0]):null}}function Wt(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=e||{},s=n.key,o=n.ref,a=yt(n,["key","ref"]);return{type:t,key:s,ref:o,props:vt(vt({},a),{children:$(r).filter((function(t){return null!=t&&!1!==t}))})}}var Xt=function(t){function e(e,r){void 0===r&&(r=0);var i=t.call(this,"container",r,"container",0,null)||this;return i.typ="container",i.b=e,i}mt(e,t);var r=e.prototype;return r.r=function(){return!0},r.un=function(){},e}(Ot),Yt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.typ="text",e}mt(e,t);var r=e.prototype;return r.r=function(t){var e,r=this,i=!r.b;if(i){var n=At(r.c),s=null===(e=r._hyd)||void 0===e?void 0:e.splice(0,1)[0];r.b=s||et(n).createTextNode(r.t.replace("text_",""))}return t.push((function(){i?r.md():r.ud()})),!0},r.un=function(){Mt(this.b)},e}(Ot);function Vt(t,e,r,i){var n=i.d+1;if(b(t)||E(t))return new Yt("text_".concat(t),n,e,r,i,null,{});var s=t.type;return new("string"==typeof s?jt:Ut)(s,n,e,r,i,t.ref,t.props)}function $t(t,e,r,i,n,s,o){var a=function(t,e,r){var i=r.map((function(t){return b(t)?null:t.key})),n=dt(xt(e.map((function(t){return t.k}))),xt(i),(function(t){return t}));n.removed.forEach((function(t){e.splice(t,1)[0].un()})),n.ordered.forEach((function(t){var r=t[0],i=t[1],n=e.splice(r,1)[0];e.splice(i,0,n);var s=Ht(n.b),o=Ht(e[i+1]&&e[i+1].b);s&&s.parentNode.insertBefore(s,o)})),n.added.forEach((function(n){e.splice(n,0,Vt(r[n],i[n],n,t))}));var s=n.maintained.filter((function(n){n[0];var s=n[1],o=r[s],a=e[s];return(b(o)?"text_".concat(o):o.type)!==a.t?(a.un(),e.splice(s,1,Vt(o,i[s],s,t)),!0):(a.i=s,!1)}));return _t(_t([],n.added,!0),s.map((function(t){return t[0],t[1]})),!0)}(t,e,r),l=t._hyd,h=e.filter((function(t,e){return t._hyd=l,t.u(i,n,r[e],s,o)}));"container"===t.typ&&t._sel&&e.forEach((function(t){var e=zt(t);e&&(e._sel=!0)})),t._hyd=null;var u=At(t);return u&&a.reverse().forEach((function(r){var i=e[r],n=Ht(i.b);if(n&&u!==n&&!n.parentNode){var s=function(t,e){for(var r=t._ps,i=r.length,n=e.i+1;n<i;++n){var s=Ht(r[n].b);if(s)return s}return null}(t,i);u.insertBefore(n,s)}})),h.length>0}function qt(t,e,r,i){void 0===r&&(r=e.__CROACT__),void 0===i&&(i={});var n=!!r;r||(r=new Xt(e));var s=[];return $t(r,r._ps,t?[t]:[],s,i,void 0,void 0),Rt(s),Bt(null),n||(e.__CROACT__=r),r}function Kt(t,e,r){return!r&&t&&((r=new Xt(e.parentElement))._hyd=[e],r._sel=!0),qt(t,e,r),r}function Zt(t){var e=It(),r=e._hs||(e._hs=[]),i=Dt(),n=r[i];if(Ct=i+1,n){if(!Tt(n.deps,t.deps))return n.updated=!1,n;r[i]=t}else r.push(t);return t.value=t.func(),t.updated=!0,t}function Qt(t){return Zt({func:function(){return Lt(t)},deps:[]}).value}function Jt(t,e,r){var i=It(),n=Zt({func:function(){return t},deps:e}),s=r?i._usefs:i._uefs;n.updated?s.push((function(){return n.effect&&n.effect(),n.effect=t(),n.effect})):s.push((function(){return n.effect}))}function te(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return!0;return!1}function ee(t,e){for(var r=t.length,i=0;i<r;++i)if(e(t[i],i))return t[i];return null}function re(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function ie(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function ne(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function se(t){return t.replace(/_/g,".")}function oe(t,e){var r=null,i="-1";return te(t,(function(t){var n=ie("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!n||t.brand)&&(r=t,i=n[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(i=function(t,e){var r=ie("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return r?r[3]:""}(t.versionTest.toLowerCase(),e)||i),i=se(i),!0)})),{preset:r,version:i}}function ae(t,e){var r={brand:"",version:"-1"};return te(t,(function(t){var i=le(e,t);return!!i&&(r.brand=t.id,r.version=t.versionAlias||i.version,"-1"!==r.version)})),r}function le(t,e){return ee(t,(function(t){var r=t.brand;return ie(""+e.test,r.toLowerCase())}))}var he=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ue=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ce=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],de=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],pe=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function fe(t){return!!oe(de,t).preset}function ge(t){var e=navigator.userAgentData,r=(e.uaList||e.brands).slice(),i=t&&t.fullVersionList,n=e.mobile||!1,s=r[0],o=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),a={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ae(de,r).brand||fe(re())},l={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&te(ce,(function(t){return le(r,t)}));var h=ae(ue,r);if(a.chromium=!!h.brand,a.chromiumVersion=h.version,!a.chromium){var u=ae(ce,r);a.webkit=!!u.brand,a.webkitVersion=u.version}var c=ee(pe,(function(t){return new RegExp(""+t.test,"g").exec(o)}));if(l.name=c?c.id:"",t&&(l.version=t.platformVersion),i&&i.length){var d=ae(he,i);a.name=d.brand||a.name,a.version=d.version||a.version}else{var p=ae(he,r);a.name=p.brand||a.name,a.version=p.brand&&t?t.uaFullVersion:p.version}return a.webkit&&(l.name=n?"ios":"mac"),"ios"===l.name&&a.webview&&(a.version="-1"),l.version=se(l.version),a.version=se(a.version),l.majorVersion=parseInt(l.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:l,isMobile:n,isHints:!0}}function me(t){return void 0===t&&ne()?ge():function(t){var e=re(t),r=!!/mobi/g.exec(e),i={name:"unknown",version:"-1",majorVersion:-1,webview:fe(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},s=oe(he,e),o=s.preset,a=s.version,l=oe(pe,e),h=l.preset,u=l.version,c=oe(ue,e);if(i.chromium=!!c.preset,i.chromiumVersion=c.version,!i.chromium){var d=oe(ce,e);i.webkit=!!d.preset,i.webkitVersion=d.version}return h&&(n.name=h.id,n.version=u,n.majorVersion=parseInt(u,10)),o&&(i.name=o.id,i.version=a,i.webview&&"ios"===n.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:n,isMobile:r,isHints:!1}}(t)}const ve=me;function ye(t,e,r,i,n,s){for(var o=0;o<n;++o){var a=r+o*n,l=i+o*n;t[a]+=t[l]*s,e[a]+=e[l]*s}}function _e(t,e,r,i,n){for(var s=0;s<n;++s){var o=r+s*n,a=i+s*n,l=t[o],h=e[o];t[o]=t[a],t[a]=l,e[o]=e[a],e[a]=h}}function xe(t,e,r,i,n){for(var s=0;s<i;++s){var o=r+s*i;t[o]/=n,e[o]/=n}}function be(t,e,r){void 0===r&&(r=Math.sqrt(t.length));for(var i=t.slice(),n=0;n<r;++n)i[n*r+e-1]=0,i[(e-1)*r+n]=0;return i[(e-1)*(r+1)]=1,i}function Ee(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=Ge(e),n=0;n<e;++n){var s=e*n+n;if(!Y(r[s],g))for(var o=n+1;o<e;++o)if(r[e*n+o]){_e(r,i,n,o,e);break}if(!Y(r[s],g))return[];xe(r,i,n,e,r[s]);for(o=0;o<e;++o){var a=o,l=r[o+n*e];Y(l,g)&&n!==o&&ye(r,i,a,n,e,-l)}}return i}function Te(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],i=t[e*e-1],n=0;n<e-1;++n)r[n]=t[e*(e-1)+n]/i;return r[e-1]=0,r}function Se(t,e){for(var r=t.slice(),i=t.length;i<e-1;++i)r[i]=0;return r[e-1]=1,r}function we(t,e,r){if(void 0===e&&(e=Math.sqrt(t.length)),e===r)return t;for(var i=Ge(r),n=Math.min(e,r),s=0;s<n-1;++s){for(var o=0;o<n-1;++o)i[s*r+o]=t[s*e+o];i[(s+1)*r-1]=t[(s+1)*e-1],i[(r-1)*r+s]=t[(e-1)*e+s]}return i[r*r-1]=t[e*e-1],i}function Ae(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Ge(t);return e.forEach((function(e){i=Me(i,e,t)})),i}function Me(t,e,r){void 0===r&&(r=Math.sqrt(t.length));var i=[],n=t.length/r,s=e.length/n;if(!n)return e;if(!s)return t;for(var o=0;o<r;++o)for(var a=0;a<s;++a){i[a*r+o]=0;for(var l=0;l<n;++l)i[a*r+o]+=t[l*r+o]*e[a*n+l]}return i}function Re(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]+e[n];return i}function Pe(t,e){for(var r=Math.min(t.length,e.length),i=t.slice(),n=0;n<r;++n)i[n]=i[n]-e[n];return i}function Ce(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Oe(t,e,r){void 0===r&&(r=e.length);var i=Me(t,e,r),n=i[r-1];return i.map((function(t){return t/n}))}function Ie(t,e){return Me(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function De(t,e){return Me(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Be(t,e){return Me(t,Ue(e,4))}function Fe(t,e){var r=e[0],i=void 0===r?1:r,n=e[1],s=void 0===n?1:n,o=e[2];return Me(t,[i,0,0,0,0,s,0,0,0,0,void 0===o?1:o,0,0,0,0,1],4)}function Ne(t,e){return Oe(Ue(e,3),Se(t,3))}function Le(t,e){var r=e[0],i=void 0===r?0:r,n=e[1],s=void 0===n?0:n,o=e[2];return Me(t,[1,0,0,0,0,1,0,0,0,0,1,0,i,s,void 0===o?0:o,1],4)}function ke(t,e){return Me(t,e,4)}function Ue(t,e){var r=Math.cos(t),i=Math.sin(t),n=Ge(e);return n[0]=r,n[1]=i,n[e]=-i,n[e+1]=r,n}function Ge(t){for(var e=t*t,r=[],i=0;i<e;++i)r[i]=i%(t+1)?0:1;return r}function je(t,e){for(var r=Ge(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[(e+1)*n]=t[n];return r}function He(t,e){for(var r=Ge(e),i=Math.min(t.length,e-1),n=0;n<i;++n)r[e*(e-1)+n]=t[n];return r}function ze(t,e,r,i,n,s,o,a){var l=t[0],h=t[1],u=e[0],c=e[1],d=r[0],p=r[1],f=i[0],g=i[1],m=n[0],v=n[1],y=s[0],_=s[1],x=o[0],b=o[1],E=a[0],T=a[1],S=Ee([l,0,u,0,d,0,f,0,h,0,c,0,p,0,g,0,1,0,1,0,1,0,1,0,0,l,0,u,0,d,0,f,0,h,0,c,0,p,0,g,0,1,0,1,0,1,0,1,-m*l,-v*l,-y*u,-_*u,-x*d,-b*d,-E*f,-T*f,-m*h,-v*h,-y*c,-_*c,-x*p,-b*p,-E*g,-T*g],8);if(!S.length)return[];var w=Me(S,[m,v,y,_,x,b,E,T],8);return w[8]=1,we(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=[],i=0;i<e;++i)for(var n=0;n<e;++n)r[n*e+i]=t[e*i+n];return r}(w),3,4)}var We=function(){return We=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},We.apply(this,arguments)};function Xe(t,e){return void 0===e&&(e=0),Ye(Ve(t,e))}function Ye(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var r=t.matrixFunction,i=t.functionValue;r&&(e=r(e,i))})),e}function Ve(t,e){return void 0===e&&(e=0),(x(t)?t:M(t)).map((function(t){var r=P(t),i=r.prefix,n=r.value,s=null,o=i,a="";if("translate"===i||"translateX"===i||"translate3d"===i){var l=_(e)?We(We({},e),{"o%":e["%"]}):{"%":e,"o%":e},h=R(n).map((function(t,r){return l["%"]=0===r&&"x%"in l?e["x%"]:1===r&&"y%"in l?e["y%"]:e["o%"],k(t,l)})),u=h[0],c=h[1],d=void 0===c?0:c,p=h[2];s=Le,a=[u,d,void 0===p?0:p]}else if("translateY"===i){s=Le,a=[0,d=k(n,_(e)?We({"%":e["y%"]},e):{"%":e}),0]}else if("translateZ"===i){s=Le,a=[0,0,parseFloat(n)]}else if("scale"===i||"scale3d"===i){var f=R(n).map((function(t){return parseFloat(t)})),g=f[0],m=f[1],v=void 0===m?g:m,y=f[2];s=Fe,a=[g,v,void 0===y?1:y]}else if("scaleX"===i){s=Fe,a=[g=parseFloat(n),1,1]}else if("scaleY"===i){s=Fe,a=[1,v=parseFloat(n),1]}else if("scaleZ"===i){s=Fe,a=[1,1,parseFloat(n)]}else if("rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i){var x=C(n),b=x.unit,E=x.value;"rotate"===i||"rotateZ"===i?(o="rotateZ",s=Be):"rotateX"===i?s=Ie:"rotateY"===i&&(s=De),a="rad"===b?E:E*Math.PI/180}else if("matrix3d"===i)s=ke,a=R(n).map((function(t){return parseFloat(t)}));else if("matrix"===i){var T=R(n).map((function(t){return parseFloat(t)}));s=ke,a=[T[0],T[1],0,0,T[2],T[3],0,0,0,0,1,0,T[4],T[5],0,1]}else o="";return{name:i,functionName:o,value:n,matrixFunction:s,functionValue:a}}))}var $e=function(t,e){return $e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},$e(t,e)};var qe,Ke="function"==typeof Map?void 0:(qe=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++qe)});const Ze=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,Ke)||this}return function(t,e){function r(){this.constructor=t}$e(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(ft);var Qe=function(){return Qe=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Qe.apply(this,arguments)};var Je=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(_(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(_(t))for(var r in t)this.off(r);else if(e){var i=this._events[t];if(i){var n=D(i,(function(t){return t.listener===e}));n>-1&&i.splice(n,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var r=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){r._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var r=this;void 0===e&&(e={});var i=this._events[t];if(!t||!i)return!0;var n=!1;return e.eventType=t,e.stop=function(){n=!0},e.currentTarget=this,function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}(i).forEach((function(i){i.listener(e),i.once&&r.off(t,i.listener)})),!n},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,r){var i=this._events;i[t]=i[t]||[],i[t].push(Qe({listener:e},r))},t}();const tr=Je;var er=function(t,e){return er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},er(t,e)};var rr=function(){return rr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},rr.apply(this,arguments)};function ir(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function nr(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function sr(t){return t?b(t)?document.querySelector(t):T(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}const or=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e._currentOptions=null,e._lock=!1,e._unregister=null,e._onScroll=function(){var t=e._currentOptions;!e._lock&&t&&e.emit("scrollDrag",{next:function(r){e.checkScroll({container:t.container,inputEvent:r})}})},e}!function(t,e){function r(){this.constructor=t}er(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t);var r=e.prototype;return r.dragStart=function(t,e){var r=sr(e.container);if(r){var i=0,n=0,s=0,o=0;if(r===document.body)s=window.innerWidth,o=window.innerHeight;else{var a=r.getBoundingClientRect();i=a.top,n=a.left,s=a.width,o=a.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:i,left:n,width:s,height:o},this._prevScrollPos=this._getScrollPosition([0,0],e),this._currentOptions=e,this._registerScrollEvent(e)}else this._flag=!1},r.drag=function(t,e){if(clearTimeout(this._timer),this._flag){var r=t.clientX,i=t.clientY,n=e.threshold,s=void 0===n?0:n,o=this._startRect,a=this._startPos;this._currentOptions=e;var l=[0,0];return o.top>i-s?(a[1]>o.top||i<a[1])&&(l[1]=-1):o.top+o.height<i+s&&(a[1]<o.top+o.height||i>a[1])&&(l[1]=1),o.left>r-s?(a[0]>o.left||r<a[0])&&(l[0]=-1):o.left+o.width<r+s&&(a[0]<o.left+o.width||r>a[0])&&(l[0]=1),!(!l[0]&&!l[1])&&this._continueDrag(rr(rr({},e),{direction:l,inputEvent:t,isDrag:!0}))}},r.checkScroll=function(t){var e=this;if(this._isWait)return!1;var r=t.prevScrollPos,i=void 0===r?this._prevScrollPos:r,n=t.direction,s=t.throttleTime,o=void 0===s?0:s,a=t.inputEvent,l=t.isDrag,h=this._getScrollPosition(n||[0,0],t),u=h[0]-i[0],c=h[1]-i[1],d=n||[u?Math.abs(u)/u:0,c?Math.abs(c)/c:0];return this._prevScrollPos=h,this._lock=!1,!(!u&&!c)&&(this.emit("move",{offsetX:d[0]?u:0,offsetY:d[1]?c:0,inputEvent:a}),o&&l&&(clearTimeout(this._timer),this._timer=window.setTimeout((function(){e._continueDrag(t)}),o)),!0)},r.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},r._getScrollPosition=function(t,e){var r=e.container,i=e.getScrollPosition;return(void 0===i?ir:i)({container:sr(r),direction:t})},r._continueDrag=function(t){var e,r=this,i=t.container,n=t.direction,s=t.throttleTime,o=t.useScroll,a=t.isDrag,l=t.inputEvent;if(!(!this._flag||a&&this._isWait)){var h=I(),u=Math.max(s+this._prevTime-h,0);if(u>0)return clearTimeout(this._timer),this._timer=window.setTimeout((function(){r._continueDrag(t)}),u),!1;this._prevTime=h;var c=this._getScrollPosition(n,t);this._prevScrollPos=c,a&&(this._isWait=!0),o||(this._lock=!0);var d={container:sr(i),direction:n,inputEvent:l};return null===(e=t.requestScroll)||void 0===e||e.call(t,d),this.emit("scroll",d),this._isWait=!1,o||this.checkScroll(rr(rr({},t),{prevScrollPos:c,direction:n,inputEvent:l}))}},r._registerScrollEvent=function(t){this._unregisterScrollEvent();var e=t.checkScrollEvent;if(e){var r=!0===e?nr:e,i=sr(t.container);!0!==e||i!==document.body&&i!==document.documentElement?this._unregister=r(i,this._onScroll):this._unregister=nr(window,this._onScroll)}},r._unregisterScrollEvent=function(){var t;null===(t=this._unregister)||void 0===t||t.call(this),this._unregister=null},e}(tr);function ar(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function lr(t){return Y(t,g)}function hr(t){return t.length<3?0:Math.abs(function(t){for(var e=0,r=t.length-1;r>=0;--r)e+=t[r];return e}(t.map((function(e,r){var i=t[r+1]||t[0];return e[0]*i[1]-i[0]*e[1]}))))/2}function ur(t,e){var r=e.width,i=e.height,n=e.left,s=e.top,o=cr(t),a=o.minX,l=o.minY,h=o.maxX,u=o.maxY,c=r/(h-a),d=i/(u-l);return t.map((function(t){return[n+(t[0]-a)*c,s+(t[1]-l)*d]}))}function cr(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,r)}}function dr(t,e,r){var i=t[0],n=t[1],s=cr(e),o=s.minX,a=s.maxX,l=[[o,n],[a,n]],h=pr(l[0],l[1]),u=mr(e),c=[];if(u.forEach((function(e){var r,i=pr(e[0],e[1]),s=e[0];(r=i,h.every((function(t,e){return 0===lr(t-r[e])})))?c.push({pos:t,line:e,type:"line"}):gr(fr(h,i),[l,e]).forEach((function(t){e.some((function(e){return i=t,!lr((r=e)[0]-i[0])&&!lr(r[1]-i[1]);var r,i}))?c.push({pos:t,line:e,type:"point"}):0!==lr(s[1]-n)&&c.push({pos:t,line:e,type:"intersection"})}))})),!r&&B(c,(function(t){return t[0]===i})))return!0;var d=0,p={};return c.forEach((function(t){var e=t.pos,r=t.type,s=t.line;if(!(e[0]>i))if("intersection"===r)++d;else{if("line"===r)return;if("point"===r){var o=B(s,(function(t){return t[1]!==n})),a=p[e[0]],l=o[1]>n?1:-1;a?a!==l&&++d:p[e[0]]=l}}})),d%2==1}function pr(t,e){var r=t[0],i=t[1],n=e[0]-r,s=e[1]-i;Math.abs(n)<g&&(n=0),Math.abs(s)<g&&(s=0);var o=0,a=0,l=0;return n?s?(a=1,l=-(o=-s/n)*r-i):(a=1,l=-i):s&&(o=-1,l=r),[o,a,l]}function fr(t,e){var r=t[0],i=t[1],n=t[2],s=e[0],o=e[1],a=e[2],l=0===r&&0===s,h=0===i&&0===o,u=[];if(l&&h)return[];if(l){var c=-n/i;return c!==-a/o?[]:[[-1/0,c],[1/0,c]]}if(h){var d=-n/r;return d!==-a/s?[]:[[d,-1/0],[d,1/0]]}if(0===r)u=[[p=-(o*(f=-n/i)+a)/s,f]];else if(0===s){u=[[p=-(i*(f=-a/o)+n)/r,f]]}else if(0===i){u=[[p=-n/r,f=-(s*p+a)/o]]}else if(0===o){u=[[p=-a/s,f=-(r*p+n)/i]]}else{var p,f;u=[[p=(i*a-o*n)/(o*r-i*s),f=-(r*p+n)/i]]}return u.map((function(t){return[t[0],t[1]]}))}function gr(t,e){var r=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),i=[];if(2===t.length){var n=t[0],s=n[0],o=n[1];if(lr(s-t[1][0])){if(!lr(o-t[1][1])){var a=Math.max.apply(Math,r.map((function(t){return t[0][0]}))),l=Math.min.apply(Math,r.map((function(t){return t[0][1]})));if(lr(a-l)>0)return[];i=[[a,o],[l,o]]}}else{var h=Math.max.apply(Math,r.map((function(t){return t[1][0]}))),u=Math.min.apply(Math,r.map((function(t){return t[1][1]})));if(lr(h-u)>0)return[];i=[[s,h],[s,u]]}}return i.length||(i=t.filter((function(t){var e=t[0],i=t[1];return r.every((function(t){return 0<=lr(e-t[0][0])&&0<=lr(t[0][1]-e)&&0<=lr(i-t[1][0])&&0<=lr(t[1][1]-i)}))}))),i.map((function(t){return[lr(t[0]),lr(t[1])]}))}function mr(t){return ar(t.slice(1),[t[0]]).map((function(e,r){return[t[r],e]}))}function vr(t,e){var r=t.slice(),i=e.slice();-1===W(r)&&r.reverse(),-1===W(i)&&i.reverse();var n=mr(r),s=mr(i),o=n.map((function(t){return pr(t[0],t[1])})),a=s.map((function(t){return pr(t[0],t[1])})),l=[];o.forEach((function(t,e){var r=n[e],o=[];a.forEach((function(i,n){var a=gr(fr(t,i),[r,s[n]]);o.push.apply(o,a.map((function(t){return{index1:e,index2:n,pos:t,type:"intersection"}})))})),o.sort((function(t,e){return X(r[0],t.pos)-X(r[0],e.pos)})),l.push.apply(l,o),dr(r[1],i)&&l.push({index1:e,index2:-1,pos:r[1],type:"inside"})})),s.forEach((function(t,e){if(dr(t[1],r)){var i=!1,n=D(l,(function(t){return t.index2===e?(i=!0,!1):!!i}));-1===n&&(i=!1,n=D(l,(function(t){var r=t.index1,n=t.index2;return-1===r&&n+1===e?(i=!0,!1):!!i}))),-1===n?l.push({index1:-1,index2:e,pos:t[1],type:"inside"}):l.splice(n,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var h={};return l.filter((function(t){var e=t.pos,r=e[0]+"x"+e[1];return!h[r]&&(h[r]=!0,!0)}))}function yr(t,e){var r=function(t,e){return vr(t,e).map((function(t){return t.pos}))}(t,e);return hr(r)}var _r=function(t,e){return _r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},_r(t,e)};var xr=function(){return xr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},xr.apply(this,arguments)};function br(t){return 180*(e=[t[0].clientX,t[0].clientY],r=[t[1].clientX,t[1].clientY],i=r[0]-e[0],n=r[1]-e[1],((s=Math.atan2(n,i))>=0?s:s+2*Math.PI)/Math.PI);var e,r,i,n,s}function Er(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),r=[],i=0;i<e;++i)r.push(wr(t[i]));return r}(t.touches):[wr(t)]:[]}function Tr(t,e,r){var i=r.length,n=Ar(t,i),s=n.clientX,o=n.clientY,a=n.originalClientX,l=n.originalClientY,h=Ar(e,i),u=h.clientX,c=h.clientY,d=Ar(r,i);return{clientX:a,clientY:l,deltaX:s-u,deltaY:o-c,distX:s-d.clientX,distY:o-d.clientY}}function Sr(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function wr(t){return{clientX:t.clientX,clientY:t.clientY}}function Ar(t,e){void 0===e&&(e=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},i=Math.min(t.length,e),n=0;n<i;++n){var s=t[n];r.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,r.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,r.clientX+=s.clientX,r.clientY+=s.clientY}return e?{clientX:r.clientX/e,clientY:r.clientY/e,originalClientX:r.originalClientX/e,originalClientY:r.originalClientY/e}:r}var Mr=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return void 0===t&&(t=this.prevClients),br(t)},t.prototype.getRotation=function(t){return void 0===t&&(t=this.prevClients),br(t)-br(this.startClients)},t.prototype.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var r=Tr(t||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,n=r.deltaY;return this.movement+=Math.sqrt(i*i+n*n),this.prevClients=t,r},t.prototype.getPositions=function(t){void 0===t&&(t=this.prevClients);for(var e=this.prevClients,r=this.startClients,i=Math.min(this.length,e.length),n=[],s=0;s<i;++s)n[s]=Tr([t[s]],[e[s]],[r[s]]);return n},t.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var r=Ar(t,this.length),i=Ar(this.prevClients,this.length),n=r.clientX-i.clientX,s=r.clientY-i.clientY;return Math.sqrt(n*n+s*s)+e},t.prototype.getDistance=function(t){return void 0===t&&(t=this.prevClients),Sr(t)},t.prototype.getScale=function(t){return void 0===t&&(t=this.prevClients),Sr(t)/Sr(this.startClients)},t.prototype.move=function(t,e){this.startClients.forEach((function(r){r.clientX-=t,r.clientY-=e})),this.prevClients.forEach((function(r){r.clientX-=t,r.clientY-=e}))},t}(),Rr=["textarea","input"],Pr=function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(t,e){if(void 0===e&&(e=!0),i.flag||!1!==t.cancelable){var r=t.type.indexOf("drag")>=-1;if(!i.flag||!r){i._isDragAPI=!0;var n=i.options,s=n.container,o=n.pinchOutside,a=n.preventWheelClick,l=n.preventRightClick,h=n.preventDefault,u=n.checkInput,c=n.dragFocusedInput,d=n.preventClickEventOnDragStart,p=n.preventClickEventOnDrag,f=n.preventClickEventByCondition,g=i._useTouch,m=!i.flag;if(i._isSecondaryButton=3===t.which||2===t.button,a&&(2===t.which||1===t.button)||l&&(3===t.which||2===t.button))return i.stop(),!1;if(m){var v=i._window.document.activeElement,y=t.target;if(y){var _=y.tagName.toLowerCase(),x=Rr.indexOf(_)>-1,b=y.isContentEditable;if(x||b){if(u||!c&&v===y)return!1;if(v&&(v===y||b&&v.isContentEditable&&v.contains(y))){if(!c)return!1;y.blur()}}else if((h||"touchstart"===t.type)&&v){var E=v.tagName.toLowerCase();(v.isContentEditable||Rr.indexOf(E)>-1)&&v.blur()}(d||p||f)&&J(i._window,"click",i._onClick,!0)}i.clientStores=[new Mr(Er(t))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=e,i._dragFlag=!0,i._prevInputEvent=t,i.data={},i.doubleFlag=I()-i.prevTime<200,i._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent(),!1===(i._preventMouseEvent||i.emit("dragStart",xr(xr({data:i.data,datas:i.data,inputEvent:t,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:e,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){i._dragFlag=!1}})))&&i.stop(),i._isMouseEvent&&i.flag&&h&&t.preventDefault()}if(!i.flag)return!1;var T=0;if(m?(i._attchDragEvent(),g&&o&&(T=setTimeout((function(){J(s,"touchstart",i.onDragStart,{passive:!1})})))):g&&o&&tt(s,"touchstart",i.onDragStart),i.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(T),m&&t.touches.length!==t.changedTouches.length)return;i.pinchFlag||i.onPinchStart(t)}}}},i.onDrag=function(t,e){if(i.flag){var r=i.options.preventDefault;!i._isMouseEvent&&r&&t.preventDefault(),i._prevInputEvent=t;var n=Er(t),s=i.moveClients(n,t,!1);if(i._dragFlag){if(i.pinchFlag||s.deltaX||s.deltaY)if(!1===(i._preventMouseEvent||i.emit("drag",xr(xr({},s),{isScroll:!!e,inputEvent:t}))))return void i.stop();i.pinchFlag&&i.onPinch(t,n)}i.getCurrentStore().getPosition(n,!0)}},i.onDragEnd=function(t){if(i.flag){var e=i.options,r=e.pinchOutside,n=e.container,s=e.preventClickEventOnDrag,o=e.preventClickEventOnDragStart,a=e.preventClickEventByCondition,l=i.isDrag;(s||o||a)&&requestAnimationFrame((function(){i._allowClickEvent()})),a||o||!s||l||i._allowClickEvent(),i._useTouch&&r&&tt(n,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(t);var h=(null==t?void 0:t.touches)?Er(t):[];0!==h.length&&i.options.keepDragging?i._addStore(new Mr(h)):i.flag=!1;var u=i._getPosition(),c=I(),d=!l&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=l||d?0:c,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",xr({data:i.data,datas:i.data,isDouble:d,isDrag:l,isClick:!l,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:t,isTrusted:i._isTrusted},u)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout((function(){i._preventMouseEvent=!1}),200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){tt(i._window,"click",i._onClick,!0)},i._onClick=function(t){i._allowClickEvent(),i._allowMouseEvent();var e=i.options.preventClickEventByCondition;(null==e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},i._onContextMenu=function(t){i.options.preventRightClick?i.onDragEnd(t):t.preventDefault()},i._passCallback=function(){};var n=[].concat(e),s=n[0];i._window=st(s)?s:nt(s),i.options=xr({checkInput:!1,container:s&&!("document"in s)?nt(s):s,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var o=i.options,a=o.container,l=o.events,h=o.checkWindowBlur;if(i._useDrag=l.indexOf("drag")>-1,i._useTouch=l.indexOf("touch")>-1,i._useMouse=l.indexOf("mouse")>-1,i.targets=n,i._useDrag&&n.forEach((function(t){J(t,"dragstart",i.onDragStart)})),i._useMouse&&(n.forEach((function(t){J(t,"mousedown",i.onDragStart),J(t,"mousemove",i._passCallback)})),J(a,"contextmenu",i._onContextMenu)),h&&J(nt(),"blur",i.onBlur),i._useTouch){var u={passive:!1};n.forEach((function(t){J(t,"touchstart",i.onDragStart,u),J(t,"touchmove",i._passCallback,u)}))}return i}return function(t,e){function r(){this.constructor=t}_r(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,e,r,i){void 0===i&&(i=!0),this.flag&&(this.clientStores[0].move(t,e),i&&this.onDrag(r,!0))},e.prototype.move=function(t,e){var r=t[0],i=t[1],n=this.getCurrentStore().prevClients;return this.moveClients(n.map((function(t){var e=t.clientX,n=t.clientY;return{clientX:e+r,clientY:n+i,originalClientX:e,originalClientY:n}})),e,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var e=this.data;for(var r in t)e[r]=t[r];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),xr(xr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,e=this.targets,r=this.options.container;this.off(),tt(this._window,"blur",this.onBlur),this._useDrag&&e.forEach((function(e){tt(e,"dragstart",t.onDragStart)})),this._useMouse&&(e.forEach((function(e){tt(e,"mousedown",t.onDragStart)})),tt(r,"contextmenu",this._onContextMenu)),this._useTouch&&(e.forEach((function(e){tt(e,"touchstart",t.onDragStart)})),tt(r,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var e=this,r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var i=new Mr(Er(t));this.pinchFlag=!0,this._addStore(i),!1===this.emit("pinchStart",xr(xr({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var r=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",xr(xr({data:this.data,datas:this.data,movement:this.getMovement(e),angle:r.getAngle(e),rotation:r.getRotation(e),touches:r.getPositions(e),scale:r.getScale(e),distance:r.getDistance(e)},r.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.getCurrentStore();this.emit("pinchEnd",xr(xr({data:this.data,datas:this.data,isPinch:e,touches:r.getPositions()},r.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,e,r){var i=this._getPosition(t,r),n=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var s=!1;return!n&&this.isDrag&&(s=!0),xr(xr({data:this.data,datas:this.data},i),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:s})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,e){var r=this.getCurrentStore().getPosition(t,e),i=this.clientStores.slice(1).reduce((function(t,e){var r=e.getPosition();return t.distX+=r.distX,t.distY+=r.distY,t}),r),n=i.distX,s=i.distY;return xr(xr({},r),{distX:n,distY:s})},e.prototype._attchDragEvent=function(){var t=this._window,e=this.options.container,r={passive:!1};this._isDragAPI&&(J(e,"dragover",this.onDrag,r),J(t,"dragend",this.onDragEnd)),this._useMouse&&(J(e,"mousemove",this.onDrag),J(t,"mouseup",this.onDragEnd)),this._useTouch&&(J(e,"touchmove",this.onDrag,r),J(t,"touchend",this.onDragEnd,r),J(t,"touchcancel",this.onDragEnd,r))},e.prototype._dettachDragEvent=function(){var t=this._window,e=this.options.container;this._isDragAPI&&(tt(e,"dragover",this.onDrag),tt(t,"dragend",this.onDragEnd)),this._useMouse&&(tt(e,"mousemove",this.onDrag),tt(t,"mouseup",this.onDragEnd)),this._useTouch&&(tt(e,"touchstart",this.onDragStart),tt(e,"touchmove",this.onDrag),tt(t,"touchend",this.onDragEnd),tt(t,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(tr);var Cr=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0};function Or(t,e,r,i,n){var s=et(i),o=s.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),r.nonce&&o.setAttribute("nonce",r.nonce),o.innerHTML=function(t,e,r){return r.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,r){var i=r.trim();return(i?R(i):[""]).map((function(e){var r=e.trim();return 0===r.indexOf("@")?r:r.indexOf(":global")>-1?r.replace(/\:global/g,""):r.indexOf(":host")>-1?"".concat(r.replace(/\:host/g,".".concat(t))):r?".".concat(t," ").concat(r):".".concat(t)})).join(", ")+" {"}))}(t,e,r),(n||s.head||s.body).appendChild(o),o}const Ir=function(t){var e="rCS"+Cr(t).toString(36);return{className:e,inject:function(r,i){void 0===i&&(i={});var n=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(r),s=(n||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(s){var o=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(o+1))}else s=Or(e,t,i,r,n);return{destroy:function(){var t,e=parseFloat(s.getAttribute("data-styled-count"))||0;e<=1?(s.remove?s.remove():null===(t=s.parentNode)||void 0===t||t.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(e-1))}}}}};var Dr=function(){return Dr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dr.apply(this,arguments)};function Br(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}function Fr(t,e){var r,i=Ir(e),n=i.className;return(r=function(e,r){var s=e.className,o=void 0===s?"":s,a=(e.cspNonce,Br(e,["className","cspNonce"])),l=Qt();return function(t,e,r){Jt((function(){null==t||t(e())}),r,!0)}(r,(function(){return l.current}),[]),Jt((function(){var t=i.inject(l.current,{nonce:e.cspNonce});return function(){t.destroy()}}),[]),Wt(t,Dr({ref:l,"data-styled-id":n,className:"".concat(o," ").concat(n)},a))})._fr=!0,r}var Nr=function(t,e){return Nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Nr(t,e)};function Lr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Nr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var kr=function(){return kr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},kr.apply(this,arguments)};function Ur(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function Gr(t,e,r){if(r||2===arguments.length)for(var i,n=0,s=e.length;n<s;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function jr(t,e){return kr({events:[],props:[],name:t},e)}var Hr=["n","w","s","e"],zr=["n","w","s","e","nw","ne","sw","se"];var Wr,Xr,Yr=ve(),Vr=Yr.browser.webkit,$r=Vr&&(Wr="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Xr=/applewebkit\/([^\s]+)/g.exec(Wr.userAgent.toLowerCase()))&&parseFloat(Xr[1])<605),qr=Yr.browser.name,Kr=parseInt(Yr.browser.version,10),Zr="chrome"===qr,Qr=Yr.browser.chromium,Jr=parseInt(Yr.browser.chromiumVersion,10)||0,ti=Zr&&Kr>=109||Qr&&Jr>=109,ei="firefox"===qr,ri=parseInt(Yr.browser.webkitVersion,10)>=612||Kr>=15,ii="moveable-",ni=zr.map((function(t){var e="",r="",i="center",n="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(s,";"),n="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",n="top"),t.indexOf("w")>-1&&(r="left: ".concat(s,";"),i="right"),t.indexOf("e")>-1&&(r="left: 0px;",i="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(i," ").concat(n,";\n    }")})).join("\n"),si="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(ni,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),r=45*Math.round(t/45)%180,i="ns-resize";return 135===r?i="nwse-resize":45===r?i="nesw-resize":90===r&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(e,"') 16 16, ").concat(i,";")}(t),"\n}\n")})).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat($r?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),oi=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ai=1e-4,li=1e-7,hi=1e-9,ui=Math.pow(10,10),ci=-ui,di={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},pi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},fi={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},gi=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function mi(t,e,r,i,n,s){var o,a;void 0===s&&(s="draggable");var l=null!==(a=null===(o=e.gestos[s])||void 0===o?void 0:o.move(r,t.inputEvent))&&void 0!==a?a:{},h=l.originalDatas||l.datas,u=h[s]||(h[s]={});return kr(kr({},n?Ro(e,l):l),{isPinch:!!i,parentEvent:!0,datas:u,originalDatas:t.originalDatas})}var vi=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),kr(kr({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var r,i,n=!1;if(this.isFlag){var s=this.isDrag;r=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!s&&this.isDrag&&(n=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],i=t[1],this.isFlag=!0;return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:e,isFirstDrag:n,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function yi(t,e,r,i){var n=16===t.length?4:3,s=Ur($s(t,r,i,n),4),o=Ur(s[0],2),a=o[0],l=o[1],h=Ur(s[1],2),u=h[0],c=h[1],d=Ur(s[2],2),p=d[0],f=d[1],g=Ur(s[3],2),m=g[0],v=g[1],y=Ur(Vs(t,e,n),2),_=y[0],x=y[1],b=Math.min(a,u,p,m),E=Math.min(l,c,f,v),T=Math.max(a,u,p,m);return a=a-b||0,{left:b,top:E,right:T,bottom:Math.max(l,c,f,v),origin:[_=_-b||0,x=x-E||0],pos1:[a,l=l-E||0],pos2:[u=u-b||0,c=c-E||0],pos3:[p=p-b||0,f=f-E||0],pos4:[m=m-b||0,v=v-E||0],direction:zo(t[0]*t[n+1])}}function _i(t,e){var r=e.clientX,i=e.clientY,n=e.datas,s=t.state,o=s.moveableClientRect,a=s.rootMatrix,l=s.is3d,h=s.pos1,u=Ur(Pe(Mo(a,[r-o.left,i-o.top],l?4:3),h),2),c=Ur(Ai({datas:n,distX:u[0],distY:u[1]}),2);return[c[0],c[1]]}function xi(t,e){var r=e.datas,i=t.state,n=i.allMatrix,s=i.beforeMatrix,o=i.is3d,a=i.left,l=i.top,h=i.origin,u=i.offsetMatrix,c=i.targetMatrix,d=i.transformOrigin,p=o?4:3;r.is3d=o,r.matrix=n,r.targetMatrix=c,r.beforeMatrix=s,r.offsetMatrix=u,r.transformOrigin=d,r.inverseMatrix=Ee(n,p),r.inverseBeforeMatrix=Ee(s,p),r.absoluteOrigin=Se(Re([a,l],h),p),r.startDragBeforeDist=Oe(r.inverseBeforeMatrix,r.absoluteOrigin,p),r.startDragDist=Oe(r.inverseMatrix,r.absoluteOrigin,p)}function bi(t,e,r){var i=e.datas,n=e.originalDatas.beforeRenderable,s=i.transformIndex,o=n.nextTransforms,a=o.length,l=n.nextTransformAppendedIndexes,h=-1;-1===s?("translate"===r?h=0:"rotate"===r&&(h=D(o,(function(t){return t.match(/scale\(/g)}))),-1===h&&(h=o.length),i.transformIndex=h):h=B(l,(function(t){return t.index===s&&t.functionName===r}))?s:s+l.filter((function(t){return t.index<s})).length;var u=function(t,e,r){var i,n=Ve(t,{"x%":function(t){return t/100*e.offsetWidth},"y%":function(t){return t/100*e.offsetHeight}}),s=t.slice(0,r<0?void 0:r),o=t.slice(0,r<0?void 0:r+1),a=t[r]||"",l=r<0?[]:t.slice(r),h=r<0?[]:t.slice(r+1),u=n.slice(0,r<0?void 0:r),c=n.slice(0,r<0?void 0:r+1),d=null!==(i=n[r])&&void 0!==i?i:Ve([""])[0],p=r<0?[]:n.slice(r),f=r<0?[]:n.slice(r+1),g=d?[d]:[],m=Ye(u),v=Ye(c),y=Ye(p),_=Ye(f),x=Me(m,y,4);return{transforms:t,beforeFunctionMatrix:m,beforeFunctionMatrix2:v,targetFunctionMatrix:Ye(g),afterFunctionMatrix:y,afterFunctionMatrix2:_,allFunctionMatrix:x,beforeFunctions:u,beforeFunctions2:c,targetFunction:g[0],afterFunctions:p,afterFunctions2:f,beforeFunctionTexts:s,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:h}}(o,t.state,h),c=u.targetFunction,d="rotate"===r?"rotateZ":r;i.beforeFunctionTexts=u.beforeFunctionTexts,i.afterFunctionTexts=u.afterFunctionTexts,i.beforeTransform=u.beforeFunctionMatrix,i.beforeTransform2=u.beforeFunctionMatrix2,i.targetTansform=u.targetFunctionMatrix,i.afterTransform=u.afterFunctionMatrix,i.afterTransform2=u.afterFunctionMatrix2,i.targetAllTransform=u.allFunctionMatrix,c.functionName===d?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):a>h&&(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=Gr(Gr([],Ur(l),!1),[{functionName:r,index:h,isAppend:!0}],!1))}function Ei(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function Ti(t){var e=t.datas,r=Ur(wi({datas:e,distX:t.distX,distY:t.distY}),2),i=Si(e,function(t,e){for(var r=Ge(e),i=0;i<e-1;++i)r[e*(e-1)+i]=t[i]||0;return r}([r[0],r[1]],4));return Oe(i,Se([0,0,0],4),4)}function Si(t,e,r){var i=t.beforeTransform,n=t.afterTransform,s=t.beforeTransform2,o=t.afterTransform2,a=t.targetAllTransform,l=r?Me(a,e,4):Me(e,a,4),h=Me(Ee(r?s:i,4),l,4);return Me(h,Ee(r?o:n,4),4)}function wi(t){var e=t.datas,r=t.distX,i=t.distY,n=e.inverseBeforeMatrix,s=e.is3d,o=e.startDragBeforeDist,a=s?4:3;return Pe(Oe(n,Re(e.absoluteOrigin,[r,i]),a),o)}function Ai(t,e){var r=t.datas,i=t.distX,n=t.distY,s=r.inverseBeforeMatrix,o=r.inverseMatrix,a=r.is3d,l=r.startDragBeforeDist,h=r.startDragDist,u=a?4:3;return Pe(Oe(e?s:o,Re(r.absoluteOrigin,[i,n]),u),e?l:h)}function Mi(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Ri(t,e){var r=(e+1)/2;return[v(t[0][0],t[1][0],r,1-r),v(t[0][1],t[1][1],r,1-r)]}function Pi(t,e){var r=Ri([t[0],t[1]],e[0]),i=Ri([t[2],t[3]],e[0]);return Ri([r,i],e[1])}function Ci(t,e,r,i){return Me(t,Fs(e,i,r),i)}function Oi(t,e){var r=Fi(e);return{setTransform:function(i,n){void 0===n&&(n=-1),r.startTransforms=x(i)?i:M(i),Di(t,e,n)},setTransformIndex:function(r){Di(t,e,r)}}}function Ii(t,e,r){Di(t,e,D(Fi(e).startTransforms,(function(t){return 0===t.indexOf("".concat(r,"("))})))}function Di(t,e,r){var i=Fi(e),n=e.datas;if(n.transformIndex=r,-1!==r){var s=i.startTransforms[r];if(s){var o=t.state,a=Ve([s],{"x%":function(t){return t/100*o.offsetWidth},"y%":function(t){return t/100*o.offsetHeight}});n.startValue=a[0].functionValue}}}function Bi(t,e){Fi(t).nextTransforms=M(e)}function Fi(t){return t.originalDatas.beforeRenderable}function Ni(t){return t.originalDatas.beforeRenderable.nextTransforms}function Li(t){return(Ni(t)||[]).join(" ")}function ki(t){return Fi(t).nextStyle}function Ui(t,e,r,i,n){Bi(n,e);var s=Qn.drag(t,mi(n,t.state,r,i,!1)),o=s?s.transform:e;return kr(kr({transform:e,drag:s},fo({transform:o},n)),{afterTransform:o})}function Gi(t,e,r,i,n,s){var o=function(t,e,r,i){var n,s=t.transformOrigin,o=t.offsetMatrix,a=t.is3d?4:3;if(b(r)){var l=e.beforeTransform,h=e.afterTransform;n=we(i?Xe(r):Me(Me(l,Xe([r]),4),h,4),4,a)}else n=r;return Ci(o,n,s,a)}(t.state,n,e,s),a=function(t,e,r,i){void 0===i&&(i=t.state.allMatrix);var n=t.state,s=n.width,o=n.height,a=n.is3d?4:3,l=[s/2*(1+e[0])+r[0],o/2*(1+e[1])+r[1]];return Vs(i,l,a)}(t,r,i,o);return a}function ji(t,e,r,i,n,s,o){var a=Gi(t,e,r,n,s,o),l=t.state,h=l.left,u=l.top,c=t.props.groupable,d=c?h:0,p=c?u:0,f=Pe(i,a);return Pe(f,[d,p])}function Hi(t,e,r,i,n,s){var o=t.props.groupable,a=t.state,l=a.transformOrigin,h=a.offsetMatrix,u=a.is3d,c=a.width,d=a.height,p=a.left,f=a.top,g=s.fixedDirection,m=s.nextTargetMatrix||a.targetMatrix,v=u?4:3,y=function(t,e,r,i,n,s){return void 0===i&&(i=e),void 0===n&&(n=r),void 0===s&&(s=[0,0]),t?t.map((function(t,o){var a=C(t),l=a.value,h=a.unit,u=o?n:i,c=o?r:e;return"%"===t||isNaN(l)?c*(u?s[o]/u:0):"%"!==h?l:c*l/100})):s}(n,e,r,c,d,l),_=o?p:0,x=o?f:0,b=function(t,e,r,i,n,s){var o=Pi($s(e,r,i,n),s);return[t[0]-o[0],t[1]-o[1]]}(i,Ci(h,m,y,v),e,r,v,g);return Pe(b,[_,x])}function zi(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function Wi(t){var e=t("scale"),r=t("rotate"),i=t("translate"),n=[];return i&&"0px"!==i&&"none"!==i&&n.push("translate(".concat(i.split(/\s+/).join(","),")")),r&&"1"!==r&&"none"!==r&&n.push("rotate(".concat(r,")")),e&&"1"!==e&&"none"!==e&&n.push("scale(".concat(e.split(/\s+/).join(","),")")),n}function Xi(t,e,r){for(var i,n,s,o,a,l=t,h=[],u=rt(t)||it(t),c=!r&&t===e||t===u,d=c,p=!1,f=3,g=!1,m=Us(e,e,!0).offsetParent,v=1;l&&!d;){d=c;var y=Ki(l),_=y("position"),x=ks(l),b="fixed"===_,E=Wi(y),T=(o=Bs(x),void 0===(a=void 0)&&(a=6===o.length),a?[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]:o),S=void 0,w=!1,A=!1,M=0,R=0,P=0,C=0,O={hasTransform:!1,fixedContainer:null};b&&(g=!0,m=(O=zs(l)).fixedContainer);var I=T.length;p||16!==I&&!E.length||(p=!0,f=4,Hs(h),s&&(s=we(s,3,4))),p&&9===I&&(T=we(T,3,4));var D=Gs(l,t),B=D.tagName,F=D.hasOffset,N=D.isSVG,L=D.origin,k=D.targetOrigin,U=Ur(D.offset,2),G=U[0],j=U[1];"svg"===B&&!l.ownerSVGElement&&s&&(h.push({type:"target",target:l,matrix:Ys(l,f)}),h.push({type:"offset",target:l,matrix:Ge(f)}));var H=parseFloat(y("zoom"))||1;if(b)S=O.fixedContainer,w=!0;else{var z=Us(l,e,!1,!0,y),W=z.offsetZoom;if(S=z.offsetParent,w=z.isEnd,A=z.isStatic,v*=W,(z.isCustomElement||1!==W)&&A)G-=S.offsetLeft,j-=S.offsetTop;else if(ei||ti){if(z.parentSlotElement){for(var X=S,Y=0,V=0;X&&zi(X);)Y+=X.offsetLeft,V+=X.offsetTop,X=X.offsetParent;G-=Y,j-=V}}}if(!Vr||ri||!F||N||!A||"relative"!==_&&"static"!==_||(G-=S.offsetLeft,j-=S.offsetTop,c=c||w),b)F&&O.hasTransform&&(P=S.clientLeft,C=S.clientTop);else if(F&&m!==S&&(M=S.clientLeft,R=S.clientTop),F&&S===u){var $=js(l,!1);G+=$[0],j+=$[1]}if(h.push({type:"target",target:l,matrix:Fs(T,f,L)}),E.length&&(h.push({type:"offset",target:l,matrix:Ge(f)}),h.push({type:"target",target:l,matrix:Fs(Xe(E),f,L)})),F){var q=l===t,K=q?0:l.scrollLeft,Z=q?0:l.scrollTop;h.push({type:"offset",target:l,matrix:He([G-K+M-P,j-Z+R-C],f)})}else h.push({type:"offset",target:l,origin:L});if(1!==H&&h.push({type:"zoom",target:l,matrix:Fs(je([H,H],f),f,[0,0])}),s||(s=T),i||(i=L),n||(n=k),d||b)break;l=S,c=w,r&&l!==u||(d=c)}return s||(s=Ge(f)),i||(i=[0,0]),n||(n=[0,0]),{zoom:v,offsetContainer:m,matrixes:h,targetMatrix:s,transformOrigin:i,targetOrigin:n,is3d:p,hasFixed:g}}var Yi=null,Vi=null,$i=null;function qi(t){t?(window.Map&&(Yi=new Map,Vi=new Map),$i=[]):(Yi=null,$i=null,Vi=null)}function Ki(t){var e=null==Yi?void 0:Yi.get(t);if(!e){var r=nt(t).getComputedStyle(t);if(!Yi)return function(t){return r[t]};e={style:r,cached:{}},Yi.set(t,e)}var i=e.cached,n=e.style;return function(t){return t in i||(i[t]=n[t]),i[t]}}function Zi(t,e,r){var i=r.originalDatas;i.groupable=i.groupable||{};var n=i.groupable;n.childDatas=n.childDatas||[];var s=n.childDatas;return t.moveables.map((function(t,i){return s[i]=s[i]||{},s[i][e]=s[i][e]||{},kr(kr({},r),{isRequestChild:!0,datas:s[i][e],originalDatas:s[i]})}))}function Qi(t,e,r,i,n,s,o){var a=!!r.match(/Start$/g),l=!!r.match(/End$/g),h=n.isPinch,u=n.datas,c=Zi(t,e.name,n),d=t.moveables,p=[],f=c.map((function(t,n){var c=d[n],f=c.state,g=f.gestos,m=t;if(a)m=new vi(o).dragStart(i,t),p.push(m);else{if(g[o]||(g[o]=u.childGestos[n]),!g[o])return;m=mi(t,f,i,h,s,o),p.push(m)}var v=e[r](c,kr(kr({},m),{parentFlag:!0}));return l&&(g[o]=null),v}));return a&&(u.childGestos=d.map((function(t){return t.state.gestos[o]}))),{eventParams:f,childEvents:p}}function Ji(t,e,r,i,n,s){void 0===n&&(n=function(t,e){return e});var o=!!r.match(/End$/g),a=Zi(t,e.name,i),l=t.moveables,h=a.map((function(t,i){var a,h=l[i];a=n(h,t);var u=e[r](h,kr(kr({},a),{parentFlag:!0}));return u&&s&&s(h,t,u,i),o&&(h.state.gestos={}),u}));return h}function tn(t,e,r,i){var n=r.fixedDirection,s=r.fixedPosition,o=Pi(i.datas.startPositions||uo(e.state),n),a=Ur(Oe(Ue(-t.rotation/180*Math.PI,3),[o[0]-s[0],o[1]-s[1],1],3),2),l=a[0],h=a[1];return i.datas.originalX=l,i.datas.originalY=h,i}function en(t,e,r,i){var n=t.getState(),s=n.renderPoses,o=n.rotation,a=n.direction,l=eo(t.props,e).zoom,h=Ss(o/Math.PI*180),u={},c=t.renderState;c.renderDirectionMap||(c.renderDirectionMap={});var d=c.renderDirectionMap;r.forEach((function(t){var e=t.dir;u[e]=!0}));var p=zo(a);return r.map((function(t){var r=t.data,n=t.classNames,a=t.dir,c=pi[a];if(!c||!u[a])return null;d[a]=!0;var f=(Y(h,15)+p*fi[a]+720)%180,g={};return L(r).forEach((function(t){g["data-".concat(t)]=r[t]})),i.createElement("div",kr({className:Is.apply(void 0,Gr(["control","direction",a,e],Ur(n),!1)),"data-rotation":f,"data-direction":a},g,{key:"direction-".concat(a),style:to.apply(void 0,Gr([o,l],Ur(c.map((function(t){return s[t]}))),!1))}))}))}function rn(t,e,r,i){var n=eo(t.props,r),s=n.renderDirections,o=void 0===s?e:s,a=n.displayAroundControls;if(!o)return[];var l=!0===o?zr:o;return Gr(Gr([],Ur(a?ln(t,i,r,l):[]),!1),Ur(en(t,r,l.map((function(t){return{data:{},classNames:[],dir:t}})),i)),!1)}function nn(t,e,r,i,n,s){for(var o=[],a=6;a<arguments.length;a++)o[a-6]=arguments[a];var l=z(r,i),h=e?Y(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(s),className:Is.apply(void 0,Gr(["line","direction",e?"edge":"",e],Ur(o),!1)),"data-rotation":h,"data-line-key":s,"data-direction":e,style:Js(r,i,n,l)})}function sn(t,e,r,i,n){return(!0===r?Hr:r).map((function(r,s){var o=Ur(pi[r],2),a=o[0],l=o[1];if(null!=l)return nn(t,r,i[a],i[l],n,"".concat(e,"Edge").concat(s),e)})).filter(Boolean)}function on(t){return function(e,r){var i=eo(e.props,t).edge;return i&&(!0===i||i.length)?Gr(Gr([],Ur(sn(r,t,i,e.getState().renderPoses,e.props.zoom)),!1),Ur(function(t,e,r){return rn(t,["nw","ne","sw","se"],e,r)}(e,t,r)),!1):an(e,t,r)}}function an(t,e,r){return rn(t,zr,e,r)}function ln(t,e,r,i){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var s=t.getState(),o=s.renderPoses,a=s.rotation,l=s.direction,h=n.renderDirectionMap,u=t.props.zoom,c=zo(l),d=a/Math.PI*180;return(i||L(h)).map((function(t){var i=pi[t];if(!i)return null;var n=(Y(d,15)+c*fi[t]+720)%180,s=["around-control"];return r&&s.push("direction",r),e.createElement("div",{className:Is.apply(void 0,Gr([],Ur(s),!1)),"data-rotation":n,"data-direction":t,key:"direction-around-".concat(t),style:to.apply(void 0,Gr([a,u],Ur(i.map((function(t){return o[t]}))),!1))})}))}function hn(t,e,r){var i=t||{},n=i.position,s=void 0===n?"client":n,o=i.left,a=void 0===o?-1/0:o,l=i.top,h=void 0===l?-1/0:l,u=i.right,c=void 0===u?1/0:u,d=i.bottom,p={position:s,left:a,top:h,right:c,bottom:void 0===d?1/0:d};return{vertical:cn(p,e,!0),horizontal:cn(p,r,!1)}}function un(t,e){var r=t.state,i=r.containerClientRect,n=i.clientHeight,s=i.clientWidth,o=i.clientLeft,a=i.clientTop,l=r.snapOffset,h=l.left,u=l.top,c=l.right,d=l.bottom,p=e||t.props.bounds||{},f="css"===(p.position||"client"),g=p.left,m=void 0===g?-1/0:g,v=p.top,y=void 0===v?-1/0:v,_=p.right,x=void 0===_?f?-1/0:1/0:_,b=p.bottom,E=void 0===b?f?-1/0:1/0:b;return f&&(x=s+c-h-x,E=n+d-u-E),{left:m+h-o,right:x+h-o,top:y+u-a,bottom:E+u-a}}function cn(t,e,r){var i=t[r?"left":"top"],n=t[r?"right":"bottom"],s=Math.min.apply(Math,Gr([],Ur(e),!1)),o=Math.max.apply(Math,Gr([],Ur(e),!1)),a=[];return i+1>s&&a.push({direction:"start",isBound:!0,offset:s-i,pos:i}),n-1<o&&a.push({direction:"end",isBound:!0,offset:o-n,pos:n}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort((function(t,e){return Wo(e.offset)-Wo(t.offset)}))}function dn(t,e,r){return(r?t.map((function(t){return Ne(t,r)})):t).some((function(t){return t[0]<e.left&&Wo(t[0]-e.left)>.1||t[0]>e.right&&Wo(t[0]-e.right)>.1||t[1]<e.top&&Wo(t[1]-e.top)>.1||t[1]>e.bottom&&Wo(t[1]-e.bottom)>.1}))}function pn(t,e,r,i,n){if(!t.props.bounds)return[];var s=n*Math.PI/180,o=un(t),a=o.left,l=o.top,h=o.right,u=o.bottom,c=a-i[0],d=h-i[0],p=l-i[1],f=u-i[1],g={left:c,top:p,right:d,bottom:f};if(!dn(r,g,0))return[];var m=[];return[[c,0],[d,0],[p,1],[f,1]].forEach((function(t){var i=Ur(t,2),n=i[0],o=i[1];r.forEach((function(t){var r=z([0,0],t);m.push.apply(m,Gr([],Ur(function(t,e,r){var i=Zs(t),n=Math.sqrt(i*i-e*e)||0;return[n,-n].sort((function(e,i){return Wo(e-t[r?0:1])-Wo(i-t[r?0:1])})).map((function(t){return z([0,0],r?[t,e]:[e,t])}))}(t,n,o).map((function(t){return s+t-r})).filter((function(t){return!dn(e,g,t)})).map((function(t){return Y(180*t/Math.PI,li)}))),!1))}))})),m}var fn=["left","right","center"],gn=["top","bottom","middle"],mn={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},vn={start:"left",end:"right",center:"center"},yn={start:"top",end:"bottom",center:"middle"};function _n(t,e){var r=t.props,i=r.snappable,n=r.bounds,s=r.innerBounds,o=r.verticalGuidelines,a=r.horizontalGuidelines,l=r.snapGridWidth,h=r.snapGridHeight,u=t.state,c=u.guidelines,d=u.enableSnap;return!(!i||!d||e&&!0!==i&&i.indexOf(e)<0)&&!!(l||h||n||s||c&&c.length||o&&o.length||a&&a.length)}function xn(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function bn(t,e){var r=function(t,e){var r=xn(t),i={};for(var n in r)n in e&&r[n]&&(i[n]=e[n]);return i}(t,e),i=gn.filter((function(t){return t in r})),n=fn.filter((function(t){return t in r}));return{horizontalNames:i,verticalNames:n,horizontal:i.map((function(t){return r[t]})),vertical:n.map((function(t){return r[t]}))}}var En="snapRotationThreshold",Tn="snapRotationDegrees",Sn="snapHorizontalThreshold",wn="snapVerticalThreshold";function An(t,e,r,i,n,s,o){var a;void 0===i&&(i=[]),void 0===n&&(n=[]);var l=t.props,h=(null===(a=t.state.snapThresholdInfo)||void 0===a?void 0:a.multiples)||[1,1],u=To(o,l[Sn],5),c=To(s,l[wn],5);return Mn(t.state.guidelines,e,r,i,n,u,c,h)}function Mn(t,e,r,i,n,s,o,a){return{vertical:On(t,"vertical",e,o*a[0],i),horizontal:On(t,"horizontal",r,s*a[1],n)}}function Rn(t){var e="";return-1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":1!==t&&"right"!==t&&"bottom"!==t||(e="end"),e}function Pn(t,e,r,i){var n=bn(t.props.snapDirections,e),s=An(t,n.vertical,n.horizontal,n.verticalNames.map((function(t){return Rn(t)})),n.horizontalNames.map((function(t){return Rn(t)})),r,i),o=Rn(n.horizontalNames[s.horizontal.index]),a=Rn(n.verticalNames[s.vertical.index]);return{vertical:kr(kr({},s.vertical),{direction:a}),horizontal:kr(kr({},s.horizontal),{direction:o})}}function Cn(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],i=r.guidelineInfos[0],n=i.offset,s=i.dist,o=i.guideline;return{isSnap:e,offset:n,dist:s,pos:r.pos,guideline:o}}function On(t,e,r,i,n){var s,o;if(void 0===n&&(n=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a="vertical"===e?0:1,l=r.map((function(r,s){var o=n[s]||"",l=t.map((function(t){var e=t.pos,i=r-e[a];return{offset:i,dist:Wo(i),guideline:t,direction:o}})).filter((function(t){var r=t.guideline,n=t.dist;return!(r.type!==e||n>i)})).sort((function(t,e){return t.dist-e.dist}));return{pos:r,index:s,guidelineInfos:l,direction:o}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),h=l.length>0;return{isSnap:h,index:h?l[0].index:-1,direction:null!==(o=null===(s=l[0])||void 0===s?void 0:s.direction)&&void 0!==o?o:"",posInfos:l}}function In(t,e,r,i,n){var s=[];r[0]&&r[1]?s=[r,[-r[0],r[1]],[r[0],-r[1]]]:r[0]||r[1]?t.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],r):(s.push.apply(s,Gr([],Ur(function(t,e){return Mi(e).map((function(e){return t[e]}))}([[-1,-1],[1,-1],[-1,-1],[1,1]],r)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach((function(t,e,r){var i=r[e+1]||r[0];s.push(t),s.push([(t[0]+i[0])/2,(t[1]+i[1])/2])}));var o=s.map((function(t){return Pi(e,t)})),a=An(t,o.map((function(t){return t[0]})),o.map((function(t){return t[1]})),s.map((function(t){return Rn(t[0])})),s.map((function(t){return Rn(t[1])})),i,n),l=Rn(s.map((function(t){return t[0]}))[a.vertical.index]),h=Rn(s.map((function(t){return t[1]}))[a.horizontal.index]);return{vertical:kr(kr({},a.vertical),{direction:l}),horizontal:kr(kr({},a.horizontal),{direction:h})}}function Dn(t,e){var r=Wo(t.offset),i=Wo(e.offset);return t.isBound&&e.isBound?i-r:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?i-r:t.isSnap?-1:e.isSnap||r<li?1:i<li?-1:r-i}function Bn(t,e){return t.slice().sort((function(t,r){var i=t.sign[e],n=r.sign[e],s=t.offset[e],o=r.offset[e];return i?n?Dn({isBound:t.isBound,isSnap:t.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o}):-1:1}))[0]}function Fn(t,e){var r=H([e[0][0],e[1][0]]),i=H([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:i<=t[1]}}function Nn(t,e){var r,i,n=Ur(e,2),s=n[0],o=n[1],a=o[0]-s[0],l=o[1]-s[1];if(Wo(a)<li&&(a=0),Wo(l)<li&&(l=0),a)if(l){r=l/a*(t[0]-s[0])+s[1],i=t[1]}else r=s[1],i=t[1];else r=s[0],i=t[0];return r-i}function Ln(t,e,r,i){return void 0===i&&(i=li),t.every((function(t){var n=Nn(t,e);return n<=0===r||Wo(n)<=i}))}function kn(t,e,r,i,n){return void 0===n&&(n=0),i&&e-n<=t||!i&&t<=r+n?{isBound:!0,offset:i?e-t:r-t}:{isBound:!1,offset:0}}function Un(t,e,r,i,n,s){var o,a,l=Ur(e,2),h=l[0],u=l[1],c=t[0],d=r[0],p=r[1],f=Oo(p[1]-d[1]),g=u,m=h,v=-h/u;return Oo(p[0]-d[0])?f||s&&!g?{isBound:!1,offset:0}:m?kn((d[1]-c[1])/v+c[0],d[0],p[0],i,n):{isBound:a=Wo(o=d[1]-c[1])<=(n||0),offset:a?o:0}:s&&!m?{isBound:!1,offset:0}:g?kn(v*(d[0]-c[0])+c[1],d[1],p[1],i,n):{isBound:a=Wo(o=d[0]-c[0])<=(n||0),offset:a?o:0}}function Gn(t,e,r){return e.map((function(e){var i=function(t,e){var r=e.line,i=e.centerSign,n=e.verticalSign,s=e.horizontalSign,o=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,h=a.top,u=a.width,c=a.height,d=[[l,h],[l,h+c]],p=[[l,h],[l+u,h]],f=[[l+u,h],[l+u,h+c]],g=[[l,h+c],[l+u,h+c]];if(Ln([[l,h],[l+u,h],[l,h+c],[l+u,h+c]],r,i))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=Un(r,o,p,n),v=Un(r,o,g,n),y=Un(r,o,d,s),_=Un(r,o,f,s),x=m.isBound&&v.isBound,b=m.isBound||v.isBound,E=y.isBound&&_.isBound,T=y.isBound||_.isBound,S=Ao(m.offset,v.offset),w=Ao(y.offset,_.offset),A=[0,0],M=!1,R=!1;return Wo(w)<Wo(S)?(A=[S,0],M=b,R=x):(A=[0,w],M=T,R=E),{isAllBound:R,isVerticalBound:b,isHorizontalBound:T,isBound:M,offset:A}}(t,e),n=i.isBound,s=i.offset,o=i.isVerticalBound,a=i.isHorizontalBound,l=e.multiple,h=Ai({datas:r,distX:s[0],distY:s[1]}).map((function(t,e){return t*(l[e]?2/l[e]:0)}));return{sign:l,isBound:n,isVerticalBound:o,isHorizontalBound:a,isSnap:!1,offset:h}}))}function jn(t,e,r){var i,n=Gn(t,Hn(t,e,[0,0],!1).map((function(t){return kr(kr({},t),{multiple:t.multiple.map((function(t){return 2*Wo(t)}))})})),r),s=Bn(n,0),o=Bn(n,1),a=0,l=0,h=s.isVerticalBound||o.isVerticalBound,u=s.isHorizontalBound||o.isHorizontalBound;return(h||u)&&(i=Ur(function(t,e){var r=t.datas,i=t.distX,n=t.distY,s=r.beforeMatrix,o=r.matrix,a=r.is3d,l=r.startDragBeforeDist,h=r.startDragDist,u=r.absoluteOrigin,c=a?4:3;return Pe(Oe(e?s:o,Re(e?l:h,[i,n]),c),u)}({datas:r,distX:-s.offset[0],distY:-o.offset[1]}),2),a=i[0],l=i[1]),{vertical:{isBound:h,offset:a},horizontal:{isBound:u,offset:l}}}function Hn(t,e,r,i){var n=t.state,s=$s(n.allMatrix,100,100,n.is3d?4:3),o=Pi(s,[0,0]);return function(t,e){var r=[],i=t[0],n=t[1];return i&&n?r.push([[0,2*n],t,[-i,n]],[[2*i,0],t,[i,-n]]):i?(r.push([[2*i,0],[i,1],[i,-1]]),e&&r.push([[0,-1],[i,-1],[-i,-1]],[[0,1],[i,1],[-i,1]])):n?(r.push([[0,2*n],[1,n],[-1,n]]),e&&r.push([[-1,0],[-1,n],[-1,-n]],[[1,0],[1,n],[1,-n]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(r,i).map((function(t){var r=Ur(t,3),i=r[0],n=r[1],a=r[2],l=[Pi(s,n),Pi(s,a)],h=function(t){var e=Ur(t,2),r=e[0],i=e[1],n=i[0]-r[0],s=i[1]-r[1];Math.abs(n)<g&&(n=0),Math.abs(s)<g&&(s=0);var o=0,a=0,l=0;return n?s?(a=1,l=(o=-s/n)*r[0]-r[1]):(a=1,l=-r[1]):(o=-1,l=r[0]),[o,a,l].map((function(t){return Y(t,g)}))}(l),u=Fn(o,l),c=u.vertical,d=u.horizontal;return{multiple:i,centerSign:Nn(o,l)<=0,verticalSign:c,horizontalSign:d,lineConstants:h,line:[Pi(e,n),Pi(e,a)]}}))}function zn(t,e,r,i){var n=i?t.map((function(t){return Ne(t,i)})):t;return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].some((function(t){var i=Nn(r,t)<=0;return!Ln(e,t,i)}))}function Wn(t,e,r,i,n){var s=t.props.innerBounds,o=n*Math.PI/180;if(!s)return[];var a=s.left,l=s.top,h=s.width,u=s.height,c=a-i[0],d=a+h-i[0],p=l-i[1],f=l+u-i[1],g=[[c,p],[d,p],[c,f],[d,f]],m=Pi(r,[0,0]);if(!zn(r,g,m,0))return[];var v=[],y=g.map((function(t){return[Zs(t),z([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(t){var r=z([0,0],function(t){var e=Ur(t,2),r=e[0],i=e[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return[r[0],0];if(!s)return[0,r[1]];var o=s/n,a=-o*r[0]+r[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),i=function(t){var e=Ur(t,2),r=e[0],i=e[1],n=i[0]-r[0],s=i[1]-r[1];if(!n)return Wo(r[0]);if(!s)return Wo(r[1]);var o=s/n;return Wo((-o*r[0]+r[1])/Math.sqrt(Math.pow(o,2)+1))}(t);v.push.apply(v,Gr([],Ur(y.filter((function(t){var e=Ur(t,1)[0];return e&&i<=e})).map((function(t){var e=Ur(t,2),n=e[0],s=e[1],a=Math.acos(n?i/n:0);return[o+(s+a)-r,o+(s-a)-r]})).reduce((function(t,e){return t.push.apply(t,Gr([],Ur(e),!1)),t}),[]).filter((function(t){return!zn(e,g,m,t)})).map((function(t){return Y(180*t/Math.PI,li)}))),!1))})),v}function Xn(t,e,r,i,n){var s=function(t,e,r,i){var n=e[0]-t[0],s=e[1]-t[1];if(Wo(n)<g&&(n=0),Wo(s)<g&&(s=0),!n)return i?[0,0]:[0,r];if(!s)return i?[r,0]:[0,0];var o=s/n,a=t[1]-o*t[0];return i?[r,o*(e[0]+r)+a-e[1]]:[(e[1]+r-a)/o-e[0],r]}(t,e,r,i);if(!s)return{isOutside:!1,offset:[0,0]};var o=X(t,e),a=X(s,t),l=X(s,e),h=a>o||l>o,u=Ur(Ai({datas:n,distX:s[0],distY:s[1]}),2);return{offset:[u[0],u[1]],isOutside:h}}function Yn(t,e){return t.isBound?t.offset:e.isSnap?Cn(e).offset:0}function Vn(t,e,r,i,n,s){if(!_n(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=ho(s.absolutePoses,[e,r]),a=qs(o),l=a.left,h=a.right,u=a.top,c=a.bottom,d={horizontal:o.map((function(t){return t[1]})),vertical:o.map((function(t){return t[0]}))},p=$n(t,n,bn(xn(t.props.snapDirections),{left:l,right:h,top:u,bottom:c,center:(l+h)/2,middle:(u+c)/2}),d),f=p.vertical,m=p.horizontal,v=jn(t,o,s),y=v.vertical,_=v.horizontal,x=f.isSnap,b=m.isSnap,E=f.isBound||y.isBound,T=m.isBound||_.isBound,S=Ur(function(t,e,r,i,n){var s=Ur(e,2),o=s[0],a=s[1],l=Ur(r,2),h=l[0],u=l[1],c=Ur(i,2),d=c[0],p=c[1],f=Ur(n,2),m=f[0],v=f[1],y=-m,_=-v;if(t&&o&&a){y=0,_=0;var x=[];if(h&&u?x.push([0,v],[m,0]):h?x.push([m,0]):u?x.push([0,v]):d&&p?x.push([0,v],[m,0]):d?x.push([m,0]):p&&x.push([0,v]),x.length){x.sort((function(t,e){return Zs(Pe([o,a],t))-Zs(Pe([o,a],e))}));var b=x[0];if(b[0]&&Wo(o)>g)y=-b[0],_=a*Wo(o+y)/Wo(o)-a;else if(b[1]&&Wo(a)>g){var E=a;_=-b[1],y=o*Wo(a+_)/Wo(E)-o}if(t&&u&&h)if(Wo(y)>g&&Wo(y)<Wo(m))y*=T=Wo(m)/Wo(y),_*=T;else if(Wo(_)>g&&Wo(_)<Wo(v)){var T;y*=T=Wo(v)/Wo(_),_*=T}else y=Ao(-m,y),_=Ao(-v,_)}}else y=o||h?-m:0,_=a||u?-v:0;return[y,_]}(i,[e,r],[E,T],[x,b],[Ao(f.offset,y.offset),Ao(m.offset,_.offset)]),2);return[{isBound:E,isSnap:x,offset:S[0]},{isBound:T,isSnap:b,offset:S[1]}]}function $n(t,e,r,i){void 0===i&&(i=r);var n=hn(un(t),i.vertical,i.horizontal),s=n.horizontal,o=n.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:An(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,h=a.vertical,u=Yn(s[0],l),c=Yn(o[0],h),d=Wo(u),p=Wo(c);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:d,bounds:s,snap:l},vertical:{isBound:o[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:c,dist:p,bounds:o,snap:h}}}function qn(t,e,r,i,n,s,o){void 0===o&&(o=[1,1]);var a=hn(e,r,i),l=a.horizontal,h=a.vertical,u=Mn(t,r,i,[],[],n,s,o),c=u.horizontal,d=u.vertical,p=Yn(l[0],c),f=Yn(h[0],d),g=Wo(p),m=Wo(f);return{horizontal:{isBound:l[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:g,bounds:l,snap:c},vertical:{isBound:h[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:f,dist:m,bounds:h,snap:d}}}function Kn(t,e,r,i,n,s){return r.map((function(r){var o=Ur(r,2),a=o[0],l=o[1],h=Pi(e,a),u=Pi(e,l),c=i?function(t,e,r,i){var n=function(t,e,r){var i=un(t),n=i.left,s=i.top,o=i.right,a=i.bottom,l=Ur(r,2),h=l[0],u=l[1],c=Ur(Pe(r,e),2),d=c[0],p=c[1];Wo(d)<li&&(d=0),Wo(p)<li&&(p=0);var f=p>0,g=d>0,m={isBound:!1,offset:0,pos:0},v={isBound:!1,offset:0,pos:0};if(0===d&&0===p)return{vertical:m,horizontal:v};if(0===d)f?a<u&&(v.pos=a,v.offset=u-a):s>u&&(v.pos=s,v.offset=u-s);else if(0===p)g?o<h&&(m.pos=o,m.offset=h-o):n>h&&(m.pos=n,m.offset=h-n);else{var y=p/d,_=r[1]-y*h,x=0,b=0,E=!1;g&&o<=h?(x=y*o+_,b=o,E=!0):!g&&h<=n&&(x=y*n+_,b=n,E=!0),E&&(x<s||x>a)&&(E=!1),E||(f&&a<=u?(b=((x=a)-_)/y,E=!0):!f&&u<=s&&(b=((x=s)-_)/y,E=!0)),E&&(m.isBound=!0,m.pos=b,m.offset=h-b,v.isBound=!0,v.pos=x,v.offset=u-x)}return{vertical:m,horizontal:v}}(t,e,r),s=n.horizontal,o=n.vertical,a=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var i=Ur(r,2),n=i[0],s=i[1],o=Ur(e,2),a=o[0],l=o[1],h=Ur(Pe(r,e),2),u=h[0],c=h[1],d=c>0,p=u>0;u=Oo(u),c=Oo(c);var f={isSnap:!1,offset:0,pos:0},g={isSnap:!1,offset:0,pos:0};if(0===u&&0===c)return{vertical:f,horizontal:g};var m=An(t,u?[n]:[],c?[s]:[],[],[],void 0,void 0),v=m.vertical,y=m.horizontal;v.posInfos.filter((function(t){var e=t.pos;return p?e>=a:e<=a})),y.posInfos.filter((function(t){var e=t.pos;return d?e>=l:e<=l})),v.isSnap=v.posInfos.length>0,y.isSnap=y.posInfos.length>0;var _=Cn(v),x=_.isSnap,b=_.guideline,E=Cn(y),T=E.isSnap,S=E.guideline,w=T?S.pos[1]:0,A=x?b.pos[0]:0;if(0===u)T&&(g.isSnap=!0,g.pos=S.pos[1],g.offset=s-g.pos);else if(0===c)x&&(f.isSnap=!0,f.pos=A,f.offset=n-A);else{var M=c/u,R=r[1]-M*n,P=0,C=0,O=!1;x?(P=M*(C=A)+R,O=!0):T&&(C=((P=w)-R)/M,O=!0),O&&(f.isSnap=!0,f.pos=C,f.offset=n-C,g.isSnap=!0,g.pos=P,g.offset=s-P)}return{vertical:f,horizontal:g}}(t,e,r),l=a.horizontal,h=a.vertical,u=Zn(s,l),c=Zn(o,h),d=Wo(u),p=Wo(c);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:u,dist:d},vertical:{isBound:o.isBound,isSnap:h.isSnap,offset:c,dist:p}}}(t,h,u,n):$n(t,n,{vertical:[u[0]],horizontal:[u[1]]}),d=c.horizontal,p=d.offset,f=d.isBound,g=d.isSnap,m=c.vertical,v=m.offset,y=m.isBound,_=m.isSnap,x=Pe(l,a);if(!v&&!p)return{isBound:y||f,isSnap:_||g,sign:x,offset:[0,0]};var b=function(t,e,r,i){var n=z(t,e)/Math.PI*180,s=r.vertical,o=s.isBound,a=s.isSnap,l=s.dist,h=r.horizontal,u=h.isBound,c=h.isSnap,d=n%180,p=d<3||d>177,f=d>87&&d<93;return h.dist<l&&(o||a&&!f&&(!i||!p))?"vertical":!u&&(!c||p||i&&f)?"":"horizontal"}(h,u,c,i);if(!b)return{sign:x,isBound:!1,isSnap:!1,offset:[0,0]};var E="vertical"===b,T=[0,0];return T=(T=i||1!==Wo(l[0])||1!==Wo(l[1])||a[0]===l[0]||a[1]===l[1]?Xn(h,u,-(E?v:p),E,s).offset:Ai({datas:s,distX:-v,distY:-p})).map((function(t,e){return t*(x[e]?2/x[e]:0)})),{sign:x,isBound:E?y:f,isSnap:E?_:g,offset:T}}))}function Zn(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var Qn={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,i=r.hideThrottleDragRotateLine,n=r.throttleDragRotate,s=r.zoom,o=t.getState(),a=o.dragInfo,l=o.beforeOrigin;if(i||!n||!a)return[];var h=a.dist;if(!h[0]&&!h[1])return[];var u=Zs(h),c=z(h,[0,0]);return[e.createElement("div",{className:Is("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(c,"rad) scaleY(").concat(s,")")}})]},dragStart:function(t,e){var r=e.datas,i=e.parentEvent,n=e.parentGesto,s=t.state,o=s.gestos,a=s.style;if(o.draggable)return!1;o.draggable=n||t.targetGesto,r.datas={},r.left=parseFloat(a.left||"")||0,r.top=parseFloat(a.top||"")||0,r.bottom=parseFloat(a.bottom||"")||0,r.right=parseFloat(a.right||"")||0,r.startValue=[0,0],xi(t,e),Ii(t,e,"translate"),function(t,e){e.absolutePoses=uo(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var l=mo(t,e,kr({set:function(t){r.startValue=t}},Oi(t,e)));return!1!==(i||_o(t,"onDragStart",l))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),!!r.isDrag&&l},drag:function(t,e){if(e){bi(t,e,"translate");var r=e.datas,i=e.parentEvent,n=e.parentFlag,s=e.isPinch,o=e.deltaOffset,a=e.useSnap,l=e.isRequest,h=e.isGroup,u=e.parentThrottleDrag,c=e.distX,d=e.distY,p=r.isDrag,f=r.prevDist,g=r.prevBeforeDist,m=r.startValue;if(p){o&&(c+=o[0],d+=o[1]);var v=t.props,y=v.parentMoveable,_=h?0:v.throttleDrag||u||0,x=i?0:v.throttleDragRotate||0,b=0,E=!1,T=!1,S=!1,w=!1;if(!i&&x>0&&(c||d)){var A=v.startDragRotate||0,M=Y(A+180*z([0,0],[c,d])/Math.PI,x)-A,R=d*Math.abs(Math.cos((M-90)/180*Math.PI)),P=Zs([c*Math.abs(Math.cos(M/180*Math.PI)),R]);b=M*Math.PI/180,c=P*Math.cos(b),d=P*Math.sin(b)}if(!s&&!i&&!n){var C=Ur(Vn(t,c,d,x,!a&&l||o,r),2),O=C[0],I=C[1];E=O.isSnap,T=O.isBound,S=I.isSnap,w=I.isBound,c+=O.offset,d+=I.offset}var D=Re(wi({datas:r,distX:c,distY:d}),m),B=Re(Ti({datas:r,distX:c,distY:d}),m);V(B,li),V(D,li),x||(E||T||(B[0]=Y(B[0],_),D[0]=Y(D[0],_)),S||w||(B[1]=Y(B[1],_),D[1]=Y(D[1],_)));var F=Pe(D,m),N=Pe(B,m),L=Pe(N,f),k=Pe(F,g);r.prevDist=N,r.prevBeforeDist=F,r.passDelta=L,r.passDist=N;var U=r.left+F[0],G=r.top+F[1],j=r.right-F[0],H=r.bottom-F[1],W=Ei(r,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(Bi(e,W),t.state.dragInfo.dist=i?[0,0]:N,i||y||!L.every((function(t){return!t}))||!k.some((function(t){return!t}))){var X=t.state,$=X.width,q=X.height,K=mo(t,e,kr({transform:W,dist:N,delta:L,translate:B,beforeDist:F,beforeDelta:k,beforeTranslate:D,left:U,top:G,right:j,bottom:H,width:$,height:q,isPinch:s},fo({transform:W},e)));return!i&&_o(t,"onDrag",K),K}}}},dragAfter:function(t,e){var r=e.datas,i=r.deltaOffset;return!(!i[0]&&!i[1])&&(r.deltaOffset=[0,0],this.drag(t,kr(kr({},e),{deltaOffset:i})))},dragEnd:function(t,e){var r=e.parentEvent,i=e.datas;if(t.state.dragInfo=null,i.isDrag){i.isDrag=!1;var n=vo(t,e,{});return!r&&_o(t,"onDragEnd",n),n}},dragGroupStart:function(t,e){var r,i,n=e.datas,s=e.clientX,o=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var l=Qi(t,this,"dragStart",[s||0,o||0],e,!1,"draggable"),h=l.childEvents,u=l.eventParams,c=_o(t,"onDragGroupStart",kr(kr({},a),{targets:t.props.targets,events:u}));n.isDrag=!1!==c;var d=null!==(i=null===(r=h[0])||void 0===r?void 0:r.datas.startValue)&&void 0!==i?i:[0,0];return n.throttleOffset=[d[0]%1,d[1]%1],!!n.isDrag&&a},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,kr(kr({},e),{parentThrottleDrag:t.props.throttleDrag})),i=Qi(t,this,"drag",e.datas.passDelta,e,!1,"draggable").eventParams;if(r){var n=kr({targets:t.props.targets,events:i},r);return _o(t,"onDragGroup",n),n}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var i=Qi(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return _o(t,"onDragGroupEnd",vo(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=t.getRect(),i=0,n=0,s=!1;return{isControl:!1,requestStart:function(t){return s=t.useSnap,{datas:e,useSnap:s}},request:function(t){return"x"in t?i=t.x-r.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?n=t.y-r.top:"deltaY"in t&&(n+=t.deltaY),{datas:e,distX:i,distY:n,useSnap:s}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:s}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function Jn(t,e){return{fixedPosition:Pi(t,e),fixedDirection:e,fixedOffset:[0,0]}}function ts(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,s=t.height,o=i?4:3,a=function(t,e,r){return[e?t[0]/(e/2)-1:0,r?t[1]/(r/2)-1:0]}(e,n,s);return{fixedPosition:Vs(r,e,o),fixedDirection:a,fixedOffset:[n?0:e[0],s?0:e[1]]}}var es=Do("resizable"),rs={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:on("resizable"),dragControlCondition:es,viewClassName:Io("resizable"),dragControlStart:function(t,e){var r,i=e.inputEvent,n=e.isPinch,s=e.isGroup,o=e.parentDirection,a=e.parentGesto,l=e.datas,h=e.parentFixedDirection,u=e.parentEvent,c=ao(o,n,i,l),d=t.state,p=d.target,f=d.width,g=d.height,m=d.gestos;if(!c||!p)return!1;if(m.resizable)return!1;m.resizable=a||t.controlGesto,!n&&xi(t,e),l.datas={},l.direction=c,l.startOffsetWidth=f,l.startOffsetHeight=g,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var v=t.props.transformOrigin||"% %";function y(t){l.ratio=t&&isFinite(t)?t:0}function _(t){var e=Jn(l.startPositions,t);l.fixedDirection=e.fixedDirection,l.fixedPosition=e.fixedPosition,l.fixedOffset=e.fixedOffset}function x(e){var r=ts(t.state,e);l.fixedDirection=r.fixedDirection,l.fixedPosition=r.fixedPosition,l.fixedOffset=r.fixedOffset}function T(t){l.minSize=[k("".concat(t[0]),0)||0,k("".concat(t[1]),0)||0]}function S(t){var e=[t[0]||1/0,t[1]||1/0];E(e[0])&&!isFinite(e[0])||(e[0]=k("".concat(e[0]),0)||1/0),E(e[1])&&!isFinite(e[1])||(e[1]=k("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=v&&b(v)?v.split(" "):v,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!c[0]&&!c[1]||c[0]||!c[1],l.startPositions=uo(t.state),y(f/g),_(h||[-c[0],-c[1]]),l.setFixedDirection=_,l.setFixedPosition=x,l.setMin=T,l.setMax=S;var w=mo(t,e,{direction:c,startRatio:l.ratio,set:function(t){var e=Ur(t,2),r=e[0],i=e[1];l.startWidth=r,l.startHeight=i},setMin:T,setMax:S,setRatio:y,setFixedDirection:_,setFixedPosition:x,setOrigin:function(t){l.transformOrigin=t},dragStart:Qn.dragStart(t,(new vi).dragStart([0,0],e))}),A=u||_o(t,"onResizeStart",w);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,!1!==A&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:c}),!!l.isResize&&w},dragControl:function(t,e){var r,i=e.datas,n=e.parentFlag,s=e.isPinch,o=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,h=e.useSnap,u=e.isRequest,c=e.isGroup,d=e.parentEvent,p=e.resolveMatrix,f=i.isResize,g=i.transformOrigin,m=i.startWidth,v=i.startHeight,y=i.prevWidth,_=i.prevHeight,x=i.minSize,b=i.maxSize,E=i.ratio,T=i.startOffsetWidth,S=i.startOffsetHeight,w=i.isWidth;if(f){if(p){var A=t.state.is3d,M=i.startOffsetMatrix,R=i.startTransformOrigin,P=A?4:3,C=Xe(Ni(e)),O=Math.sqrt(C.length);P!==O&&(C=we(C,O,P));var I=Ci(M,C,R,P),D=$s(I,T,S,P);i.startPositions=D,i.nextTargetMatrix=C,i.nextAllMatrix=I}var B=eo(t.props,"resizable"),F=B.resizeFormat,N=B.throttleResize,L=void 0===N?n?0:1:N,k=B.parentMoveable,U=B.keepRatioFinally,G=i.direction,H=G,z=0,W=0;G[0]||G[1]||(H=[1,1]);var X=E&&(null!=o?o:B.keepRatio)||!1,V=Ur(ot(),2),$=V[0],q=V[1];d||(i.setFixedDirection(i.fixedDirection),_o(t,"onBeforeResize",mo(t,e,{startFixedDirection:i.startFixedDirection,startFixedPosition:i.startFixedPosition,setFixedDirection:function(t){var e;return i.setFixedDirection(t),e=Ur(ot(),2),$=e[0],q=e[1],[$,q]},setFixedPosition:function(t){var e;return i.setFixedPosition(t),e=Ur(ot(),2),$=e[0],q=e[1],[$,q]},boundingWidth:$,boundingHeight:q,setSize:function(t){var e;e=Ur(t,2),$=e[0],q=e[1]}},!0)));var K=a;a||(K=!n&&s?function(t,e){return Pi(uo(t.state),e)}(t,[0,0]):i.fixedPosition);var Z=[0,0];if(s||(Z=function(t,e,r,i,n,s,o){if(!_n(t,"resizable"))return[0,0];var a=o.fixedDirection,l=o.nextAllMatrix,h=t.state,u=h.allMatrix,c=h.is3d;return Ts(t,(function(t,i){return xs(l||u,e+t,r+i,a,n,c)}),e,r,i,n,s,o)}(t,$,q,G,K,!h&&u,i)),l&&(!l[0]&&(Z[0]=0),!l[1]&&(Z[1]=0)),X){H[0]&&H[1]&&Z[0]&&Z[1]&&(Wo(Z[0])>Wo(Z[1])?Z[1]=0:Z[0]=0);var Q=!Z[0]&&!Z[1];Q&&at(),H[0]&&!H[1]||Z[0]&&!Z[1]||Q&&w?($+=Z[0],q=$/E):(!H[0]&&H[1]||!Z[0]&&Z[1]||Q&&!w)&&(q+=Z[1],$=q*E)}else $+=Z[0],q+=Z[1],$=Math.max(0,$),q=Math.max(0,q);r=Ur(j([$,q],x,b,!!X&&E),2),$=r[0],q=r[1],at(),X&&(c||U)&&(w?q=$/E:$=q*E);var J=[(z=$-T)-y,(W=q-S)-_];i.prevWidth=z,i.prevHeight=W;var tt=Hi(t,$,q,K,g,i);if(k||!J.every((function(t){return!t}))||!tt.every((function(t){return!t}))){var et=Qn.drag(t,mi(e,t.state,tt,!!s,!1,"draggable")),rt=et.transform,it=m+z,nt=v+W,st=mo(t,e,kr({width:it,height:nt,offsetWidth:Math.round($),offsetHeight:Math.round(q),startRatio:E,boundingWidth:$,boundingHeight:q,direction:G,dist:[z,W],delta:J,isPinch:!!s,drag:et},go({style:{width:"".concat(it,"px"),height:"".concat(nt,"px")},transform:rt},et,e)));return!d&&_o(t,"onResize",st),st}}function ot(){var t=i.fixedDirection,r=ko(H,X,i,e);z=r.distWidth,W=r.distHeight;var n=H[0]-t[0]||X?Math.max(T+z,li):T,s=H[1]-t[1]||X?Math.max(S+W,li):S;return X&&T&&S&&(w?s=n/E:n=s*E),[n,s]}function at(){var t;F&&(t=Ur(F([$,q]),2),$=t[0],q=t[1]),$=Y($,L),q=Y(q,L)}},dragControlAfter:function(t,e){var r=e.datas,i=r.isResize,n=r.startOffsetWidth,s=r.startOffsetHeight,o=r.prevWidth,a=r.prevHeight;if(i&&!1!==t.props.checkResizableError){var l=t.state,h=l.width-(n+o),u=l.height-(s+a),c=Wo(h)>3,d=Wo(u)>3;return c&&(r.startWidth+=h,r.startOffsetWidth+=h,r.prevWidth+=h),d&&(r.startHeight+=u,r.startOffsetHeight+=u,r.prevHeight+=u),c||d?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var r=e.datas,i=e.parentEvent;if(r.isResize){r.isResize=!1;var n=vo(t,e,{});return!i&&_o(t,"onResizeEnd",n),n}},dragGroupControlCondition:es,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,kr(kr({},e),{isGroup:!0}));if(!i)return!1;var n=Zi(t,"resizable",e),s=r.startOffsetWidth,o=r.startOffsetHeight;function a(){var t=r.minSize;n.forEach((function(e){var r=e.datas,i=r.minSize,n=r.startOffsetWidth,a=r.startOffsetHeight,l=s*(n?i[0]/n:0),h=o*(a?i[1]/a:0);t[0]=Math.max(t[0],l),t[1]=Math.max(t[1],h)}))}function l(){var t=r.maxSize;n.forEach((function(e){var r=e.datas,i=r.maxSize,n=r.startOffsetWidth,a=r.startOffsetHeight,l=s*(n?i[0]/n:0),h=o*(a?i[1]/a:0);t[0]=Math.min(t[0],l),t[1]=Math.min(t[1],h)}))}var h=Ji(t,this,"dragControlStart",e,(function(e,i){return tn(t,e,r,i)}));a(),l();var u=function(e){i.setFixedDirection(e),h.forEach((function(i,s){i.setFixedDirection(e),tn(t,i.moveable,r,n[s])}))};r.setFixedDirection=u;var c=kr(kr({},i),{targets:t.props.targets,events:h.map((function(t){return kr(kr({},t),{setMin:function(e){t.setMin(e),a()},setMax:function(e){t.setMax(e),l()}})})),setFixedDirection:u,setMin:function(t){i.setMin(t),a()},setMax:function(t){i.setMax(t),l()}}),d=_o(t,"onResizeGroupStart",c);return r.isResize=!1!==d,!!r.isResize&&i},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var i=eo(t.props,"resizable");yo(t,"onBeforeResize",(function(r){_o(t,"onBeforeResizeGroup",mo(t,e,kr(kr({},r),{targets:i.targets}),!0))}));var n=this.dragControl(t,kr(kr({},e),{isGroup:!0}));if(n){var s=n.boundingWidth,o=n.boundingHeight,a=n.dist,l=i.keepRatio,h=[s/(s-a[0]),o/(o-a[1])],u=r.fixedPosition,c=Ji(t,this,"dragControl",e,(function(e,r){var i=Ur(Oe(Ue(t.rotation/180*Math.PI,3),[r.datas.originalX*h[0],r.datas.originalY*h[1],1],3),2),n=i[0],s=i[1];return kr(kr({},r),{parentDist:null,parentScale:h,dragClient:Re(u,[n,s]),parentKeepRatio:l})})),d=kr({targets:i.targets,events:c},n);return _o(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var i=Ji(t,this,"dragControlEnd",e);return _o(t,"onResizeGroupEnd",vo(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=0,i=0,n=!1,s=t.getRect();return{isControl:!0,requestStart:function(t){var r;return n=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(r=null==t?void 0:t.horizontal)||void 0===r||r,useSnap:n}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-s.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?i=t.offsetHeight-s.offsetHeight:"deltaHeight"in t&&(i+=t.deltaHeight),{datas:e,parentDist:[r,i],parentKeepRatio:t.keepRatio,useSnap:n}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:n}}}},unset:function(t){t.state.gestos.resizable=null}};function is(t,e,r,i,n){var s=t.props.groupable,o=t.state,a=o.is3d?4:3,l=e.origin,h=Vs(t.state.rootMatrix,Pe([l[0],l[1]],s?[0,0]:[o.left,o.top]),a),u=Re([n.left,n.top],h);e.startAbsoluteOrigin=u,e.prevDeg=z(u,[r,i])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=X(u,[r,i])}function ns(t,e,r){var i=r.defaultDeg,n=r.prevDeg,s=n%360,o=Math.floor(n/360);s<0&&(s+=360),s>t&&s>270&&t<90?++o:s<t&&s<90&&t>270&&--o;var a=e*(360*o+t-i);return r.prevDeg=i+a,a}function ss(t,e,r,i){return ns(z(i.startAbsoluteOrigin,[t,e])/Math.PI*180,r,i)}function os(t,e,r,i,n,s){var o=t.props.throttleRotate,a=void 0===o?0:o,l=r.prevSnapDeg,h=0,u=!1;if(s){var c=function(t,e,r,i){var n,s=t.props,o=null!==(n=s[En])&&void 0!==n?n:5,a=s[Tn];if(_n(t,"rotatable")){var l=e.pos1,h=e.pos2,u=e.pos3,c=e.pos4,d=e.origin,p=r*Math.PI/180,f=[l,h,u,c].map((function(t){return Pe(t,d)})),g=f.map((function(t){return Ne(t,p)})),m=Gr(Gr([],Ur(pn(t,f,g,d,r)),!1),Ur(Wn(t,f,g,d,r)),!1);m.sort((function(t,e){return Wo(t-r)-Wo(e-r)}));var v=m.length>0;if(v)return{isSnap:v,dist:v?m[0]:r}}if((null==a?void 0:a.length)&&o){var y=a.slice().sort((function(t,e){return As(t,i)-As(e,i)}))[0];if(As(y,i)<=o)return{isSnap:!0,dist:r+ws(i,y)-i}}return{isSnap:!1,dist:r}}(t,e,i,n+i);u=c.isSnap,h=n+c.dist}u||(h=Y(n+i,a));var d=h-n;return r.prevSnapDeg=d,[d-l,d,h]}function as(t,e,r){var i=Ur(e,4),n=i[0],s=i[1],o=i[2],a=i[3];if("none"===t)return[];if(x(t))return t.map((function(t){return as(t,[n,s,o,a],r)[0]}));var l=Ur((t||"top").split("-"),2),h=l[0],u=l[1],c=[n,s];"left"===h?c=[o,n]:"right"===h?c=[s,a]:"bottom"===h&&(c=[a,o]);var d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],p=io(c,r);if(u){var f="top"===u||"left"===u,g="bottom"===h||"left"===h;d=c[f&&!g||!f&&g?0:1]}return[[d,p]]}function ls(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if(K(r,Is("rotation-control"))||t.props.rotateAroundControls&&K(r,Is("around-control"))||K(r,Is("control"))&&K(r,Is("rotatable")))return!0;var i=t.props.rotationTarget;return!!i&&Fo(i,!0).some((function(t){return!!t&&(r===t||r.contains(t))}))}var hs={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?Is("view-rotation-dragging"):""},render:function(t,e){var r=eo(t.props,"rotatable"),i=r.rotatable,n=r.rotationPosition,s=r.zoom,o=r.renderDirections,a=r.rotateAroundControls,l=r.resolveAblesWithRotatable,h=t.getState(),u=h.renderPoses,c=h.direction;if(!i)return null;var d=as(n,u,c),p=[];if(d.forEach((function(t,r){var i=Ur(t,2),n=i[0],o=i[1];p.push(e.createElement("div",{key:"rotation".concat(r),className:Is("rotation"),style:{transform:"translate(-50%) translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(o,"rad)")}},e.createElement("div",{className:Is("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),e.createElement("div",{className:Is("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))})),o){var f=L(l||{}),g={};f.forEach((function(t){l[t].forEach((function(e){g[e]=t}))}));var m=[];x(o)&&(m=o.map((function(t){var e=g[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),p.push.apply(p,Gr([],Ur(en(t,"rotatable",m,e)),!1))}return a&&p.push.apply(p,Gr([],Ur(ln(t,e)),!1)),p},dragControlCondition:ls,dragControlStart:function(t,e){var r,i,n=e.datas,s=e.clientX,o=e.clientY,a=e.parentRotate,l=e.parentFlag,h=e.isPinch,u=e.isRequest,c=t.state,d=c.target,p=c.left,f=c.top,g=c.direction,m=c.beforeDirection,v=c.targetTransform,y=c.moveableClientRect,_=c.offsetMatrix,x=c.targetMatrix,b=c.allMatrix,E=c.width,T=c.height;if(!u&&!d)return!1;var S=t.getRect();n.rect=S,n.transform=v,n.left=p,n.top=f;var w=function(e){var r=ts(t.state,e);n.fixedDirection=r.fixedDirection,n.fixedOffset=r.fixedOffset,n.fixedPosition=r.fixedPosition,L&&L.setFixedPosition(e)},A=function(e){var r=function(t,e){var r=t.allMatrix,i=t.is3d,n=t.width,s=t.height,o=i?4:3;return{fixedPosition:Vs(r,[n/2*(1+e[0]),s/2*(1+e[1])],o),fixedDirection:e,fixedOffset:[0,0]}}(t.state,e);n.fixedDirection=r.fixedDirection,n.fixedOffset=r.fixedOffset,n.fixedPosition=r.fixedPosition,L&&L.setFixedDirection(e)},M=s,R=o;if(u||h||l){var P=a||0;n.beforeInfo={origin:S.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},n.afterInfo=kr(kr({},n.beforeInfo),{origin:S.origin}),n.absoluteInfo=kr(kr({},n.beforeInfo),{origin:S.origin,startValue:P})}else{var C=null===(i=e.inputEvent)||void 0===i?void 0:i.target;if(C){var O=C.getAttribute("data-direction")||"",I=di[O];if(I){n.isControl=!0,n.isAroundControl=K(C,Is("around-control")),n.controlDirection=I;var D=C.getAttribute("data-resolve");D&&(n.resolveAble=D);var B=function(t,e,r){var i=16===t.length?4:3,n=e.map((function(e){return Vs(t,e,i)})),s=r.left,o=r.top;return n.map((function(t){return[t[0]+s,t[1]+o]}))}(c.rootMatrix,c.renderPoses,y);r=Ur(Pi(B,I),2),M=r[0],R=r[1]}}n.beforeInfo={origin:S.beforeOrigin},n.afterInfo={origin:S.origin},n.absoluteInfo={origin:S.origin,startValue:S.rotation};var F=w;w=function(e){var r=c.is3d?4:3,i=Ur(Re(Te(x,r),e),2),s=i[0],o=i[1],a=Oe(_,Se([s,o],r)),l=Oe(b,Se([e[0],e[1]],r));F(e);var h=c.posDelta;n.beforeInfo.origin=Pe(a,h),n.afterInfo.origin=Pe(l,h),n.absoluteInfo.origin=Pe(l,h),is(t,n.beforeInfo,M,R,y),is(t,n.afterInfo,M,R,y),is(t,n.absoluteInfo,M,R,y)},A=function(t){var e=Pi([[0,0],[E,0],[0,T],[E,T]],t);w(e)}}n.startClientX=M,n.startClientY=R,n.direction=g,n.beforeDirection=m,n.startValue=0,n.datas={},Ii(t,e,"rotate");var N=!1,L=!1;n.isControl&&n.resolveAble&&("resizable"===n.resolveAble&&(L=rs.dragControlStart(t,kr(kr({},new vi("resizable").dragStart([0,0],e)),{parentPosition:n.controlPosition,parentFixedPosition:n.fixedPosition}))));L||(N=Qn.dragStart(t,(new vi).dragStart([0,0],e))),w(function(t){var e=t.props,r=e.groupable,i=e.svgOrigin,n=t.getState(),s=n.offsetWidth,o=n.offsetHeight,a=n.svg,l=n.transformOrigin;if(!r&&a&&i)return Go(i,s,o);return l}(t));var k=mo(t,e,kr(kr({set:function(t){n.startValue=t*Math.PI/180},setFixedDirection:A,setFixedPosition:w},Oi(t,e)),{dragStart:N,resizeStart:L})),U=_o(t,"onRotateStart",k);return n.isRotate=!1!==U,c.snapRenderInfo={request:e.isRequest},!!n.isRotate&&k},dragControl:function(t,e){var r,i,n,s=e.datas,o=e.clientDistX,a=e.clientDistY,l=e.parentRotate,h=e.parentFlag,u=e.isPinch,c=e.groupDelta,d=e.resolveMatrix,p=s.beforeDirection,f=s.beforeInfo,g=s.afterInfo,m=s.absoluteInfo,v=s.isRotate,y=s.startValue,_=s.rect,x=s.startClientX,b=s.startClientY;if(v){bi(t,e,"rotate");var E,T,S,w,A,M,R,P,C,O=function(t){return yi(t.datas.beforeTransform,[50,50],100,100).direction}(e),I=p*O,D=t.props.parentMoveable,B=180/Math.PI*y,F=m.startValue,N=!1,L=x+o,k=b+a;if(!h&&"parentDist"in e){var U=e.parentDist;T=U,A=U,P=U}else u||h?(T=ns(l,p,f),A=ns(l,I,g),P=ns(l,I,m)):(T=ss(L,k,p,f),A=ss(L,k,I,g),P=ss(L,k,I,m),N=!0);if(_o(t,"onBeforeRotate",mo(t,e,{beforeRotation:S=B+T,rotation:M=B+A,absoluteRotation:C=F+P,setRotation:function(t){T=A=t-B,P=A}},!0)),E=(r=Ur(os(t,_,f,T,B,N),3))[0],T=r[1],S=r[2],w=(i=Ur(os(t,_,g,A,B,N),3))[0],A=i[1],M=i[2],R=(n=Ur(os(t,_,m,P,F,N),3))[0],P=n[1],C=n[2],R||w||E||D||d){var G=Ei(s,"rotate(".concat(M,"deg)"),"rotate(".concat(A,"deg)"));d&&(s.fixedPosition=Gi(t,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var j=function(t,e,r){var i=r.fixedDirection,n=r.fixedPosition,s=r.fixedOffset;return ji(t,"rotate(".concat(e,"deg)"),i,n,s,r)}(t,A,s),H=Pe(Re(c||[0,0],j),s.prevInverseDist||[0,0]);s.prevInverseDist=j,s.requestValue=null;var z=Ui(t,G,H,u,e),W=z,Y=X([L,k],m.startAbsoluteOrigin)-m.startDist,V=void 0;if("resizable"===s.resolveAble){var $=rs.dragControl(t,kr(kr({},mi(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:Y}));$&&(V=$,W=go(W,$,e))}var q=mo(t,e,kr(kr({delta:w,dist:A,rotate:M,rotation:M,beforeDist:T,beforeDelta:E,beforeRotate:S,beforeRotation:S,absoluteDist:P,absoluteDelta:R,absoluteRotate:C,absoluteRotation:C,isPinch:!!u,resize:V},z),W));return _o(t,"onRotate",q),q}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var i=vo(t,e,{});return _o(t,"onRotateEnd",i),i}},dragGroupControlCondition:ls,dragGroupControlStart:function(t,e){var r=e.datas,i=t.state,n=i.left,s=i.top,o=i.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(r.beforeDirection*t.rotation);var l=Ji(t,this,"dragControlStart",e,(function(t,e){var r=t.state,i=r.left,a=r.top,l=r.beforeOrigin,h=Re(Pe([i,a],[n,s]),Pe(l,o));return e.datas.startGroupClient=h,e.datas.groupClient=h,kr(kr({},e),{parentRotate:0})})),h=_o(t,"onRotateGroupStart",kr(kr({},a),{targets:t.props.targets,events:l}));return r.isRotate=!1!==h,!!r.isRotate&&a},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){yo(t,"onBeforeRotate",(function(r){_o(t,"onBeforeRotateGroup",mo(t,e,kr(kr({},r),{targets:t.props.targets}),!0))}));var i=this.dragControl(t,e);if(i){var n=r.beforeDirection,s=i.beforeDist,o=s/180*Math.PI,a=Ji(t,this,"dragControl",e,(function(t,e){var r=e.datas.startGroupClient,i=Ur(e.datas.groupClient,2),a=i[0],l=i[1],h=Ur(Ne(r,o*n),2),u=h[0],c=h[1],d=[u-a,c-l];return e.datas.groupClient=[u,c],kr(kr({},e),{parentRotate:s,groupDelta:d})}));t.rotation=n*i.beforeRotation;var l=kr({targets:t.props.targets,events:a,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},i);return _o(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var i=Ji(t,this,"dragControlEnd",e);return _o(t,"onRotateGroupEnd",vo(t,e,{targets:t.props.targets,events:i})),r}},request:function(t){var e={},r=0,i=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-i),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function us(t,e){return function(t,e){var r,i=t.direction,n=t.classNames,s=t.size,o=t.pos,a=t.zoom,l=t.key,h="horizontal"===i,u=h?"Y":"X";return e.createElement("div",{key:l,className:n.join(" "),style:(r={},r[h?"width":"height"]="".concat(s),r.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(a,")"),r)})}(kr(kr({},t),{classNames:Gr([Is("line","guideline",t.direction)],Ur(t.classNames),!1).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(Y(t,.1),"px")}))}),e)}function cs(t,e,r,i,n,s,o,a){var l=t.props.zoom;return r.map((function(t,r){var h=t.type,u=t.pos,c=[0,0];return c[o]=i,c[o?0:1]=-n+u,us({key:"".concat(e,"TargetGuideline").concat(r),classNames:[Is("target","bold",h)],posValue:c,sizeValue:s,zoom:l,direction:e},a)}))}function ds(t,e,r,i,n,s){var o=t.props,a=o.zoom,l=o.isDisplayInnerSnapDigit,h="horizontal"===e?vn:yn,u=n[h.start],c=n[h.end];return r.filter((function(t){var e=t.hide,r=t.elementRect;if(e)return!1;if(l&&r){var i=r.rect;if(i[h.start]<=u&&c<=i[h.end])return!1}return!0})).map((function(t,r){var n=t.pos,o=t.size,l=t.element,h=t.className,u=[-i[0]+n[0],-i[1]+n[1]];return us({key:"".concat(e,"-default-guideline-").concat(r),classNames:l?[Is("bold"),h]:[Is("normal"),h],direction:e,posValue:u,sizeValue:o,zoom:a},s)}))}function ps(t,e,r,i,n,s,o,a){var l,h=t.props,u=h.snapDigit,c=void 0===u?0:u,d=h.isDisplaySnapDigit,p=void 0===d||d,f=h.snapDistFormat,g=void 0===f?function(t,e){return t}:f,m=h.zoom,v="horizontal"===e?"X":"Y",y="vertical"===e?"height":"width",_=Math.abs(n),x=p?parseFloat(_.toFixed(c)):0;return a.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(i),className:Is("guideline-group",e),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[y]="".concat(_,"px"),l)},us({direction:e,classNames:[Is(r),o],size:"100%",posValue:[0,0],sizeValue:_,zoom:m},a),a.createElement("div",{className:Is("size-value","gap"),style:{transform:"translate".concat(v,"(-50%) scale(").concat(m,")")}},x>0?g(x,e):""))}function fs(t,e,r,i,n){var s=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach((function(a){var l=e.filter((function(t){return t.type===a})),h="vertical"===a?1:0,u=h?0:1,c=function(t,e,r,i){var n="vertical"===t?0:1,s="vertical"===t?1:0,o=n?vn:yn,a=r[o.start],l=r[o.end];return So(e,(function(t){return t.pos[n]})).map((function(e){var r=[],h=[];return e.forEach((function(e){var u,c,d=e.element,p=e.elementRect.rect;if(p[o.end]<a)r.push(e);else if(l<p[o.start])h.push(e);else if(p[o.start]<=a&&l<=p[o.end]&&i){var f=e.pos,g={element:d,rect:kr(kr({},p),(u={},u[o.end]=p[o.start],u))},m={element:d,rect:kr(kr({},p),(c={},c[o.start]=p[o.end],c))},v=[0,0],y=[0,0];v[n]=f[n],v[s]=f[s],y[n]=f[n],y[s]=f[s]+e.size,r.push({type:t,pos:v,size:0,elementRect:g,direction:"",elementDirection:"end"}),h.push({type:t,pos:y,size:0,elementRect:m,direction:"",elementDirection:"start"})}})),r.sort((function(t,e){return e.pos[s]-t.pos[s]})),h.sort((function(t,e){return t.pos[s]-e.pos[s]})),{total:e,start:r,end:h,inner:[]}}))}(a,l,i,s),d=h?yn:vn,p=h?vn:yn,f=i[d.start],g=i[d.end];c.forEach((function(e){var s=e.total,l=e.start,c=e.end,m=e.inner,v=r[u]+s[0].pos[u]-i[p.start],y=i;l.forEach((function(e){var i=e.elementRect.rect,s=y[d.start]-i[d.end];if(s>0){var l=[0,0];l[h]=r[h]+y[d.start]-f-s,l[u]=v,o.push(ps(t,a,"dashed",o.length,s,l,e.className,n))}y=i})),y=i,c.forEach((function(e){var i=e.elementRect.rect,s=i[d.start]-y[d.end];if(s>0){var l=[0,0];l[h]=r[h]+y[d.end]-f,l[u]=v,o.push(ps(t,a,"dashed",o.length,s,l,e.className,n))}y=i})),m.forEach((function(e){var i=e.elementRect.rect,s=f-i[d.start],l=i[d.end]-g,c=[0,0],p=[0,0];c[h]=r[h]-s,c[u]=v,p[h]=r[h]+g-f,p[u]=v,o.push(ps(t,a,"dashed",o.length,s,c,e.className,n)),o.push(ps(t,a,"dashed",o.length,l,p,e.className,n))}))}))})),o}function gs(t){var e,r,i=t.state,n=i.containerClientRect,s=i.hasFixed,o=n.overflow,a=n.scrollHeight,l=n.scrollWidth,h=n.clientHeight,u=n.clientWidth,c=n.clientLeft,d=n.clientTop,p=t.props,f=p.snapGap,g=void 0===f||f,m=p.verticalGuidelines,y=p.horizontalGuidelines,x=p.snapThreshold,b=void 0===x?5:x,E=p.maxSnapElementGuidelineDistance,T=void 0===E?1/0:E,S=p.isDisplayGridGuidelines,w=qs(uo(t.state)),A=w.top,M=w.left,R=w.bottom,P=w.right,C={top:A,left:M,bottom:R,right:P,center:(M+P)/2,middle:(A+R)/2},O=function(t){var e=t.state,r=t.props.elementGuidelines,i=void 0===r?[]:r;if(!i.length)return e.elementRects=[],[];var n=(e.elementRects||[]).filter((function(t){return!t.refresh})),s=i.map((function(t){return _(t)&&"element"in t?kr(kr({},t),{element:Bo(t.element,!0)}):{element:Bo(t,!0)}})).filter((function(t){return t.element})),o=(u=n.map((function(t){return t.element})),c=s.map((function(t){return t.element})),dt(u,c,Ke)),a=o.maintained,l=o.added,h=[];var u,c;a.forEach((function(t){var e=Ur(t,2),r=e[0],i=e[1];h[i]=n[r]})),function(t,e){if(!e.length)return[];var r=t.props.groupable,i=t.state,n=i.containerClientRect,s=i.rootMatrix,o=i.is3d,a=i.offsetDelta,l=o?4:3,h=Ur(function(t,e,r){var i=Vs(t,[e.clientLeft,e.clientTop],r);return[e.left+i[0],e.top+i[1]]}(s,n,l),2),u=h[0],c=h[1],d=r?0:a[0],p=r?0:a[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),r=e.left-u-d,i=e.top-c-p,n=i+e.height,o=r+e.width,a=Ur(Mo(s,[r,i],l),2),h=a[0],f=a[1],g=Ur(Mo(s,[o,n],l),2),m=g[0],v=g[1];return kr(kr({},t),{rect:{left:h,right:m,top:f,bottom:v,center:(h+m)/2,middle:(f+v)/2}})}))}(t,l.map((function(t){return s[t]}))).map((function(t,e){h[l[e]]=t})),e.elementRects=h;var d=xn(t.props.elementSnapDirections),p=[];return h.forEach((function(t){var e=t.element,r=t.top,i=void 0===r?d.top:r,n=t.left,s=void 0===n?d.left:n,o=t.right,a=void 0===o?d.right:o,l=t.bottom,h=void 0===l?d.bottom:l,u=t.center,c=void 0===u?d.center:u,f=t.middle,g=void 0===f?d.middle:f,m=t.className,v=t.rect,y=bn({top:i,right:a,left:s,bottom:h,center:c,middle:g},v),_=y.horizontal,x=y.vertical,b=y.horizontalNames,E=y.verticalNames,T=v.top,S=v.left,w=v.right-S,A=v.bottom-T,M=[w,A];x.forEach((function(r,i){p.push({type:"vertical",element:e,pos:[Y(r,.1),T],size:A,sizes:M,className:m,elementRect:t,elementDirection:mn[E[i]]||E[i],direction:""})})),_.forEach((function(r,i){p.push({type:"horizontal",element:e,pos:[S,Y(r,.1)],size:w,sizes:M,className:m,elementRect:t,elementDirection:mn[b[i]]||b[i],direction:""})}))})),p}(t),I=Gr([],Ur(O),!1),D=(null!==(r=null===(e=i.snapThresholdInfo)||void 0===e?void 0:e.multiples)&&void 0!==r?r:[1,1]).map((function(t){return t*b}));g&&I.push.apply(I,Gr([],Ur(function(t,e,r){var i=t.props,n=i.maxSnapElementGuidelineDistance,s=void 0===n?1/0:n,o=i.maxSnapElementGapDistance,a=void 0===o?1/0:o,l=t.state.elementRects,h=[];return[["vertical",vn,yn],["horizontal",yn,vn]].forEach((function(t){var i=Ur(t,3),n=i[0],o=i[1],u=i[2],c=e[o.start],d=e[o.end],p=e[o.center],f=e[u.start],g=e[u.end],m={left:r[0],top:r[1]};function v(t){var e=t.rect,r=m[o.start];return e[o.end]<c+r?c-e[o.end]:d-r<e[o.start]?e[o.start]-d:-1}var y=l.filter((function(t){var e=t.rect;return!(e[u.start]>g||e[u.end]<f)&&v(t)>0})).sort((function(t,e){return v(t)-v(e)})),_=[];y.forEach((function(t){y.forEach((function(e){if(t!==e){var r=t.rect,i=e.rect,n=r[u.start],s=r[u.end],o=i[u.start];n>i[u.end]||o>s||_.push([t,e])}}))})),_.forEach((function(t){var r=Ur(t,2),i=r[0],l=r[1],u=i.rect,f=l.rect,g=u[o.start],v=u[o.end],y=f[o.start],_=f[o.end],x=m[o.start],b=0,E=0,T=!1,S=!1,w=!1;if(v<=c&&d<=y){if(S=!0,Wo((E=v+(b=(y-v-(d-c))/2)+(d-c)/2)-p)>x)return}else if(v<y&&_<c+x){if(T=!0,Wo((E=_+(b=y-v))-c)>x)return}else{if(!(v<y&&d-x<g))return;if(w=!0,Wo((E=g-(b=y-v))-d)>x)return}b&&ms(e,f,n,s)&&(b>a||h.push({type:n,pos:"vertical"===n?[E,0]:[0,E],element:l.element,size:0,className:l.className,isStart:T,isCenter:S,isEnd:w,gap:b,hide:!0,gapRects:[i,l],direction:"",elementDirection:""}))}))})),h}(t,C,D)),!1));var B=kr({},i.snapOffset||{left:0,top:0,bottom:0,right:0});if(I.push.apply(I,Gr([],Ur(function(t,e,r,i,n,s,o){void 0===i&&(i=0);void 0===n&&(n=0);var a=t.props,l=t.state,h=a.snapGridWidth,u=void 0===h?0:h,c=a.snapGridHeight,d=void 0===c?0:c,p=[],f=s.left,g=s.top,m=[0,0];!function(t,e,r,i){var n,s,o=t.props,a=t.state,l=o.snapGridAll,h=o.snapGridWidth,u=void 0===h?0:h,c=o.snapGridHeight,d=void 0===c?0:c,p=a.snapRenderInfo,f=p&&((null===(n=p.direction)||void 0===n?void 0:n[0])||(null===(s=p.direction)||void 0===s?void 0:s[1])),g=t.moveables;if(l&&g&&f&&(u||d)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var m=t.getRect(),y=m.children,_=p.direction;if(y){var x=_.map((function(t,n){var s=0===n?{snapSize:u,posName:"left",sizeName:"width",clientOffset:i.left-e}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:i.top-r},o=s.snapSize,a=s.posName,l=s.sizeName,h=s.clientOffset;if(!o)return{dir:t,multiple:1,snapSize:o,snapOffset:0};var c=m[l],p=m[a],f=$(y.map((function(t){return[t[a]-p,t[l],c-t[l]-t[a]+p]}))).filter((function(t){return t})).sort((function(t,e){return t-e})),g=f[0],_=f.map((function(t){return Y(t/g,.1)*o})),x=1,b=Y(c/g,.1);for(x=1;x<=10&&!_.every((function(t){return t*x%1==0}));++x);var E=(1-t)/2,T=v(p-h,p-h+c,E,1-E);return{multiple:b*x,dir:t,snapSize:o,snapOffset:Math.round(T/o)}})),b=x.map((function(t){return t.multiple||1}));a.snapThresholdInfo.multiples=b,a.snapThresholdInfo.offset=x.map((function(t){return t.snapOffset})),x.forEach((function(t,e){t.snapSize}))}}else a.snapThresholdInfo=null}(t,i,n,s);var y=l.snapThresholdInfo,_=u,x=d;y&&(u*=y.multiples[0]||1,d*=y.multiples[1]||1,m=y.offset);if(d){for(var b=function(t){p.push({type:"horizontal",pos:[f,Y(m[1]*x+t-n+g,.1)],className:Is("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},E=0;E<=2*r;E+=d)b(E);for(E=-d;E>=-r;E-=d)b(E)}if(u){for(b=function(t){p.push({type:"vertical",pos:[Y(m[0]*_+t-i+f,.1),g],className:Is("grid-guideline"),size:r,hide:!o,direction:"",grid:!0})},E=0;E<=2*e;E+=u)b(E);for(E=-u;E>=-e;E-=u)b(E)}return p}(t,o?l:u,o?a:h,c,d,B,S)),!1)),s){var F=n.left,N=n.top;B.left+=F,B.top+=N,B.right+=F,B.bottom+=N}return I.push.apply(I,Gr([],Ur(ys(y||!1,m||!1,o?l:u,o?a:h,c,d,B)),!1)),I=I.filter((function(t){var e=t.element,r=t.elementRect,i=t.type;if(!e||!r)return!0;var n=r.rect;return ms(C,n,i,T)})),I}function ms(t,e,r,i){return"horizontal"===r?Wo(t.right-e.left)<=i||Wo(t.left-e.right)<=i||t.left<=e.right&&e.left<=t.right:"vertical"!==r||(Wo(t.bottom-e.top)<=i||Wo(t.top-e.bottom)<=i||t.top<=e.bottom&&e.top<=t.bottom)}function vs(t,e){return t?t.map((function(t){var r=_(t)?t:{pos:t},i=r.pos;return E(i)?r:kr(kr({},r),{pos:k(i,e)})})):[]}function ys(t,e,r,i,n,s,o){void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o={left:0,top:0,right:0,bottom:0});var a=[],l=o.left,h=o.top,u=o.bottom,c=r+o.right-l,d=i+u-h;return vs(t,d).forEach((function(t){a.push({type:"horizontal",pos:[l,Y(t.pos-s+h,.1)],size:c,className:t.className,direction:""})})),vs(e,c).forEach((function(t){a.push({type:"vertical",pos:[Y(t.pos-n+l,.1),h],size:d,className:t.className,direction:""})})),a}function _s(t){var e=t.state,r=e.container,i=t.props.snapContainer||r;if(e.snapContainer===i&&e.guidelines&&e.guidelines.length)return!1;var n=e.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(r!==i){var o=Bo(i,!0);if(o){var a=oo(o),l=No(e,[a.left-n.left,a.top-n.top]),h=No(e,[a.right-n.right,a.bottom-n.bottom]);s.left=Y(l[0],1e-5),s.top=Y(l[1],1e-5),s.right=Y(h[0],1e-5),s.bottom=Y(h[1],1e-5)}}return e.snapContainer=i,e.snapOffset=s,e.guidelines=gs(t),e.enableSnap=!0,!0}function xs(t,e,r,i,n,s){var o=$s(t,e,r,s?4:3);return ho(o,Pe(n,Pi(o,i)))}function bs(t){return t?t/Wo(t):0}function Es(t,e,r,i,n,s){var o=function(t,e,r){var i=[];if(r)1!==Wo(e[0])||1!==Wo(e[1])?i.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):i.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),i.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var n=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(r){var s=[t*n[0],r*n[1]];e[0]===s[0]&&e[1]===s[1]||i.push([e,s])}))}))}else t[0]?(1===Wo(e[0])?[1]:[1,-1]).forEach((function(r){i.push([[e[0],-1],[r*t[0],-1]],[[e[0],0],[r*t[0],0]],[[e[0],1],[r*t[0],1]])})):t[1]&&(1===Wo(e[1])?[1]:[1,-1]).forEach((function(r){i.push([[-1,e[1]],[-1,r*t[1]]],[[0,e[1]],[0,r*t[1]]],[[1,e[1]],[1,r*t[1]]])}));return i}(r,s.fixedDirection,i),a=Hn(t,e,r,i),l=Gr(Gr([],Ur(Kn(t,e,o,i,n,s)),!1),Ur(Gn(t,a,s)),!1),h=Bn(l,0),u=Bn(l,1);return{width:{isBound:h.isBound,offset:h.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function Ts(t,e,r,i,n,s,o,a){for(var l=uo(t.state),h=t.props.keepRatio,u=0,c=0,d=0;d<2;++d){var p=Es(t,e(u,c),n,h,o,a),f=p.width,g=p.height,m=f.isBound,v=g.isBound,y=f.offset,_=g.offset;if(1===d&&(m||(y=0),v||(_=0)),0===d&&o&&!m&&!v)return[0,0];if(h){var x=Wo(y)*(r?1/r:1),b=Wo(_)*(i?1/i:1);(m&&v?x<b:v||!m&&x<b)?y=r*_/i:_=i*y/r}u+=y,c+=_}if(!h&&n[0]&&n[1]){var E=function(t,e,r,i,n){var s=[-r[0],-r[1]],o=t.state,a=o.width,l=o.height,h=t.props.bounds,u=1/0,c=1/0;if(h){var d=[[r[0],-r[1]],[-r[0],r[1]]],p=h.left,f=void 0===p?-1/0:p,g=h.top,m=void 0===g?-1/0:g,v=h.right,y=void 0===v?1/0:v,_=h.bottom,x=void 0===_?1/0:_;d.forEach((function(t){var r=t[0]!==s[0],o=t[1]!==s[1],h=Pi(e,t),d=360*z(i,h)/Math.PI;if(o){var p=h.slice();(Wo(d-360)<2||Wo(d-180)<2)&&(p[1]=i[1]);var g=Xn(i,p,(i[1]<h[1]?x:m)-h[1],!1,n),v=Ur(g.offset,2)[1],_=g.isOutside;isNaN(v)||(c=l+(_?1:-1)*Wo(v))}if(r){p=h.slice(),(Wo(d-90)<2||Wo(d-270)<2)&&(p[0]=i[0]);var b=Xn(i,p,(i[0]<h[0]?y:f)-h[0],!0,n),E=Ur(b.offset,1)[0],T=b.isOutside;isNaN(E)||(u=a+(T?1:-1)*Wo(E))}}))}return{maxWidth:u,maxHeight:c}}(t,l,n,s,a),T=E.maxWidth,S=E.maxHeight,w=Ur(function(t,e,r,i,n,s,o,a,l){var h=Pi(e,o),u=$n(t,a,{vertical:[h[0]],horizontal:[h[1]]}),c=u.horizontal.offset,d=u.vertical.offset;if(Y(d,ai)||Y(c,ai)){var p=Ur(Ai({datas:l,distX:-d,distY:-c}),2),f=p[0],g=p[1];return[Math.min(n||1/0,r+o[0]*f)-r,Math.min(s||1/0,i+o[1]*g)-i]}return[0,0]}(t,e(u,c).map((function(t){return t.map((function(t){return Y(t,ai)}))})),r+u,i+c,T,S,n,o,a),2);u+=y=w[0],c+=_=w[1]}return[u,c]}function Ss(t){return t<0&&(t=t%360+360),t%=360}function ws(t,e){e=Ss(e);var r=Math.floor(t/360),i=360*r+360-e,n=360*r+e;return Wo(t-i)<Wo(t-n)?i:n}function As(t,e){t=Ss(t),e=Ss(e);var r=Ss(t-e);return Math.min(r,360-r)}function Ms(t,e,r,i,n){if(!_n(t,"scalable"))return[0,0];var s=n.startOffsetWidth,o=n.startOffsetHeight,a=n.fixedPosition,l=n.fixedDirection,h=n.is3d,u=Ts(t,(function(t,r){return xs(function(t,e){var r=t.transformOrigin,i=t.offsetMatrix,n=t.is3d,s=t.targetMatrix,o=n?4:3;return Ci(i,Me(t.targetAllTransform||s,je(e,o),o),r,o)}(n,Re(e,[t/s,r/o])),s,o,l,a,h)}),s,o,r,a,i,n);return[u[0]/s,u[1]/o]}function Rs(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(r){var i=r.guideline;B(e,(function(t){return t.guideline===i}))||(i.direction="",e.push({guideline:i,posInfo:t}))}))})),e.map((function(t){var e=t.guideline,r=t.posInfo;return kr(kr({},e),{direction:r.direction})}))}function Ps(t,e,r,i,n,s){var o=hn(un(t,s),e,r),a=o.vertical,l=o.horizontal,h={left:!1,top:!1,right:!1,bottom:!1};a.forEach((function(t){t.isBound&&("start"===t.direction&&(h.left=!0),"end"===t.direction&&(h.right=!0),i.push({type:"bounds",pos:t.pos}))})),l.forEach((function(t){t.isBound&&("start"===t.direction&&(h.top=!0),"end"===t.direction&&(h.bottom=!0),n.push({type:"bounds",pos:t.pos}))}));var u=function(t){var e=t.props.innerBounds,r={left:!1,top:!1,right:!1,bottom:!1};if(!e)return{boundMap:r,vertical:[],horizontal:[]};var i=t.getRect(),n=[i.pos1,i.pos2,i.pos3,i.pos4],s=Pi(n,[0,0]),o=e.left,a=e.top,l=e.width,h=e.height,u=[[o,a],[o,a+h]],c=[[o,a],[o+l,a]],d=[[o+l,a],[o+l,a+h]],p=[[o,a+h],[o+l,a+h]],f=Hn(t,n,[0,0],!1),g=[],m=[];return f.forEach((function(t){var e=t.line,i=t.lineConstants,n=Fn(s,e),f=n.horizontal,v=n.vertical,y=Un(e,i,c,v,1,!0),_=Un(e,i,p,v,1,!0),x=Un(e,i,u,f,1,!0),b=Un(e,i,d,f,1,!0);y.isBound&&!r.top&&(g.push(a),r.top=!0),_.isBound&&!r.bottom&&(g.push(a+h),r.bottom=!0),x.isBound&&!r.left&&(m.push(o),r.left=!0),b.isBound&&!r.right&&(m.push(o+l),r.right=!0)})),{boundMap:r,horizontal:g,vertical:m}}(t),c=u.boundMap,d=u.vertical,p=u.horizontal;return d.forEach((function(t){D(i,(function(e){var r=e.type,i=e.pos;return"bounds"===r&&i===t}))>=0||i.push({type:"bounds",pos:t})})),p.forEach((function(t){D(n,(function(e){var r=e.type,i=e.pos;return"bounds"===r&&i===t}))>=0||n.push({type:"bounds",pos:t})})),{boundMap:h,innerBoundMap:c}}var Cs=Do("",["resizable","scalable"]),Os={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",En,Tn,Sn,wn,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var r=t.state,i=r.top,n=r.left,s=r.pos1,o=r.pos2,a=r.pos3,l=r.pos4,h=r.snapRenderInfo,u=t.props.snapRenderThreshold,c=void 0===u?1:u;if(!h||!h.render||!_n(t,""))return Ho(t,"boundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),Ho(t,"innerBoundMap",{left:!1,top:!1,right:!1,bottom:!1},(function(t){return JSON.stringify(t)})),[];r.guidelines=gs(t);var d=Math.min(s[0],o[0],a[0],l[0]),p=Math.min(s[1],o[1],a[1],l[1]),f=h.externalPoses||[],g=uo(t.state),m=[],v=[],y=[],_=[],x=[],b=qs(g),E=b.width,T=b.height,S=b.top,w=b.left,A=b.bottom,M=b.right,R={left:w,right:M,top:S,bottom:A,center:(w+M)/2,middle:(S+A)/2},P=f.length>0,C=P?qs(f):{};if(!h.request){if(h.direction&&x.push(In(t,g,h.direction,c,c)),h.snap){var O=qs(g);h.center&&(O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2),x.push(Pn(t,O,c,c))}P&&(h.center&&(C.middle=(C.top+C.bottom)/2,C.center=(C.left+C.right)/2),x.push(Pn(t,C,c,c))),x.forEach((function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;m.push.apply(m,Gr([],Ur(e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),v.push.apply(v,Gr([],Ur(r.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),!1)),y.push.apply(y,Gr([],Ur(Rs(e)),!1)),_.push.apply(_,Gr([],Ur(Rs(r)),!1))}))}var I=Ps(t,[w,M],[S,A],m,v),D=I.boundMap,B=I.innerBoundMap;P&&Ps(t,[C.left,C.right],[C.top,C.bottom],m,v,h.externalBounds);var F=Gr(Gr([],Ur(y),!1),Ur(_),!1),N=F.filter((function(t){return t.element&&!t.gapRects})),L=F.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));_o(t,"onSnap",{guidelines:F.filter((function(t){return!t.element})),elements:N,gaps:L},!0);var k=Ho(t,"boundMap",D,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1}),U=Ho(t,"innerBoundMap",B,(function(t){return JSON.stringify(t)}),{left:!1,top:!1,right:!1,bottom:!1});return D!==k&&B!==U||_o(t,"onBound",{bounds:D,innerBounds:B},!0),Gr(Gr(Gr(Gr(Gr(Gr([],Ur(fs(t,N,[d,p],R,e)),!1),Ur(function(t,e,r,i,n){var s=[];return["horizontal","vertical"].forEach((function(o){var a=e.filter((function(t){return t.type===o})).slice(0,1),l="vertical"===o?0:1,h=l?0:1,u=l?yn:vn,c=l?vn:yn,d=i[u.start],p=i[u.end],f=i[c.start],g=i[c.end];a.forEach((function(e){var i=e.gap,o=e.gapRects,a=Math.max.apply(Math,Gr([f],Ur(o.map((function(t){return t.rect[c.start]}))),!1)),m=Math.min.apply(Math,Gr([g],Ur(o.map((function(t){return t.rect[c.end]}))),!1)),v=(a+m)/2;a!==m&&v!==(f+g)/2&&o.forEach((function(e){var o=e.rect,a=e.className,c=[r[0],r[1]];if(o[u.end]<d)c[l]+=o[u.end]-d;else{if(!(p<o[u.start]))return;c[l]+=o[u.start]-d-i}c[h]+=v-f,s.push(ps(t,l?"vertical":"horizontal","gap",s.length,i,c,a,n))}))}))})),s}(t,L,[d,p],R,e)),!1),Ur(ds(t,"horizontal",_,[n,i],R,e)),!1),Ur(ds(t,"vertical",y,[n,i],R,e)),!1),Ur(cs(t,"horizontal",v,d,i,E,0,e)),!1),Ur(cs(t,"vertical",m,p,n,T,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},_s(t)},drag:function(t){var e=t.state;_s(t)||(e.guidelines=gs(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Cs(t,e)&&!ls(t,e))||(!e.isRequest&&e.inputEvent?K(e.inputEvent.target,Is("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,_s(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,_s(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Is(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,Gr([ii],Ur(t),!1))}function Ds(t){t()}function Bs(t){return t&&"none"!==t?_(t)?t:Xe(t):[1,0,0,1,0,0]}function Fs(t,e,r){return Ae(e,He(r,e),t,He(r.map((function(t){return-t})),e))}function Ns(t){return Ls(xo(t,":before").transformOrigin).map((function(e,r){var i=C(e),n=i.value,s=i.unit;return n*function(t,e,r){return"%"===e?Xs(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,s,0===r)}))}function Ls(t){return t?t.split(" "):["0","0"]}function ks(t){var e=Ki(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var n=[],s=function(t){var e=r[t].matrix;n.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},o=0;o<i;++o)s(o);return n.join(" ")}return""}function Us(t,e,r,i,n){var s,o,a,l,h=rt(t)||it(t),u=!1;if(!t||r)a=t;else{var c=null===(s=null==t?void 0:t.assignedSlot)||void 0===s?void 0:s.parentElement,d=t.parentElement;c?(u=!0,l=d,a=c):a=d}for(var p=!1,f=t===e||a===e,g="relative",m=1,v=parseFloat(null==n?void 0:n("zoom"))||1,y=null==n?void 0:n("position");a&&a!==h;){e===a&&(f=!0);var _=Ki(a),x=a.tagName.toLowerCase(),b=ks(a),E=_("willChange"),T=parseFloat(_("zoom"))||1;if(g=_("position"),i&&1!==T){m=T;break}if(!r&&i&&1!==v&&y&&"absolute"!==y||"svg"===x||"foreignobject"===x||"static"!==g||b&&"none"!==b||"transform"===E)break;var S=null===(o=null==t?void 0:t.assignedSlot)||void 0===o?void 0:o.parentNode,w=a.parentNode;S&&(u=!0,l=w);var A=w;if(A&&11===A.nodeType){p=!0,g=Ki(a=A.host)("position");break}a=A,g="relative"}return{offsetZoom:m,hasSlot:u,parentSlotElement:l,isCustomElement:p,isStatic:"static"===g,isEnd:f||!a||a===h,offsetParent:a||h}}function Gs(t,e){var r,i,n,s=t.tagName.toLowerCase(),o=t.offsetLeft,a=t.offsetTop,l=Ki(t),h=y(o),u=!h;return u||"svg"===s&&!t.ownerSVGElement?n=(i=Ls(l("transformOrigin")).map((function(t){return parseFloat(t)}))).slice():(n=(i=$r?Ns(t):Ls(l("transformOrigin")).map((function(t){return parseFloat(t)}))).slice(),u=!0,"svg"===s?(o=0,a=0):(r=Ur(function(t,e,r){var i=t.tagName.toLowerCase();if(!t.getBBox||!r&&"g"===i)return[0,0,0,0];var n=Ki(t),s="fill-box"===n("transform-box"),o=t.getBBox(),a=Xs(t.ownerSVGElement),l=o.x,h=o.y;"foreignobject"!==i||l||h||(l=parseFloat(t.getAttribute("x"))||0,h=parseFloat(t.getAttribute("y"))||0);var u=l-a.x,c=h-a.y,d=s?e[0]:e[0]-u,p=s?e[1]:e[1]-c;return[u,c,d,p]}(t,i,t===e&&"g"===e.tagName.toLowerCase()),4),o=r[0],a=r[1],i[0]=r[2],i[1]=r[3])),{tagName:s,isSVG:h,hasOffset:u,offset:[o||0,a||0],origin:i,targetOrigin:n}}function js(t,e){var r=Ki(t),i=Ki(it(t)),n=i("position");if(!(e||n&&"static"!==n))return[0,0];var s=parseInt(i("marginLeft"),10),o=parseInt(i("marginTop"),10);return"absolute"===r("position")&&("auto"===r("top")&&"auto"===r("bottom")||(o=0),"auto"===r("left")&&"auto"===r("right")||(s=0)),[s,o]}function Hs(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=we(e,3,4))}))}function zs(t){for(var e=t.parentElement,r=!1,i=it(t);e;){var n=xo(e).transform;if(n&&"none"!==n){r=!0;break}if(e===i)break;e=e.parentElement}return{fixedContainer:e||i,hasTransform:r}}function Ws(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Ce(t,!e).join(","),")")}function Xs(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var i=t.viewBox,n=i&&i.baseVal||{x:0,y:0,width:0,height:0};return{x:n.x,y:n.y,width:n.width||e,height:n.height||r,clientWidth:e,clientHeight:r}}function Ys(t,e){var r,i=Xs(t),n=i.width,s=i.height,o=i.clientWidth,a=i.clientHeight,l=o/n,h=a/s,u=t.preserveAspectRatio.baseVal,c=u.align,d=u.meetOrSlice,p=[0,0],f=[l,h],g=[0,0];if(1!==c){var m=(c-2)%3,v=Math.floor((c-2)/3);p[0]=n*m/2,p[1]=s*v/2;var y=2===d?Math.max(h,l):Math.min(l,h);f[0]=y,f[1]=y,g[0]=(o-n)/2*m,g[1]=(a-s)/2*v}var _=je(f,e);return r=Ur(g,2),_[e*(e-1)]=r[0],_[e*(e-1)+1]=r[1],Fs(_,e,p)}function Vs(t,e,r){return Oe(t,Se(e,r),r)}function $s(t,e,r,i){return[[0,0],[e,0],[0,r],[e,r]].map((function(e){return Vs(t,e,i)}))}function qs(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),i=Math.min.apply(Math,Gr([],Ur(e),!1)),n=Math.min.apply(Math,Gr([],Ur(r),!1)),s=Math.max.apply(Math,Gr([],Ur(e),!1)),o=Math.max.apply(Math,Gr([],Ur(r),!1));return{left:i,top:n,right:s,bottom:o,width:s-i,height:o-n}}function Ks(t,e,r,i){return qs($s(t,e,r,i))}function Zs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Qs(t,e){return Zs([e[0]-t[0],e[1]-t[1]])}function Js(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=z(t,e));var n=Qs(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(i,"rad) scaleY(").concat(r,")"),width:"".concat(n,"px")}}function to(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r.length,s=r.reduce((function(t,e){return t+e[0]}),0)/n,o=r.reduce((function(t,e){return t+e[1]}),0)/n;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function eo(t,e){var r=t[e];return _(r)?kr(kr({},t),r):t}function ro(t){var e=t&&!y(t.offsetWidth),r=0,i=0,n=0,s=0,o=0,a=0,l=0,h=0,u=0,c=0,d=0,p=0,f=1/0,g=1/0,m=1/0,v=1/0,_=0,x=0,b=!1;if(t)if(!e&&t.ownerSVGElement){var E=t.getBBox();b=!0,o=r=E.width,a=i=E.height,l=r,h=i,n=r,s=i}else{var T=Ki(t),S=t.style,w="border-box"===T("boxSizing"),A=parseFloat(T("borderLeftWidth"))||0,M=parseFloat(T("borderRightWidth"))||0,R=parseFloat(T("borderTopWidth"))||0,P=parseFloat(T("borderBottomWidth"))||0,C=(parseFloat(T("paddingLeft"))||0)+(parseFloat(T("paddingRight"))||0),O=(parseFloat(T("paddingTop"))||0)+(parseFloat(T("paddingBottom"))||0),I=C+(A+M),D=O+(R+P),B=T("position"),F=0,N=0;if("clientLeft"in t){var L=null;if("absolute"===B)L=Us(t,it(t)).offsetParent;else L=t.parentElement;if(L){var G=Ki(L);F=parseFloat(G("width")),N=parseFloat(G("height"))}}u=Math.max(C,k(T("minWidth"),F)||0),c=Math.max(O,k(T("minHeight"),N)||0),f=k(T("maxWidth"),F),g=k(T("maxHeight"),N),isNaN(f)&&(f=1/0),isNaN(g)&&(g=1/0),_=k(S.width,0)||0,x=k(S.height,0)||0,o=parseFloat(T("width"))||0,a=parseFloat(T("height"))||0,r=l=Wo(o-_)<1?U(u,_||o,f):o,i=h=Wo(a-x)<1?U(c,x||a,g):a,n=l,s=h,w?(m=f,v=g,d=u,p=c,l=r-I,h=i-D):(m=f+I,v=g+D,d=u+I,p=c+D,r=l+I,i=h+D),n=l+C,s=h+O}return{svg:b,offsetWidth:r,offsetHeight:i,clientWidth:n,clientHeight:s,contentWidth:l,contentHeight:h,inlineCSSWidth:_,inlineCSSHeight:x,cssWidth:o,cssHeight:a,minWidth:u,minHeight:c,maxWidth:f,maxHeight:g,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:v}}function io(t,e){return z(e>0?t[0]:t[1],e>0?t[1]:t[0])}function no(t,e){var r=t===it(t)||t===rt(t),i={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(i.clientHeight=Math.max(e.height,i.clientHeight),i.scrollHeight=Math.max(e.height,i.scrollHeight)),i.overflow="visible"!==Ki(t)("overflow"),kr(kr({},e),i)}function so(t,e,r,i){var n=t.left,s=t.right,o=t.top,a=t.bottom,l=e.top,h=e.left,u={left:h+n,top:l+o,right:h+s,bottom:l+a,width:s-n,height:a-o};return r&&i?no(r,u):u}function oo(t,e){var r=0,i=0,n=0,s=0;if(t){var o=t.getBoundingClientRect();r=o.left,i=o.top,n=o.width,s=o.height}var a={left:r,top:i,width:n,height:s,right:r+n,bottom:i+s};return t&&e?no(t,a):a}function ao(t,e,r,i){var n;if(t)n=t;else if(e)n=[0,0];else{n=lo(r.target,i)}return n}function lo(t,e){if(t){var r=t.getAttribute("data-rotation")||"",i=t.getAttribute("data-direction");if(e.deg=r,i){var n=[0,0];return i.indexOf("w")>-1&&(n[0]=-1),i.indexOf("e")>-1&&(n[0]=1),i.indexOf("n")>-1&&(n[1]=-1),i.indexOf("s")>-1&&(n[1]=1),n}}}function ho(t,e){return[Re(e,t[0]),Re(e,t[1]),Re(e,t[2]),Re(e,t[3])]}function uo(t){var e=t.left,r=t.top;return ho([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function co(t,e){t[e?"controlAbles":"targetAbles"].forEach((function(e){e.unset&&e.unset(t)}))}function po(t,e){var r=e?"controlGesto":"targetGesto",i=t[r];!1===(null==i?void 0:i.isIdle())&&co(t,e),null==i||i.unset(),t[r]=null}function fo(t,e){if(e){var r=Fi(e);r.nextStyle=kr(kr({},r.nextStyle),t)}return{style:t,cssText:L(t).map((function(e){return"".concat(O(e,"-"),": ").concat(t[e],";")})).join("")}}function go(t,e,r){var i=e.afterTransform||e.transform;return kr(kr({},fo(kr(kr(kr({},t.style),e.style),{transform:i}),r)),{afterTransform:i,transform:t.transform})}function mo(t,e,r,i){var n=e.datas;n.datas||(n.datas={});var s=kr(kr({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:n.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){n.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return n.isStartEvent?i||(n.lastEvent=s):n.isStartEvent=!0,s}function vo(t,e,r){var i=e.datas,n="isDrag"in r?r.isDrag:e.isDrag;return i.datas||(i.datas={}),kr(kr({isDrag:n},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:i.lastEvent,isDouble:e.isDouble,datas:i.datas,isFirstDrag:!!e.isFirstDrag})}function yo(t,e,r){t._emitter.on(e,r)}function _o(t,e,r,i,n){return t.triggerEvent(e,r,i,n)}function xo(t,e){return nt(t).getComputedStyle(t,e)}function bo(t,e,r){var i={},n={};return t.filter((function(t){var s=t.name;if(i[s]||!e.some((function(e){return t[e]})))return!1;if(!r&&t.ableGroup){if(n[t.ableGroup])return!1;n[t.ableGroup]=!0}return i[s]=!0,!0}))}function Eo(t,e){return t===e||null==t&&null==e}function To(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,i=0;i<r;++i){var n=t[i];if(!y(n))return n}return t[r]}function So(t,e){var r=[],i=[];return t.forEach((function(n,s){var o=e(n,s,t),a=i.indexOf(o),l=r[a]||[];-1===a&&(i.push(o),r.push(l)),l.push(n)})),r}function wo(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function Ao(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Wo(e)-Wo(t)})),t[0]}function Mo(t,e,r){return Oe(Ee(t,r),Se(e,r),r)}function Ro(t,e){var r,i=t.is3d?4:3;return r=Ur(Mo(t.rootMatrix,[e.distX,e.distY],i),2),e.distX=r[0],e.distY=r[1],e}function Po(t,e,r,i){if(!r[0]&&!r[1])return e;var n=Vs(t,[bs(r[0]||1),0],i),s=Vs(t,[0,bs(r[1]||1)],i);return Re(e,Vs(t,[r[0]/Zs(n),r[1]/Zs(s)],i))}function Co(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function Oo(t){return Wo(t)<=li?0:t}function Io(t){return function(e){if(!e.isDragging(t))return"";var r=function(t,e){var r,i=t.targetGesto,n=t.controlGesto;return(null==i?void 0:i.isFlag())&&(r=i.getEventData()[e]),!r&&(null==n?void 0:n.isFlag())&&(r=n.getEventData()[e]),r||{}}(e,t),i=r.deg;return i?Is("view-control-rotation".concat(i)):""}}function Do(t,e){return void 0===e&&(e=[t]),function(r,i){if(i.isRequest)return!!e.some((function(t){return i.requestAble===t}))&&i.parentDirection;var n=i.inputEvent.target;return K(n,Is("direction"))&&(!t||K(n,Is(t)))}}function Bo(t,e){return t?ot(t)?t:b(t)?e?document.querySelector(t):t:T(t)?t():st(t)?t:"current"in t?t.current:t:null}function Fo(t,e){return t?((r=t)&&_(r)&&!ot(r)&&(x(r)||"length"in r)?[].slice.call(t):[t]).reduce((function(t,r){return b(r)&&e?Gr(Gr([],Ur(t),!1),Ur([].slice.call(document.querySelectorAll(r))),!1):(x(r)?t.push(Fo(r,e)):t.push(Bo(r,e)),t)}),[]):[];var r}function No(t,e){var r=t.rootMatrix,i=t.is3d,n=Ee(r,i?4:3);return i||(n=we(n,3,4)),n[12]=0,n[13]=0,n[14]=0,function(t,e){var r=Oe(t,[e[0],e[1]||0,e[2]||0,1],4),i=r[3]||1;return[r[0]/i,r[1]/i,r[2]/i]}(n,e)}function Lo(t,e,r,i,n){var s=Ur(t,2),o=s[0],a=s[1],l=0,h=0;if(n&&o&&a){var u=z([0,0],e),c=z([0,0],i),d=Zs(e),p=Math.cos(u-c)*d;if(i[0])if(i[1]){var f=i[0]*o,g=i[1]*a,m=Math.atan2(f+e[0],g+e[1]),v=Math.atan2(f,g);m<0&&(m+=2*Math.PI),v<0&&(v+=2*Math.PI);var y=0;(y=Wo(m-v)<Math.PI/2||Wo(m-v)>Math.PI/2*3?m-v:m-(v+=Math.PI))>2*Math.PI?y-=2*Math.PI:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var _=Zs([f+e[0],g+e[1]])*Math.cos(y);l=_*Math.sin(v)-f,h=_*Math.cos(v)-g,i[0]<0&&(l*=-1),i[1]<0&&(h*=-1)}else h=(l=p)/r;else l=(h=p)*r}else l=i[0]*e[0],h=i[1]*e[1];return[l,h]}function ko(t,e,r,i){var n,s=r.ratio,o=r.startOffsetWidth,a=r.startOffsetHeight,l=0,h=0,u=i.distX,c=i.distY,d=i.pinchScale,p=i.parentDistance,f=i.parentDist,g=i.parentScale,m=r.fixedDirection,v=[0,1].map((function(e){return Wo(t[e]-m[e])})),y=[0,1].map((function(t){var e=v[t];return 0!==e&&(e=2/e),e}));if(f)l=f[0],h=f[1],e&&(l?h||(h=l/s):l=h*s);else if(E(d))l=(d-1)*o,h=(d-1)*a;else if(g)l=(g[0]-1)*o,h=(g[1]-1)*a;else if(p){var _=o*v[0],x=a*v[1],b=Zs([_,x]);l=p/b*_*y[0],h=p/b*x*y[1]}else{var T=Ai({datas:r,distX:u,distY:c});T=y.map((function(t,e){return T[e]*t})),l=(n=Ur(Lo([o,a],T,s,t,e),2))[0],h=n[1]}return{distWidth:l,distHeight:h}}function Uo(t,e){if(e){if("left"===t)return{x:"0%",y:"50%"};if("top"===t)return{x:"50%",y:"50%"};if("center"===t)return{x:"50%",y:"50%"};if("right"===t)return{x:"100%",y:"50%"};if("bottom"===t)return{x:"50%",y:"100%"};var r=Ur(t.split(" "),2),i=r[0],n=r[1],s=Uo(i||""),o=Uo(n||""),a=kr(kr({},s),o),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return"left"===t?{x:"0%"}:"right"===t?{x:"100%"}:"top"===t?{y:"0%"}:"bottom"===t?{y:"100%"}:t?"center"===t?{value:"50%"}:{value:t}:{}}function Go(t,e,r){var i=Uo(t,!0),n=i.x,s=i.y;return[k(n,e)||0,k(s,r)||0]}function jo(t,e){return t.length===e.length&&t.every((function(t,r){var i=e[r],n=x(t),s=x(i);return n&&s?jo(t,i):!n&&!s&&t===i}))}function Ho(t,e,r,i,n){var s=t._store,o=s[e];if(!(e in s)){if(null==n)return s[e]=r,r;s[e]=n,o=n}return o===r||i(o)===i(r)?o:(s[e]=r,r)}function zo(t){return t>=0?1:-1}function Wo(t){return Math.abs(t)}function Xo(t,e){return function(t){for(var e=[],r=0;r<t;++r)e.push(r);return e}(t).map((function(t){return e(t)}))}function Yo(t){return E(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var Vo=jr("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,i=e.targets,n=e.angle,s=e.originalDatas,o=t.props,a=o.pinchable,l=o.ables;if(!a)return!1;var h="onPinch".concat(i?"Group":"","Start"),u="drag".concat(i?"Group":"","ControlStart"),c=(!0===a?t.controlAbles:l.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[u]})),d=mo(t,e,{});i&&(d.targets=i);var p=_o(t,h,d);r.isPinch=!1!==p,r.ables=c;var f=r.isPinch;return!!f&&(c.forEach((function(r){if(s[r.name]=s[r.name]||{},r[u]){var i=kr(kr({},e),{datas:s[r.name],parentRotate:n,isPinch:!0});r[u](t,i)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},f)},pinch:function(t,e){var r=e.datas,i=e.scale,n=e.distance,s=e.originalDatas,o=e.inputEvent,a=e.targets,l=e.angle;if(r.isPinch){var h=n*(1-1/i),u=mo(t,e,{});a&&(u.targets=a);var c="onPinch".concat(a?"Group":"");_o(t,c,u);var d=r.ables,p="drag".concat(a?"Group":"","Control");return d.forEach((function(r){r[p]&&r[p](t,kr(kr({},e),{datas:s[r.name],inputEvent:o,resolveMatrix:!0,pinchScale:i,parentDistance:h,parentRotate:l,isPinch:!0}))})),u}},pinchEnd:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,s=e.targets,o=e.originalDatas;if(r.isPinch){var a="onPinch".concat(s?"Group":"","End"),l=vo(t,e,{isDrag:i});s&&(l.targets=s),_o(t,a,l);var h=r.ables,u="drag".concat(s?"Group":"","ControlEnd");return h.forEach((function(r){r[u]&&r[u](t,kr(kr({},e),{isDrag:i,datas:o[r.name],inputEvent:n,isPinch:!0}))})),i}},pinchGroupStart:function(t,e){return this.pinchStart(t,kr(kr({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,kr(kr({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,kr(kr({},e),{targets:t.props.targets}))}}),$o=Do("scalable"),qo={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:on("scalable"),dragControlCondition:$o,viewClassName:Io("scalable"),dragControlStart:function(t,e){var r=e.datas,i=e.isPinch,n=e.inputEvent,s=ao(e.parentDirection,i,n,r),o=t.state,a=o.width,l=o.height,h=o.targetTransform,u=o.target,c=o.pos1,d=o.pos2,p=o.pos4;if(!s||!u)return!1;i||xi(t,e),r.datas={},r.transform=h,r.prevDist=[1,1],r.direction=s,r.startOffsetWidth=a,r.startOffsetHeight=l,r.startValue=[1,1];var f=!s[0]&&!s[1]||s[0]||!s[1];function g(t){r.ratio=t&&isFinite(t)?t:0}function m(t){var e=Jn(r.startPositions,t);r.fixedDirection=e.fixedDirection,r.fixedPosition=e.fixedPosition,r.fixedOffset=e.fixedOffset}Ii(t,e,"scale"),r.isWidth=f,r.startPositions=uo(t.state),r.setFixedDirection=m,g(X(c,d)/X(d,p)),m([-s[0],-s[1]]);var v=function(t){r.minScaleSize=t},y=function(t){r.maxScaleSize=t};v([-1/0,-1/0]),y([1/0,1/0]);var _=mo(t,e,kr(kr({direction:s,set:function(t){r.startValue=t},setRatio:g,setFixedDirection:m,setMinScaleSize:v,setMaxScaleSize:y},Oi(t,e)),{dragStart:Qn.dragStart(t,(new vi).dragStart([0,0],e))})),x=_o(t,"onScaleStart",_);return r.startFixedDirection=r.fixedDirection,!1!==x&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),!!r.isScale&&_},dragControl:function(t,e){bi(t,e,"scale");var r=e.datas,i=e.parentKeepRatio,n=e.parentFlag,s=e.isPinch,o=e.dragClient,a=e.isRequest,l=e.useSnap,h=e.resolveMatrix,u=r.prevDist,c=r.direction,d=r.startOffsetWidth,p=r.startOffsetHeight,f=r.isScale,g=r.startValue,m=r.isWidth,v=r.ratio;if(!f)return!1;var y=t.props,_=y.throttleScale,b=y.parentMoveable,E=c;c[0]||c[1]||(E=[1,1]);var T=v&&(null!=i?i:y.keepRatio)||!1,S=t.state,w=[g[0],g[1]];function A(){var t=ko(E,T,r,e),i=t.distWidth,n=t.distHeight,s=d?(d+i)/d:1,o=p?(p+n)/p:1;g[0]||(w[0]=i/d),g[1]||(w[1]=n/p);var a=(E[0]||T?s:1)*w[0],l=(E[1]||T?o:1)*w[1];return 0===a&&(a=zo(u[0])*hi),0===l&&(l=zo(u[1])*hi),[a,l]}var M=A();if(!s&&t.props.groupable){var R=(S.snapRenderInfo||{}).direction;x(R)&&(R[0]||R[1])&&(S.snapRenderInfo={direction:c,request:e.isRequest})}_o(t,"onBeforeScale",mo(t,e,{scale:M,setFixedDirection:function(t){return r.setFixedDirection(t),M=A()},startFixedDirection:r.startFixedDirection,setScale:function(t){M=t}},!0));var P,C,O=[M[0]/w[0],M[1]/w[1]],I=o,D=[0,0],B=zo(O[0]*O[1]),F=!o&&!n&&s;if(F||h?I=Gi(t,r.targetAllTransform,[0,0],[0,0],r):o||(I=r.fixedPosition),s||(D=Ms(t,O,c,!l&&a,r)),T){E[0]&&E[1]&&D[0]&&D[1]&&(Math.abs(D[0]*d)>Math.abs(D[1]*p)?D[1]=0:D[0]=0);var N=!D[0]&&!D[1];if(N&&(m?O[0]=Y(O[0]*w[0],_)/w[0]:O[1]=Y(O[1]*w[1],_)/w[1]),E[0]&&!E[1]||D[0]&&!D[1]||N&&m){O[0]+=D[0];var L=d*O[0]*w[0]/v;O[1]=zo(B*O[0])*Wo(L/p/w[1])}else if(!E[0]&&E[1]||!D[0]&&D[1]||N&&!m){O[1]+=D[1];var k=p*O[1]*w[1]*v;O[0]=zo(B*O[1])*Wo(k/d/w[0])}}else O[0]+=D[0],O[1]+=D[1],D[0]||(O[0]=Y(O[0]*w[0],_)/w[0]),D[1]||(O[1]=Y(O[1]*w[1],_)/w[1]);0===O[0]&&(O[0]=zo(u[0])*hi),0===O[1]&&(O[1]=zo(u[1])*hi),P=O,C=[w[0],w[1]],M=[P[0]*C[0],P[1]*C[1]];var U=[d,p],G=[d*M[0],p*M[1]];G=j(G,r.minScaleSize,r.maxScaleSize,!!T&&v),M=Xo(2,(function(t){return U[t]?G[t]/U[t]:G[t]})),O=Xo(2,(function(t){return M[t]/w[t]}));var H=Xo(2,(function(t){return u[t]?O[t]/u[t]:O[t]})),z="scale(".concat(O.join(", "),")"),W="scale(".concat(M.join(", "),")"),X=Ei(r,W,z),V=!g[0]||!g[1],$=function(t,e,r,i,n,s,o){return ji(t,e,r,i,n,s,o)}(t,V?W:z,r.fixedDirection,I,r.fixedOffset,r,V),q=F?$:Pe($,r.prevInverseDist||[0,0]);if(r.prevDist=O,r.prevInverseDist=$,M[0]===u[0]&&M[1]===u[1]&&q.every((function(t){return!t}))&&!b&&!F)return!1;var K=mo(t,e,kr({offsetWidth:d,offsetHeight:p,direction:c,scale:M,dist:O,delta:H,isPinch:!!s},Ui(t,X,q,s,e)));return _o(t,"onScale",K),K},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var i=vo(t,e,{});return _o(t,"onScaleEnd",i),i},dragGroupControlCondition:$o,dragGroupControlStart:function(t,e){var r=e.datas,i=this.dragControlStart(t,e);if(!i)return!1;var n=Zi(t,"resizable",e);r.moveableScale=t.scale;var s=Ji(t,this,"dragControlStart",e,(function(e,i){return tn(t,e,r,i)})),o=function(e){i.setFixedDirection(e),s.forEach((function(i,s){i.setFixedDirection(e),tn(t,i.moveable,r,n[s])}))};r.setFixedDirection=o;var a=kr(kr({},i),{targets:t.props.targets,events:s,setFixedDirection:o}),l=_o(t,"onScaleGroupStart",a);return r.isScale=!1!==l,!!r.isScale&&a},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){yo(t,"onBeforeScale",(function(r){_o(t,"onBeforeScaleGroup",mo(t,e,kr(kr({},r),{targets:t.props.targets}),!0))}));var i=this.dragControl(t,e);if(i){var n=i.dist,s=r.moveableScale;t.scale=[n[0]*s[0],n[1]*s[1]];var o=t.props.keepRatio,a=r.fixedPosition,l=Ji(t,this,"dragControl",e,(function(e,r){var i=Ur(Oe(Ue(t.rotation/180*Math.PI,3),[r.datas.originalX*n[0],r.datas.originalY*n[1],1],3),2),s=i[0],l=i[1];return kr(kr({},r),{parentDist:null,parentScale:n,parentKeepRatio:o,dragClient:Re(a,[s,l])})})),h=kr({targets:t.props.targets,events:l},i);return _o(t,"onScaleGroup",h),h}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var i=Ji(t,this,"dragControlEnd",e);return _o(t,"onScaleGroupEnd",vo(t,e,{targets:t.props.targets,events:i})),r}},request:function(){var t={},e=0,r=0,i=!1;return{isControl:!0,requestStart:function(e){return i=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:i}},request:function(n){return e+=n.deltaWidth,r+=n.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:n.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}}};function Ko(t,e){return t.map((function(t,r){return v(t,e[r],1,2)}))}function Zo(t,e,r){var i=z(t,e),n=z(t,r)-i;return n>=0?n:n+2*Math.PI}var Qo={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:Io("warpable"),render:function(t,e){var r=t.props,i=r.resizable,n=r.scalable,s=r.warpable,o=r.zoom;if(i||n||!s)return[];var a=t.state,l=a.pos1,h=a.pos2,u=a.pos3,c=a.pos4,d=Ko(l,h),p=Ko(h,l),f=Ko(l,u),g=Ko(u,l),m=Ko(u,c),v=Ko(c,u),y=Ko(h,c),_=Ko(c,h);return Gr([e.createElement("div",{className:Is("line"),key:"middeLine1",style:Js(d,m,o)}),e.createElement("div",{className:Is("line"),key:"middeLine2",style:Js(p,v,o)}),e.createElement("div",{className:Is("line"),key:"middeLine3",style:Js(f,y,o)}),e.createElement("div",{className:Is("line"),key:"middeLine4",style:Js(g,_,o)})],Ur(an(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return K(r,Is("direction"))&&K(r,Is("warpable"))},dragControlStart:function(t,e){var r=e.datas,i=e.inputEvent,n=t.props.target,s=lo(i.target,r);if(!s||!n)return!1;var o=t.state,a=o.transformOrigin,l=o.is3d,h=o.targetTransform,u=o.targetMatrix,c=o.width,d=o.height,p=o.left,f=o.top;return r.datas={},r.targetTransform=h,r.warpTargetMatrix=l?u:we(u,3,4),r.targetInverseMatrix=be(Ee(r.warpTargetMatrix,4),3,4),r.direction=s,r.left=p,r.top=f,r.poses=[[0,0],[c,0],[0,d],[c,d]].map((function(t){return Pe(t,a)})),r.nextPoses=r.poses.map((function(t){var e=Ur(t,2),i=e[0],n=e[1];return Oe(r.warpTargetMatrix,[i,n,0,1],4)})),r.startValue=Ge(4),r.prevMatrix=Ge(4),r.absolutePoses=uo(o),r.posIndexes=Mi(s),xi(t,e),Ii(t,e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s},!1!==_o(t,"onWarpStart",mo(t,e,kr({set:function(t){r.startValue=t}},Oi(t,e))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,i=e.isRequest,n=e.distX,s=e.distY,o=r.targetInverseMatrix,a=r.prevMatrix,l=r.isWarp,h=r.startValue,u=r.poses,c=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(bi(t,e,"matrix3d"),_n(t,"warpable")){var p=c.map((function(t){return d[t]}));p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var f=$n(t,i,{horizontal:p.map((function(t){return t[1]+s})),vertical:p.map((function(t){return t[0]+n}))}),g=f.horizontal,m=f.vertical;s-=g.offset,n-=m.offset}var v=Ai({datas:r,distX:n,distY:s},!0),y=r.nextPoses.slice();if(c.forEach((function(t){y[t]=Re(y[t],v)})),!oi.every((function(t){return e=t.map((function(t){return u[t]})),r=t.map((function(t){return y[t]})),i=Zo(e[0],e[1],e[2]),n=Zo(r[0],r[1],r[2]),s=Math.PI,!(i>=s&&n<=s||i<=s&&n>=s);var e,r,i,n,s})))return!1;var _=ze(u[0],u[2],u[1],u[3],y[0],y[2],y[1],y[3]);if(!_.length)return!1;var x=Si(r,Me(o,_,4),!0),b=Me(Ee(a,4),x,4);r.prevMatrix=x;var E=Me(h,x,4),T=Ei(r,"matrix3d(".concat(E.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return Bi(e,T),_o(t,"onWarp",mo(t,e,kr({delta:b,matrix:E,dist:x,multiply:Me,transform:T},fo({transform:T},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,i=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,_o(t,"onWarpEnd",vo(t,e,{})),i)}},Jo=Is("area-pieces"),ta=Is("area-piece"),ea=Is("avoid"),ra=Is("view-dragging");function ia(t){var e=t.areaElement;if(e){var r=t.state,i=r.width,n=r.height;Q(e,ea),e.style.cssText+="left: 0px; top: 0px; width: ".concat(i,"px; height: ").concat(n,"px")}}function na(t){return t.createElement("div",{key:"area_pieces",className:Jo},t.createElement("div",{className:ta}),t.createElement("div",{className:ta}),t.createElement("div",{className:ta}),t.createElement("div",{className:ta}))}var sa={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,i=r.target,s=r.dragArea,o=r.groupable,a=r.passDragArea,l=t.getState(),h=l.width,u=l.height,c=l.renderPoses,d=a?Is("area","pass"):Is("area");if(o)return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:d}),na(e)];if(!i||!s)return[];var p=ze([0,0],[h,0],[0,u],[h,u],c[0],c[1],c[2],c[3]),f=p.length?Ws(p,!0):"none";return[e.createElement("div",{key:"area",ref:n(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(h,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:f}}),na(e)]},dragStart:function(t,e){var r=e.datas,i=e.clientX,n=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var s=t.areaElement,o=t.state,a=o.moveableClientRect,l=o.renderPoses,h=o.rootMatrix,u=o.is3d,c=a.left,d=a.top,p=qs(l),f=p.left,g=p.top,m=p.width,v=p.height,y=Ur(Mo(h,[i-c,n-d],u?4:3),2),_=y[0],x=y[1],b=[{left:f,top:g,width:m,height:(x-=g)-10},{left:f,top:g,width:(_-=f)-10,height:v},{left:f,top:g+x+10,width:m,height:v-x-10},{left:f+_+10,top:g,width:m-_-10,height:v}],E=[].slice.call(s.nextElementSibling.children);b.forEach((function(t,e){E[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),Z(s,ea),o.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,i=e.inputEvent;if(this.enableNativeEvent(t),!i)return!1;r.isDragArea||(r.isDragArea=!0,ia(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,i=e.datas;if(!r)return!1;i.isDragArea||ia(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){ia(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&F((function(){e.disableNativeEvent=!1}))}},oa=jr("origin",{props:["origin","svgOrigin"],render:function(t,e){var r,i=t.props,n=i.zoom,s=i.svgOrigin,o=i.groupable,a=t.getState(),l=a.beforeOrigin,h=a.rotation,u=a.svg,c=a.allMatrix,d=a.is3d,p=a.left,f=a.top,g=a.offsetWidth,m=a.offsetHeight;if(!o&&u&&s){var v=Ur(Go(s,g,m),2);r=to(h,n,Pe(Vs(c,[v[0],v[1]],d?4:3),[p,f]))}else r=to(h,n,l);return[e.createElement("div",{className:Is("control","origin"),style:r,key:"beforeOrigin"})]}});function aa(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var la={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,i=r.scrollContainer,n=void 0===i?t.getContainer():i,s=r.scrollOptions,o=new or,a=Bo(n,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",h=e.targets;o.on("scroll",(function(r){var i=r.container,n=r.direction,s=mo(t,e,{scrollContainer:i,direction:n}),o=h?"onScrollGroup":"onScroll";h&&(s.targets=h),_o(t,o,s)})).on("move",(function(e){var r=e.offsetX,i=e.offsetY,n=e.inputEvent;t[l].scrollBy(r,i,n.inputEvent,!1)})).on("scrollDrag",(function(e){(0,e.next)(t[l].getCurrentEvent())})),o.dragStart(e,kr({container:a},s))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var i=t.props,n=i.scrollContainer,s=void 0===n?t.getContainer():n,o=i.scrollThreshold,a=void 0===o?0:o,l=i.scrollThrottleTime,h=void 0===l?0:l,u=i.getScrollPosition,c=void 0===u?aa:u,d=i.scrollOptions;return r.drag(e,kr({container:s,threshold:a,throttleTime:h,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,kr(kr({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,kr(kr({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,kr(kr({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,kr(kr({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,kr(kr({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,kr(kr({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,kr(kr({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;null===(e=r.dragScroll)||void 0===e||e.dragEnd(),r.dragScroll=null}},ha={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},ua=jr("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var i=Yo(r.padding||{}),n=i.left,s=i.top,o=i.right,a=i.bottom,l=t.getState(),h=l.renderPoses,u=[l.pos1,l.pos2,l.pos3,l.pos4],c=[];return n>0&&c.push([0,2]),s>0&&c.push([0,1]),o>0&&c.push([1,3]),a>0&&c.push([2,3]),c.map((function(t,r){var i=Ur(t,2),n=i[0],s=i[1],o=ze([0,0],[100,0],[0,100],[100,100],u[n],u[s],h[n],h[s]);if(o.length)return e.createElement("div",{key:"padding".concat(r),className:Is("padding"),style:{transform:Ws(o,!0)}})}))}}),ca=["nw","ne","se","sw"];function da(t,e){var r=t[0]+t[1],i=r>e?e/r:1;return t[0]*=i,t[1]=e-t[1]*i,t}var pa=[1,2,5,6],fa=[0,3,4,7],ga=[1,-1,-1,1],ma=[1,1,-1,-1];function va(t,e,r,i,n,s,o,a){void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=r),void 0===a&&(a=i);var l=[],h=!1,u=t.filter((function(t){return!t.virtual})),c=u.map((function(t){var u=t.horizontal,c=t.vertical,d=t.pos;if(c&&!h&&(h=!0,l.push("/")),h){var p=Math.max(0,1===c?d[1]-s:a-d[1]);return l.push(Co(p,i,e)),p}p=Math.max(0,1===u?d[0]-n:o-d[0]);return l.push(Co(p,r,e)),p}));return{radiusPoses:u,styles:l,raws:c}}function ya(t){for(var e=[0,0],r=[0,0],i=t.length,n=0;n<i;++n){var s=t[n];s.sub&&(s.horizontal&&(0===e[1]&&(e[0]=n),e[1]=n-e[0]+1,r[0]=n+1),s.vertical&&(0===r[1]&&(r[0]=n),r[1]=n-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function _a(t,e,r,i,n,s,o){var a,l,h,u;void 0===s&&(s=[0,0]),void 0===o&&(o=!1);var c=t.indexOf("/"),d=(c>-1?t.slice(0,c):t).length,p=t.slice(0,d),f=t.slice(d+1),g=p.length,m=f.length,v=m>0,y=Ur(p,4),_=y[0],x=void 0===_?"0px":_,b=y[1],E=void 0===b?x:b,T=y[2],S=void 0===T?x:T,w=y[3],A=void 0===w?E:w,M=Ur(f,4),R=M[0],P=void 0===R?x:R,C=M[1],O=void 0===C?v?P:E:C,I=M[2],D=void 0===I?v?P:S:I,B=M[3],F=void 0===B?v?O:A:B,N=[x,E,S,A].map((function(t){return k(t,e)})),L=[P,O,D,F].map((function(t){return k(t,r)})),U=N.slice(),G=L.slice();a=Ur(da([U[0],U[1]],e),2),U[0]=a[0],U[1]=a[1],l=Ur(da([U[3],U[2]],e),2),U[3]=l[0],U[2]=l[1],h=Ur(da([G[0],G[3]],r),2),G[0]=h[0],G[3]=h[1],u=Ur(da([G[1],G[2]],r),2),G[1]=u[0],G[2]=u[1];var j=o?U:U.slice(0,Math.max(s[0],g)),H=o?G:G.slice(0,Math.max(s[1],m));return Gr(Gr([],Ur(j.map((function(t,e){var s=ca[e];return{virtual:e>=g,horizontal:ga[e],vertical:0,pos:[i+t,n+(-1===ma[e]?r:0)],sub:!0,raw:N[e],direction:s}}))),!1),Ur(H.map((function(t,r){var s=ca[r];return{virtual:r>=m,horizontal:0,vertical:ma[r],pos:[i+(-1===ga[r]?e:0),n+t],sub:!0,raw:L[r],direction:s}}))),!1)}var xa=[[0,-1,"n"],[1,0,"e"]],ba=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ea(t,e,r){var i=t.props.clipRelative,n=t.state,s=n.width,o=n.height,a=e,l=a.type,h=a.poses,u="rect"===l,c="circle"===l;if("polygon"===l)return r.map((function(t){return"".concat(Co(t[0],s,i)," ").concat(Co(t[1],o,i))}));if(u||"inset"===l){var d=r[1][1],p=r[3][0],f=r[7][0],g=r[5][1];if(u)return[d,p,g,f].map((function(t){return"".concat(t,"px")}));var m=[d,s-p,o-g,f].map((function(t,e){return Co(t,e%2?s:o,i)}));if(r.length>8){var v=Ur(Pe(r[4],r[0]),2),y=v[0],_=v[1];m.push.apply(m,Gr(["round"],Ur(va(h.slice(8).map((function(t,e){return kr(kr({},t),{pos:r[e]})})),i,y,_,f,d,p,g).styles),!1))}return m}if(c||"ellipse"===l){var x=r[0],b=Co(Wo(r[1][1]-x[1]),c?Math.sqrt((s*s+o*o)/2):o,i);return(m=c?[b]:[Co(Wo(r[2][0]-x[0]),s,i),b]).push("at",Co(x[0],s,i),Co(x[1],o,i)),m}}function Ta(t,e,r,i){var n=[i,(i+e)/2,e],s=[t,(t+r)/2,r];return ba.map((function(t){var e=Ur(t,3),r=e[0],i=e[1],o=e[2],a=n[r+1],l=s[i+1];return{vertical:Wo(i),horizontal:Wo(r),direction:o,pos:[a,l]}}))}function Sa(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach((function(t){var i=t.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),r[0]=Math.min(r[0],i[1]),r[1]=Math.max(r[1],i[1])})),[Wo(e[1]-e[0]),Wo(r[1]-r[0])]}function wa(t,e,r,i,n){var s,o,a,l,h,u,c,d,p;if(t){var f=n;if(!f){var g=Ki(t),m=g("clipPath");f="none"!==m?m:g("clip")}if(f&&"none"!==f&&"auto"!==f||(f=i)){var v=P(f),y=v.prefix,_=void 0===y?f:y,x=v.value,b=void 0===x?"":x,E="circle"===_,T=" ";if("polygon"===_){T=",";var S=(B=R(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var i=Ur(t.split(" "),2),n=i[0],s=i[1];return{vertical:1,horizontal:1,pos:[k(n,e),k(s,r)]}})),w=cr(S.map((function(t){return t.pos})));return{type:_,clipText:f,poses:S,splitter:T,left:w.minX,right:w.maxX,top:w.minY,bottom:w.maxY}}if(E||"ellipse"===_){var A="",O="",I=0,D=0,B=M(b);if(E){var F;F=void 0===(o=(s=Ur(B,4))[0])?"50%":o,A=void 0===(a=s[2])?"50%":a,O=void 0===(l=s[3])?"50%":l,I=k(F,Math.sqrt((e*e+r*r)/2)),D=I}else{var N,L;N=void 0===(u=(h=Ur(B,5))[0])?"50%":u,L=void 0===(c=h[1])?"50%":c,A=void 0===(d=h[3])?"50%":d,O=void 0===(p=h[4])?"50%":p,I=k(N,e),D=k(L,r)}var U=[k(A,e),k(O,r)];S=Gr([{vertical:1,horizontal:1,pos:U,direction:"nesw"}],Ur(xa.slice(0,E?1:2).map((function(t){return{vertical:Wo(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[U[0]+t[0]*I,U[1]+t[1]*D]}}))),!1);return{type:_,clipText:f,radiusX:I,radiusY:D,left:U[0]-I,top:U[1]-D,right:U[0]+I,bottom:U[1]+D,poses:S,splitter:T}}if("inset"===_){var G=(B=M(b||"0 0 0 0")).indexOf("round"),j=(G>-1?B.slice(0,G):B).length,H=B.slice(j+1),z=Ur(B.slice(0,j),4),W=z[0],X=z[1],Y=void 0===X?W:X,V=z[2],$=void 0===V?W:V,q=z[3],K=void 0===q?Y:q,Z=Ur([W,$].map((function(t){return k(t,r)})),2),Q=Z[0],J=Z[1],tt=Ur([K,Y].map((function(t){return k(t,e)})),2),et=tt[0],rt=tt[1],it=e-rt,nt=r-J,st=_a(H,it-et,nt-Q,et,Q);return{type:"inset",clipText:f,poses:S=Gr(Gr([],Ur(Ta(Q,it,nt,et)),!1),Ur(st),!1),top:Q,left:et,right:it,bottom:nt,radius:H,splitter:T}}if("rect"===_){T=",";var ot=Ur((B=R(b||"0px, ".concat(e,"px, ").concat(r,"px, 0px"))).map((function(t){return C(t).value})),4),at=ot[0];return{type:"rect",clipText:f,poses:S=Ta(at,rt=ot[1],J=ot[2],et=ot[3]),top:at,right:rt,bottom:J,left:et,values:B,splitter:T}}}}}function Aa(t,e){var r=Ur(_i(t,e),2),i=r[0],n=r[1],s=e.datas,o=s.clipPath,a=s.clipIndex,l=o,h=l.type,u=l.poses,c=l.splitter,d=u.map((function(t){return t.pos}));if("polygon"===h)d.splice(a,0,[i,n]);else{if("inset"!==h)return;var p=pa.indexOf(a),f=fa.indexOf(a),g=u.length;if(function(t,e,r,i,n,s,o,a,l,h,u){void 0===h&&(h=0),void 0===u&&(u=0);var c=ya(t.slice(r)),d=c.horizontalRange,p=c.verticalRange;if(i>-1)for(var f=1===ga[i]?s-h:a-s,g=d[1];g<=i;++g){var m=1===ma[g]?u:l,v=0;if(i===g?v=s:0===g?v=h+f:-1===ga[g]&&(v=a-(e[r][0]-h)),t.splice(r+g,0,{horizontal:ga[g],vertical:0,pos:[v,m]}),e.splice(r+g,0,[v,m]),0===g)break}else if(n>-1){var y=1===ma[n]?o-u:l-o;if(0===d[1]&&0===p[1]){var _=[h+y,u];t.push({horizontal:ga[0],vertical:0,pos:_}),e.push(_)}var x=p[0];for(g=p[1];g<=n&&(v=1===ga[g]?h:a,m=0,n===g?m=o:0===g?m=u+y:1===ma[g]?m=e[r+x][1]:-1===ma[g]&&(m=l-(e[r+x][1]-u)),t.push({horizontal:0,vertical:ma[g],pos:[v,m]}),e.push([v,m]),0!==g);++g);}}(u,d,8,p,f,i,n,d[4][0],d[4][1],d[0][0],d[0][1]),g===u.length)return}var m=Ea(t,o,d),v="".concat(h,"(").concat(m.join(c),")");_o(t,"onClip",mo(t,e,kr({clipEventType:"added",clipType:h,poses:d,clipStyles:m,clipStyle:v,distX:0,distY:0},fo({clipPath:v},e))))}function Ma(t,e){var r=e.datas,i=r.clipPath,n=r.clipIndex,s=i,o=s.type,a=s.poses,l=s.splitter,h=a.map((function(t){return t.pos})),u=h.length;if("polygon"===o)a.splice(n,1),h.splice(n,1);else{if("inset"!==o)return;if(n<8)return;if(function(t,e,r,i,n){void 0===n&&(n=e.length);var s=ya(t.slice(i)),o=s.horizontalRange,a=s.verticalRange,l=r-i,h=0;if(0===l)h=n;else if(l>0&&l<o[1])h=o[1]-l;else{if(!(l>=a[0]))return;h=a[0]+a[1]-l}t.splice(r,h),e.splice(r,h)}(a,h,n,8,u),u===a.length)return}var c=Ea(t,i,h),d="".concat(o,"(").concat(c.join(l),")");_o(t,"onClip",mo(t,e,kr({clipEventType:"removed",clipType:o,poses:h,clipStyles:c,clipStyle:d,distX:0,distY:0},fo({clipPath:d},e))))}var Ra={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,i=r.customClipPath,n=r.defaultClipPath,s=r.clipArea,o=r.zoom,a=r.groupable,l=t.getState(),h=l.target,u=l.width,c=l.height,d=l.allMatrix,p=l.is3d,f=l.left,g=l.top,m=l.pos1,v=l.pos2,y=l.pos3,_=l.pos4,x=l.clipPathState,b=l.snapBoundInfos,E=l.rotation;if(!h||a)return[];var T=wa(h,u,c,n||"inset",x||i);if(!T)return[];var S=p?4:3,w=T.type,A=T.poses.map((function(t){var e=Vs(d,t.pos,S);return[e[0]-f,e[1]-g]})),M=[],R=[],P="rect"===w,C="inset"===w,O="polygon"===w;if(P||C||O){var I=C?A.slice(0,8):A;R=I.map((function(t,r){var i=0===r?I[I.length-1]:I[r-1],n=z(i,t),s=Qs(i,t);return e.createElement("div",{key:"clipLine".concat(r),className:Is("line","clip-line","snap-control"),"data-clip-index":r,style:{width:"".concat(s,"px"),transform:"translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(n,"rad) scaleY(").concat(o,")")}})}))}if(M=A.map((function(t,r){return e.createElement("div",{key:"clipControl".concat(r),className:Is("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})})),C&&M.push.apply(M,Gr([],Ur(A.slice(8).map((function(t,r){return e.createElement("div",{key:"clipRadiusControl".concat(r),className:Is("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(E,"rad) scale(").concat(o,")")}})}))),!1)),"circle"===w||"ellipse"===w){var D=T.left,B=T.top,F=T.radiusX,N=T.radiusY,L=Ur(Pe(Vs(d,[D,B],S),Vs(d,[0,0],S)),2),k=L[0],U=L[1],G="none";if(!s){for(var j=Math.max(10,F/5,N/5),H=[],W=0;W<=j;++W){var X=2*Math.PI/j*W;H.push([F+(F-o)*Math.cos(X),N+(N-o)*Math.sin(X)])}H.push([F,-2]),H.push([-2,-2]),H.push([-2,2*N+2]),H.push([2*F+2,2*N+2]),H.push([2*F+2,-2]),H.push([F,-2]),G="polygon(".concat(H.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}M.push(e.createElement("div",{key:"clipEllipse",className:Is("clip-ellipse","snap-control"),style:{width:"".concat(2*F,"px"),height:"".concat(2*N,"px"),clipPath:G,transform:"translate(".concat(-f+k,"px, ").concat(-g+U,"px) ").concat(Ws(d))}}))}if(s){var Y=qs(Gr([m,v,y,_],Ur(A),!1)),V=Y.width,$=Y.height,q=Y.left,K=Y.top;if(O||P||C){H=C?A.slice(0,8):A;M.push(e.createElement("div",{key:"clipArea",className:Is("clip-area","snap-control"),style:{width:"".concat(V,"px"),height:"".concat($,"px"),transform:"translate(".concat(q,"px, ").concat(K,"px)"),clipPath:"polygon(".concat(H.map((function(t){return"".concat(t[0]-q,"px ").concat(t[1]-K,"px")})).join(", "),")")}}))}}return b&&["vertical","horizontal"].forEach((function(t){var r=b[t],i="horizontal"===t;r.isSnap&&R.push.apply(R,Gr([],Ur(r.snap.posInfos.map((function(r,n){var s=r.pos,a=Pe(Vs(d,i?[0,s]:[s,0],S),[f,g]),l=Pe(Vs(d,i?[u,s]:[s,c],S),[f,g]);return nn(e,"",a,l,o,"clip".concat(t,"snap").concat(n),"guideline")}))),!1)),r.isBound&&R.push.apply(R,Gr([],Ur(r.bounds.map((function(r,n){var s=r.pos,a=Pe(Vs(d,i?[0,s]:[s,0],S),[f,g]),l=Pe(Vs(d,i?[u,s]:[s,c],S),[f,g]);return nn(e,"",a,l,o,"clip".concat(t,"bounds").concat(n),"guideline","bounds","bold")}))),!1))})),Gr(Gr([],Ur(M),!1),Ur(R),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return!(void 0===r||r)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,kr(kr({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,i=t.props,n=i.defaultClipPath,s=i.customClipPath,o=r.target,a=r.width,l=r.height,h=e.inputEvent?e.inputEvent.target:null,u=h&&h.getAttribute("class")||"",c=e.datas,d=wa(o,a,l,n||"inset",s);if(!d)return!1;var p=d.clipText;return!1===_o(t,"onClipStart",mo(t,e,{clipType:d.type,clipStyle:p,poses:d.poses.map((function(t){return t.pos}))}))?(c.isClipStart=!1,!1):(c.isControl=u&&u.indexOf("clip-control")>-1,c.isLine=u.indexOf("clip-line")>-1,c.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,c.clipIndex=h?parseInt(h.getAttribute("data-clip-index"),10):-1,c.clipPath=d,c.isClipStart=!0,r.clipPathState=p,xi(t,e),!0)},dragControl:function(t,e){var r,i,n,s=e.datas,o=e.originalDatas,a=e.isDragTarget;if(!s.isClipStart)return!1;var l=s,h=l.isControl,u=l.isLine,c=l.isArea,d=l.clipIndex,p=l.clipPath;if(!p)return!1;var f=eo(t.props,"clippable"),g=f.keepRatio,m=0,v=0,y=o.draggable,_=Ai(e);a&&y?(r=Ur(y.prevBeforeDist,2),m=r[0],v=r[1]):(i=Ur(_,2),m=i[0],v=i[1]);var x=[m,v],b=t.state,E=b.width,T=b.height,S=!c&&!h&&!u,w=p.type,A=p.poses,M=p.splitter,R=A.map((function(t){return t.pos}));S&&(m=-m,v=-v);var P=!h||"nesw"===A[d].direction,C="inset"===w||"rect"===w,O=A.map((function(){return[0,0]}));if(h&&!P){var I=A[d],D=I.horizontal,B=I.vertical,F=[m*Wo(D),v*Wo(B)];O=function(t,e,r,i,n){var s=t[e],o=s.direction,a=s.sub,l=t.map((function(){return[0,0]})),h=o?o.split(""):[];if(i&&e<8){var u=h.filter((function(t){return"w"===t||"e"===t})),c=h.filter((function(t){return"n"===t||"s"===t})),d=u[0],p=c[0];l[e]=r;var f=Ur(Sa(t),2),g=f[0],m=f[1],v=g&&m?g/m:0;if(v&&n){var y=t[(e+4)%8].pos,_=[0,0];o.indexOf("w")>-1?_[0]=-1:o.indexOf("e")>-1&&(_[0]=1),o.indexOf("n")>-1?_[1]=-1:o.indexOf("s")>-1&&(_[1]=1);var x=Lo([g,m],r,v,_,!0),b=g+x[0],E=m+x[1],T=y[1],S=y[1],w=y[0],A=y[0];-1===_[0]?w=A-b:1===_[0]?A=w+b:(w-=b/2,A+=b/2),-1===_[1]?T=S-E:S=1===_[1]?T+E:(T=S-E/2)+E;var M=Ta(T,A,S,w);t.forEach((function(t,e){l[e][0]=M[e].pos[0]-t.pos[0],l[e][1]=M[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var i=t.direction;i&&(i.indexOf(d)>-1&&(l[e][0]=r[0]),i.indexOf(p)>-1&&(l[e][1]=r[1]))})),d&&(l[1][0]=r[0]/2,l[5][0]=r[0]/2),p&&(l[3][1]=r[1]/2,l[7][1]=r[1]/2)}else o&&!a?h.forEach((function(e){var i="n"===e||"s"===e;t.forEach((function(t,n){var s=t.direction,o=t.horizontal,a=t.vertical;s&&-1!==s.indexOf(e)&&(l[n]=[i||!o?0:r[0],i&&a?r[1]:0])}))})):l[e]=r;return l}(A,d,F,C,g)}else P&&(O=R.map((function(){return[m,v]})));var N=R.map((function(t,e){return Re(t,O[e])})),L=Gr([],Ur(N),!1);b.snapBoundInfos=null;var U="circle"===p.type,G="ellipse"===p.type;if(U||G){var j=Wo((it=qs(N)).bottom-it.top),H=Wo(G?it.right-it.left:j),z=N[0][1]+j,W=N[0][0]-H,X=N[0][0]+H;U&&(L.push([X,it.bottom]),O.push([1,0])),L.push([it.left,z]),O.push([0,1]),L.push([W,it.bottom]),O.push([1,0])}var Y=ys((f.clipHorizontalGuidelines||[]).map((function(t){return k("".concat(t),T)})),(f.clipVerticalGuidelines||[]).map((function(t){return k("".concat(t),E)})),E,T),V=[],$=[];if(U||G)V=[L[4][0],L[2][0]],$=[L[1][1],L[3][1]];else if(C){var q=[L[0],L[2],L[4],L[6]],K=[O[0],O[2],O[4],O[6]];V=q.filter((function(t,e){return K[e][0]})).map((function(t){return t[0]})),$=q.filter((function(t,e){return K[e][1]})).map((function(t){return t[1]}))}else V=L.filter((function(t,e){return O[e][0]})).map((function(t){return t[0]})),$=L.filter((function(t,e){return O[e][1]})).map((function(t){return t[1]}));var Z=[0,0],Q=qn(Y,f.clipTargetBounds&&{left:0,top:0,right:E,bottom:T},V,$,5,5),J=Q.horizontal,tt=Q.vertical,et=J.offset,rt=tt.offset;if(J.isBound&&(Z[1]+=et),tt.isBound&&(Z[0]+=rt),(G||U)&&0===O[0][0]&&0===O[0][1]){var it,nt=(it=qs(N)).bottom-it.top,st=G?it.right-it.left:nt;st-=tt.isBound?Wo(rt):0===tt.snapIndex?-rt:rt,nt-=J.isBound?Wo(et):0===J.snapIndex?-et:et,U&&(st=nt=Dn(tt,J)>0?nt:st);var ot=L[0];L[1][1]=ot[1]-nt,L[2][0]=ot[0]+st,L[3][1]=ot[1]+nt,L[4][0]=ot[0]-st}else if(C&&g&&h){var at=Ur(Sa(A),2),lt=at[0],ht=at[1],ut=lt&&ht?lt/ht:0,ct=A[d].direction||"",dt=L[1][1];z=L[5][1],W=L[7][0],X=L[3][0];Wo(et)<=Wo(rt)?et=zo(et)*Wo(rt)/ut:rt=zo(rt)*Wo(et)*ut,ct.indexOf("w")>-1?W-=rt:ct.indexOf("e")>-1?X-=rt:(W+=rt/2,X-=rt/2),ct.indexOf("n")>-1?dt-=et:ct.indexOf("s")>-1?z-=et:(dt+=et/2,z-=et/2);var pt=Ta(dt,X,z,W);L.forEach((function(t,e){var r;r=Ur(pt[e].pos,2),t[0]=r[0],t[1]=r[1]}))}else L.forEach((function(t,e){var r=O[e];r[0]&&(t[0]-=rt),r[1]&&(t[1]-=et)}));var ft=Ea(t,p,N),gt="".concat(w,"(").concat(ft.join(M),")");if(b.clipPathState=gt,U||G)V=[L[4][0],L[2][0]],$=[L[1][1],L[3][1]];else if(C){V=(q=[L[0],L[2],L[4],L[6]]).map((function(t){return t[0]})),$=q.map((function(t){return t[1]}))}else V=L.map((function(t){return t[0]})),$=L.map((function(t){return t[1]}));if(b.snapBoundInfos=qn(Y,f.clipTargetBounds&&{left:0,top:0,right:E,bottom:T},V,$,1,1),y){var mt=b.is3d,vt=b.allMatrix,yt=mt?4:3,_t=Z;a&&(_t=[x[0]+Z[0]-_[0],x[1]+Z[1]-_[1]]),y.deltaOffset=Me(vt,[_t[0],_t[1],0,0],yt)}return _o(t,"onClip",mo(t,e,kr({clipEventType:"changed",clipType:w,poses:N,clipStyle:gt,clipStyles:ft,distX:m,distY:v},fo(((n={})["rect"===w?"clip":"clipPath"]=gt,n),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,i=e.datas,n=e.isDouble,s=i.isLine,o=i.isClipStart,a=i.isControl;return!!o&&(_o(t,"onClipEnd",vo(t,e,{})),n&&(a?Ma(t,e):s&&Aa(t,e)),n||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Pa={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:K(e.inputEvent.target,Is("origin"))},dragControlStart:function(t,e){var r=e.datas;xi(t,e);var i=mo(t,e,{dragStart:Qn.dragStart(t,(new vi).dragStart([0,0],e))}),n=_o(t,"onDragOriginStart",i);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===n?(r.isDragOrigin=!1,!1):i},dragControl:function(t,e){var r=e.datas,i=e.isPinch,n=e.isRequest;if(!r.isDragOrigin)return!1;var s=Ur(Ai(e),2),o=s[0],a=s[1],l=t.state,h=l.width,u=l.height,c=l.offsetMatrix,d=l.targetMatrix,p=l.is3d,f=t.props.originRelative,g=void 0===f||f,m=p?4:3,v=[o,a];if(n){var y=e.distOrigin;(y[0]||y[1])&&(v=y)}var _=Re(r.startOrigin,v),x=Re(r.startTargetOrigin,v),b=Pe(v,r.prevOrigin),E=Ci(c,d,_,m),T=t.getRect(),S=qs($s(E,h,u,m)),w=[T.left-S.left,T.top-S.top];r.prevOrigin=v;var A=[Co(x[0],h,g),Co(x[1],u,g)].join(" "),M=Qn.drag(t,mi(e,t.state,w,!!i,!1)),R=mo(t,e,kr(kr({width:h,height:u,origin:_,dist:v,delta:b,transformOrigin:A,drag:M},fo({transformOrigin:A,transform:M.transform},e)),{afterTransform:M.transform}));return _o(t,"onDragOrigin",R),R},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(_o(t,"onDragOriginEnd",vo(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),i=0,n=0,s=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-s[0],o[1]=t.origin[1]-s[1]):("x"in t?i=t.x-r.left:"deltaX"in t&&(i+=t.deltaX),"y"in t?n=t.y-r.top:"deltaY"in t&&(n+=t.deltaY)),{datas:e,distX:i,distY:n,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Ca(t,e,r,i,n){void 0===i&&(i=[0,0]);return _a(t&&"0px"!==t?M(t):[],e,r,0,0,i,n)}function Oa(t,e,r,i,n){var s=t.state,o=s.width,a=s.height,l=va(n,t.props.roundRelative,o,a),h=l.raws,u=l.styles,c=function(t,e){void 0===e&&(e=t.map((function(t){return t.raw})));var r=t.map((function(t,r){return t.horizontal?e[r]:null})).filter((function(t){return null!=t})),i=t.map((function(t,r){return t.vertical?e[r]:null})).filter((function(t){return null!=t}));return{horizontals:r,verticals:i}}(l.radiusPoses,h),d=c.horizontals,p=c.verticals,f=u.join(" ");s.borderRadiusState=f;var g=mo(t,e,kr({horizontals:d,verticals:p,borderRadius:f,width:o,height:a,delta:i,dist:r},fo({borderRadius:f},e)));return _o(t,"onRound",g),g}function Ia(t){var e,r,i=t.getState().style,n=i.borderRadius||"";if(!n&&t.props.groupable){var s=t.moveables[0],o=t.getTargets()[0];o&&((null==s?void 0:s.props.target)===o?(n=null!==(r=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==r?r:"",i.borderRadius=n):(n=xo(o).borderRadius,i.borderRadius=n))}return n}var Da={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?Is("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),i=r.target,n=r.width,s=r.height,o=r.allMatrix,a=r.is3d,l=r.left,h=r.top,u=r.borderRadiusState,c=t.props,d=c.minRoundControls,p=void 0===d?[0,0]:d,f=c.maxRoundControls,g=void 0===f?[4,4]:f,m=c.zoom,v=c.roundPadding,y=void 0===v?0:v,_=c.isDisplayShadowRoundControls,x=c.groupable;if(!i)return null;var b=u||Ia(t),E=a?4:3,T=Ca(b,n,s,p,!0);if(!T)return null;var S=0,w=0,A=x?[0,0]:[l,h];return T.map((function(t,r){var i=t.horizontal,n=t.vertical,s=t.direction||"",a=Gr([],Ur(t.pos),!1);w+=Math.abs(i),S+=Math.abs(n),i&&s.indexOf("n")>-1&&(a[1]-=y),n&&s.indexOf("w")>-1&&(a[0]-=y),i&&s.indexOf("s")>-1&&(a[1]+=y),n&&s.indexOf("e")>-1&&(a[0]+=y);var l=Pe(Vs(o,a,E),A),h=_&&"horizontal"!==_,u=t.vertical?S<=g[1]&&(h||!t.virtual):w<=g[0]&&(_||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(r),className:Is("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":r,style:{display:u?"block":"none",transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) scale(").concat(m,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,i=e.datas,n=r.target,s=n.getAttribute("class")||"",o=s.indexOf("border-radius")>-1,a=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=o?parseInt(n.getAttribute("data-radius-index"),10):-1,h=-1;if(a){var u=n.getAttribute("data-line-key")||"";u&&(h=parseInt(u.replace(/render-line-/g,""),10),isNaN(h)&&(h=-1))}if(!o&&!a)return!1;var c=mo(t,e,{});if(!1===_o(t,"onRoundStart",c))return!1;i.lineIndex=h,i.controlIndex=l,i.isControl=o,i.isLine=a,xi(t,e);var d=t.props,p=d.roundRelative,f=d.minRoundControls,g=void 0===f?[0,0]:f,m=t.state,v=m.width,y=m.height;i.isRound=!0,i.prevDist=[0,0];var _=Ca(Ia(t)||"",v,y,g,!0)||[];return i.controlPoses=_,m.borderRadiusState=va(_,p,v,y).styles.join(" "),c},dragControl:function(t,e){var r=e.datas,i=r.controlPoses;if(!r.isRound||!r.isControl||!i.length)return!1;var n=r.controlIndex,s=Ur(Ai(e),2),o=s[0],a=s[1],l=[o,a],h=Pe(l,r.prevDist),u=t.props.maxRoundControls,c=void 0===u?[4,4]:u,d=t.state,p=d.width,f=d.height,g=i[n],m=g.vertical,v=g.horizontal,y=i.map((function(t){var e=t.horizontal,r=t.vertical,i=[e*v*l[0],r*m*l[1]];if(e){if(1===c[0])return i;if(c[0]<4&&e!==v)return i}else{if(0===c[1])return i[1]=r*v*l[0]/p*f,i;if(m){if(1===c[1])return i;if(c[1]<4&&r!==m)return i}}return[0,0]}));y[n]=l;var _=i.map((function(t,e){return kr(kr({},t),{pos:Re(t.pos,y[e])})}));return n<4?_.slice(0,n+1).forEach((function(t){t.virtual=!1})):_.slice(4,n+1).forEach((function(t){t.virtual=!1})),r.prevDist=[o,a],Oa(t,e,l,h,_)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var i=e.datas,n=e.isDouble;if(!i.isRound)return!1;var s=i.isControl,o=i.controlIndex,a=i.isLine,l=i.lineIndex,h=i.controlPoses,u=h.filter((function(t){return t.virtual})).length,c=t.props.roundClickable,d=void 0===c||c;if(n&&d){if(!s||!0!==d&&"control"!==d){if(a&&(!0===d||"line"===d)){var p=Ur(_i(t,e),2);!function(t,e,r,i){var n=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,s=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,o=-1;if(0===e&&(0===n?o=0:1===n&&(o=1)),2===e&&(n<=2?o=2:n<=3&&(o=3)),3===e&&(0===s?o=4:s<4&&(o=7)),1===e&&(s<=1?o=5:s<=2&&(o=6)),-1!==o&&t[o].virtual){var a=t[o];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,o),o<4?a.pos[0]=r:a.pos[1]=i}}(h,l,p[0],p[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(h,o);u!==h.filter((function(t){return t.virtual})).length&&Oa(t,e,[0,0],[0,0],h)}var f=vo(t,e,{});return _o(t,"onRoundEnd",f),r.borderRadiusState="",f},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,s=Zi(t,"roundable",e),o=kr({targets:t.props.targets,events:s.map((function(t,e){return kr(kr({},t),{target:n[e],moveable:i[e],currentTarget:i[e]})}))},r);return _o(t,"onRoundGroupStart",o),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var i=t.moveables,n=t.props.targets,s=Zi(t,"roundable",e),o=kr({targets:t.props.targets,events:s.map((function(t,e){return kr(kr(kr({},t),{target:n[e],moveable:i[e],currentTarget:i[e]}),fo({borderRadius:r.borderRadius},t))}))},r);return _o(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var r=t.moveables,i=t.props.targets,n=Zi(t,"roundable",e);yo(t,"onRound",(function(e){var s=kr({targets:t.props.targets,events:n.map((function(t,n){return kr(kr(kr({},t),{target:i[n],moveable:r[n],currentTarget:r[n]}),fo({borderRadius:e.borderRadius},t))}))},e);_o(t,"onRoundGroup",s)}));var s=this.dragControlEnd(t,e);if(!s)return!1;var o=kr({targets:t.props.targets,events:n.map((function(t,e){var n;return kr(kr({},t),{target:i[e],moveable:r[e],currentTarget:r[e],lastEvent:null===(n=t.datas)||void 0===n?void 0:n.lastEvent})}))},s);return _o(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};var Ba={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r=t.state,i=r.is3d,n=r.targetMatrix,s=r.inlineTransform,o=i?"matrix3d(".concat(n.join(","),")"):"matrix(".concat(Ce(n,!0),")"),a=s&&"none"!==s?s:o;e.datas.startTransforms=function(t,e){var r=Ge(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(r.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(a,i)?[]:M(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return mo(t,e,{setTransform:function(t){e.datas.startTransforms=x(t)?t:M(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return mo(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),_o(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),_o(t,"onBeforeRender",mo(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),_o(t,"onBeforeRenderEnd",mo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var i=Zi(t,"beforeRenderable",e),n=t.moveables,s=i.map((function(t,e){var i=n[e];return r.setTransform(i,t),r.resetStyle(t),r.fillDragStartParams(i,t)}));_o(t,"onBeforeRenderGroupStart",mo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:s}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var i=Zi(t,"beforeRenderable",e),n=t.moveables,s=i.map((function(t,e){var i=n[e];return r.resetStyle(t),r.fillDragParams(i,t)}));_o(t,"onBeforeRenderGroup",mo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:s}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),_o(t,"onBeforeRenderGroupEnd",mo(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Fa={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){_o(t,"onRenderStart",mo(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){_o(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){_o(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){_o(t,"onRenderGroupStart",mo(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,i=Zi(t,"beforeRenderable",e),n=t.moveables,s=i.map((function(t,e){var i=n[e];return r.fillDragParams(i,t)}));_o(t,"onRenderGroup",mo(t,e,kr(kr({isPinch:!!e.isPinch,targets:t.props.targets,transform:Li(e),transformObject:{}},fo(ki(e))),{events:s})))},dragGroupEnd:function(t,e){var r=this,i=Zi(t,"beforeRenderable",e),n=t.moveables,s=i.map((function(t,e){var i=n[e];return r.fillDragEndParams(i,t)}));_o(t,"onRenderGroupEnd",mo(t,e,kr({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:s,transformObject:{},transform:Li(e)},fo(ki(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return Ve(Ni(e)||[]).forEach((function(t){r[t.name]=t.functionValue})),mo(t,e,kr({isPinch:!!e.isPinch,transformObject:r,transform:Li(e)},fo(ki(e))))},fillDragEndParams:function(t,e){var r={};return Ve(Ni(e)||[]).forEach((function(t){r[t.name]=t.functionValue})),mo(t,e,kr({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:Li(e)},fo(ki(e))))}};function Na(t,e,r,i,n,s,o){s.clientDistX=s.distX,s.clientDistY=s.distY;var a="Start"===n,l="End"===n,h="After"===n,u=t.state.target,c=s.isRequest,d=i.indexOf("Control")>-1;if(!u||a&&d&&!c&&t.areaElement===s.inputEvent.target)return!1;var p=Gr([],Ur(e),!1);if(c){var f=s.requestAble;p.some((function(t){return t.name===f}))||p.push.apply(p,Gr([],Ur(t.props.ables.filter((function(t){return t.name===f}))),!1))}if(!p.length||p.every((function(t){return t.dragRelation})))return!1;var g,m=s.inputEvent;l&&m&&(g=document.elementFromPoint(s.clientX,s.clientY)||m.target);var v=!1,y=function(){var t;v=!0,null===(t=s.stop)||void 0===t||t.call(s)},_=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());_&&t.updateRect(n,!0,!1);var x=s.datas,b=d?"controlGesto":"targetGesto",E=t[b],T=function(e,r,i){if(!(r in e)||E!==t[b])return!1;var n=e.name,o=x[n]||(x[n]={});if(a&&(o.isEventStart=!i||!e[i]||e[i](t,s)),!o.isEventStart)return!1;var l=e[r](t,kr(kr({},s),{stop:y,datas:o,originalDatas:x,inputTarget:g}));return t._emitter.off(),a&&!1===l&&(o.isEventStart=!1),l};_&&p.forEach((function(e){e.unset&&e.unset(t)})),T(Ba,"drag".concat(i).concat(n));var S=0,w=0;r.forEach((function(e){if(v)return!1;var r="".concat(e).concat(i).concat(n),o="".concat(e).concat(i,"Condition");""!==n||c||Ro(t.state,s);var l=p.filter((function(t){return t[r]}));l=l.filter((function(t,e){return t.name&&l.indexOf(t)===e}));var h=l.filter((function(t){return T(t,r,o)})).length;v&&++S,h&&++w,!v&&a&&l.length&&!h&&(S+=l.filter((function(t){var e=t.name;return!!x[e].isEventStart&&"strong"!==t.dragRelation})).length?1:0)})),h&&!w||T(Fa,"drag".concat(i).concat(n));var A=E!==t[b]||S===r.length;if((l||v||A)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}})),p.forEach((function(e){e.unset&&e.unset(t)}))),a&&!A&&!c&&w&&t.props.preventDefault&&(null==s||s.preventDefault()),t.isUnmounted||A)return!1;(!a&&w&&!o||l)&&(t.props.flushSync||Ds)((function(){t.updateRect(l?n:"",!0,!1),t.forceUpdate()}));return a||l||h||!w||o||Na(t,e,r,i,n+"After",s),!0}function La(t,e){return function(r,i){var n;void 0===i&&(i=r.inputEvent.target);var s=i,o=t.areaElement,a=t._dragTarget;return!(!a||!e&&(null===(n=t.controlGesto)||void 0===n?void 0:n.isFlag()))&&(s===a||a.contains(s)||s===o||!t.isMoveableElement(s)&&!t.controlBox.contains(s)||K(s,"moveable-area")||K(s,"moveable-padding")||K(s,"moveable-edgeDraggable"))}}function ka(t,e,r){var i=t.controlBox,n=[],s=t.props,o=s.dragArea,a=t.state.target,l=s.dragTarget;n.push(i),o&&!l||n.push(e),!o&&l&&a&&e!==a&&s.dragTargetSelf&&n.push(a);var h=La(t);return Ga(t,n,"targetAbles",r,{dragStart:h,pinchStart:h})}function Ua(t,e){var r=t.controlBox,i=[];i.push(r);var n=La(t,!0),s=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===r||!n(t,e)};return Ga(t,i,"controlAbles",e,{dragStart:s,pinchStart:s})}function Ga(t,e,r,i,n){void 0===n&&(n={});var s="targetAbles"===r,o=t.props,a=o.pinchOutside,l=o.pinchThreshold,h=o.preventClickEventOnDrag,u=o.preventClickDefault,c=o.checkInput,d=o.dragFocusedInput,p=o.preventDefault,f=void 0===p||p,g=o.preventRightClick,m=void 0===g||g,v=o.preventWheelClick,y={preventDefault:f,preventRightClick:m,preventWheelClick:void 0===v||v,container:Bo(o.dragContainer,!0)||nt(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:!!s&&h,preventClickEventOnDragStart:!!s&&u,preventClickEventByCondition:s?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!s&&c,dragFocusedInput:d},_=new Pr(e,y),x="Control"===i;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(s){_.on("".concat(e).concat(s),(function(o){var a,l=o.eventType,h="drag"===e&&o.isPinch;if(!n[l]||n[l](o)){if(!h){var u="drag"===e?[e]:["drag",e],c=Gr([],Ur(t[r]),!1);Na(t,c,u,i,s,o)?(t.props.stopPropagation||"Start"===s&&x)&&(null===(a=null==o?void 0:o.inputEvent)||void 0===a||a.stopPropagation()):o.stop()}}else o.stop()}))}))})),_}var ja=function(){function t(t,e,r){var i=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(t){var e=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach((function(i){i[e](r,{inputEvent:t})}))},t.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Ha(t,e,r,i){var n;void 0===r&&(r=e);var s=Xi(t,e),o=s.matrixes,a=s.is3d,l=s.targetMatrix,h=s.transformOrigin,u=s.targetOrigin,c=s.offsetContainer,d=s.hasFixed,p=s.zoom,f=function(t,e){if($i){var r=B($i,(function(r){return r[0][0]==t&&r[0][1]==e}));if(r)return r[1]}var i=Xi(t,e,!0);return $i&&$i.push([[t,e],i]),i}(c,r),g=f.matrixes,m=f.is3d,v=f.offsetContainer,y=f.zoom,_=i||m||a,x=_?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,E=l,T=Ge(x),S=Ge(x),w=Ge(x),A=Ge(x),M=o.length,R=g.map((function(t){return kr(kr({},t),{matrix:t.matrix?Gr([],Ur(t.matrix),!1):void 0})})).reverse();o.reverse(),!a&&_&&(E=we(E,3,4),Hs(o)),!m&&_&&Hs(R),R.forEach((function(t){S=Me(S,t.matrix,x)}));var P=r||it(t),C=(null===(n=R[0])||void 0===n?void 0:n.target)||Us(P,P,!0).offsetParent,O=R.slice(1).reduce((function(t,e){return Me(t,e.matrix,x)}),Ge(x));o.forEach((function(t,e){if(M-2===e&&(w=T.slice()),M-1===e&&(A=T.slice()),!t.matrix){var r=function(t,e,r,i,n){var s,o=t.target,a=t.origin,l=e.matrix,h=ro(o),u=h.offsetWidth,c=h.offsetHeight,d=r.getBoundingClientRect(),p=[0,0];r===it(r)&&(p=js(o,!0));for(var f=o.getBoundingClientRect(),g=f.left-d.left+r.scrollLeft-(r.clientLeft||0)+p[0],m=f.top-d.top+r.scrollTop-(r.clientTop||0)+p[1],v=f.width,y=f.height,_=Ae(i,n,l),x=Ks(_,u,c,i),b=x.left,E=x.top,T=x.width,S=x.height,w=Vs(_,a,i),A=Pe(w,[b,E]),M=[g+A[0]*v/T,m+A[1]*y/S],R=[0,0],P=0;++P<10;){var C=Ee(n,i);s=Ur(Pe(Vs(C,M,i),Vs(C,w,i)),2),R[0]=s[0],R[1]=s[1];var O=Ks(Ae(i,n,He(R,i),l),u,c,i),I=O.left-g,D=O.top-m;if(Wo(I)<2&&Wo(D)<2)break;M[0]-=I,M[1]-=D}return R.map((function(t){return Math.round(t)}))}(t,o[e+1],C,x,Me(O,T,x));t.matrix=He(r,x)}T=Me(T,t.matrix,x)}));var I=!b&&a;E||(E=Ge(I?4:3));var D=Ws(b&&16===E.length?we(E,4,3):E,I),F=S;return S=be(S,x,x),{hasZoom:1!==p||1!==y,hasFixed:d,matrixes:o,rootMatrix:S,originalRootMatrix:F,beforeMatrix:w,offsetMatrix:A,allMatrix:T,targetMatrix:E,targetTransform:D,inlineTransform:t.style.transform,transformOrigin:h,targetOrigin:u,is3d:_,offsetContainer:c,offsetRootContainer:v}}function za(t,e,r,i){void 0===r&&(r=e);var n=0,s=0,o=0,a={},l=ro(t);if(t&&(n=l.offsetWidth,s=l.offsetHeight),t){var h=Ha(t,e,r,i),u=yi(h.allMatrix,h.transformOrigin,n,s);a=kr(kr({},h),u);var c=yi(h.allMatrix,[50,50],100,100);o=io([c.pos1,c.pos2],c.direction)}var d=i?4:3;return kr(kr(kr({hasZoom:!1,width:n,height:s,rotation:o},l),{originalRootMatrix:Ge(d),rootMatrix:Ge(d),beforeMatrix:Ge(d),offsetMatrix:Ge(d),allMatrix:Ge(d),targetMatrix:Ge(d),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!i,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function Wa(t,e,r,i,n,s){void 0===s&&(s=[]);var o=1,a=[0,0],l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},h={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d=[0,0],p={},f=za(e,r,n,!0);if(e){var g=Ki(e);s.forEach((function(t){p[t]=g(t)}));var m=f.is3d?4:3,v=yi(f.offsetMatrix,Re(f.transformOrigin,Te(f.targetMatrix,m)),f.width,f.height);o=v.direction,a=Re(v.origin,[v.left-f.left,v.top-f.top]),c=oo(f.offsetRootContainer);var y=Us(i,i,!0).offsetParent||f.offsetRootContainer;if(f.hasZoom){var _=yi(Me(f.originalRootMatrix,f.allMatrix),f.transformOrigin,f.width,f.height),x=yi(f.originalRootMatrix,Ls(Ki(y)("transformOrigin")).map((function(t){return parseFloat(t)})),y.offsetWidth,y.offsetHeight);if(l=so(_,c),u=so(x,c,y,!0),t){var b=_.left,E=_.top;h=so({left:b,top:E,bottom:E,right:E},c)}}else{l=oo(e),u=function(t){var e=null==Vi?void 0:Vi.get(t);if(e)return e;var r=oo(t,!0);return Vi&&Vi.set(t,r),r}(y),t&&(h=oo(t));var T=u.left,S=u.top,w=u.clientLeft,A=u.clientTop,M=[l.left-T,l.top-S];d=Pe(Mo(f.rootMatrix,M,4),[w+f.left,A+f.top])}}return kr({targetClientRect:l,containerClientRect:u,moveableClientRect:h,rootContainerClientRect:c,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:p,offsetDelta:d},f)}function Xa(t){var e=t.pos1,r=t.pos2,i=t.pos3,n=t.pos4;if(!(e&&r&&i&&n))return null;var s=cr([e,r,i,n]),o=[s.minX,s.minY],a=Pe(t.origin,o);return e=Pe(e,o),r=Pe(r,o),i=Pe(i,o),n=Pe(n,o),kr(kr({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:r,pos3:i,pos4:n,origin:a,beforeOrigin:a,isPersisted:!0})}var Ya=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=kr({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Wa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new tr,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(N(e._observerId),e._observerId=F((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return Lr(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),r=t.parentPosition,i=t.className,s=t.target,o=t.zoom,a=t.cspNonce,l=t.translateZ,h=t.cssStyled,u=t.groupable,c=t.linePadding,d=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var p=Ur(r||[0,0],2),f=p[0],g=p[1],m=e.left,v=e.top,y=e.target,_=e.direction,x=e.hasFixed,b=e.offsetDelta,E=t.targets,T=this.isDragging(),S={};this.getEnabledAbles().forEach((function(t){S["data-able-".concat(t.name.toLowerCase())]=!0}));var w=this._getAbleClassName(),A=E&&E.length&&(y||u)||s||!this._hasFirstTarget&&this.state.isPersisted,M=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-f,v-g];!u&&t.useAccuratePosition&&(R[0]+=b[0],R[1]+=b[1]);var P={position:x?"fixed":"absolute",display:A?"block":"none",visibility:M?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(l,")"),"--zoom":o,"--zoompx":"".concat(o,"px")};return c&&(P["--moveable-line-padding"]=c),d&&(P["--moveable-control-padding"]=d),Wt(h,kr({cspNonce:a,ref:n(this,"controlBox"),className:"".concat(Is("control-box",-1===_?"reverse":"",T?"dragging":"")," ").concat(w," ").concat(i)},S,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,r=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),r||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){var t,e;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),po(this,!1),po(this,!0);var r=this.events;for(var i in r){var n=r[i];n&&n.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){return B(this.props.ables||[],(function(e){return e.name===t}))},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(ii)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=this.targetGesto,i=this.controlGesto;return r&&La(this)({inputEvent:t},e)?r.isFlag()||r.triggerDragStart(t):i&&this.isMoveableElement(e)&&(i.isFlag()||i.triggerDragStart(t)),this},e.prototype.hitTest=function(t){var e,r=this.state,i=r.target,n=r.pos1,s=r.pos2,o=r.pos3,a=r.pos4,l=r.targetClientRect;if(!i)return 0;if(ot(t)){var h=t.getBoundingClientRect();e={left:h.left,top:h.top,width:h.width,height:h.height}}else e=kr({width:0,height:0},t);var u=e.left,c=e.top,d=e.width,p=e.height,f=ur([n,s,a,o],l),g=yr(f,[[u,c],[u+d,c],[u+d,c+p],[u,c+p]]),m=hr(f);return g&&m?Math.min(100,g/m*100):0},e.prototype.isInside=function(t,e){var r=this.state,i=r.target,n=r.pos1,s=r.pos2,o=r.pos3,a=r.pos4,l=r.targetClientRect;return!!i&&dr([t,e],ur([n,s,a,o],l))},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var i=this.props,n=!i.parentPosition&&!i.wrapperMoveable;n&&qi(!0);var s=i.parentMoveable,o=this.state.target||i.target,a=this.getContainer(),l=s?s._rootContainer:this._rootContainer,h=Wa(this.controlBox,o,a,a,l||a,this._getRequestStyles());if(!o&&this._hasFirstTarget&&i.persistData){var u=Xa(i.persistData);for(var c in u)h[c]=u[c]}n&&qi(),this.updateState(h,!s&&r)},e.prototype.isDragging=function(t){var e,r,i=this.targetGesto,n=this.controlGesto;return(null==i?void 0:i.isFlag())?!t||!!(null===(e=i.getEventData()[t])||void 0===e?void 0:e.isEventStart):!!(null==n?void 0:n.isFlag())&&(!t||!!(null===(r=n.getEventData()[t])||void 0===r?void 0:r.isEventStart))},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=uo(this.state),r=Ur(e,4),i=r[0],n=r[1],s=r[2],o=r[3],a=qs(e),l=t.width,h=t.height,u=a.width,c=a.height,d=a.left,p=a.top,f=[t.left,t.top],g=Re(f,t.origin);return{width:u,height:c,left:d,top:p,pos1:i,pos2:n,pos3:s,pos4:o,offsetWidth:l,offsetHeight:h,beforeOrigin:Re(f,t.beforeOrigin),origin:g,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){var e;t&&"target"!==t||(!1===(null==(e=this.targetGesto)?void 0:e.isIdle())&&co(this,!1),null==e||e.stop());t&&"control"!==t||(!1===(null==(e=this.controlGesto)?void 0:e.isIdle())&&co(this,!0),null==e||e.stop())},e.prototype.getRotation=function(){var t=this.state;return function(t,e,r){var i=z(t,e)/Math.PI*180;return(i=r>=0?i:180-i)>=0?i:360+i}(t.pos1,t.pos2,t.direction)},e.prototype.request=function(t,e,r){void 0===e&&(e={});var i=this,n=i.props,s=n.parentMoveable||n.wrapperMoveable||i,o=s.props.ables,a=n.groupable,l=B(o,(function(e){return e.name===t}));if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var h=l.request(i),u=r||e.isInstant,c=h.isControl?"controlAbles":"targetAbles",d="".concat(a?"Group":"").concat(h.isControl?"Control":""),p=Gr([],Ur(s[c]),!1),f={request:function(e){return Na(i,p,["drag"],d,"",kr(kr({},h.request(e)),{requestAble:t,isRequest:!0}),u),f},requestEnd:function(){return Na(i,p,["drag"],d,"End",kr(kr({},h.requestEnd()),{requestAble:t,isRequest:!0}),u),f}};return Na(i,p,["drag"],d,"Start",kr(kr({},h.requestStart(e)),{requestAble:t,isRequest:!0}),u),u?f.request(e).requestEnd():f},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,r=e.padding,i=t.originalBeforeOrigin,n=t.transformOrigin,s=t.allMatrix,o=t.is3d,a=t.pos1,l=t.pos2,h=t.pos3,u=t.pos4,c=t.left,d=t.top,p=t.isPersisted,f=e.zoom||1;if(!r&&f<=1)return t.renderPoses=[a,l,h,u],void(t.renderLines=[[a,l],[l,u],[u,h],[h,a]]);var g=Yo(r||{}),m=g.left,v=g.top,y=g.bottom,_=g.right,x=o?4:3,b=Ae(x,He((p?n:this.controlBox&&e.groupable?i:Re(i,[c,d])).map((function(t){return-t})),x),s,He(n,x)),E=Po(b,a,[-m,-v],x),T=Po(b,l,[_,-v],x),S=Po(b,h,[-m,y],x),w=Po(b,u,[_,y],x);if(t.renderPoses=[E,T,S,w],t.renderLines=[[E,T],[T,w],[w,S],[S,E]],f){var A=f/2;t.renderLines=[[Po(b,a,[-m-A,-v],x),Po(b,l,[_+A,-v],x)],[Po(b,l,[_,-v-A],x),Po(b,u,[_,y+A],x)],[Po(b,u,[_+A,y],x),Po(b,h,[-m-A,y],x)],[Po(b,h,[-m,y+A],x),Po(b,a,[-m,-v-A],x)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,r=t.container,i=t.parentMoveable,n=this.state,s=n.target,o=n.container;if(s||e){this.updateAbles();var a=!Eo(s,e);if(a||!Eo(o,r)){var l=r||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:r}),!i&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=a}}},e.prototype.waitToChangeTarget=function(){return new Promise((function(){}))},e.prototype.triggerEvent=function(t,e){var r=this.props;if(this._emitter.trigger(t,e),r.parentMoveable&&e.isRequest&&!e.isRequestChild)return r.parentMoveable.triggerEvent(t,e,!0);var i=r[t];return i&&i(e)},e.prototype.useCSS=function(t,e){var r=this.props.customStyledMap,i=t+e;return r[i]||(r[i]=Fr(t,e)),r[i]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var r=this.controlBox,i=e.persistData,n=e.firstRenderState;if(n&&!r)return n;if(!this._hasFirstTarget&&i){var s=Xa(i);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props.triggerAblesSimultaneously,i=this.getEnabledAbles(t),n="drag".concat(e,"Start"),s="pinch".concat(e,"Start"),o="drag".concat(e,"ControlStart"),a=bo(i,[n,s],r),l=bo(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=l},e.prototype.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var r=this.state;for(var i in t)r[i]=t[i]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter((function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])}))},e.prototype.renderAbles=function(){var t,e,r,i,n=this,s=this.props.triggerAblesSimultaneously,o={createElement:Wt};return this.renderState={},(t=wo(bo(this.getEnabledAbles(),["render"],s).map((function(t){return(0,t.render)(n,o)||[]}))).filter((function(t){return t})),e=function(t){return t.key},r=[],i={},t.forEach((function(n,s){var o=e(n,s,t),a=i[o];a||(a=[],i[o]=a,r.push(a)),a.push(n)})),r).map((function(t){return t[0]}))},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var r,i,n=null!==(i=null===(r=e.requestStyle)||void 0===r?void 0:r.call(e))&&void 0!==i?i:[];return Gr(Gr([],Ur(t),!1),Ur(n),!1)}),Gr([],Ur(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,r=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(po(this,!1),this.updateState({gestos:{}})),e||po(this,!0),r&&t&&!this.targetGesto&&(this.targetGesto=ka(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=Ua(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=Bo(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,r=t.hideDefaultLines,i=t.hideChildMoveableDefaultLines,n=t.parentMoveable;if(r||n&&i)return[];var s=this.getState(),o={createElement:Wt};return s.renderLines.map((function(t,r){return nn(o,"",t[0],t[1],e,"render-line-".concat(r))}))},e.prototype._isTargetChanged=function(t){var e=this.props,r=e.dragTarget||e.target,i=this._prevOriginalDragTarget,n=this._prevDragArea,s=e.dragArea;return!s&&i!==r||(t||s)&&n!==s||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,r=this.events,i=L(r);if(this._isTargetChanged())for(var n in r){var s=r[n];s&&s.destroy(),r[n]=null}if(e){var o=this.enabledAbles;i.forEach((function(i){var n=bo(o,[i]),s=n.length>0,a=r[i];s?(a||(a=new ja(e,t,i),r[i]=a),a.setAbles(n)):a&&(a.destroy(),r[i]=null)}))}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Bo(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Bo(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(Gr(Gr([],Ur(this._getAbleViewClassNames()),!1),[this.isDragging()?ra:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,r=So(t.filter(Boolean),(function(t){return t})).map((function(t){return Ur(t,1)[0]})),i=this._viewClassNames,n=dt(i,r),s=n.removed,o=n.added;s.forEach((function(t){Q(e,i[t])})),o.forEach((function(t){Z(e,r[t])})),this._viewClassNames=r},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map((function(e){var r;return(null===(r=e.viewClassName)||void 0===r?void 0:r.call(e,t))||""})).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var r=this.getEnabledAbles(),i=this.targetGesto,n=this.controlGesto,s=(null==i?void 0:i.isFlag())?i.getEventData():{},o=(null==n?void 0:n.isFlag())?n.getEventData():{};return r.map((function(r){var i,n,a,l=r.name,h=(null===(i=r.className)||void 0===i?void 0:i.call(r,e))||"";return((null===(n=s[l])||void 0===n?void 0:n.isEventStart)||(null===(a=o[l])||void 0===a?void 0:a.isEventStart))&&(h+=" ".concat(Is("".concat(l).concat(t,"-dragging")))),h.trim()})).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,r=this.props,i=r.target,n=nt(this.getControlBoxElement());if(n.ResizeObserver&&i&&r.useResizeObserver){if(t.target!==i||!this._reiszeObserver){var s=new n.ResizeObserver(this.checkUpdateRect);s.observe(i,{box:"border-box"}),this._reiszeObserver=s}}else null===(e=this._reiszeObserver)||void 0===e||e.disconnect()},e.prototype._updateMutationObserver=function(t){var e,r=this,i=this.props,n=i.target,s=nt(this.getControlBoxElement());if(s.MutationObserver&&n&&i.useMutationObserver){if(t.target!==n||!this._mutationObserver){var o=new s.MutationObserver((function(t){var e,i;try{for(var n=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),s=n.next();!s.done;s=n.next()){var o=s.value;"attributes"===o.type&&"style"===o.attributeName&&r.checkUpdateRect()}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}}));o.observe(n,{attributes:!0}),this._mutationObserver=o}}else null===(e=this._mutationObserver)||void 0===e||e.disconnect()},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Ds,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(Nt),Va={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,i=t.props,n=i.targets||[],o=t.getState(),a=o.left,l=o.top,h=o.isPersisted,u=i.zoom||1,c=t.renderGroupRects,d=(null===(r=i.persistData)||void 0===r?void 0:r.children)||[];h?n=d.map((function(){return null})):d=[];var p=Ho(t,"parentPosition",[a,l],(function(t){return t.join(",")})),f=Ho(t,"requestStyles",t.getRequestChildStyles(),(function(t){return t.join(",")}));return t.moveables=t.moveables.slice(0,n.length),Gr(Gr([],Ur(n.map((function(r,n){return e.createElement(Ya,{key:"moveable"+n,ref:s(t,"moveables",n),target:r,origin:!1,requestStyles:f,cssStyled:i.cssStyled,customStyledMap:i.customStyledMap,useResizeObserver:i.useResizeObserver,useMutationObserver:i.useMutationObserver,hideChildMoveableDefaultLines:i.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[a,l],persistData:d[n],zoom:u})}))),!1),Ur(wo(c.map((function(t,r){var i=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,n){var s=Ur(t,2),o=s[0],a=s[1];return nn(e,"",Pe(i[o],p),Pe(i[a],p),u,"group-rect-".concat(r,"-").concat(n))}))})))),!1)}},$a=jr("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,i=e.inputEvent,n=e.inputTarget,s=!t.isMoveableElement(n)&&t.controlBox.contains(n);if(i&&n&&!e.isDrag&&!t.isMoveableElement(n)&&!s){var o=r.contains(n);_o(t,"onClick",mo(t,e,{isDouble:e.isDouble,inputTarget:n,isTarget:r===n,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,i=e.inputTarget;if(r&&i&&!e.isDrag&&!t.isMoveableElement(i)&&e.datas.inputTarget!==i){var n=t.props.targets,s=n.indexOf(i),o=s>-1,a=!1;-1===s&&(a=(s=D(n,(function(t){return t.contains(i)})))>-1),_o(t,"onClickGroup",mo(t,e,{isDouble:e.isDouble,targets:n,inputTarget:i,targetIndex:s,isTarget:o,containsTarget:a,moveableTarget:n[s]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function qa(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),kr(kr({},t),{datas:e})}var Ka=jr("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var r=t.props,i=r.edgeDraggable;return i?sn(e,"edgeDraggable",i,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,i=t.props,n=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!i.edgeDraggable||!n)&&(!i.draggable&&K(n,Is("direction"))&&K(n,Is("edge"))&&K(n,Is("edgeDraggable")))},dragStart:function(t,e){return Qn.dragStart(t,qa(e))},drag:function(t,e){return Qn.drag(t,qa(e))},dragEnd:function(t,e){return Qn.dragEnd(t,qa(e))},dragGroupCondition:function(t,e){var r,i=t.props,n=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!(!i.edgeDraggable||!n)&&(!i.draggable&&K(n,Is("direction"))&&K(n,Is("line")))},dragGroupStart:function(t,e){return Qn.dragGroupStart(t,qa(e))},dragGroup:function(t,e){return Qn.dragGroup(t,qa(e))},dragGroupEnd:function(t,e){return Qn.dragGroupEnd(t,qa(e))},unset:function(t){return Qn.unset(t)}}),Za={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},Qa=[Ba,ha,Os,Vo,Qn,Ka,rs,qo,Qo,hs,la,ua,oa,Pa,Ra,Da,Va,Za,$a,sa,Fa],Ja=Qa.reduce((function(t,e){return(e.events||[]).forEach((function(e){q(t,e)})),t}),[]),tl=Qa.reduce((function(t,e){return(e.props||[]).forEach((function(e){q(t,e)})),t}),[]);function el(t,e){var r=Ur(t,3),i=r[0],n=r[1],s=r[2];return(i*e[0]+n*e[1]+s)/Math.sqrt(i*i+n*n)}function rl(t,e){var r=Ur(t,2),i=r[0],n=r[1];return-i*e[0]-n*e[1]}function il(t,e){return Math.max.apply(Math,Gr([],Ur(t.map((function(t){var r=Ur(t,4),i=r[0],n=r[1],s=r[2],o=r[3];return Math.max(i[e],n[e],s[e],o[e])}))),!1))}function nl(t,e){return Math.min.apply(Math,Gr([],Ur(t.map((function(t){var r=Ur(t,4),i=r[0],n=r[1],s=r[2],o=r[3];return Math.min(i[e],n[e],s[e],o[e])}))),!1))}function sl(t,e){var r=e.map((function(e){if(x(e)){var r=sl(t,e),i=r.length;return i>1?r:1===i?r[0]:null}var n=B(t,(function(t){return t.manager.props.target===e}));return n?(n.finded=!0,n.manager):null})).filter(Boolean);return 1===r.length&&x(r[0])?r[0]:r}var ol=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Ze,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return Lr(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){var i;void 0===r&&(r=!0);var n=this.state;if(this.controlBox&&!n.isPersisted){qi(!0),this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var s=this.props,o=this.moveables,a=n.target||s.target,l=o.map((function(t){return{finded:!1,manager:t}})),h=this.props.targetGroups||[],u=sl(l,h),c=s.useDefaultGroupRotate;u.push.apply(u,Gr([],Ur(l.filter((function(t){return!t.finded})).map((function(t){return t.manager}))),!1));var d=[],p=!e||""!==t&&s.updateGroup,f=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var g=null===(i=s.persistData)||void 0===i?void 0:i.rotation;null!=g&&(f=g)}var m=function t(e,r,i){var n=e.map((function(e){if(x(e)){var i=t(e,r),n=[i.pos1,i.pos2,i.pos3,i.pos4];return d.push(i),{poses:n,rotation:i.rotation}}return{poses:uo(e.state),rotation:e.getRotation()}})),s=n.map((function(t){return t.rotation})),o=0,a=s[0],l=s.every((function(t){return Math.abs(a-t)<.1}));o=p?!c&&l?a:f:c||i||!l?r:a;var h=n.map((function(t){return t.poses})),u=function(t,e){var r,i,n,s=[0,0],o=[0,0],a=[0,0],l=[0,0],h=0,u=0;if(!t.length)return{pos1:s,pos2:o,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:h,height:u,rotation:e};var c=Y(e,li);if(c%90){var d=c/180*Math.PI,p=Math.tan(d),f=-1/p,g=[ui,ci],m=[[0,0],[0,0]],v=[ui,ci],y=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=el([-p,1,0],t),r=el([-f,1,0],t);g[0]>e&&(m[0]=t,g[0]=e),g[1]<e&&(m[1]=t,g[1]=e),v[0]>r&&(y[0]=t,v[0]=r),v[1]<r&&(y[1]=t,v[1]=r)}))}));var _=Ur(m,2),x=_[0],b=_[1],E=Ur(y,2),T=E[0],S=E[1],w=[-p,1,rl([-p,1],x)],A=[-p,1,rl([-p,1],b)],M=[-f,1,rl([-f,1],T)],R=[-f,1,rl([-f,1],S)];r=Ur([[w,M],[w,R],[A,M],[A,R]].map((function(t){var e=Ur(t,2);return fr(e[0],e[1])[0]})),4),s=r[0],o=r[1],a=r[2],l=r[3],h=v[1]-v[0],u=g[1]-g[0]}else{var P=nl(t,0),C=nl(t,1),O=il(t,0),I=il(t,1);s=[P,C],o=[O,C],a=[P,I],l=[O,I],h=O-P,u=I-C,c%180&&(s=(i=Ur([a,s,l,o],4))[0],o=i[1],a=i[2],l=i[3],h=I-C,u=O-P)}c%360>180&&(s=(n=Ur([l,a,o,s],4))[0],o=n[1],a=n[2],l=n[3]);var D=cr([s,o,a,l]);return{pos1:s,pos2:o,pos3:a,pos4:l,width:h,height:u,minX:D.minX,minY:D.minY,maxX:D.maxX,maxY:D.maxY,rotation:e}}(h,o);return u}(u,this.rotation,!0);p&&(this.rotation=m.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=h,this.renderGroupRects=d;var v,y,_,b,E,T=this.transformOrigin,S=this.rotation,w=this.scale,A=m.width,M=m.height,R=m.minX,P=m.minY,C=(v=[[0,0],[A,0],[0,M],[A,M]],y=Go(T,A,M),_=this.rotation/180*Math.PI,b=v.map((function(t){return Pe(t,y)})),E=b.map((function(t){return Ne(t,_)})),{prev:b,next:E,result:E.map((function(t){return Re(t,y)}))}),O=cr(C.result),I=O.minX,D=O.minY,B=" rotate(".concat(S,"deg)")+" scale(".concat(zo(w[0]),", ").concat(zo(w[1]),")"),F="translate(".concat(-I,"px, ").concat(-D,"px)").concat(B);this.controlBox.style.transform="translate3d(".concat(R,"px, ").concat(P,"px, ").concat(this.props.translateZ||0,")"),a.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(T,";")+"width:".concat(A,"px;height:").concat(M,"px;")+"transform: ".concat(F),n.width=A,n.height=M;var N=this.getContainer(),L=Wa(this.controlBox,a,this.controlBox,this.getContainer(),this._rootContainer||N,[]),k=[L.left,L.top],U=Ur(uo(L),4),G=U[0],j=U[1],H=U[2],z=U[3],W=cr([G,j,H,z]),X=[W.minX,W.minY],V=zo(w[0]*w[1]);L.pos1=Pe(G,X),L.pos2=Pe(j,X),L.pos3=Pe(H,X),L.pos4=Pe(z,X),L.left=R-L.left+X[0],L.top=P-L.top+X[1],L.origin=Pe(Re(k,L.origin),X),L.beforeOrigin=Pe(Re(k,L.beforeOrigin),X),L.originalBeforeOrigin=Re(k,L.originalBeforeOrigin),L.transformOrigin=Pe(Re(k,L.transformOrigin),X),a.style.transform="translate(".concat(-I-X[0],"px, ").concat(-D-X[1],"px)")+B,qi(),this.updateState(kr(kr({},L),{posDelta:X,direction:V,beforeDirection:V}),r)}},e.prototype.getRect=function(){return kr(kr({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.triggerEvent=function(e,r,i){if(i||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce((function(t,e){var r,i,n=null!==(i=null===(r=e.requestChildStyle)||void 0===r?void 0:r.call(e))&&void 0!==i?i:[];return Gr(Gr([],Ur(t),!1),Ur(n),!1)}),[])},e.prototype.getMoveables=function(){return Gr([],Ur(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,Gr(Gr([],Ur(this.props.ables),!1),[Va],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Bo(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,r=this._prevDragTarget,i=e.dragTarget||this.areaElement,n=e.targets,s=this.differ.update(n),o=s.added,a=s.changed,l=s.removed,h=o.length||l.length;(h||this._prevOriginalDragTarget!==this._originalDragTarget)&&(po(this,!1),po(this,!0),this.updateState({gestos:{}})),r!==i&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=ka(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=Ua(this,"GroupControl")));var u=!Eo(t.container,e.container);u&&(t.container=e.container),(u||h||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||a.length||n.length&&!jo(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!h},e.prototype._updateObserver=function(){},e.defaultProps=kr(kr({},Ya.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Ya),al=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return Lr(e,t),e.prototype.render=function(){var t,e=this,r=this.props,i=r.cspNonce,o=r.cssStyled,a=r.persistData,l=r.targets||[],h=l.length,u=this.isUnmounted||!h,c=null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[];return u&&!h&&c.length?l=c.map((function(){return null})):u||(c=[]),Wt(o,{cspNonce:i,ref:n(this,"controlBox"),className:Is("control-box")},l.map((function(t,i){var n,o,a=null!==(o=null===(n=r.individualGroupableProps)||void 0===n?void 0:n.call(r,t,i))&&void 0!==o?o:{};return Wt(Ya,kr({key:"moveable"+i,ref:s(e,"moveables",i)},r,a,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[i]}))})))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0),qi(!0),this.moveables.forEach((function(i){i.updateRect(t,e,r)})),qi()},e.prototype.getRect=function(){return kr(kr({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},e.prototype.request=function(t,e,r){void 0===e&&(e={});var i=this.moveables.map((function(r){return r.request(t,kr(kr({},e),{isInstant:!1}),!1)})),n={request:function(t){return i.forEach((function(e){return e.request(t)})),this},requestEnd:function(){return i.forEach((function(t){return t.requestEnd()})),this}};return r||e.isInstant?n.request(e).requestEnd():n},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=e,i=B(this.moveables,(function(t){var e=t.getTargets()[0],i=t.getControlBoxElement(),n=t.getDragElement();return!(!e||!n)&&(n===r||n.contains(r)||n!==e&&e===r||e.contains(r)||i===r||i.contains(r))}));return i&&i.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return Gr([],Ur(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Ya);function ll(t,e){var r=[];return t.forEach((function(t){t&&(b(t)?e[t]&&r.push.apply(r,Gr([],Ur(e[t]),!1)):x(t)?r.push.apply(r,Gr([],Ur(ll(t,e)),!1)):r.push(t))})),r}function hl(t,e){var r=[];return t.forEach((function(t){t&&(b(t)?e[t]&&r.push.apply(r,Gr([],Ur(e[t]),!1)):x(t)?r.push(hl(t,e)):r.push(t))})),r}function ul(t,e){return t.length!==e.length||t.some((function(t,r){var i=e[r];return!(!t&&!i)&&(t!=i&&(!x(t)||!x(i)||ul(t,i)))}))}var cl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new Ze,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}var r,i;return Lr(e,t),e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var r=e.css;r&&r.forEach((function(e){t[e]=!0}))}));var e=L(t).join("\n");this.defaultStyled=Fr("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(e,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(ii,si+e))},e.getTotalAbles=function(){return Gr([ha,Va,Za,sa],Ur(this.defaultAbles),!1)},e.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,i=r.ables,s=r.props,o=function(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]])}return r}(r,["ables","props"]),a=Ur(this._updateRefs(!0),2),l=a[0],h=a[1],u=ll(l,h),c=u.length>1,d=Gr(Gr([],Ur(e.getTotalAbles()),!1),Ur(i||[]),!1),p=kr(kr(kr({},o),s||{}),{ables:d,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=u;var f=null,g=this.moveable,m=o.persistData;if((null==m?void 0:m.children)&&(c=!0),o.individualGroupable)return Wt(al,kr({key:"individual-group",ref:n(this,"moveable")},p,{target:null,targets:u}));if(c){var v=hl(l,h);if(g&&!g.props.groupable&&!g.props.individualGroupable){var y=g.props.target;y&&u.indexOf(y)>-1&&(f=kr({},g.state))}return Wt(ol,kr({key:"group",ref:n(this,"moveable")},p,null!==(t=o.groupableProps)&&void 0!==t?t:{},{target:null,targets:u,targetGroups:v,firstRenderState:f}))}var _=u[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var x=B(g.moveables||[],(function(t){return t.props.target===_}));x&&(f=kr({},x.state))}return Wt(Ya,kr({key:"single",ref:n(this,"moveable")},p,{target:_,firstRenderState:f}))},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise((function(e){t=e}))},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var e=this.refTargets,r=Fo(this.props.target||this.props.targets),i="undefined"!=typeof document,n=ul(e,r),s=this.selectorMap,o={};return this.refTargets.forEach((function t(e){b(e)?s[e]?o[e]=s[e]:i&&(n=!0,o[e]=[].slice.call(document.querySelectorAll(e))):x(e)&&e.forEach(t)})),this._tmpRefTargets=r,this._tmpSelectorMap=o,[r,o,!t&&n]},e.prototype._checkChangeTargets=function(){var t,e,r;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var i=this._differ.update(this._elementTargets),n=i.added,s=i.removed;(n.length||s.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(r=this._onChangeTargets)||void 0===r||r.call(this));var o=Ur(this._updateRefs(),3),a=o[0],l=o[1],h=o[2];this.refTargets=a,this.selectorMap=l,h&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,r,i){var n,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,r,o):n(e,r))||o);s>3&&o&&Object.defineProperty(e,r,o)}([(r=gi,void 0===i&&(i={}),function(t,e){r.forEach((function(r){var n=i[r]||r;n in t||(t[n]=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var s=(t=this[e])[r].apply(t,i);return s===this[e]?this:s})}))})],e.prototype,"moveable",void 0),e}(Nt),dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lr(e,t),e.defaultAbles=Qa,e}(cl);var pl=function(t,e){return pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},pl(t,e)};function fl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}pl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var gl=function(){return gl=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},gl.apply(this,arguments)};var ml=function(t){function e(e){var r=t.call(this,e)||this;return r.state={},r.state=r.props,r}return fl(e,t),e.prototype.render=function(){return Wt(dl,gl({ref:n(this,"moveable")},this.state))},e}(Ft),vl=tl,yl=gi,_l=Ja,xl=function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this)||this;i.containerProvider=null,i.selfElement=null,i._warp=!1;var s,o=gl({},r),a={};_l.forEach((function(t){var e;a[(e="on ".concat(t),e.replace(/[\s-_]+([^\s-_])/g,(function(t,e){return e.toUpperCase()})))]=function(e){return i.trigger(t,e)}})),r.warpSelf?(delete r.warpSelf,i._warp=!0,s=e):(s=et(e).createElement("div"),e.appendChild(s)),i.containerProvider=Kt(Wt(ml,gl({ref:n(i,"innerMoveable")},o,a)),s),i.selfElement=s;var l=o.target;return x(l)&&l.length>1&&i.updateRect(),i}fl(e,t);var r=e.prototype;return r.setState=function(t,e){this.innerMoveable.setState(t,e)},r.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},r.dragStart=function(t,e){void 0===e&&(e=t.target),this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t,e)},r.destroy=function(){var t,e=this.selfElement;Kt(null,e,this.containerProvider),this._warp||null===(t=null==e?void 0:e.parentElement)||void 0===t||t.removeChild(e),this.containerProvider=null,this.off(),this.selfElement=null,this.innerMoveable=null},r.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,r,i){var n,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,r,o):n(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o}([o(yl,(function(t,e){t[e]||(t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this.getMoveable();if(i&&i[e])return i[e].apply(i,t)})})),o(vl,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var r;this.setState(((r={})[e]=t,r))},enumerable:!0,configurable:!0})}))],e),e}(tr),bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fl(e,t),e}(xl);function El(t,e,r){return function(t,e,r){return void 0===r&&(r=e),za(t,e,r,!0)}(t,e,r)}function Tl(t,e){return jr(t,e)}},7872:(t,e,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=i&&n&&"function"==typeof n.get?n.get:null,o=i&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=a&&l&&"function"==typeof l.get?l.get:null,u=a&&Set.prototype.forEach,c="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,_=String.prototype.replace,x=String.prototype.toUpperCase,b=String.prototype.toLowerCase,E=RegExp.prototype.test,T=Array.prototype.concat,S=Array.prototype.join,w=Array.prototype.slice,A=Math.floor,M="function"==typeof BigInt?BigInt.prototype.valueOf:null,R=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,C="function"==typeof Symbol&&"object"==typeof Symbol.iterator,O="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===C||"symbol")?Symbol.toStringTag:null,I=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function B(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||E.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var i=t<0?-A(-t):A(t);if(i!==t){var n=String(i),s=y.call(e,n.length+1);return _.call(n,r,"$&_")+"."+_.call(_.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(e,r,"$&_")}var F=r(6204),N=F.custom,L=H(N)?N:null;function k(t,e,r){var i="double"===(r.quoteStyle||e)?'"':"'";return i+t+i}function U(t){return _.call(String(t),/"/g,"&quot;")}function G(t){return!("[object Array]"!==X(t)||O&&"object"==typeof t&&O in t)}function j(t){return!("[object RegExp]"!==X(t)||O&&"object"==typeof t&&O in t)}function H(t){if(C)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!P)return!1;try{return P.call(t),!0}catch(t){}return!1}t.exports=function t(e,i,n,a){var l=i||{};if(W(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!W(l,"customInspect")||l.customInspect;if("boolean"!=typeof g&&"symbol"!==g)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var x=l.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return V(e,l);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var E=String(e);return x?B(e,E):E}if("bigint"==typeof e){var A=String(e)+"n";return x?B(e,A):A}var R=void 0===l.depth?5:l.depth;if(void 0===n&&(n=0),n>=R&&R>0&&"object"==typeof e)return G(e)?"[Array]":"[Object]";var N=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=S.call(Array(t.indent+1)," ")}return{base:r,prev:S.call(Array(e+1),r)}}(l,n);if(void 0===a)a=[];else if(Y(a,e)>=0)return"[Circular]";function z(e,r,i){if(r&&(a=w.call(a)).push(r),i){var s={depth:l.depth};return W(l,"quoteStyle")&&(s.quoteStyle=l.quoteStyle),t(e,s,n+1,a)}return t(e,l,n+1,a)}if("function"==typeof e&&!j(e)){var $=function(t){if(t.name)return t.name;var e=v.call(m.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),tt=J(e,z);return"[Function"+($?": "+$:" (anonymous)")+"]"+(tt.length>0?" { "+S.call(tt,", ")+" }":"")}if(H(e)){var et=C?_.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(e);return"object"!=typeof e||C?et:q(et)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var rt="<"+b.call(String(e.nodeName)),it=e.attributes||[],nt=0;nt<it.length;nt++)rt+=" "+it[nt].name+"="+k(U(it[nt].value),"double",l);return rt+=">",e.childNodes&&e.childNodes.length&&(rt+="..."),rt+="</"+b.call(String(e.nodeName))+">"}if(G(e)){if(0===e.length)return"[]";var st=J(e,z);return N&&!function(t){for(var e=0;e<t.length;e++)if(Y(t[e],"\n")>=0)return!1;return!0}(st)?"["+Q(st,N)+"]":"[ "+S.call(st,", ")+" ]"}if(function(t){return!("[object Error]"!==X(t)||O&&"object"==typeof t&&O in t)}(e)){var ot=J(e,z);return"cause"in Error.prototype||!("cause"in e)||I.call(e,"cause")?0===ot.length?"["+String(e)+"]":"{ ["+String(e)+"] "+S.call(ot,", ")+" }":"{ ["+String(e)+"] "+S.call(T.call("[cause]: "+z(e.cause),ot),", ")+" }"}if("object"==typeof e&&g){if(L&&"function"==typeof e[L]&&F)return F(e,{depth:R-n});if("symbol"!==g&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t);try{h.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var at=[];return o&&o.call(e,(function(t,r){at.push(z(r,e,!0)+" => "+z(t,e))})),Z("Map",s.call(e),at,N)}if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t);try{s.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var lt=[];return u&&u.call(e,(function(t){lt.push(z(t,e))})),Z("Set",h.call(e),lt,N)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t,c);try{d.call(t,d)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return K("WeakMap");if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t,d);try{c.call(t,c)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return K("WeakSet");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{return p.call(t),!0}catch(t){}return!1}(e))return K("WeakRef");if(function(t){return!("[object Number]"!==X(t)||O&&"object"==typeof t&&O in t)}(e))return q(z(Number(e)));if(function(t){if(!t||"object"!=typeof t||!M)return!1;try{return M.call(t),!0}catch(t){}return!1}(e))return q(z(M.call(e)));if(function(t){return!("[object Boolean]"!==X(t)||O&&"object"==typeof t&&O in t)}(e))return q(f.call(e));if(function(t){return!("[object String]"!==X(t)||O&&"object"==typeof t&&O in t)}(e))return q(z(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if(e===r.g)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==X(t)||O&&"object"==typeof t&&O in t)}(e)&&!j(e)){var ht=J(e,z),ut=D?D(e)===Object.prototype:e instanceof Object||e.constructor===Object,ct=e instanceof Object?"":"null prototype",dt=!ut&&O&&Object(e)===e&&O in e?y.call(X(e),8,-1):ct?"Object":"",pt=(ut||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(dt||ct?"["+S.call(T.call([],dt||[],ct||[]),": ")+"] ":"");return 0===ht.length?pt+"{}":N?pt+"{"+Q(ht,N)+"}":pt+"{ "+S.call(ht,", ")+" }"}return String(e)};var z=Object.prototype.hasOwnProperty||function(t){return t in this};function W(t,e){return z.call(t,e)}function X(t){return g.call(t)}function Y(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function V(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return V(y.call(t,0,e.maxStringLength),e)+i}return k(_.call(_.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$),"single",e)}function $(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+x.call(e.toString(16))}function q(t){return"Object("+t+")"}function K(t){return t+" { ? }"}function Z(t,e,r,i){return t+" ("+e+") {"+(i?Q(r,i):S.call(r,", "))+"}"}function Q(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+S.call(t,","+r)+"\n"+e.prev}function J(t,e){var r=G(t),i=[];if(r){i.length=t.length;for(var n=0;n<t.length;n++)i[n]=W(t,n)?e(t[n],t):""}var s,o="function"==typeof R?R(t):[];if(C){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in t)W(t,l)&&(r&&String(Number(l))===l&&l<t.length||C&&s["$"+l]instanceof Symbol||(E.call(/[^\w$]/,l)?i.push(e(l,t)+": "+e(t[l],t)):i.push(l+": "+e(t[l],t))));if("function"==typeof R)for(var h=0;h<o.length;h++)I.call(t,o[h])&&i.push("["+e(o[h])+"]: "+e(t[o[h]],t));return i}},1504:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function r(t,e){for(var r,i="",n=0,s=-1,o=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",n=0):n=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),s=a,o=0;continue}}else if(2===i.length||1===i.length){i="",n=0,s=a,o=0;continue}e&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+t.slice(s+1,a):i=t.slice(s+1,a),n=a-s-1;s=a,o=0}else 46===r&&-1!==o?++o:o=-1}return i}var i={resolve:function(){for(var t,i="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o;s>=0?o=arguments[s]:(void 0===t&&(t=process.cwd()),o=t),e(o),0!==o.length&&(i=o+"/"+i,n=47===o.charCodeAt(0))}return i=r(i,!n),n?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(t){if(e(t),0===t.length)return".";var i=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!i)).length||i||(t="."),t.length>0&&n&&(t+="/"),i?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];e(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":i.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return"";if((t=i.resolve(t))===(r=i.resolve(r)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var s=t.length,o=s-n,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var l=r.length-a,h=o<l?o:l,u=-1,c=0;c<=h;++c){if(c===h){if(l>h){if(47===r.charCodeAt(a+c))return r.slice(a+c+1);if(0===c)return r.slice(a+c)}else o>h&&(47===t.charCodeAt(n+c)?u=c:0===c&&(u=0));break}var d=t.charCodeAt(n+c);if(d!==r.charCodeAt(a+c))break;47===d&&(u=c)}var p="";for(c=n+u+1;c<=s;++c)c!==s&&47!==t.charCodeAt(c)||(0===p.length?p+="..":p+="/..");return p.length>0?p+r.slice(a+u):(a+=u,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var r=t.charCodeAt(0),i=47===r,n=-1,s=!0,o=t.length-1;o>=1;--o)if(47===(r=t.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?i?"/":".":i&&1===n?"//":t.slice(0,n)},basename:function(t,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');e(t);var i,n=0,s=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var a=r.length-1,l=-1;for(i=t.length-1;i>=0;--i){var h=t.charCodeAt(i);if(47===h){if(!o){n=i+1;break}}else-1===l&&(o=!1,l=i+1),a>=0&&(h===r.charCodeAt(a)?-1==--a&&(s=i):(a=-1,s=l))}return n===s?s=l:-1===s&&(s=t.length),t.slice(n,s)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!o){n=i+1;break}}else-1===s&&(o=!1,s=i+1);return-1===s?"":t.slice(n,s)},extname:function(t){e(t);for(var r=-1,i=0,n=-1,s=!0,o=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(47!==l)-1===n&&(s=!1,n=a+1),46===l?-1===r?r=a:1!==o&&(o=1):-1!==r&&(o=-1);else if(!s){i=a+1;break}}return-1===r||-1===n||0===o||1===o&&r===n-1&&r===i+1?"":t.slice(r,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+i:r+t+i:i}("/",t)},parse:function(t){e(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return r;var i,n=t.charCodeAt(0),s=47===n;s?(r.root="/",i=1):i=0;for(var o=-1,a=0,l=-1,h=!0,u=t.length-1,c=0;u>=i;--u)if(47!==(n=t.charCodeAt(u)))-1===l&&(h=!1,l=u+1),46===n?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1);else if(!h){a=u+1;break}return-1===o||-1===l||0===c||1===c&&o===l-1&&o===a+1?-1!==l&&(r.base=r.name=0===a&&s?t.slice(1,l):t.slice(a,l)):(0===a&&s?(r.name=t.slice(1,o),r.base=t.slice(1,l)):(r.name=t.slice(a,o),r.base=t.slice(a,l)),r.ext=t.slice(o,l)),a>0?r.dir=t.slice(0,a-1):s&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,t.exports=i},2668:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(6428),n=r(9392),s=r(3132),o=r(9488),a=r(3176),l=r(1292),h=r(8768);const u={AlphaFilter:n.AlphaFilter,BlurFilter:s.BlurFilter,BlurFilterPass:s.BlurFilterPass,ColorMatrixFilter:o.ColorMatrixFilter,DisplacementFilter:a.DisplacementFilter,FXAAFilter:l.FXAAFilter,NoiseFilter:h.NoiseFilter};Object.entries(u).forEach((([t,e])=>{Object.defineProperty(u,t,{get:()=>(i.utils.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e)})})),e.filters=u},4568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(8784),r(4928),r(7752);var i=r(2668),n=r(3080),s=r(8328),o=r(5896),a=r(2384),l=r(6428),h=r(4075),u=r(5144),c=r(2504),d=r(9392),p=r(3132),f=r(9488),g=r(3176),m=r(1292),v=r(8768),y=r(7550),_=r(6432),x=r(4824),b=r(956),E=r(4332),T=r(1236),S=r(6949),w=r(2664),A=r(1148),M=r(8804),R=r(420);e.filters=i.filters,Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.keys(s).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})})),Object.keys(o).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})})),Object.keys(a).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})),Object.keys(l).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})})),Object.keys(h).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})})),Object.keys(u).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})})),Object.keys(c).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})})),Object.keys(d).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})})),Object.keys(p).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})})),Object.keys(f).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})})),Object.keys(g).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})})),Object.keys(m).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})})),Object.keys(v).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}})})),Object.keys(y).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}})})),Object.keys(_).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return _[t]}})})),Object.keys(x).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})})),Object.keys(b).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})})),Object.keys(E).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}})})),Object.keys(T).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return T[t]}})})),Object.keys(S).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}})})),Object.keys(w).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}})})),Object.keys(A).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return A[t]}})})),Object.keys(M).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return M[t]}})})),Object.keys(R).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return R[t]}})}))},6515:t=>{"use strict";var e=String.prototype.replace,r=/%20/g,i="RFC1738",n="RFC3986";t.exports={default:n,formatters:{RFC1738:function(t){return e.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:i,RFC3986:n}},7392:(t,e,r)=>{"use strict";var i=r(4368),n=r(4812),s=r(6515);t.exports={formats:s,parse:n,stringify:i}},4812:(t,e,r)=>{"use strict";var i=r(8252),n=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},l=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},h=function(t,e,r,i){if(t){var s=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),h=a?s.slice(0,a.index):s,u=[];if(h){if(!r.plainObjects&&n.call(Object.prototype,h)&&!r.allowPrototypes)return;u.push(h)}for(var c=0;r.depth>0&&null!==(a=o.exec(s))&&c<r.depth;){if(c+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+s.slice(a.index)+"]"),function(t,e,r,i){for(var n=i?e:l(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if("[]"===a&&r.parseArrays)o=[].concat(n);else{o=r.plainObjects?Object.create(null):{};var h="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(h,10);r.parseArrays||""!==h?!isNaN(u)&&a!==h&&String(u)===h&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[])[u]=n:"__proto__"!==h&&(o[h]=n):o={0:n}}n=o}return n}(u,e,r,i)}};t.exports=function(t,e){var r=function(t){if(!t)return o;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?o.charset:t.charset;return{allowDots:void 0===t.allowDots?o.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:o.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:o.comma,decoder:"function"==typeof t.decoder?t.decoder:o.decoder,delimiter:"string"==typeof t.delimiter||i.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:o.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling}}(e);if(""===t||null==t)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){var r,h={__proto__:null},u=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,c=e.parameterLimit===1/0?void 0:e.parameterLimit,d=u.split(e.delimiter,c),p=-1,f=e.charset;if(e.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?f="utf-8":"utf8=%26%2310003%3B"===d[r]&&(f="iso-8859-1"),p=r,r=d.length);for(r=0;r<d.length;++r)if(r!==p){var g,m,v=d[r],y=v.indexOf("]="),_=-1===y?v.indexOf("="):y+1;-1===_?(g=e.decoder(v,o.decoder,f,"key"),m=e.strictNullHandling?null:""):(g=e.decoder(v.slice(0,_),o.decoder,f,"key"),m=i.maybeMap(l(v.slice(_+1),e),(function(t){return e.decoder(t,o.decoder,f,"value")}))),m&&e.interpretNumericEntities&&"iso-8859-1"===f&&(m=a(m)),v.indexOf("[]=")>-1&&(m=s(m)?[m]:m),n.call(h,g)?h[g]=i.combine(h[g],m):h[g]=m}return h}(t,r):t,c=r.plainObjects?Object.create(null):{},d=Object.keys(u),p=0;p<d.length;++p){var f=d[p],g=h(f,u[f],r,"string"==typeof t);c=i.merge(c,g,r)}return!0===r.allowSparse?c:i.compact(c)}},4368:(t,e,r)=>{"use strict";var i=r(7223),n=r(8252),s=r(6515),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,h=Array.prototype.push,u=function(t,e){h.apply(t,l(e)?e:[e])},c=Date.prototype.toISOString,d=s.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1},f={},g=function t(e,r,s,o,a,h,c,d,g,m,v,y,_,x,b,E){for(var T,S=e,w=E,A=0,M=!1;void 0!==(w=w.get(f))&&!M;){var R=w.get(e);if(A+=1,void 0!==R){if(R===A)throw new RangeError("Cyclic object value");M=!0}void 0===w.get(f)&&(A=0)}if("function"==typeof d?S=d(r,S):S instanceof Date?S=v(S):"comma"===s&&l(S)&&(S=n.maybeMap(S,(function(t){return t instanceof Date?v(t):t}))),null===S){if(a)return c&&!x?c(r,p.encoder,b,"key",y):r;S=""}if("string"==typeof(T=S)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||n.isBuffer(S))return c?[_(x?r:c(r,p.encoder,b,"key",y))+"="+_(c(S,p.encoder,b,"value",y))]:[_(r)+"="+_(String(S))];var P,C=[];if(void 0===S)return C;if("comma"===s&&l(S))x&&c&&(S=n.maybeMap(S,c)),P=[{value:S.length>0?S.join(",")||null:void 0}];else if(l(d))P=d;else{var O=Object.keys(S);P=g?O.sort(g):O}for(var I=o&&l(S)&&1===S.length?r+"[]":r,D=0;D<P.length;++D){var B=P[D],F="object"==typeof B&&void 0!==B.value?B.value:S[B];if(!h||null!==F){var N=l(S)?"function"==typeof s?s(I,B):I:I+(m?"."+B:"["+B+"]");E.set(e,A);var L=i();L.set(f,E),u(C,t(F,N,s,o,a,h,"comma"===s&&x&&l(S)?null:c,d,g,m,v,y,_,x,b,L))}}return C};t.exports=function(t,e){var r,n=t,h=function(t){if(!t)return p;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||p.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s.default;if(void 0!==t.format){if(!o.call(s.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var i=s.formatters[r],n=p.filter;return("function"==typeof t.filter||l(t.filter))&&(n=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===t.allowDots?p.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:p.charsetSentinel,delimiter:void 0===t.delimiter?p.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:p.encode,encoder:"function"==typeof t.encoder?t.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:p.encodeValuesOnly,filter:n,format:r,formatter:i,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:p.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:p.strictNullHandling}}(e);"function"==typeof h.filter?n=(0,h.filter)("",n):l(h.filter)&&(r=h.filter);var c,d=[];if("object"!=typeof n||null===n)return"";c=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var f=a[c];if(e&&"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===f&&e&&e.commaRoundTrip;r||(r=Object.keys(n)),h.sort&&r.sort(h.sort);for(var v=i(),y=0;y<r.length;++y){var _=r[y];h.skipNulls&&null===n[_]||u(d,g(n[_],_,f,m,h.strictNullHandling,h.skipNulls,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.format,h.formatter,h.encodeValuesOnly,h.charset,v))}var x=d.join(h.delimiter),b=!0===h.addQueryPrefix?"?":"";return h.charsetSentinel&&("iso-8859-1"===h.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),x.length>0?b+x:""}},8252:(t,e,r)=>{"use strict";var i=r(6515),n=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},i=0;i<t.length;++i)void 0!==t[i]&&(r[i]=t[i]);return r};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],i=0;i<e.length;++i)for(var n=e[i],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var h=a[l],u=o[h];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:o,prop:h}),r.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(s(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);e.obj[e.prop]=i}}}(e),t},decode:function(t,e,r){var i=t.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(t){return i}},encode:function(t,e,r,n,s){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var l="",h=0;h<a.length;++h){var u=a.charCodeAt(h);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===i.RFC1738&&(40===u||41===u)?l+=a.charAt(h):u<128?l+=o[u]:u<2048?l+=o[192|u>>6]+o[128|63&u]:u<55296||u>=57344?l+=o[224|u>>12]+o[128|u>>6&63]+o[128|63&u]:(h+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(h)),l+=o[240|u>>18]+o[128|u>>12&63]+o[128|u>>6&63]+o[128|63&u])}return l},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(s(t)){for(var r=[],i=0;i<t.length;i+=1)r.push(e(t[i]));return r}return e(t)},merge:function t(e,r,i){if(!r)return e;if("object"!=typeof r){if(s(e))e.push(r);else{if(!e||"object"!=typeof e)return[e,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(r);var o=e;return s(e)&&!s(r)&&(o=a(e,i)),s(e)&&s(r)?(r.forEach((function(r,s){if(n.call(e,s)){var o=e[s];o&&"object"==typeof o&&r&&"object"==typeof r?e[s]=t(o,r,i):e.push(r)}else e[s]=r})),e):Object.keys(r).reduce((function(e,s){var o=r[s];return n.call(e,s)?e[s]=t(e[s],o,i):e[s]=o,e}),o)}}},2392:(t,e,r)=>{"use strict";var i=r(6604),n=r(5456),s=r(1188)(),o=r(872),a=r(6556),l=i("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||l(e)!==e)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,h=!0;if("length"in t&&o){var u=o(t,"length");u&&!u.configurable&&(i=!1),u&&!u.writable&&(h=!1)}return(i||h||!r)&&(s?n(t,"length",e,!0,!0):n(t,"length",e)),t}},7223:(t,e,r)=>{"use strict";var i=r(6604),n=r(2768),s=r(7872),o=r(6556),a=i("%WeakMap%",!0),l=i("%Map%",!0),h=n("WeakMap.prototype.get",!0),u=n("WeakMap.prototype.set",!0),c=n("WeakMap.prototype.has",!0),d=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),f=n("Map.prototype.has",!0),g=function(t,e){for(var r,i=t;null!==(r=i.next);i=r)if(r.key===e)return i.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,i={assert:function(t){if(!i.has(t))throw new o("Side channel does not contain "+s(t))},get:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(t)return h(t,i)}else if(l){if(e)return d(e,i)}else if(r)return function(t,e){var r=g(t,e);return r&&r.value}(r,i)},has:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(t)return c(t,i)}else if(l){if(e)return f(e,i)}else if(r)return function(t,e){return!!g(t,e)}(r,i);return!1},set:function(i,n){a&&i&&("object"==typeof i||"function"==typeof i)?(t||(t=new a),u(t,i,n)):l?(e||(e=new l),p(e,i,n)):(r||(r={key:{},next:null}),function(t,e,r){var i=g(t,e);i?i.value=r:t.next={key:e,next:t.next,value:r}}(r,i,n))}};return i}},5872:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var i=r(4596),n=r.n(i),s=r(6456),o=r.n(s),a=r(6176),l=r.n(a),h=r(5120),u=r.n(h),c=r(6808),d=r.n(c),p=r(3042),f={};f.setAttributes=u(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=d();n()(p.c,f);const g=p.c&&p.c.locals?p.c.locals:void 0},4596:t=>{"use strict";var e=[];function r(t){for(var r=-1,i=0;i<e.length;i++)if(e[i].identifier===t){r=i;break}return r}function i(t,i){for(var s={},o=[],a=0;a<t.length;a++){var l=t[a],h=i.base?l[0]+i.base:l[0],u=s[h]||0,c="".concat(h," ").concat(u);s[h]=u+1;var d=r(c),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,i);i.byIndex=a,e.splice(a,0,{identifier:c,updater:f,references:1})}o.push(c)}return o}function n(t,e){var r=e.domAPI(e);r.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,n){var s=i(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=r(s[o]);e[a].references--}for(var l=i(t,n),h=0;h<s.length;h++){var u=r(s[h]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=l}}},6176:t=>{"use strict";var e={};t.exports=function(t,r){var i=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}},6808:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5120:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},6456:t=>{"use strict";var e,r=(e=[],function(t,r){return e[t]=r,e.filter(Boolean).join("\n")});function i(t,e,i,n){var s;if(i)s="";else{s="",n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,o&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}")}if(t.styleSheet)t.styleSheet.cssText=r(e,s);else{var a=document.createTextNode(s),l=t.childNodes;l[e]&&t.removeChild(l[e]),l.length?t.insertBefore(a,l[e]):t.appendChild(a)}}var n={singleton:null,singletonCounter:0};t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.singletonCounter++,r=n.singleton||(n.singleton=t.insertStyleElement(t));return{update:function(t){i(r,e,!1,t)},remove:function(t){i(r,e,!0,t)}}}},3044:function(t,e,r){"use strict";var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.initialiseFileGenerator=void 0;const n=r(5872),s=r(1040),o=r(6892),a=r(1015),l=r(5744),h=r(5244);e.initialiseFileGenerator=function(){const t=document.createElement("div");t.classList.add(n.default.logger),window.pages["File Generator"].append(t,document.createElement("br"));const e=new a.Logger(t),r=document.getElementById("fileGeneratorSubmit"),u=document.getElementById("fileGeneratorMapInput"),c=document.getElementById("fileGeneratorTileWidthInput"),d=document.getElementById("fileGeneratorTileHeightInput"),p=document.getElementById("fileGeneratorThreadsInput"),f=document.getElementById("fileGeneratorDownload");r.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const t=parseInt(p.value);if(t<1||!Number.isInteger(t))return e.error("Number of threads must be an integer greater than 0");const r=u.files;if(0===r.length)return e.error("Files Missing");const n=r[0];e.log("Scaling map down to half size");const a=yield(0,o.resizeImage)(n,.5),g=parseInt(c.value),m=parseInt(d.value);if(isNaN(g)||g<=0)return e.error("Invalid tile width");if(isNaN(m)||m<=0)return e.error("Invalid tile height");if(g%8!=0||m%8!=0)return e.error("Tile dimensions must be a multiple of 8");if(g>2e3||m>2e3)return e.error("Tile dimensions must not exceed 2000x2000 pixels");e.horizontalLine().log("Splitting full size map").horizontalLine();const v=yield(0,s.splitMapIntoTiles)(n,g,m,1,e).catch((t=>{const r="Error while splitting full size map: "+t;throw e.error(r),new Error(r)}));e.horizontalLine().log("Splitting half size map").horizontalLine();const y=yield(0,s.splitMapIntoTiles)(a,g/2,m/2,.5,e).catch((t=>{const r="Error while splitting half size map: "+t;throw e.error(r),new Error(r)}));if(void 0===v||void 0===y||0===v.length||0===y.length)return e.error("Error splitting maps");e.log("Maps have been split","Now converting files to .basis files").horizontalLine().log("Converting full size map tiles to .basis files","The files being converted out of order is not a bug, so don't worry. The conversion isn't a fast process either.").horizontalLine();const _=[];for(let e=0;e<t;e++)_.push(new Worker("basisWorker.js"));function x(t,r){return new Promise(((n,s)=>i(this,void 0,void 0,(function*(){const i=[],o=t.length,a=(0,h.chunkData)(t,r),l={_count:0,get count(){return this._count},increment:function(){if(this._count++,this._count===o)for(const t of _)t.removeEventListener("message",u);return this.count}};function u(t){const{data:r}=t;if("error"===r.status)return s(`Error while encoding basis file: ${r.error}`);i.push({name:r.name,data:r.texture}),e.log(`${l.increment()}/${o} converted to .basis. File name: ${r.name}`),l.count===o&&n(i)}for(let t=0;t<r;t++){const e=_[t];e.addEventListener("message",u);const r={mode:"encode",data:a[t]};e.postMessage(r)}}))))}const b=Date.now(),E=yield x(v.map((t=>({name:t.name,texture:t.blob}))),t).catch((t=>{e.error(t)}));if(!E)return;const T=Date.now();e.log(`Took ${(T-b)/1e3} seconds to convert all ${E.length} full-size files`).horizontalLine().log("Converting half size map tiles to .basis files").horizontalLine();const S=Date.now(),w=yield x(y.map((t=>({name:t.name,texture:t.blob}))),t).catch((t=>{e.error(t)}));if(!w)return;const A=Date.now();e.log(`Took ${(A-S)/1e3} seconds to convert all ${w.length} half-size files`);for(const t of _)t.terminate();e.log("Zipping up all the files");const M=[],R=[],P=[];for(const t of E)M.push(new File([t.data],t.name.split(".png")[0]+".basis"));for(const t of w)R.push(new File([t.data],t.name.split(".png")[0]+".basis"));for(const t of v)P.push(new File([t.blob],t.name));const C=yield(0,l.downloadZip)(M).blob(),O=yield(0,l.downloadZip)(R).blob(),I=yield(0,l.downloadZip)(P).blob(),D=yield(0,l.downloadZip)([{name:"1xBasis.zip",input:C},{name:"0.5xBasis.zip",input:O},{name:"PNGs.zip",input:I}]).blob(),B=document.createElement("a"),F=URL.createObjectURL(D);B.href=F,B.download=`${n.name.slice(0,n.name.length-4)}.zip`,e.log("Files zipped up. Click the button to download! It should be next to the Create Files button"),f.disabled=!1,f.onclick=()=>B.click()}))))}},1015:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;const i=r(5872),n=r(1276);e.Logger=class{constructor(t){this.logger=t,this.createLogLabel(),this.clearButton=this.createClearButton(),new n.default(this.logger)}log(...t){return this.logMessage("log",...t)}error(...t){return this.logMessage("error",...t)}warn(...t){return this.logMessage("warn",...t)}logMessage(t,...e){for(const r of e){const e=document.createElement("span");"warn"!==t&&"error"!==t||e.classList.add(i.default[t]),e.textContent=`${this.getTime()} | ${r}`,this.clearButton.insertAdjacentElement("beforebegin",e),this.clearButton.insertAdjacentElement("beforebegin",document.createElement("br"))}return this}clear(){return this.logger.innerHTML="",this.createLogLabel(),this.clearButton=this.createClearButton(),this.log("Log cleared")}createClearButton(){const t=document.createElement("button");return t.textContent="Clear log",t.onclick=()=>this.clear(),this.logger.append(t),t}createLogLabel(){const t=document.createElement("h1");return t.textContent="Log:",t.style.marginTop="0",t.style.marginBottom="0.5rem",this.logger.append(t),t}getTime(){const t=new Date,e=t.getSeconds();return`${t.getHours()}:${t.getMinutes()}:${1===e.toString().length?`0${e}`:`${e}`}`}horizontalLine(){return this.clearButton.insertAdjacentElement("beforebegin",document.createElement("hr")),this}}},360:function(t,e,r){"use strict";var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.initialiseMapBuilder=void 0;const n=r(1504),s=r(5872),o=r(4568),a=r(3704),l=r(5244);e.initialiseMapBuilder=function(){const t=1.7320508075688772,e=1.0471975511965976,r={forward:[[1.5,0],[t/2,t]],inverse:[[2/3,0],[-1/3,t/3]]};class h extends o.Container{constructor(t,e,r,i){super(),this.q=t,this.r=e,this.origin=r,this.cullable=!0,this.setGraphic(i.geometry).reposition(r)}setGraphic(t){return this.children.length>0&&this.removeChildAt(0).destroy(),this.addChildAt(new o.Graphics(t),0),this}reposition(t){return this.x=t.x,this.y=t.y,this}}const u=document.getElementById("mapBuilderMapInput"),c=document.getElementById("mapBuilderMapInputError"),d=document.getElementById("mapBuilderCanvas"),p=new o.Application({view:d,resolution:Math.max(window.devicePixelRatio||1,2),resizeTo:window.pages["Map Builder"],autoDensity:!0}),f=new a.Viewport({events:p.renderer.events,screenWidth:d.offsetWidth,screenHeight:d.offsetHeight,worldWidth:1e3,worldHeight:1e3,passiveWheel:!1});f.sortableChildren=!0;const g=new o.Container,m=new o.Container;let v;function y(t){c.textContent=t}function _(t){const e=t.split(/_|@/);return{x:parseInt(e[1]),y:parseInt(e[2])}}function x(){if(!v)return;const r=parseInt(document.getElementById("mapBuilderHexCountX").value),i=parseInt(document.getElementById("mapBuilderHexCountY").value);if(isNaN(r)||isNaN(i))return;g.removeChildren().forEach((t=>t.destroy()));const n=function(e,r){const i={x:1,y:1};return i.x=r.x/(e.x-.5*Math.floor(e.x/2)+(e.y%2==0?.25:0))/2,i.y=r.y/(e.y*t),i}({x:r,y:i},{x:v.texture.width,y:v.texture.height}),s=function(t){const r=[];for(let i=0;i<6;i++){const n=i*e,s=t.x*Math.cos(n)*.5,o=t.y*Math.sin(n)*.5;r.push({x:s,y:o})}return r}(n),a={x:n.x,y:n.y*t/2},l=new o.Graphics;l.lineStyle({width:Math.max(v.texture.width,v.texture.height)/5e3,color:16777215,alpha:1,alignment:0}).beginFill(0,0).drawPolygon(s).endFill();for(let t=0;t<r;t++)for(let e=0;e<i;e++){if(t%2==1&&e===i-1)continue;const{q:r,r:s}=E(t,e),{x:o,y:u}=b({q:r,r:s},n,a),c=new h(r,s,{x:o,y:u},l);g.addChild(c)}g.width=m.width,g.height=m.height}function b(t,e,i){return{x:((r.forward[0][0]*t.q+r.forward[0][1]*t.r)*e.x+i.x)/2,y:((r.forward[1][0]*t.q+r.forward[1][1]*t.r)*e.y+i.y)/2}}function E(t,e){return{q:t,r:e-(t-(1&t))/2}}m.zIndex=5,g.zIndex=10,f.addChild(g,m),window.pages.addEventListener("Map Builder","switchTo",(()=>p.resize())),document.getElementById("mapBuilderHexCountX").addEventListener("change",x),document.getElementById("mapBuilderHexCountY").addEventListener("change",x),f.drag().decelerate({minSpeed:.3,friction:.96}).pinch().wheel({percent:10}),p.stage.addChild(f),u.addEventListener("change",(()=>i(this,void 0,void 0,(function*(){var t;if(c.textContent="",!(null===(t=u.files)||void 0===t?void 0:t.length))return;if(!Number.isInteger(2))throw new Error("Number of threads must be an integer greater than 0");const e=[...u.files],r=[],a=[];for(const t of e){const e=t.name.split(/_|@/);if(!t.name.startsWith("tile"))return y(`File name invalid. File name must start with "tile" (case sensitive). Instead, it started with ${e[0]}`);const i=parseFloat(e[1]),s=parseFloat(e[2]);if(r.push(i),a.push(s),isNaN(i)||isNaN(s)||!Number.isInteger(i)||!Number.isInteger(s))return y("X and Y must be integers. ie, with x = 1 and y = 2, tile_1_2@0.5x.basis");if("0.5x"!==e[3].slice(0,4)&&"1x"!==e[3].slice(0,2))return y("File resolution must be either 0.5. ie, tile_0_0@0.5x.basis");if(".basis"!==(0,n.extname)(t.name))return y("File must be a basis file. These can be generated from png files in the File Generator tab")}const h=Math.max(...r)+1,p=Math.max(...a)+1,b={tileHeight:0,tileWidth:0,tiles:[]},E=[];for(let t=0;t<h;t++)for(let r=0;r<p;r++){const i=e.find((e=>{const i=_(e.name);return i.x===t&&i.y===r}));if(void 0===i)return y(`Missing basis file at position x = ${t}, y = ${r}`);E.push({file:i,name:`${t}_${r}`})}for(const t of f.children)t.removeChildren().forEach((t=>t.destroy()));yield function(t,e){return new Promise(((r,n)=>i(this,void 0,void 0,(function*(){const i=[],o=t.length,a=t.length;for(let t=0;t<2;t++)i.push(new Worker("basisWorker.js"));const h=(0,l.chunkData)(t,e);let u=0;const c=document.getElementById("mapBuilderCanvasProgressBarFill"),d=document.getElementById("mapBuilderCanvasLoading");d.classList.remove(s.default.hidden);for(let t=0;t<2;t++){const e=i[t],l=new OffscreenCanvas(0,0);e.addEventListener("message",(t=>{const{data:e}=t;if("error"===e.status)return n("Error while transcoding .basis file: "+e.error);const l=document.createElement("img");l.onload=()=>{if(b.tileHeight=l.height,b.tileWidth=l.width,b.tiles.push({x:parseInt(e.name.split("_")[0]),y:parseInt(e.name.split("_")[1]),texture:l}),URL.revokeObjectURL(e.blobURL),u++,c.style.width=u/a*100+"%",u===o){c.style.width="100%",d.classList.add(s.default.fadeOut2Seconds),setTimeout((()=>{d.classList.add(s.default.hidden),d.classList.remove(s.default.fadeOut2Seconds),c.style.width="0"}),5e3);for(const t of i)t.terminate();r()}},l.src=e.blobURL}));const p={canvas:l,data:h[t],mode:"transcode"};e.postMessage(p,[l])}}))))}(E,2);const T=document.createElement("canvas"),S=T.getContext("2d");if(null===S)return y("HTML5 2D canvas not supported");T.width=b.tileWidth*h,T.height=b.tileHeight*p;for(const t of b.tiles)S.drawImage(t.texture,t.x*b.tileWidth,t.y*b.tileHeight);const w=o.Texture.from(T),A=Math.max(window.devicePixelRatio||1,2),M=Math.max(d.width,d.height)/A,R=Math.min(d.width/A/w.width,d.height/A/w.height);v=new o.Sprite(w),v.setTransform(0,0),v.width=w.width*R,v.height=w.height*R,m.width=v.width,m.height=v.height,g.width=v.width,g.height=v.height,m.setTransform(0,0),g.setTransform(0,0),f.worldWidth=M,f.worldHeight=M,m.addChild(v),f.addChild(m,g),f.setTransform((d.width/A-f.width)/2,(d.height/A-f.height)/2,1,1),x()})))),window.updateHexLayer=x,window.updateHexLayer=x}},6892:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resizeImage=void 0,e.resizeImage=function(t,e){return new Promise(((r,i)=>{const n=URL.createObjectURL(t),s=document.createElement("canvas"),o=s.getContext("2d");if(null===o)return i("Your browser does not support the HTML5 Canvas Rendering Context");const a=new Image;a.onload=()=>{URL.revokeObjectURL(n);const t=a.width*e,l=a.height*e;s.width=t,s.height=l,o.drawImage(a,0,0,t,l),s.toBlob((t=>{if(null===t)return i("Could not resize image. HTML5 canvas data could not be turned into blob");r(t)}),"image/png",1)},a.onerror=()=>i("Error resizing map. Maybe the uploaded image is invalid?"),a.src=n}))}},5712:function(t,e,r){"use strict";var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=r(5872),s=r(3154),o=r(1276),a=r(3044),l=r(360);(()=>{const t="File Generator",e={"File Generator":!1,"Map Builder":!1};function r(t,e,r){const i=document.getElementById(t);if(null===i)throw new Error("Could not find element with id "+t);i.classList.add(n.default.tooltip);const s=document.createElement("div");return s.classList.add(n.default.tooltiptext,n.default[`tooltiptext_${r}`]),s.textContent=e,i.appendChild(s),s}function h(){const t=[{name:"General",id:"General"},{name:"Map Meta Data",id:"MetaData"},{name:"Filters",id:"Filters"}],e={},i=[...document.getElementById("mapBuilderToolbar").children],a=document.getElementById("mapBuilderCanvasContainer");for(let l=0;l<i.length;l++){const h=i[l],u=t.find((t=>t.id===h.id.slice(17)));if(!u)throw new Error(`Could not create toolbar item. Toolbar item with id "${h.id}Form" not found`);h.classList.add(n.default.toolbaritem),h.id&&r(h.id,u.name,"right");const c=document.getElementById(`${h.id}Form`);if(null===c)throw new Error(`Error while creating Map Builder Toolbar: Element with ID "${h.id}" not found`);c.classList.add(n.default.mapBuilderForm);const d=[...c.children];function p(){let t=-1/0;d.forEach((e=>{e.offsetWidth>t&&(t=e.offsetWidth)})),c.style.width=t+"px"}for(const f of[...c.children])"INPUT"===f.tagName&&f.addEventListener("click",(()=>f.focus()));new o.default(c,{autoHide:!0}),p(),c.classList.add(n.default.hidden),h.addEventListener("click",(()=>{e[h.id].classList.toggle(n.default.hidden),p()}));new s.default(a,{target:c,draggable:!0,hideDefaultLines:!0,hideChildMoveableDefaultLines:!0,hideThrottleDragRotateLine:!0,origin:!1,preventClickEventOnDrag:!1}).on("drag",(({left:t,top:e,right:r,bottom:i,target:n})=>{let s=t,o=e;t<0&&(s=0),r<0&&(s=t+r),e<0&&(o=0),i<0&&(o=e+i),n.style.left=`${s}px`,n.style.top=`${o}px`})),e[h.id]=c}}window.pages={"File Generator":document.getElementById("fileGenerator"),"Map Builder":document.getElementById("mapBuilder"),switchPage(r){return i(this,void 0,void 0,(function*(){let i=!1;for(const t of Object.keys(window.pages)){const s=pages[t];if(void 0===s||"function"==typeof s)return;if(t===r){switch(s.classList.remove(n.default.hidden),localStorage.setItem("s",t),i=!0,r){case"File Generator":!1===e["File Generator"]&&(e["File Generator"]=!0,(0,a.initialiseFileGenerator)());break;case"Map Builder":if(!1===e["Map Builder"]){e["Map Builder"]=!0,(0,l.initialiseMapBuilder)(),h();break}}for(const{callback:e}of this.eventListeners.filter((e=>"switchTo"===e.on&&e.page===t)))e()}else{s.classList.add(n.default.hidden);for(const{callback:e}of this.eventListeners.filter((e=>"switchFrom"===e.on&&e.page===t)))e()}}i||(window.pages.switchPage(t),console.warn(`Page with name ${r} not found`))}))},addEventListener(t,e,r){this.eventListeners.push({page:t,on:e,callback:r})},eventListeners:[]},function(){document.getElementById("mainContainer").classList.add(n.default.mainContainer);const e=localStorage.getItem("s"),i=null===e?t:e,s=document.getElementById("navigationBar");s.classList.add(n.default.navigationBar);for(const t of Object.keys(window.pages)){const e=pages[t];if("function"==typeof e)break;e.classList.add(n.default.container);const r=document.createElement("div");r.classList.add(n.default.navigationBarItem);const i=document.createElement("a");i.textContent=t,i.onclick=()=>window.pages.switchPage(t),r.append(i),s.append(r)}window.pages["Map Builder"].classList.add(n.default.mapBuilder);const o=document.getElementById("fileGenerator"),a=document.getElementById("fileGeneratorMain"),l=document.getElementById("mapBuilderMapInputError"),h=document.getElementById("mapBuilderToolbar"),u=document.getElementById("mapBuilderCanvasLoading"),c=document.getElementById("mapBuilderCanvasLoadingText"),d=document.getElementById("mapBuilderCanvasProgressBar"),p=document.getElementById("mapBuilderCanvasProgressBarFill"),f=document.getElementById("mapBuilderCanvasContainer"),g=document.getElementById("mapBuilderToolbarFiltersForm"),m=document.getElementById("version");o.classList.add(n.default.fileGenerator),a.classList.add(n.default.fileGeneratorMain),l.classList.add(n.default.error),h.classList.add(n.default.toolbar),u.classList.add(n.default.mapBuilderCanvasLoading,n.default.hidden),c.classList.add(n.default.mapBuilderCanvasLoadingText),d.classList.add(n.default.mapBuilderCanvasProgressBar),p.classList.add(n.default.mapBuilderCanvasProgressBarFill),f.classList.add(n.default.mapBuilderCanvasContainer),g.classList.add(n.default.mapBuilderToolbarFiltersForm),m.classList.add(n.default.version),r("mapBuilderHexCountXLabel","The number of hexes the map has horizontally","up"),r("mapBuilderHexCountYLabel","The number of hexes the map has vertically","up"),window.pages.switchPage(i)}()})()},1040:function(t,e){"use strict";var r=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.splitMapIntoTiles=void 0,e.splitMapIntoTiles=function(t,e,i,n,s){return new Promise(((o,a)=>r(this,void 0,void 0,(function*(){const r=new Blob([yield t.arrayBuffer()],{type:"image/png"}),l=URL.createObjectURL(r),h=document.createElement("canvas"),u=h.getContext("2d");if(null===u)return a("Your browser does not support this method of image resizing. If you're not on Safari... then something is wrong lol");const c=new Image;c.onload=()=>{h.width=c.width,h.height=c.height;const t=c.width/e,r=c.height/i;if(!Number.isInteger(t)||!Number.isInteger(r))return a("Tile width and height do not produce an integer amount of tiles");s.log(`Split map is ${t}x${r} tiles`),u.drawImage(c,0,0);const d=[];for(let s=0;s<t;s++)for(let t=0;t<r;t++){const r=`tile_${s}_${t}@${n}x.png`;d.push(new Promise(((n,o)=>{const a=document.createElement("canvas"),l=a.getContext("2d");a.width=e,a.height=i,l.drawImage(h,s*e,t*i,e,i,0,0,e,i),a.toBlob((t=>{if(null===t)return o("Could not split map. HTML5 canvas data could not be turned into blob");n({name:r,blob:t})}),"image/png")})))}Promise.all(d).then((t=>{URL.revokeObjectURL(l),o(t)}))},c.onerror=()=>a("Error resizing map. Maybe the uploaded image is invalid?"),c.src=l}))))}},5244:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=e.chunkData=void 0,e.chunkData=function(t,e){const r=[];for(let i=e;i>0;i--)r.push(t.splice(0,Math.ceil(t.length/i)));return r},e.clamp=function(t,e,r){return Math.max(Math.min(t,r),e)}},2980:function(t,e,r){var i;t=r.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r.g&&r.g;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,l=36,h=1,u=26,c=38,d=700,p=72,f=128,g="-",m=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-h,b=Math.floor,E=String.fromCharCode;function T(t){throw new RangeError(_[t])}function S(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function w(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+S((t=t.replace(y,".")).split("."),e).join(".")}function A(t){for(var e,r,i=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function M(t){return S(t,(function(t){var e="";return t>65535&&(e+=E((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=E(t)})).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,r){var i=0;for(t=r?b(t/d):t>>1,t+=b(t/e);t>x*u>>1;i+=l)t=b(t/x);return b(i+(x+1)*t/(t+c))}function C(t){var e,r,i,n,s,o,c,d,m,v,y,_=[],x=t.length,E=0,S=f,w=p;for((r=t.lastIndexOf(g))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&T("not-basic"),_.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<x;){for(s=E,o=1,c=l;n>=x&&T("invalid-input"),((d=(y=t.charCodeAt(n++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||d>b((a-E)/o))&&T("overflow"),E+=d*o,!(d<(m=c<=w?h:c>=w+u?u:c-w));c+=l)o>b(a/(v=l-m))&&T("overflow"),o*=v;w=P(E-s,e=_.length+1,0==s),b(E/e)>a-S&&T("overflow"),S+=b(E/e),E%=e,_.splice(E++,0,S)}return M(_)}function O(t){var e,r,i,n,s,o,c,d,m,v,y,_,x,S,w,M=[];for(_=(t=A(t)).length,e=f,r=0,s=p,o=0;o<_;++o)(y=t[o])<128&&M.push(E(y));for(i=n=M.length,n&&M.push(g);i<_;){for(c=a,o=0;o<_;++o)(y=t[o])>=e&&y<c&&(c=y);for(c-e>b((a-r)/(x=i+1))&&T("overflow"),r+=(c-e)*x,e=c,o=0;o<_;++o)if((y=t[o])<e&&++r>a&&T("overflow"),y==e){for(d=r,m=l;!(d<(v=m<=s?h:m>=s+u?u:m-s));m+=l)w=d-v,S=l-v,M.push(E(R(v+w%S,0))),d=b(w/S);M.push(E(R(d,0))),s=P(r,x,i==n),r=0,++i}++r,++e}return M.join("")}o={version:"1.4.1",ucs2:{decode:A,encode:M},decode:C,encode:O,toASCII:function(t){return w(t,(function(t){return v.test(t)?"xn--"+O(t):t}))},toUnicode:function(t){return w(t,(function(t){return m.test(t)?C(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return o}.call(e,r,e,t))||(t.exports=i)}()},4776:(t,e,r)=>{"use strict";var i=r(2980);function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(l),u=["%","/","?",";","#"].concat(h),c=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(7392);function y(t,e,r){if(t&&"object"==typeof t&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}n.prototype.parse=function(t,e,r){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",l=t.split(o);l[0]=l[0].replace(/\\/g,"/");var y=t=l.join(o);if(y=y.trim(),!r&&1===t.split("#").length){var _=a.exec(y);if(_)return this.path=y,this.href=y,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(y);if(x){var b=(x=x[0]).toLowerCase();this.protocol=b,y=y.substr(x.length)}if(r||x||y.match(/^\/\/[^@/]+@[^@/]+/)){var E="//"===y.substr(0,2);!E||x&&g[x]||(y=y.substr(2),this.slashes=!0)}if(!g[x]&&(E||x&&!m[x])){for(var T,S,w=-1,A=0;A<c.length;A++){-1!==(M=y.indexOf(c[A]))&&(-1===w||M<w)&&(w=M)}-1!==(S=-1===w?y.lastIndexOf("@"):y.lastIndexOf("@",w))&&(T=y.slice(0,S),y=y.slice(S+1),this.auth=decodeURIComponent(T)),w=-1;for(A=0;A<u.length;A++){var M;-1!==(M=y.indexOf(u[A]))&&(-1===w||M<w)&&(w=M)}-1===w&&(w=y.length),this.host=y.slice(0,w),y=y.slice(w),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var P=this.hostname.split(/\./),C=(A=0,P.length);A<C;A++){var O=P[A];if(O&&!O.match(d)){for(var I="",D=0,B=O.length;D<B;D++)O.charCodeAt(D)>127?I+="x":I+=O[D];if(!I.match(d)){var F=P.slice(0,A),N=P.slice(A+1),L=O.match(p);L&&(F.push(L[1]),N.unshift(L[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=i.toASCII(this.hostname));var k=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+k,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!f[b])for(A=0,C=h.length;A<C;A++){var G=h[A];if(-1!==y.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),y=y.split(G).join(j)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var z=y.indexOf("?");if(-1!==z?(this.search=y.substr(z),this.query=y.substr(z+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,z)):e&&(this.search="",this.query={}),y&&(this.pathname=y),m[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var W=this.search||"";this.path=k+W}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(s=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),e+n+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+i},n.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if("string"==typeof t){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var h=a[l];"protocol"!==h&&(r[h]=t[h])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var d=u[c];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",v=r.search||"";r.path=f+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=_||y||r.host&&t.pathname,b=x,E=r.pathname&&r.pathname.split("/")||[],T=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(T&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),x=x&&(""===p[0]||""===E[0])),_)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),r.search=t.search,r.query=t.query;else if(null!=t.search){if(T)r.host=E.shift(),r.hostname=r.host,(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.hostname=R.shift(),r.host=r.hostname);return r.search=t.search,r.query=t.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=E.slice(-1)[0],w=(r.host||t.host||E.length>1)&&("."===S||".."===S)||""===S,A=0,M=E.length;M>=0;M--)"."===(S=E[M])?E.splice(M,1):".."===S?(E.splice(M,1),A++):A&&(E.splice(M,1),A--);if(!x&&!b)for(;A--;A)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),w&&"/"!==E.join("/").substr(-1)&&E.push("");var R,P=""===E[0]||E[0]&&"/"===E[0].charAt(0);T&&(r.hostname=P?"":E.length?E.shift():"",r.host=r.hostname,(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.hostname=R.shift(),r.host=r.hostname));return(x=x||r.host&&E.length)&&!P&&E.unshift(""),E.length>0?r.pathname=E.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){return"string"==typeof t&&(t=y(t)),t instanceof n?t.format():n.prototype.format.call(t)},e.Url=n},6204:()=>{},5744:(t,e,r)=>{"use strict";r.r(e),r.d(e,{downloadZip:()=>A,makeZip:()=>M,predictLength:()=>w}),"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(t,e,r){const i=Number(0xffffffffn&e),n=Number(e>>32n);this.setUint32(t+(r?0:4),i,r),this.setUint32(t+(r?4:0),n,r)}});var i=t=>new DataView(new ArrayBuffer(t)),n=t=>new Uint8Array(t.buffer||t),s=t=>(new TextEncoder).encode(String(t)),o=t=>Math.min(4294967295,Number(t)),a=t=>Math.min(65535,Number(t));function l(t,e){if(void 0===e||e instanceof Date||(e=new Date(e)),t instanceof File)return{isFile:1,t:e||new Date(t.lastModified),i:t.stream()};if(t instanceof Response)return{isFile:1,t:e||new Date(t.headers.get("Last-Modified")||Date.now()),i:t.body};if(void 0===e)e=new Date;else if(isNaN(e))throw new Error("Invalid modification date.");if(void 0===t)return{isFile:0,t:e};if("string"==typeof t)return{isFile:1,t:e,i:s(t)};if(t instanceof Blob)return{isFile:1,t:e,i:t.stream()};if(t instanceof Uint8Array||t instanceof ReadableStream)return{isFile:1,t:e,i:t};if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return{isFile:1,t:e,i:n(t)};if(Symbol.asyncIterator in t)return{isFile:1,t:e,i:h(t[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function h(t,e=t){return new ReadableStream({async pull(e){let r=0;for(;e.desiredSize>r;){const i=await t.next();if(!i.value){e.close();break}{const t=u(i.value);e.enqueue(t),r+=t.byteLength}}},cancel(t){e.throw?.(t)}})}function u(t){return"string"==typeof t?s(t):t instanceof Uint8Array?t:n(t)}function c(t,e,r){let[i,o]=function(t){return t?t instanceof Uint8Array?[t,1]:ArrayBuffer.isView(t)||t instanceof ArrayBuffer?[n(t),1]:[s(t),0]:[void 0,0]}(e);if(t instanceof File)return{o:p(i||s(t.name)),u:BigInt(t.size),l:o};if(t instanceof Response){const e=t.headers.get("content-disposition"),n=e&&e.match(/;\s*filename\*?=["']?(.*?)["']?$/i),a=n&&n[1]||t.url&&new URL(t.url).pathname.split("/").findLast(Boolean),l=a&&decodeURIComponent(a),h=r||+t.headers.get("content-length");return{o:p(i||s(l)),u:BigInt(h),l:o}}return i=p(i,void 0!==t||void 0!==r),"string"==typeof t?{o:i,u:BigInt(s(t).length),l:o}:t instanceof Blob?{o:i,u:BigInt(t.size),l:o}:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?{o:i,u:BigInt(t.byteLength),l:o}:{o:i,u:d(t,r),l:o}}function d(t,e){return e>-1?BigInt(e):t?void 0:0n}function p(t,e=1){if(!t||t.every((t=>47===t)))throw new Error("The file must have a name.");if(e)for(;47===t[t.length-1];)t=t.subarray(0,-1);else 47!==t[t.length-1]&&(t=new Uint8Array([...t,47]));return t}var f=new Uint32Array(256);for(let t=0;t<256;++t){let e=t;for(let t=0;t<8;++t)e=e>>>1^(1&e&&3988292384);f[t]=e}function g(t,e=0){e^=-1;for(var r=0,i=t.length;r<i;r++)e=e>>>8^f[255&e^t[r]];return(-1^e)>>>0}function m(t,e,r=0){const i=t.getSeconds()>>1|t.getMinutes()<<5|t.getHours()<<11,n=t.getDate()|t.getMonth()+1<<5|t.getFullYear()-1980<<9;e.setUint16(r,i,1),e.setUint16(r+2,n,1)}function v({o:t,l:e},r){return 8*(!e||(r??function(t){try{y.decode(t)}catch{return 0}return 1}(t)))}var y=new TextDecoder("utf8",{fatal:1});function _(t,e=0){const r=i(30);return r.setUint32(0,1347093252),r.setUint32(4,754976768|e),m(t.t,r,10),r.setUint16(26,t.o.length,1),n(r)}async function*x(t){let{i:e}=t;if("then"in e&&(e=await e),e instanceof Uint8Array)yield e,t.m=g(e,0),t.u=BigInt(e.length);else{t.u=0n;const r=e.getReader();for(;;){const{value:e,done:i}=await r.read();if(i)break;t.m=g(e,t.m),t.u+=BigInt(e.length),yield e}}}function b(t,e){const r=i(16+(e?8:0));return r.setUint32(0,1347094280),r.setUint32(4,t.isFile?t.m:0,1),e?(r.setBigUint64(8,t.u,1),r.setBigUint64(16,t.u,1)):(r.setUint32(8,o(t.u),1),r.setUint32(12,o(t.u),1)),n(r)}function E(t,e,r=0,s=0){const a=i(46);return a.setUint32(0,1347092738),a.setUint32(4,755182848),a.setUint16(8,2048|r),m(t.t,a,12),a.setUint32(16,t.isFile?t.m:0,1),a.setUint32(20,o(t.u),1),a.setUint32(24,o(t.u),1),a.setUint16(28,t.o.length,1),a.setUint16(30,s,1),a.setUint16(40,t.isFile?33204:16893,1),a.setUint32(42,o(e),1),n(a)}function T(t,e,r){const s=i(r);return s.setUint16(0,1,1),s.setUint16(2,r-4,1),16&r&&(s.setBigUint64(4,t.u,1),s.setBigUint64(12,t.u,1)),s.setBigUint64(r-8,e,1),n(s)}function S(t){return t instanceof File||t instanceof Response?[[t],[t]]:[[t.input,t.name,t.size],[t.input,t.lastModified]]}var w=t=>function(t){let e=BigInt(22),r=0n,i=0;for(const n of t){if(!n.o)throw new Error("Every file must have a non-empty name.");if(void 0===n.u)throw new Error(`Missing size for file "${(new TextDecoder).decode(n.o)}".`);const t=n.u>=0xffffffffn,s=r>=0xffffffffn;r+=BigInt(46+n.o.length+(t&&8))+n.u,e+=BigInt(n.o.length+46+(12*s|28*t)),i||(i=t)}return(i||r>=0xffffffffn)&&(e+=BigInt(76)),e+r}(function*(t){for(const e of t)yield c(...S(e)[0])}(t));function A(t,e={}){const r={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof e.length||Number.isInteger(e.length))&&e.length>0&&(r["Content-Length"]=String(e.length)),e.metadata&&(r["Content-Length"]=String(w(e.metadata))),new Response(M(t,e),{headers:r})}function M(t,e={}){const r=function(t){const e=t[Symbol.iterator in t?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const t=await e.next();if(t.done)return t;const[r,i]=S(t.value);return{done:0,value:Object.assign(l(...i),c(...r))}},throw:e.throw?.bind(e),[Symbol.asyncIterator](){return this}}}(t);return h(async function*(t,e){const r=[];let s=0n,l=0n,h=0;for await(const i of t){const t=v(i,e.buffersAreUTF8);yield _(i,t),yield i.o,i.isFile&&(yield*x(i));const n=i.u>=0xffffffffn,o=12*(s>=0xffffffffn)|28*n;yield b(i,n),r.push(E(i,s,t,o)),r.push(i.o),o&&r.push(T(i,s,o)),n&&(s+=8n),l++,s+=BigInt(46+i.o.length)+i.u,h||(h=n)}let u=0n;for(const t of r)yield t,u+=BigInt(t.length);if(h||s>=0xffffffffn){const t=i(76);t.setUint32(0,1347094022),t.setBigUint64(4,BigInt(44),1),t.setUint32(12,755182848),t.setBigUint64(24,l,1),t.setBigUint64(32,l,1),t.setBigUint64(40,u,1),t.setBigUint64(48,s,1),t.setUint32(56,1347094023),t.setBigUint64(64,s+u,1),t.setUint32(72,1,1),yield n(t)}const c=i(22);c.setUint32(0,1347093766),c.setUint16(8,a(l),1),c.setUint16(10,a(l),1),c.setUint32(12,o(u),1),c.setUint32(16,o(s),1),yield n(c)}(r,e),r)}},3704:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Animate:()=>Ei,Bounce:()=>Si,Clamp:()=>Ai,ClampZoom:()=>Ri,Decelerate:()=>Oi,Drag:()=>Di,Follow:()=>Fi,InputManager:()=>Yi,MouseEdges:()=>Li,Pinch:()=>Ui,Plugin:()=>gi,PluginManager:()=>$i,Snap:()=>ji,SnapZoom:()=>zi,Viewport:()=>Ki,Wheel:()=>Xi});var i=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(i||{}),n=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(n||{}),s=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(s||{}),o=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(o||{}),a=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(a||{}),l=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(l||{}),h=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(h||{}),u=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(u||{}),c=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(c||{}),d=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(d||{}),p=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(p||{}),f=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(f||{}),g=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(g||{}),m=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(m||{}),v=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(v||{}),y=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(y||{}),_=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(_||{}),x=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(x||{});const b={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")},E={ADAPTER:b,RESOLUTION:1,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var T=/iPhone/i,S=/iPod/i,w=/iPad/i,A=/\biOS-universal(?:.+)Mac\b/i,M=/\bAndroid(?:.+)Mobile\b/i,R=/Android/i,P=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,C=/Silk/i,O=/Windows Phone/i,I=/\bWindows(?:.+)ARM\b/i,D=/BlackBerry/i,B=/BB10/i,F=/Opera Mini/i,N=/\b(CriOS|Chrome)(?:.+)Mobile/i,L=/Mobile(?:.+)Firefox\b/i,k=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};const U=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var n=function(t){return function(e){return e.test(t)}}(r),s={apple:{phone:n(T)&&!n(O),ipod:n(S),tablet:!n(T)&&(n(w)||k(e))&&!n(O),universal:n(A),device:(n(T)||n(S)||n(w)||n(A)||k(e))&&!n(O)},amazon:{phone:n(P),tablet:!n(P)&&n(C),device:n(P)||n(C)},android:{phone:!n(O)&&n(P)||!n(O)&&n(M),tablet:!n(O)&&!n(P)&&!n(M)&&(n(C)||n(R)),device:!n(O)&&(n(P)||n(C)||n(M)||n(R))||n(/\bokhttp\b/i)},windows:{phone:n(O),tablet:n(I),device:n(O)||n(I)},other:{blackberry:n(D),blackberry10:n(B),opera:n(F),firefox:n(L),chrome:n(N),device:n(D)||n(B)||n(F)||n(L)||n(N)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator);E.RETINA_PREFIX=/@([0-9\.]+)x/,E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var G=r(9328),j=(r(1948),r(4776));const H={parse:j.parse,format:j.format,resolve:j.resolve};const z={};function W(t,e,r=3){if(z[e])return;let i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(i))),z[e]=!0}let X;var Y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};const V=function(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[s.NORMAL_NPM]=s.NORMAL,t[s.ADD_NPM]=s.ADD,t[s.SCREEN_NPM]=s.SCREEN,e[s.NORMAL]=s.NORMAL_NPM,e[s.ADD]=s.ADD_NPM,e[s.SCREEN]=s.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}();function $(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Float32Array,Uint32Array,Int32Array,Uint8Array;function q(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function K(t){return!(t&t-1||!t)}function Z(t){let e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,r=((t>>>=r)>15?1:0)<<2,e|=r,r=((t>>>=r)>3?1:0)<<1,e|=r,e|(t>>>=r)>>1}function Q(t,e,r){const i=t.length;let n;if(e>=i||0===r)return;const s=i-(r=e+r>i?i-e:r);for(n=e;n<s;++n)t[n]=t[n+r];t.length=s}let J=0;function tt(){return++J}const et=class{constructor(t,e,r,i){this.left=t,this.top=e,this.right=r,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let rt=et;rt.EMPTY=new et(0,0,0,0);const it={},nt=Object.create(null),st=Object.create(null);let ot;function at(t,e=1){const r=E.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}var lt=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(lt||{});const ht=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},ut=(t,e)=>ht(t).priority??e,ct={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(ht).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(...t){return t.map(ht).forEach((t=>{t.type.forEach((e=>{const r=this._addHandlers,i=this._queue;r[e]?r[e](t):(i[e]=i[e]||[],i[e].push(t))}))})),this},handle(t,e,r){const i=this._addHandlers,n=this._removeHandlers;if(i[t]||n[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,n[t]=r;const s=this._queue;return s[t]&&(s[t].forEach((t=>e(t))),delete s[t]),this},handleByMap(t,e){return this.handle(t,(t=>{e[t.name]=t.ref}),(t=>{delete e[t.name]}))},handleByList(t,e,r=-1){return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>ut(e,r)-ut(t,r))))}),(t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)}))}};class dt{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const pt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ft(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}class gt{constructor(){this.data=0,this.blendMode=s.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==s.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new gt;return t.depthTest=!1,t.blend=!0,t}}const mt=[];function vt(t,e){if(!t)return null;let r="";if("string"==typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(r=e[1].toLowerCase())}for(let i=mt.length-1;i>=0;--i){const n=mt[i];if(n.test&&n.test(t,r))return new n(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class yt{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,i,n,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,c=h.length;u<c;u++)h[u][l](t,e,r,i,n,s,o,a);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(yt.prototype,{dispatch:{value:yt.prototype.emit},run:{value:yt.prototype.emit}});class _t{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new yt("setRealSize"),this.onUpdate=new yt("update"),this.onError=new yt("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class xt extends _t{constructor(t,e){const{width:r,height:i}=e||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=t}upload(t,e,r){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===f.UNPACK);const n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,r.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,r.internalFormat,n,s,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const bt={scaleMode:c.NEAREST,format:a.RGBA,alphaMode:f.NPM},Et=class extends G{constructor(t=null,e=null){super(),e=Object.assign({},Et.defaultOptions,e);const{alphaMode:r,mipmap:i,anisotropicLevel:n,scaleMode:s,width:o,height:a,wrapMode:l,format:h,type:u,target:c,resolution:d,resourceOptions:p}=e;!t||t instanceof _t||((t=vt(t,p)).internal=!0),this.resolution=d||E.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=n,this._wrapMode=l,this._scaleMode=s,this.format=h,this.type=u,this.target=c,this.alphaMode=r,this.uid=tt(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=K(this.realWidth)&&K(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete st[this.cacheId],delete nt[this.cacheId],this.cacheId=null),this.dispose(),Et.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=E.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let n=null;if(i)n=t;else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${tt()}`}n=t._pixiId}let s=st[n];if(i&&r&&!s)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return s||(s=new Et(t,e),s.cacheId=n,Et.addToCache(s,n)),s}static fromBuffer(t,e,r,i){t=t||new Float32Array(e*r*4);const n=new xt(t,{width:e,height:r}),s=t instanceof Float32Array?h.FLOAT:h.UNSIGNED_BYTE;return new Et(n,Object.assign({},bt,i||{width:e,height:r,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),st[e]&&st[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),st[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=st[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete st[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete st[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Tt=Et;Tt.defaultOptions={mipmap:p.POW2,anisotropicLevel:0,scaleMode:c.LINEAR,wrapMode:d.CLAMP,alphaMode:f.UNPACK,target:l.TEXTURE_2D,format:a.RGBA,type:h.UNSIGNED_BYTE},Tt._globalBatch=0;class St{constructor(){this.texArray=null,this.blend=0,this.type=o.TRIANGLES,this.start=0,this.size=0,this.data=null}}let wt=0;class At{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=wt++,this.disposeRunner=new yt("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?x.ELEMENT_ARRAY_BUFFER:x.ARRAY_BUFFER}get index(){return this.type===x.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new At(t)}}class Mt{constructor(t,e=0,r=!1,i=h.FLOAT,n,s,o,a=1){this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=s,this.instance=o,this.divisor=a}destroy(){this.buffer=null}static from(t,e,r,i,n){return new Mt(t,e,r,i,n)}}const Rt={Float32Array,Uint32Array,Int32Array,Uint8Array};const Pt={5126:4,5123:2,5121:1};let Ct=0;const Ot={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class It{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Ct++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new yt("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,i=!1,n,s,o,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof At||(e instanceof Array&&(e=new Float32Array(e)),e=new At(e));const l=t.split("|");if(l.length>1){for(let t=0;t<l.length;t++)this.addAttribute(l[t],e,r,i,n);return this}let h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Mt(h,r,i,n,s,o,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof At||(t instanceof Array&&(t=new Uint16Array(t)),t=new At(t)),t.type=x.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],r=new At;let i;for(i in this.attributes){const r=this.attributes[i],n=this.buffers[r.buffer];t.push(n.data),e.push(r.size*Pt[r.type]/4),r.buffer=0}for(r.data=function(t,e){let r=0,i=0;const n={};for(let n=0;n<t.length;n++)i+=e[n],r+=t[n].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let r=0;r<t.length;r++){const l=e[r],h=t[r],u=$(h);n[u]||(n[u]=new Rt[u](s)),o=n[u];for(let t=0;t<h.length;t++)o[(t/l|0)*i+a+t%l]=h[t];a+=l}return new Float32Array(s)}(t,e),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new It;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new At(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new Mt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new It,r=[],i=[],n=[];let s;for(let e=0;e<t.length;e++){s=t[e];for(let t=0;t<s.buffers.length;t++)i[t]=i[t]||0,i[t]+=s.buffers[t].data.length,n[t]=0}for(let t=0;t<s.buffers.length;t++)r[t]=new(Ot[$(s.buffers[t].data)])(i[t]),e.buffers[t]=new At(r[t]);for(let e=0;e<t.length;e++){s=t[e];for(let t=0;t<s.buffers.length;t++)r[t].set(s.buffers[t].data,n[t]),n[t]+=s.buffers[t].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER;let r=0,i=0,n=0,o=0;for(let t=0;t<s.buffers.length;t++)if(s.buffers[t]!==s.indexBuffer){o=t;break}for(const t in s.attributes){const e=s.attributes[t];(0|e.buffer)===o&&(i+=e.size*Pt[e.type]/4)}for(let s=0;s<t.length;s++){const a=t[s].indexBuffer.data;for(let t=0;t<a.length;t++)e.indexBuffer.data[t+n]+=r;r+=t[s].buffers[o].data.length/i,n+=a.length}}return e}}class Dt extends It{constructor(t=!1){super(),this._buffer=new At(null,t,!1),this._indexBuffer=new At(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,h.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,h.FLOAT).addAttribute("aColor",this._buffer,4,!0,h.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,h.FLOAT).addIndex(this._indexBuffer)}}const Bt=2*Math.PI,Ft=180/Math.PI,Nt=Math.PI/180;var Lt=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Lt||{});class kt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new kt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Ut=[new kt,new kt,new kt,new kt];class Gt{constructor(t=0,e=0,r=0,i=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=Lt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Gt(0,0,0,0)}clone(){return new Gt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const r=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>r}const r=this.left,i=this.right,n=this.top,s=this.bottom;if(i<=r||s<=n)return!1;const o=Ut[0].set(t.left,t.top),a=Ut[1].set(t.left,t.bottom),l=Ut[2].set(t.right,t.top),h=Ut[3].set(t.right,t.bottom);if(l.x<=o.x||a.y<=o.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(0===u)return!1;if(e.apply(o,o),e.apply(a,a),e.apply(l,l),e.apply(h,h),Math.max(o.x,a.x,l.x,h.x)<=r||Math.min(o.x,a.x,l.x,h.x)>=i||Math.max(o.y,a.y,l.y,h.y)<=n||Math.min(o.y,a.y,l.y,h.y)>=s)return!1;const c=u*(a.y-o.y),d=u*(o.x-a.x),p=c*r+d*n,f=c*i+d*n,g=c*r+d*s,m=c*i+d*s;if(Math.max(p,f,g,m)<=c*o.x+d*o.y||Math.min(p,f,g,m)>=c*h.x+d*h.y)return!1;const v=u*(o.y-l.y),y=u*(l.x-o.x),_=v*r+y*n,x=v*i+y*n,b=v*r+y*s,E=v*i+y*s;return!(Math.max(_,x,b,E)<=v*o.x+y*o.y||Math.min(_,x,b,E)>=v*h.x+y*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=n-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class jt{constructor(t=1,e=0,r=0,i=1,n=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,i,n,s){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new kt;const r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e}applyInverse(t,e){e=e||new kt;const r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,s=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this}setTransform(t,e,r,i,n,s,o,a,l){return this.a=Math.cos(o+l)*n,this.b=Math.sin(o+l)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,i=this.c,n=this.d,s=t.pivot,o=-Math.atan2(-i,n),a=Math.atan2(r,e),l=Math.abs(o+a);return l<1e-5||Math.abs(Bt-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx+(s.x*e+s.y*i),t.position.y=this.ty+(s.x*r+s.y*n),t}invert(){const t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new jt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new jt}static get TEMP_MATRIX(){return new jt}}const Ht=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],zt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Yt=[],Vt=[],$t=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];Yt.push(e);for(let r=0;r<16;r++){const i=$t(Ht[t]*Ht[r]+Wt[t]*zt[r]),n=$t(zt[t]*Ht[r]+Xt[t]*zt[r]),s=$t(Ht[t]*Wt[r]+Wt[t]*Xt[r]),o=$t(zt[t]*Wt[r]+Xt[t]*Xt[r]);for(let t=0;t<16;t++)if(Ht[t]===i&&zt[t]===n&&Wt[t]===s&&Xt[t]===o){e.push(t);break}}}for(let t=0;t<16;t++){const e=new jt;e.set(Ht[t],zt[t],Wt[t],Xt[t],0,0),Vt.push(e)}}();const qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Ht[t],uY:t=>zt[t],vX:t=>Wt[t],vY:t=>Xt[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>Yt[t][e],sub:(t,e)=>Yt[t][qt.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?qt.S:qt.N:2*Math.abs(e)<=Math.abs(t)?t>0?qt.E:qt.W:e>0?t>0?qt.SE:qt.SW:t>0?qt.NE:qt.NW,matrixAppendRotationInv:(t,e,r=0,i=0)=>{const n=Vt[qt.inv(e)];n.tx=r,n.ty=i,t.append(n)}};class Kt{constructor(t,e,r=0,i=0){this._x=r,this._y=i,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Kt(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Zt=class{constructor(){this.worldTransform=new jt,this.localTransform=new jt,this.position=new Kt(this.onChange,this,0,0),this.scale=new Kt(this.onChange,this,1,1),this.pivot=new Kt(this.onChange,this,0,0),this.skew=new Kt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Qt=Zt;Qt.IDENTITY=new Zt;const Jt=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],te={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},ee={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};const re={};let ie,ne=re;function se(){if(!ie){ie=v.MEDIUM;const t=function(){if(ne===re||ne?.isContextLost()){const t=E.ADAPTER.createCanvas();let e;E.PREFER_ENV>=i.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),ne=e}return ne}();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ie=e.precision?v.HIGH:v.MEDIUM}}return ie}const oe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ae(t){return oe[t]}let le=null;const he={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ue(t,e){if(!le){const e=Object.keys(he);le={};for(let r=0;r<e.length;++r){const i=e[r];le[t[i]]=he[i]}}return le[e]}function ce(t,e,r){if("precision"!==t.substring(0,9)){let i=e;return e===v.HIGH&&r!==v.HIGH&&(i=v.MEDIUM),`precision ${i} float;\n${t}`}return r!==v.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}let de=0;const pe={},fe=class{constructor(t,e,r="pixi-shader",i={}){this.extra={},this.id=de++,this.vertexSrc=t||fe.defaultVertexSrc,this.fragmentSrc=e||fe.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),pe[r]?(pe[r]++,r+=`-${pe[r]}`):pe[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=ce(this.vertexSrc,fe.defaultVertexPrecision,v.HIGH),this.fragmentSrc=ce(this.fragmentSrc,fe.defaultFragmentPrecision,se())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,e,r){const i=t+e;let n=it[i];return n||(it[i]=n=new fe(t,e,r)),n}};let ge=fe;ge.defaultVertexPrecision=v.HIGH,ge.defaultFragmentPrecision=U.apple.device?v.HIGH:v.MEDIUM;let me=0;class ve{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=me++,this.static=!!e,this.ubo=!!r,t instanceof At?(this.buffer=t,this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new At(new Float32Array(1)),this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new ve(e,r)}static from(t,e,r){return new ve(t,e,r)}static uboFrom(t,e){return new ve(t,e??!0,!0)}}class ye{constructor(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof ve?e:new ve(e):new ve({}),this.disposeRunner=new yt("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const i=ge.from(t,e);return new ye(i,r)}}class _e{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ve.from({uSamplers:e},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ge(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new jt,default:this.defaultGroupCache[t]};return new ye(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}class xe{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}class be{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}const Ee=class extends be{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Dt,this.vertexSize=6,this.state=gt.for2d(),this.size=4*Ee.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(t){let e=!0;const r=E.ADAPTER.getNavigator();if(U.tablet||U.phone){if(U.apple.device){const t=r.userAgent.match(/OS (\d+)_(\d+)?/);t&&parseInt(t[1],10)<11&&(e=!1)}if(U.android.device){const t=r.userAgent.match(/Android\s([0-9.]*)/);t&&parseInt(t[1],10)<7&&(e=!1)}}return e?t:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!U.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return W("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=Ee.defaultVertexSrc,fragment:e=Ee.defaultFragmentTemplate}={}){this.shaderGenerator=new _e(t,e)}contextChange(){const t=this.renderer.gl;E.PREFER_ENV===i.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Ee.defaultMaxTextures),this.maxTextures=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=pt.replace(/%forloop%/gi,ft(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Ee,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new St);for(;e.length<i;)e.push(new xe);for(let t=0;t<this.maxTextures;t++)this._tempBoundTextures[t]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=Ee._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Tt._globalBatch,a=0,l=r[0],h=0;i.copyBoundTextures(n,e);for(let u=0;u<this._bufferSize;++u){const c=t[u];t[u]=null,c._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,n,o,e),this.buildDrawCalls(l,h,u),h=u,l=r[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(i.boundArray(l,n,o,e),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let t=0;t<n.length;t++)n[t]=null;Tt._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:i,_attributeBuffer:n,_indexBuffer:s,vertexSize:o}=this,a=Ee._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=t;for(let d=e;d<r;++d){const r=i[d],p=r._texture.baseTexture,f=V[p.alphaMode?1:0][r.blendMode];i[d]=null,e<d&&c.blend!==f&&(c.size=u-c.start,e=d,c=a[++l],c.texArray=t,c.start=u),this.packInterleavedGeometry(r,n,s,h,u),h+=r.vertexData.length/2*o,u+=r.indices.length,c.blend=f}e<r&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Ee.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,i=Ee._drawCallPool;let n=null;for(let s=0;s<t;s++){const{texArray:t,type:o,size:a,start:l,blend:h}=i[s];n!==t&&(n=t,this.bindAndClearTexArray(t)),this.state.blendMode=h,r.set(this.state),e.drawElements(o,a,e.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ee.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=q(Math.ceil(t/8)),r=Z(e),i=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new dt(i*this.vertexSize*4)),n}getIndexBuffer(t){const e=q(Math.ceil(t/12)),r=Z(e),i=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n}packInterleavedGeometry(t,e,r,i,n){const{uint32View:s,float32View:o}=e,a=i/this.vertexSize,l=t.uvs,h=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let r=t>>16&255,i=t>>8&255,n=255&t;return r=r*e+.5|0,i=i*e+.5|0,n=n*e+.5|0,(255*e<<24)+(r<<16)+(i<<8)+n}(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let t=0;t<u.length;t+=2)o[i++]=u[t],o[i++]=u[t+1],o[i++]=l[t],o[i++]=l[t+1],s[i++]=p,o[i++]=c;for(let t=0;t<h.length;t++)r[n++]=a+h[t]}};let Te=Ee;Te.defaultBatchSize=4096,Te.extension={name:"batch",type:lt.RendererPlugin},Te._drawCallPool=[],Te._textureArrayPool=[],ct.add(Te);const Se=class extends ye{constructor(t,e,r){super(ge.from(t||Se.defaultVertexSrc,e||Se.defaultFragmentSrc),r),this.padding=0,this.resolution=Se.defaultResolution,this.multisample=Se.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new gt}apply(t,e,r,i,n){t.applyFilter(this,e,r,i)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};let we=Se;we.defaultResolution=1,we.defaultMultisample=_.NONE;class Ae{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"==typeof t.color?function(t){if("string"==typeof t&&("#"===(t=Y[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,r,i]=t;t=e+e+r+r+i+i}return parseInt(t,16)}(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=function(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}(t),function(t,e=[]){e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}Ae.extension={type:[lt.RendererSystem,lt.CanvasRendererSystem],name:"background"},ct.add(Ae);class Me{constructor(t){this.renderer=t,this.emptyRenderer=new be(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,e,r,i){const{elements:n,ids:s,count:o}=t;let a=0;for(let t=0;t<o;t++){const o=n[t],l=o._batchLocation;if(l>=0&&l<i&&e[l]===o)s[t]=l;else for(;a<i;){const i=e[a];if(!i||i._batchEnabled!==r||i._batchLocation!==a){s[t]=a,o._batchLocation=a,e[a]=o;break}a++}}}destroy(){this.renderer=null}}Me.extension={type:lt.RendererSystem,name:"batch"},ct.add(Me);let Re=0;class Pe{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Re++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Re++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(E.PREFER_ENV>=i.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Pe.extension={type:lt.RendererSystem,name:"context"},ct.add(Pe);class Ce extends xt{upload(t,e,r){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===f.UNPACK);const n=e.realWidth,s=e.realHeight;return r.width===n&&r.height===s?i.texSubImage2D(e.target,0,0,0,n,s,e.format,r.type,this.data):(r.width=n,r.height=s,i.texImage2D(e.target,0,r.internalFormat,n,s,0,e.format,r.type,this.data)),!0}}class Oe{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new yt("disposeFramebuffer"),this.multisample=_.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Tt(null,{scaleMode:c.NEAREST,resolution:1,mipmap:p.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Tt(new Ce(null,{width:this.width,height:this.height}),{scaleMode:c.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:p.OFF,format:a.DEPTH_COMPONENT,type:h.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Ie extends Tt{constructor(t={}){if("number"==typeof t){t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=_.NONE),super(null,t),this.mipmap=p.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Oe(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class De extends _t{constructor(t){const e=t;super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous"):t.crossOrigin=function(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,ot||(ot=document.createElement("a")),ot.href=t;const r=H.parse(ot.href),i=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&i&&r.protocol===e.protocol?"":"anonymous"}(e)}upload(t,e,r,i){const n=t.gl,s=e.realWidth,o=e.realHeight;if(i=i||this.source,"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement&&i.readyState<=1&&0===i.buffered.length)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===f.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,n.texImage2D(e.target,0,r.internalFormat,e.format,r.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,r.type,i),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}class Be extends De{constructor(t,e){if(e=e||{},"string"==typeof t){const r=new Image;De.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??E.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(((t,e)=>{const r=this.source;this.url=r.src;const i=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?i():(r.onload=i,r.onerror=t=>{e(t),this.onError.emit(t)})}))),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((t=>t.blob())).then((r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===f.UNPACK?"premultiply":"none"}))).then((t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(t,e,r){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let t=!0;const i=e._glTextures;for(const n in i){const s=i[n];if(s!==r&&s.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!=typeof HTMLImageElement&&("string"==typeof t||t instanceof HTMLImageElement)}}class Fe{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const i=e.width,n=e.height;if(r){const e=t.width/2/i,s=t.height/2/n,o=t.x/i+e,a=t.y/n+s;r=qt.add(r,qt.NW),this.x0=o+e*qt.uX(r),this.y0=a+s*qt.uY(r),r=qt.add(r,2),this.x1=o+e*qt.uX(r),this.y1=a+s*qt.uY(r),r=qt.add(r,2),this.x2=o+e*qt.uX(r),this.y2=a+s*qt.uY(r),r=qt.add(r,2),this.x3=o+e*qt.uX(r),this.y3=a+s*qt.uY(r)}else this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Ne=new Fe;function Le(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ke extends G{constructor(t,e,r,i,n,s){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Gt(0,0,1,1)),t instanceof ke&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this._uvs=Ne,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(n||0),!0===n)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new kt(s.x,s.y):new kt(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&nt[t.url]&&ke.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ke.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new ke(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===Ne&&(this._uvs=new Fe),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=E.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let n=null;if(i)n=t;else if(t instanceof Tt){if(!t.cacheId){const r=e?.pixiIdPrefix||"pixiid";t.cacheId=`${r}-${tt()}`,Tt.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${tt()}`}n=t._pixiId}let s=nt[n];if(i&&r&&!s)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return s||t instanceof Tt?!s&&t instanceof Tt&&(s=new ke(t),ke.addToCache(s,n)):(e.resolution||(e.resolution=at(t)),s=new ke(new Tt(t,e)),s.baseTexture.cacheId=n,Tt.addToCache(s.baseTexture,n),ke.addToCache(s,n)),s}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e?.resourceOptions),i=ke.from(t,Object.assign({resourceOptions:r},e),!1),n=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):n.load().then((()=>Promise.resolve(i)))}static fromBuffer(t,e,r,i){return new ke(Tt.fromBuffer(t,e,r,i))}static fromLoader(t,e,r,i){const n=new Tt(t,Object.assign({scaleMode:Tt.defaultOptions.scaleMode,resolution:at(e)},i)),{resource:s}=n;s instanceof Be&&(s.url=e);const o=new ke(n);return r||(r=e),Tt.addToCache(o.baseTexture,r),ke.addToCache(o,r),r!==e&&(Tt.addToCache(o.baseTexture,e),ke.addToCache(o,e)),o.baseTexture.valid?Promise.resolve(o):new Promise((t=>{o.baseTexture.once("loaded",(()=>t(o)))}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),nt[e]&&nt[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),nt[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=nt[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete nt[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)nt[t.textureCacheIds[e]]===t&&delete nt[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:i,height:n}=t,s=e+i>this.baseTexture.width,o=r+n>this.baseTexture.height;if(s||o){const t=s&&o?"and":"or",a=`X: ${e} + ${i} = ${e+i} > ${this.baseTexture.width}`,l=`Y: ${r} + ${n} = ${r+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${t} ${l}`)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ke._EMPTY||(ke._EMPTY=new ke(new Tt),Le(ke._EMPTY),Le(ke._EMPTY.baseTexture)),ke._EMPTY}static get WHITE(){if(!ke._WHITE){const t=E.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),ke._WHITE=new ke(Tt.from(t)),Le(ke._WHITE),Le(ke._WHITE.baseTexture)}return ke._WHITE}}class Ue extends ke{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const i=this.baseTexture.resolution,n=Math.round(t*i)/i,s=Math.round(e*i)/i;this.valid=n>0&&s>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(n,s),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ue(new Ie(t))}}class Ge{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=_.NONE){const i=new Ie(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new Ue(i)}getOptimalTexture(t,e,r=1,i=_.NONE){let n;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?n=i>1?-i:-1:(n=((65535&(t=q(t)))<<16|65535&(e=q(e)))>>>0,i>1&&(n+=4294967296*i)),this.texturePool[n]||(this.texturePool[n]=[]);let s=this.texturePool[n].pop();return s||(s=this.createTexture(t,e,i)),s.filterPoolKey=n,s.setResolution(r),s}getFilterTexture(t,e,r){const i=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||_.NONE);return i.filterFrame=t.filterFrame,i}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Ge.SCREEN_KEY=-1;class je extends It{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class He extends It{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new At(this.vertices),this.uvBuffer=new At(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ze{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_.NONE,this.sourceFrame=new Gt,this.destinationFrame=new Gt,this.bindingSourceFrame=new Gt,this.bindingDestinationFrame=new Gt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const We=[new kt,new kt,new kt,new kt],Xe=new jt;class Ye{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ge,this.statePool=[],this.quad=new je,this.quadUv=new He,this.tempRect=new Gt,this.activeState={},this.globalUniforms=new ve({outputFrame:new Gt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new ze,s=this.renderer.renderTexture;let o=e[0].resolution,a=e[0].multisample,l=e[0].padding,h=e[0].autoFit,u=e[0].legacy??!0;for(let t=1;t<e.length;t++){const r=e[t];o=Math.min(o,r.resolution),a=Math.min(a,r.multisample),l=this.useMaxPadding?Math.max(l,r.padding):l+r.padding,h=h&&r.autoFit,u=u||(r.legacy??!0)}1===i.length&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(n),n.resolution=o,n.multisample=a,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(l);const c=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(Xe.copyFrom(r.projection.transform).invert(),c),h?(n.sourceFrame.fit(c),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(c)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o,a),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,d),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;const n=i.inputSize,s=i.inputPixel,o=i.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=Math.round(n[0]*e.resolution),s[1]=Math.round(n[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*n[2]-.5*s[2],o[3]=e.sourceFrame.height*n[3]-.5*s[3],e.legacy){const t=i.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,a.renderTexture,g.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,i=this.getOptimalFilterTexture(t.width,t.height,e.resolution);i.filterFrame=t.filterFrame;let n=0;for(n=0;n<r.length-1;++n){1===n&&e.multisample>1&&(i=this.getOptimalFilterTexture(t.width,t.height,e.resolution),i.filterFrame=t.filterFrame),r[n].apply(this,t,i,g.CLEAR,e);const s=t;t=i,i=s}r[n].apply(this,t,a.renderTexture,g.BLEND,e),n>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(i)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=g.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,r.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=1&i.stateId||this.forceClear;(e===g.CLEAR||e===g.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,i){const n=this.renderer;n.state.set(t.state),this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(o.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(o.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:n}=e._texture,s=t.set(i.width,0,0,i.height,r.x,r.y),o=e.worldTransform.copyTo(jt.TEMP_MATRIX);return o.invert(),s.prepend(o),s.scale(1/n.width,1/n.height),s.translate(e.anchor.x,e.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,i=_.NONE){return this.texturePool.getOptimalTexture(t,e,r,i)}getFilterTexture(t,e,r){if("number"==typeof t){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||_.NONE);return i.filterFrame=t.filterFrame,i}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=We[0],i=We[1],n=We[2],s=We[3];r.set(e.left,e.top),i.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(i,i),t.apply(n,n),t.apply(s,s);const o=Math.min(r.x,i.x,n.x,s.x),a=Math.min(r.y,i.y,n.y,s.y),l=Math.max(r.x,i.x,n.x,s.x),h=Math.max(r.y,i.y,n.y,s.y);e.x=o,e.y=a,e.width=l-o,e.height=h-a}roundFrame(t,e,r,i,n){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(n){const{a:t,b:e,c:r,d:i}=n;if((Math.abs(e)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4))return}(n=n?Xe.copyFrom(n):Xe.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}Ye.extension={type:lt.RendererSystem,name:"filter"},ct.add(Ye);class Ve{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const $e=new Gt;class qe{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Oe(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Gt,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;E.PREFER_ENV===i.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:i}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=r),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const r=t.colorTextures[e];this.renderer.texture.unbind(r.parentTextureArray||r)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>r,i=e.height>>r,n=t/e.width;this.setViewport(e.x*n,e.y*n,t,i)}else{const e=t.width>>r,i=t.height>>r;this.setViewport(0,0,e,i)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,i){const n=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),i=Math.round(i),n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,i,s=n.COLOR|n.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,i),o.clear(s)}initFramebuffer(t){const{gl:e}=this,r=new Ve(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const i=t.colorTextures;let n=i.length;e.drawBuffers||(n=Math.min(n,1));for(let s=0;s<n;s++){const n=i[s],o=n.parentTextureArray||n;this.renderer.texture.bind(o,0),0===s&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let s=n.length;r.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const o=[];for(let a=0;a<s;a++){const s=n[a],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===a&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,s.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(r.COLOR_ATTACHMENT0+a))}if(o.length>1&&r.drawBuffers(o),t.depthTexture){if(this.writeDepthTexture){const i=t.depthTexture;this.renderer.texture.bind(i,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,i._glTextures[this.CONTEXT_UID].texture,e)}}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=_.NONE;if(t<=1||null===e)return r;for(let i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return 1===r&&(r=_.NONE),r}blit(t,e,r){const{current:i,renderer:n,gl:s,CONTEXT_UID:o}=this;if(2!==n.context.webGLVersion)return;if(!i)return;const a=i.glFramebuffers[o];if(!a)return;if(!t){if(!a.msaaBuffer)return;const e=i.colorTextures[0];if(!e)return;a.blitFramebuffer||(a.blitFramebuffer=new Oe(i.width,i.height),a.blitFramebuffer.addColorTexture(0,e)),(t=a.blitFramebuffer).colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===i.width&&t.height===i.height||(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}e||((e=$e).width=i.width,e.height=i.height),r||(r=e);const l=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const r=t.width,i=t.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,r,i):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),e.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Gt}destroy(){this.renderer=null}}qe.extension={type:lt.RendererSystem,name:"framebuffer"},ct.add(qe);const Ke={5126:4,5123:2,5121:1};class Ze{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;E.PREFER_ENV===i.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,i,n,s)=>e.drawElementsInstancedANGLE(t,r,i,n,s),t.drawArraysInstanced=(t,r,i,n)=>e.drawArraysInstancedANGLE(t,r,i,n)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},n=!0);const s=i[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const i=t.buffers[r];e.update(i)}}checkCompatibility(t,e){const r=t.attributes,i=e.attributeData;for(const t in i)if(!r[t])throw new Error(`shader and geometry incompatible, geometry missing the "${t}" attribute`)}getSignature(t,e){const r=t.attributes,i=e.attributeData,n=["g",t.id];for(const t in r)i[t]&&n.push(t,i[t].location);return n.join("-")}initGeometryVao(t,e,r=!0){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);const a=this.getSignature(t,o),l=t.glVertexArrayObjects[this.CONTEXT_UID];let h=l[a];if(h)return l[o.id]=h,h;const u=t.buffers,c=t.attributes,d={},p={};for(const t in u)d[t]=0,p[t]=0;for(const t in c)!c[t].size&&o.attributeData[t]?c[t].size=o.attributeData[t].size:c[t].size||console.warn(`PIXI Geometry attribute '${t}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[t].buffer]+=c[t].size*Ke[c[t].type];for(const t in c){const e=c[t],r=e.size;void 0===e.stride&&(d[e.buffer]===r*Ke[e.type]?e.stride=0:e.stride=d[e.buffer]),void 0===e.start&&(e.start=p[e.buffer],p[e.buffer]+=r*Ke[e.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let t=0;t<u.length;t++){const e=u[t];s.bind(e),r&&e._glBuffers[n].refCount++}return this.activateVao(t,o),l[o.id]=h,l[a]=h,i.bindVertexArray(null),s.unbind(x.ARRAY_BUFFER),h}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers,s=this.renderer?.buffer;if(t.disposeRunner.remove(this),r){if(s)for(let t=0;t<n.length;t++){const r=n[t]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(n[t],e))}if(!e)for(const t in r)if("g"===t[0]){const e=r[t];this._activeVao===e&&this.unbind(),i.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,i=this.CONTEXT_UID,n=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let a=null;for(const t in o){const l=o[t],h=s[l.buffer],u=h._glBuffers[i];if(e.attributeData[t]){a!==u&&(n.bind(h),a=u);const i=e.attributeData[t].location;if(r.enableVertexAttribArray(i),r.vertexAttribPointer(i,l.size,l.type||r.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(i,l.divisor)}}}}draw(t,e,r,i){const{gl:n}=this,s=this._activeGeometry;if(s.indexBuffer){const o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(r||0)*o,i||1):n.drawElements(t,e||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(t,r,e||s.getSize(),i||1):n.drawArrays(t,r,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Ze.extension={type:lt.RendererSystem,name:"geometry"},ct.add(Ze);const Qe=new jt;class Je{constructor(t,e){this._texture=t,this.mapCoord=new jt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let i=0;i<t.length;i+=2){const n=t[i],s=t[i+1];e[i]=n*r.a+s*r.c+r.tx,e[i+1]=n*r.b+s*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=e.orig,n=e.trim;n&&(Qe.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Qe));const s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,l=this.clampOffset;return o[0]=(e._frame.x+a+l)/s.width,o[1]=(e._frame.y+a+l)/s.height,o[2]=(e._frame.x+e._frame.width-a+l)/s.width,o[3]=(e._frame.y+e._frame.height-a+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0}}class tr extends we{constructor(t,e,r){let i=null;"string"!=typeof t&&void 0===e&&void 0===r&&(i=t,t=void 0,e=void 0,r=void 0),super(t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",e||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=i,this.maskMatrix=new jt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,i){const n=this._maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Je(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))}}class er{constructor(t=null){this.type=y.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=we.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=y.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class rr{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const t=this.maskDataPool.pop()||new er;t.pooled=!0,t.maskObject=e,r=t}const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==y.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case y.SCISSOR:this.renderer.scissor.push(r);break;case y.STENCIL:this.renderer.stencil.push(r);break;case y.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case y.COLOR:this.pushColorMask(r)}r.type===y.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case y.SCISSOR:this.renderer.scissor.pop(e);break;case y.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case y.SPRITE:this.popSpriteMask(e);break;case y.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===y.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=y.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=y.SCISSOR:t.type=y.STENCIL:t.type=y.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new tr]));const n=this.renderer,s=n.renderTexture;let o,a;if(s.current){const e=s.current;o=t.resolution||e.resolution,a=t.multisample??e.multisample}else o=t.resolution||n.resolution,a=t.multisample??n.multisample;i[0].resolution=o,i[0].multisample=a,i[0].maskSprite=e;const l=r.filterArea;r.filterArea=e.getBounds(!0),n.filter.push(r,i),r.filterArea=l,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}rr.extension={type:lt.RendererSystem,name:"mask"},ct.add(rr);class ir{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==r&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const nr=new jt,sr=[],or=class extends ir{constructor(t){super(t),this.glConst=E.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:i}=this,n=i.renderTexture,s=r.getBounds(!0,sr.pop()??new Gt);this.roundFrameToPixels(s,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:i,d:n}=t;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(or.isMatrixRotated(e.worldTransform))return!1;if(or.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,i,n){or.isMatrixRotated(n)||((n=n?nr.copyFrom(n):nr.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(n,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&sr.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let ar=or;ar.extension={type:lt.RendererSystem,name:"scissor"},ct.add(ar);class lr extends ir{constructor(t){super(t),this.glConst=E.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;0!==n&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(t._colorMask=n,r.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;0!==i&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(r._colorMask=i,e.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}lr.extension={type:lt.RendererSystem,name:"stencil"},ct.add(lr);class hr{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(W("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract)},prepare:{enumerable:!1,get:()=>(W("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare)},interaction:{enumerable:!1,get:()=>(W("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events)}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}hr.extension={type:[lt.RendererSystem,lt.CanvasRendererSystem],name:"_plugin"},ct.add(hr);class ur{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new jt,this.transform=null}update(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,r,i){const n=this.projectionMatrix,s=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=s*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-s-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}ur.extension={type:lt.RendererSystem,name:"projection"},ct.add(ur);const cr=new Qt;class dr{constructor(t){this.renderer=t,this._tempMatrix=new jt}generateTexture(t,e){const{region:r,...i}=e||{},n=r||t.getLocalBounds(null,!0);0===n.width&&(n.width=1),0===n.height&&(n.height=1);const s=Ue.create({width:n.width,height:n.height,...i});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const o=t.transform;return t.transform=cr,this.renderer.render(t,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=o,s}destroy(){}}dr.extension={type:[lt.RendererSystem,lt.CanvasRendererSystem],name:"textureGenerator"},ct.add(dr);const pr=new Gt,fr=new Gt;class gr{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Gt,this.destinationFrame=new Gt,this.viewportFrame=new Gt}bind(t=null,e,r){const i=this.renderer;let n,s,o;this.current=t,t?(n=t.baseTexture,o=n.resolution,e||(pr.width=t.frame.width,pr.height=t.frame.height,e=pr),r||(fr.x=t.frame.x,fr.y=t.frame.y,fr.width=e.width,fr.height=e.height,r=fr),s=n.framebuffer):(o=i.resolution,e||(pr.width=i._view.screen.width,pr.height=i._view.screen.height,e=pr),r||((r=pr).width=e.width,r.height=e.height));const a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,t||(a.y=i.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(s,a),this.renderer.projection.update(r,e,o,!s),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer._view.screen,n=r.width!==i.width||r.height!==i.height;if(n){let{x:t,y:e,width:r,height:i}=this.viewportFrame;t=Math.round(t),e=Math.round(e),r=Math.round(r),i=Math.round(i),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,r,i)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}gr.extension={type:lt.RendererSystem,name:"renderTexture"},ct.add(gr);class mr{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function vr(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function yr(t){const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=!1;return e}function _r(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return yr(2*e);case"bvec3":return yr(3*e);case"bvec4":return yr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function xr(t,e){const r=t.getShaderSource(e).split("\n").map(((t,e)=>`${e}: ${t}`)),i=t.getShaderInfoLog(e),n=i.split("\n"),s={},o=n.map((t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((t=>!(!t||s[t])&&(s[t]=!0,!0))),a=[""];o.forEach((t=>{r[t-1]=`%c${r[t-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function br(t,e){const r=vr(t,t.VERTEX_SHADER,e.vertexSrc),i=vr(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();t.attachShader(n,r),t.attachShader(n,i);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(n,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||xr(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||xr(t,i),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,r,i),e.attributeData=function(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const i=e.getActiveAttrib(t,n);if(i.name.startsWith("gl_"))continue;const s=ue(e,i.type),o={type:s,name:i.name,size:ae(s),location:e.getAttribLocation(t,i.name)};r[i.name]=o}return r}(n,t),e.uniformData=function(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const i=e.getActiveUniform(t,n),s=i.name.replace(/\[.*?\]$/,""),o=!!i.name.match(/\[.*?\]$/),a=ue(e,i.type);r[s]={name:s,index:n,type:a,size:i.size,isArray:o,value:_r(a,i.size)}}return r}(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const r=Object.keys(e.attributeData);r.sort(((t,e)=>t>e?1:-1));for(let i=0;i<r.length;i++)e.attributeData[r[i]].location=i,t.bindAttribLocation(n,i,r[i]);t.linkProgram(n)}t.deleteShader(r),t.deleteShader(i);const o={};for(const r in e.uniformData){const i=e.uniformData[r];o[r]={location:t.getUniformLocation(n,r),value:_r(i.type,i.size)}}return new mr(n,o)}function Er(t,e,r,i,n){r.buffer.update(n)}const Tr={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Sr={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function wr(t,e){if(!t.autoManage)return{size:0,syncFunc:Er};const r=function(t,e){const r=[];for(const i in t)e[i]&&r.push(e[i]);return r.sort(((t,e)=>t.index-e.index)),r}(t.uniforms,e),{uboElements:i,size:n}=function(t){const e=t.map((t=>({data:t,offset:0,dataLen:0,dirty:0})));let r=0,i=0,n=0;for(let t=0;t<e.length;t++){const s=e[t];if(r=Sr[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,i%r!=0&&i<16){const t=i%r%16;i+=t,n+=t}i+r>16?(n=16*Math.ceil(n/16),s.offset=n,n+=r,i=r):(s.offset=n,i+=r,n+=r)}return n=16*Math.ceil(n/16),{uboElements:e,size:n}}(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let e=0;e<i.length;e++){const r=i[e],n=t.uniforms[r.data.name],o=r.data.name;let a=!1;for(let t=0;t<Jt.length;t++){const e=Jt[t];if(e.codeUbo&&e.test(r.data,n)){s.push(`offset = ${r.offset/4};`,Jt[t].codeUbo(r.data.name,n)),a=!0;break}}if(!a)if(r.data.size>1){const t=ae(r.data.type),e=Math.max(Sr[r.data.type]/16,1),i=t/e,n=(4-i%4)%4;s.push(`\n                cv = ud.${o}.value;\n                v = uv.${o};\n                offset = ${r.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${r.data.size*e}; i++)\n                {\n                    for(var j = 0; j < ${i}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${n};\n                }\n\n                `)}else{const t=Tr[r.data.type];s.push(`\n                cv = ud.${o}.value;\n                v = uv.${o};\n                offset = ${r.offset/4};\n                ${t};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}let Ar;let Mr=0;const Rr={textureCount:0,uboCount:0};class Pr{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Mr++}systemCheck(){if(!function(){if("boolean"==typeof Ar)return Ar;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");Ar=!0===t({a:"b"},"a","b")}catch(t){Ar=!1}return Ar}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Rr.textureCount=0,Rr.uboCount=0,this.syncUniformGroup(t.uniformGroup,Rr)),i}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in t.uniforms){const n=e[i];if(!n){t.uniforms[i]?.group&&(t.uniforms[i].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${i}, syncData);\n                    `));continue}const s=t.uniforms[i];let o=!1;for(let t=0;t<Jt.length;t++)if(Jt[t].test(n,s)){r.push(Jt[t].code(i,s)),o=!0;break}if(!o){const t=(1!==n.size||n.isArray?ee:te)[n.type].replace("location",`ud["${i}"].location`);r.push(`\n            cu = ud["${i}"];\n            cv = cu.value;\n            v = uv["${i}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;const i=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),i(r.uniformData,t.uniforms,this.renderer,Rr,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(t,this.shader.program.uniformData,"ubo");let o=this._uboCache[s];if(o||(o=this._uboCache[s]=wr(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(o.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const i=t.uniforms,n=[`${r}-`];for(const t in i)n.push(t),e[t]&&n.push(e[t].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,i=br(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Pr.extension={type:lt.RendererSystem,name:"shader"},ct.add(Pr);class Cr{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.1 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}Cr.extension={type:[lt.RendererSystem,lt.CanvasRendererSystem],name:"startup"},ct.add(Cr);const Or=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=s.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new gt,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function(t,e=[]){return e[s.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.ADD]=[t.ONE,t.ONE],e[s.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.NONE]=[0,0],e[s.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[s.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[s.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[s.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[s.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[s.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[s.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[s.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Or.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Or.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Ir=Or;Ir.extension={type:lt.RendererSystem,name:"state"},ct.add(Ir);class Dr extends G{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter((e=>t.systems[e])),r=[...e,...Object.keys(t.systems).filter((t=>!e.includes(t)))];for(const e of r)this.addSystem(t.systems[e],e)}addRunners(...t){t.forEach((t=>{this.runners[t]=new yt(t)}))}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const t in this.runners)this.runners[t].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach((i=>{const n=r.find((t=>this._systemsHash[t]===i));i[t.name](e[n])}))}destroy(){Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash={}}}const Br=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Br.defaultMaxIdle,this.checkCountMax=Br.defaultCheckCountMax,this.mode=Br.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==m.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let i=0;i<e.length;i++){const n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&(e[t++]=e[r]);e.length=t}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let e=t.children.length-1;e>=0;e--)this.unload(t.children[e])}destroy(){this.renderer=null}};let Fr=Br;Fr.defaultMode=m.AUTO,Fr.defaultMaxIdle=3600,Fr.defaultCheckCountMax=600,Fr.extension={type:lt.RendererSystem,name:"textureGC"},ct.add(Fr);class Nr{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=h.UNSIGNED_BYTE,this.internalFormat=a.RGBA,this.samplerType=0}}class Lr{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Tt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[h.UNSIGNED_BYTE]:{[a.RGBA]:t.RGBA8,[a.RGB]:t.RGB8,[a.RG]:t.RG8,[a.RED]:t.R8,[a.RGBA_INTEGER]:t.RGBA8UI,[a.RGB_INTEGER]:t.RGB8UI,[a.RG_INTEGER]:t.RG8UI,[a.RED_INTEGER]:t.R8UI,[a.ALPHA]:t.ALPHA,[a.LUMINANCE]:t.LUMINANCE,[a.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[h.BYTE]:{[a.RGBA]:t.RGBA8_SNORM,[a.RGB]:t.RGB8_SNORM,[a.RG]:t.RG8_SNORM,[a.RED]:t.R8_SNORM,[a.RGBA_INTEGER]:t.RGBA8I,[a.RGB_INTEGER]:t.RGB8I,[a.RG_INTEGER]:t.RG8I,[a.RED_INTEGER]:t.R8I},[h.UNSIGNED_SHORT]:{[a.RGBA_INTEGER]:t.RGBA16UI,[a.RGB_INTEGER]:t.RGB16UI,[a.RG_INTEGER]:t.RG16UI,[a.RED_INTEGER]:t.R16UI,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[h.SHORT]:{[a.RGBA_INTEGER]:t.RGBA16I,[a.RGB_INTEGER]:t.RGB16I,[a.RG_INTEGER]:t.RG16I,[a.RED_INTEGER]:t.R16I},[h.UNSIGNED_INT]:{[a.RGBA_INTEGER]:t.RGBA32UI,[a.RGB_INTEGER]:t.RGB32UI,[a.RG_INTEGER]:t.RG32UI,[a.RED_INTEGER]:t.R32UI,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[h.INT]:{[a.RGBA_INTEGER]:t.RGBA32I,[a.RGB_INTEGER]:t.RGB32I,[a.RG_INTEGER]:t.RG32I,[a.RED_INTEGER]:t.R32I},[h.FLOAT]:{[a.RGBA]:t.RGBA32F,[a.RGB]:t.RGB32F,[a.RG]:t.RG32F,[a.RED]:t.R32F,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[h.HALF_FLOAT]:{[a.RGBA]:t.RGBA16F,[a.RGB]:t.RGB16F,[a.RG]:t.RG16F,[a.RED]:t.R16F},[h.UNSIGNED_SHORT_5_6_5]:{[a.RGB]:t.RGB565},[h.UNSIGNED_SHORT_4_4_4_4]:{[a.RGBA]:t.RGBA4},[h.UNSIGNED_SHORT_5_5_5_1]:{[a.RGBA]:t.RGB5_A1},[h.UNSIGNED_INT_2_10_10_10_REV]:{[a.RGBA]:t.RGB10_A2,[a.RGBA_INTEGER]:t.RGB10_A2UI},[h.UNSIGNED_INT_10F_11F_11F_REV]:{[a.RGB]:t.R11F_G11F_B10F},[h.UNSIGNED_INT_5_9_9_9_REV]:{[a.RGB]:t.RGB9_E5},[h.UNSIGNED_INT_24_8]:{[a.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[h.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[a.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[h.UNSIGNED_BYTE]:{[a.RGBA]:t.RGBA,[a.RGB]:t.RGB,[a.ALPHA]:t.ALPHA,[a.LUMINANCE]:t.LUMINANCE,[a.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[h.UNSIGNED_SHORT_5_6_5]:{[a.RGB]:t.RGB},[h.UNSIGNED_SHORT_4_4_4_4]:{[a.RGBA]:t.RGBA},[h.UNSIGNED_SHORT_5_5_5_1]:{[a.RGBA]:t.RGBA}},e}(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let t=0;t<e;t++)this.boundTextures[t]=null;this.emptyTextures={};const r=new Nr(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Nr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let e=0;e<6;e++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let t=0;t<this.boundTextures.length;t++)this.bind(null,t)}bind(t,e=0){const{gl:r}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<r.length;t++)r[t]===this.unknownTexture&&this.bind(null,t)}for(let i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[i]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let r=t-1;r>=0;--r){const t=e[r];if(t){t._glTextures[i].samplerType!==u.FLOAT&&this.renderer.texture.unbind(t)}}}initTexture(t){const e=new Nr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===h.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(r,t,e))e.samplerType!==u.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,n=t.realHeight,s=r.gl;(e.width!==i||e.height!==n||e.dirtyId<0)&&(e.width=i,e.height=n,s.texImage2D(t.target,0,e.internalFormat,i,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&Q(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==p.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=d.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==p.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===c.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===c.LINEAR){const i=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===c.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===c.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Lr.extension={type:lt.RendererSystem,name:"texture"},ct.add(Lr);class kr{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:i}=this;e&&i.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:i}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[i]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let n=0;n<t.buffers.length;n++){const s=t.buffers[n];s&&(r.buffer.update(s),s._glBuffers[i].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,s._glBuffers[i].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let r=0;r<t.buffers.length;r++){const i=t.buffers[r];if(!i)continue;const s=i._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||e||n.dispose(i,e))}r&&(e||i.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}kr.extension={type:lt.RendererSystem,name:"transformFeedback"},ct.add(kr);class Ur{constructor(t){this.renderer=t}init(t){this.screen=new Gt(0,0,t.width,t.height),this.element=t.view||E.ADAPTER.createCanvas(),this.resolution=t.resolution||E.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Ur.extension={type:[lt.RendererSystem,lt.CanvasRendererSystem],name:"_view"},ct.add(Ur),E.PREFER_ENV=i.WEBGL2,E.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(E,{WRAP_MODE:{get:()=>Tt.defaultOptions.wrapMode,set(t){W("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Tt.defaultOptions.wrapMode=t}},SCALE_MODE:{get:()=>Tt.defaultOptions.scaleMode,set(t){W("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Tt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get:()=>Tt.defaultOptions.mipmap,set(t){W("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Tt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get:()=>Tt.defaultOptions.anisotropicLevel,set(t){W("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Tt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get:()=>(W("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),we.defaultResolution),set(t){we.defaultResolution=t}},FILTER_MULTISAMPLE:{get:()=>(W("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),we.defaultMultisample),set(t){we.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get:()=>Te.defaultMaxTextures,set(t){W("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Te.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get:()=>Te.defaultBatchSize,set(t){W("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Te.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get:()=>Te.canUploadSameBuffer,set(t){W("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Te.canUploadSameBuffer=t}},GC_MODE:{get:()=>Fr.defaultMode,set(t){W("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Fr.defaultMode=t}},GC_MAX_IDLE:{get:()=>Fr.defaultMaxIdle,set(t){W("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Fr.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get:()=>Fr.defaultCheckCountMax,set(t){W("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Fr.defaultCheckCountMax=t}},PRECISION_VERTEX:{get:()=>ge.defaultVertexPrecision,set(t){W("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ge.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get:()=>ge.defaultFragmentPrecision,set(t){W("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ge.defaultFragmentPrecision=t}}});var Gr=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Gr||{});class jr{constructor(t,e=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=i}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Hr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jr(null,null,1/0),this.deltaMS=1/Hr.targetFPMS,this.elapsedMS=1/Hr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=Gr.NORMAL){return this._addListener(new jr(t,e,r))}addOnce(t,e,r=Gr.NORMAL){return this._addListener(new jr(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Hr.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Hr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Hr._shared){const t=Hr._shared=new Hr;t.autoStart=!0,t._protected=!0}return Hr._shared}static get system(){if(!Hr._system){const t=Hr._system=new Hr;t.autoStart=!0,t._protected=!0}return Hr._system}};let zr=Hr;zr.targetFPMS=.06,Object.defineProperties(E,{TARGET_FPMS:{get:()=>zr.targetFPMS,set(t){W("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),zr.targetFPMS=t}}});class Wr{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Gr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?zr.shared:new zr,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Wr.extension=lt.Application,ct.add(Wr);const Xr=[];ct.handleByList(lt.Renderer,Xr);class Yr{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=_.HIGH?this.multisample=_.HIGH:e>=_.MEDIUM?this.multisample=_.MEDIUM:e>=_.LOW?this.multisample=_.LOW:this.multisample=_.NONE}destroy(){}}Yr.extension={type:lt.RendererSystem,name:"_multisample"},ct.add(Yr);class Vr{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class $r{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,r){const{gl:i,CONTEXT_UID:n}=this;r=r||0;const s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,e||0,s.buffer,256*r,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,i=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,e.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new Vr(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}$r.extension={type:lt.RendererSystem,name:"buffer"},ct.add($r);class qr{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let i,n,s,o;if(e&&(i=e.renderTexture,n=e.clear,s=e.transform,o=e.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(i||(this.lastObjectRendered=t),!o){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(n??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),i&&(e.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}qr.extension={type:lt.RendererSystem,name:"objectRenderer"},ct.add(qr);const Kr=class extends Dr{constructor(t){super(),t=Object.assign({},E.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ve({projectionMatrix:new jt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Kr.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(W("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha);const r={hello:t.hello,_plugin:Kr.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r),this.options=t}static test(t){return!t?.forceCanvas&&(void 0===X&&(X=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!E.ADAPTER.getWebGLRenderingContext())return!1;const e=E.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const i=!!r?.getContextAttributes()?.stencil;if(r){const t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,i}catch(t){return!1}}()),X)}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return W("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return W("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return W("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return W("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){W("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return W("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){W("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return W("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Zr=Kr;Zr.extension={type:lt.Renderer,priority:1},Zr.__plugins={},Zr.__systems={},ct.handleByMap(lt.RendererPlugin,Zr.__plugins),ct.handleByMap(lt.RendererSystem,Zr.__systems),ct.add(Zr);class Qr extends _t{constructor(t,e){const{width:r,height:i}=e||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let e=0;e<t;e++){const t=new Tt;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof _t?this.addResourceAt(t[r],r):this.addResourceAt(vt(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map((t=>t.resource)).filter((t=>t)).map((t=>t.load()));return this._load=Promise.all(t).then((()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)})),this._load}}const Jr=class extends Qr{constructor(t,e){const{width:r,height:i,autoLoad:n,linkBaseTexture:s}=e||{};if(t&&t.length!==Jr.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:i});for(let t=0;t<Jr.SIDES;t++)this.items[t].target=l.TEXTURE_CUBE_MAP_POSITIVE_X+t;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==n&&this.load()}bind(t){super.bind(t),t.target=l.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=l.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const i=this.itemDirtyIds;for(let n=0;n<Jr.SIDES;n++){const s=this.items[n];(i[n]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[n]=s.dirtyId):i[n]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Jr.SIDES}};let ti=Jr;ti.SIDES=6;class ei extends De{constructor(t,e){let r,i;e=e||{},"string"==typeof t?(r=ei.EMPTY,i=t):(r=t,i=null),super(r),this.url=i,this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(t,e)=>{if(null!==this.url)try{const e=await E.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await e.blob();if(this.destroyed)return;const i=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===f.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=i,this.update(),t(this)}catch(t){if(this.destroyed)return;e(t),this.onError.emit(t)}else t(this)}))),this._load}upload(t,e,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof t||t instanceof ImageBitmap)}static get EMPTY(){return ei._EMPTY=ei._EMPTY??E.ADAPTER.createCanvas(0,0),ei._EMPTY}}const ri=class extends De{constructor(t,e){e=e||{},super(E.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ri.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const t=new Image;De.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,n=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*e,n=this._overrideHeight||this._overrideWidth/e*r),i=Math.round(i),n=Math.round(n);const s=this.source;s.width=i,s.height=n,s._pixiId=`canvas_${tt()}`,s.getContext("2d").drawImage(t,0,0,e,r,0,0,i,n),this._resolve(),this._resolve=null}}static getSize(t){const e=ri.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&ri.SVG_XML.test(t)}};let ii=ri;ii.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,ii.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const ni=class extends De{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];De.crossOrigin(r,i,e.crossorigin);for(let e=0;e<t.length;++e){const i=document.createElement("source");let{src:n,mime:s}=t[e];n=n||t[e];const o=n.split("?").shift().toLowerCase(),a=o.slice(o.lastIndexOf(".")+1);s=s||ni.MIME_TYPES[a]||`video/${a}`,i.src=n,i.type=s,r.appendChild(i)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=zr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e=>{this.valid?e(this):(this._resolve=e,t.load())})),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(zr.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(zr.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(zr.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(zr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(zr.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||ni.TYPES.includes(e)}};let si=ni;si.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],si.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},mt.push(ei,Be,class extends De{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}},si,ii,xt,ti,class extends Qr{constructor(t,e){const{width:r,height:i}=e||{};let n,s;Array.isArray(t)?(n=t,s=t.length):s=t,super(s,{width:r,height:i}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=l.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:i,itemDirtyIds:n,items:s}=this,{gl:o}=t;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,e.format,r.type,null);for(let t=0;t<i;t++){const i=s[t];n[t]<i.dirtyId&&(n[t]=i.dirtyId,i.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,t,i.resource.width,i.resource.height,1,e.format,r.type,i.resource.source))}return!0}});class oi{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Gt.EMPTY:((t=t||new Gt(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:i,c:n,d:s,tx:o,ty:a}=t,l=r*e.x+n*e.y+o,h=i*e.x+s*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[2],o=t[3],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[4],o=t[5],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,s=t[6],o=t[7],e=s<e?s:e,r=o<r?o:r,i=s>i?s:i,n=o>n?o:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n}addFrame(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)}addFrameMatrix(t,e,r,i,n){const s=t.a,o=t.b,a=t.c,l=t.d,h=t.tx,u=t.ty;let c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=s*e+a*r+h,m=o*e+l*r+u;c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*i+a*r+h,m=o*i+l*r+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*e+a*n+h,m=o*e+l*n+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,g=s*i+a*n+h,m=o*i+l*n+u,c=g<c?g:c,d=m<d?m:d,p=g>p?g:p,f=m>f?m:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f}addVertexData(t,e,r){let i=this.minX,n=this.minY,s=this.maxX,o=this.maxY;for(let a=e;a<r;a+=2){const e=t[a],r=t[a+1];i=e<i?e:i,n=r<n?r:n,s=e>s?e:s,o=r>o?r:o}this.minX=i,this.minY=n,this.maxX=s,this.maxY=o}addVertices(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)}addVerticesMatrix(t,e,r,i,n=0,s=n){const o=t.a,a=t.b,l=t.c,h=t.d,u=t.tx,c=t.ty;let d=this.minX,p=this.minY,f=this.maxX,g=this.maxY;for(let t=r;t<i;t+=2){const r=e[t],i=e[t+1],m=o*r+l*i+u,v=h*i+a*r+c;d=Math.min(d,m-n),f=Math.max(f,m+n),p=Math.min(p,v-s),g=Math.max(g,v+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=g}addBounds(t){const e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=i<e?i:e,this.maxX=n>o?n:o,this.maxY=s>a?s:a}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=i<e?i:e,this.maxX=n>o?n:o,this.maxY=s>a?s:a}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,i,n,s){t-=n,e-=s,r+=n,i+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i}}class ai extends G{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Qt,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new oi,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const i=e[r];Object.defineProperty(ai.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Gt),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Gt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new oi);const e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,s}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,r=1,i=1,n=0,s=0,o=0,a=0,l=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new li),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Ft}set angle(t){this.transform.rotation=t*Nt}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class li extends ai{constructor(){super(...arguments),this.sortDirty=null}}ai.prototype.displayObjectUpdateTransform=ai.prototype.updateTransform;const hi=new jt;function ui(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const ci=class extends ai{constructor(){super(),this.children=[],this.sortableChildren=ci.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);Q(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,Q(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Q(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,i=e-r;let n;if(i>0&&i<=e){n=this.children.splice(r,i);for(let t=0;t<n.length;++t)n[t].parent=null,n[t].transform&&(n[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<n.length;++t)n[t].emit("removed",this),this.emit("childRemoved",n[t],this,t);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(ui),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==ci.prototype._render&&(r=this.getBounds(!0));const n=t.projection.transform;if(n&&(i?(i=hi.copyFrom(i),i.prepend(n)):i=n),r&&e.intersects(r,i))this._render(t);else if(this.cullArea)return;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e],i=r.cullable;r.cullable=i||!this.cullArea,r.render(t),r.cullable=i}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const i=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==y.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}i&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof t?t:t?.children,r=this.removeChildren(0,this.children.length);if(e)for(let e=0;e<r.length;++e)r[e].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let di=ci;di.defaultSortableChildren=!1,di.prototype.containerUpdateTransform=di.prototype.updateTransform,Object.defineProperties(E,{SORTABLE_CHILDREN:{get:()=>di.defaultSortableChildren,set(t){W("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),di.defaultSortableChildren=t}}});var pi=Object.defineProperty,fi=(t,e,r)=>(((t,e,r)=>{e in t?pi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r})(t,"symbol"!=typeof e?e+"":e,r),r);class gi{constructor(t){fi(this,"parent"),fi(this,"paused"),this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var mi,vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yi={exports:{}};mi=yi,function(){var t,e;e=t={linear:function(t,e,r,i){return r*t/i+e},easeInQuad:function(t,e,r,i){return r*(t/=i)*t+e},easeOutQuad:function(t,e,r,i){return-r*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,r,i){return(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,r,i){return r*(t/=i)*t*t+e},easeOutCubic:function(t,e,r,i){return r*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,r,i){return(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,r,i){return r*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,r,i){return-r*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,r,i){return(t/=i/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,r,i){return r*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,r,i){return r*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+e},easeOutSine:function(t,e,r,i){return r*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,r,i){return 0===t?e:r*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,r,i){return t===i?e+r:r*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,r,i){return(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,r,i){var n,s,o;return o=1.70158,0===t||(t/=i),(s=0)||(s=.3*i),(n=r)<Math.abs(r)?(n=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,r,i){var n,s,o;return o=1.70158,0===t||(t/=i),(s=0)||(s=.3*i),(n=r)<Math.abs(r)?(n=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/n),n*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/s)+r+e},easeInOutElastic:function(t,e,r,i){var n,s,o;return o=1.70158,0===t||(t/=i/2),(s=0)||(s=i*(.3*1.5)),(n=r)<Math.abs(r)?(n=r,o=s/4):o=s/(2*Math.PI)*Math.asin(r/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)*.5+r+e},easeInBack:function(t,e,r,i,n){return void 0===n&&(n=1.70158),r*(t/=i)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,r,i,n){return void 0===n&&(n=1.70158),r*((t=t/i-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,r,i,n){return void 0===n&&(n=1.70158),(t/=i/2)<1?r/2*(t*t*((1+(n*=1.525))*t-n))+e:r/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(e,r,i,n){return i-t.easeOutBounce(n-e,0,i,n)+r},easeOutBounce:function(t,e,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(e,r,i,n){return e<n/2?.5*t.easeInBounce(2*e,0,i,n)+r:.5*t.easeOutBounce(2*e-n,0,i,n)+.5*i+r}},mi.exports=e}.call(vi);const _i=yi.exports;function xi(t,e){return t?"function"==typeof t?t:"string"==typeof t?_i[t]:void 0:_i[e]}const bi={removeOnInterrupt:!1,ease:"linear",time:1e3};class Ei extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"startX"),fi(this,"startY"),fi(this,"deltaX"),fi(this,"deltaY"),fi(this,"keepCenter"),fi(this,"startWidth",null),fi(this,"startHeight",null),fi(this,"deltaWidth",null),fi(this,"deltaHeight",null),fi(this,"width",null),fi(this,"height",null),fi(this,"time",0),this.options=Object.assign({},bi,e),this.options.ease=xi(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const e=new kt(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const t=this.parent.width,r=this.parent.height;this.complete(),(t!==this.parent.width||r!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}else{const t=this.options.ease(this.time,0,1,this.options.time);if(null!==this.width){const e=this.startWidth,r=this.deltaWidth;this.parent.fitWidth(e+r*t,this.keepCenter,null===this.height)}if(null!==this.height){const e=this.startHeight,r=this.deltaHeight;this.parent.fitHeight(e+r*t,this.keepCenter,null===this.width)}if(null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const e=this.startX,r=this.startY,i=this.deltaX,n=this.deltaY,s=new kt(this.parent.x,this.parent.y);this.parent.moveCenter(e+i*t,r+n*t),this.parent.emit("moved",{viewport:this.parent,original:s,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}}}const Ti={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Si extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"left"),fi(this,"top"),fi(this,"right"),fi(this,"bottom"),fi(this,"underflowX"),fi(this,"underflowY"),fi(this,"ease"),fi(this,"toX"),fi(this,"toY"),this.options=Object.assign({},Ti,e),this.ease=xi(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();"center"===r?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==r.indexOf("left")?-1:-1!==r.indexOf("right")?1:0,this.underflowY=-1!==r.indexOf("top")?-1:-1!==r.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=typeof t.x>"u"?0:t.x,r=typeof t.y>"u"?0:t.y,i=typeof t.width>"u"?this.parent.worldWidth:t.width,n=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>n,topLeft:new kt(e*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new kt(i*this.parent.scale.x-this.parent.screenWidth,n*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new kt(0,0),bottomRight:new kt(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,e;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===(null==(t=i.options)?void 0:t.friction)||i.y&&i.percentChangeY===(null==(e=i.options)?void 0:e.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const n=this.parent.plugins.get("drag",!0)||{},s=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(null!=n&&n.active||null!=s&&s.active||this.toX&&this.toY||i.x&&i.y)){r=r||this.oob();const t=r.topLeft,e=r.bottomRight;if(!this.toX&&!i.x){let i=null;r.left&&this.left?i=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-t.x:r.right&&this.right&&(i=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-e.x),null!==i&&this.parent.x!==i&&(this.toX={time:0,start:this.parent.x,delta:i-this.parent.x,end:i},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let i=null;r.top&&this.top?i=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-t.y:r.bottom&&this.bottom&&(i=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-e.y),null!==i&&this.parent.y!==i&&(this.toY={time:0,start:this.parent.y,delta:i-this.parent.y,end:i},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const wi={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class Ai extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"last"),fi(this,"noUnderflow"),fi(this,"underflowX"),fi(this,"underflowY"),this.options=Object.assign({},wi,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new kt(this.parent.x,this.parent.y),e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,r=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,r=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const Mi={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class Ri extends gi{constructor(t,e={}){super(t),fi(this,"options"),this.options=Object.assign({},Mi,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if("number"==typeof this.options.minScale)t.x=this.options.minScale,t.y=this.options.minScale;else if(null!==this.options.minScale){const e=this.options.minScale;t.x=typeof e.x>"u"?null:e.x,t.y=typeof e.y>"u"?null:e.y}if("number"==typeof this.options.maxScale)e.x=this.options.maxScale,e.y=this.options.maxScale;else if(null!==this.options.maxScale){const t=this.options.maxScale;e.x=typeof t.x>"u"?null:t.x,e.y=typeof t.y>"u"?null:t.y}let r=this.parent.scale.x,i=this.parent.scale.y;null!==t.x&&r<t.x&&(r=t.x),null!==e.x&&r>e.x&&(r=e.x),null!==t.y&&i<t.y&&(i=t.y),null!==e.y&&i>e.y&&(i=e.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const Pi={friction:.98,bounce:.8,minSpeed:.01},Ci=16;class Oi extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"x"),fi(this,"y"),fi(this,"percentChangeX"),fi(this,"percentChangeY"),fi(this,"saved"),fi(this,"timeSinceRelease"),this.options=Object.assign({},Pi,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",(t=>this.handleMoved(t)))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(1===t||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type&&t.original?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&t.original&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const r=t-e.time;this.x=(this.parent.x-e.x)/r,this.y=(this.parent.y-e.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){typeof(t=t||{}).x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+t;if(this.x){const e=this.percentChangeX,n=Math.log(e);this.parent.x+=this.x*Ci/n*(Math.pow(e,i/Ci)-Math.pow(e,r/Ci)),this.x*=Math.pow(this.percentChangeX,t/Ci)}if(this.y){const e=this.percentChangeY,n=Math.log(e);this.parent.y+=this.y*Ci/n*(Math.pow(e,i/Ci)-Math.pow(e,r/Ci)),this.y*=Math.pow(this.percentChangeY,t/Ci)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const Ii={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class Di extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"moved"),fi(this,"reverse"),fi(this,"xDirection"),fi(this,"yDirection"),fi(this,"keyIsPressed"),fi(this,"mouse"),fi(this,"underflowX"),fi(this,"underflowY"),fi(this,"last"),fi(this,"current"),fi(this,"windowEventHandlers",[]),this.options=Object.assign({},Ii,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){this.addWindowEventHandler("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})),this.addWindowEventHandler("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}))}addWindowEventHandler(t,e){window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e})}destroy(){this.windowEventHandlers.forEach((({event:t,handler:e})=>{window.removeEventListener(t,e)}))}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e="mouse"===t.pointerType,r=this.parent.input.count();return!(!(1===r||r>1&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag)&&(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},this.current=t.pointerId,!0):(this.last=null,!1))}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.global.x,r=t.global.y,i=this.parent.input.count();if(1===i||i>1&&!this.parent.plugins.get("pinch",!0)){const i=e-this.last.x,n=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(i)||this.yDirection&&this.parent.input.checkThreshold(n)){const i={x:e,y:r};return this.xDirection&&(this.parent.x+=(i.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(i.y-this.last.y)*this.options.factor),this.last=i,this.moved||this.parent.emit("drag-start",{event:t,screen:new kt(this.last.x,this.last.y),world:this.parent.toWorld(new kt(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new kt(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const e=t.deltaMode?this.options.lineHeight:1,r=[t.deltaX,t.deltaY],[i,n]=this.options.wheelSwapAxes?r.reverse():r;return this.xDirection&&(this.parent.x+=i*e*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=n*e*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const Bi={speed:0,acceleration:null,radius:null};class Fi extends gi{constructor(t,e,r={}){super(t),fi(this,"options"),fi(this,"target"),fi(this,"velocity"),this.target=e,this.options=Object.assign({},Bi,r),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);r=this.target.x-Math.cos(t)*this.options.radius,i=this.target.y-Math.sin(t)*this.options.radius}}const n=r-e.x,s=i-e.y;if(n||s)if(this.options.speed)if(this.options.acceleration){const t=Math.atan2(i-e.y,r-e.x),o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));if(o){const a=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=o>a?{x:Math.min(this.velocity.x+(this.options.acceleration,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration,this.options.speed))}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const l=Math.cos(t)*this.velocity.x,h=Math.sin(t)*this.velocity.y,u=Math.abs(l)>Math.abs(n)?r:e.x+l,c=Math.abs(h)>Math.abs(s)?i:e.y+h;this.parent.moveCenter(u,c),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(i-e.y,r-e.x),o=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,l=Math.abs(o)>Math.abs(n)?r:e.x+o,h=Math.abs(a)>Math.abs(s)?i:e.y+a;this.parent.moveCenter(l,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const Ni={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class Li extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"reverse"),fi(this,"radiusSquared"),fi(this,"left"),fi(this,"top"),fi(this,"right"),fi(this,"bottom"),fi(this,"horizontal"),fi(this,"vertical"),this.options=Object.assign({},Ni,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.screenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||"mouse"!==t.pointerType&&1!==t.pointerId||!this.options.allowButtons&&0!==t.buttons)return!1;const e=t.global.x,r=t.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-r,2)>=this.radiusSquared){const i=Math.atan2(t.y-r,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(i))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(i))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(i)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(i)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const ki={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class Ui extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"active",!1),fi(this,"pinching",!1),fi(this,"moved",!1),fi(this,"lastCenter"),this.options=Object.assign({},ki,e)}down(){return this.parent.input.count()>=2&&(this.active=!0,!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const e=t.global.x,r=t.global.y,i=this.parent.input.touches;if(i.length>=2){const n=i[0],s=i[1],o=n.last&&s.last?Math.sqrt(Math.pow(s.last.x-n.last.x,2)+Math.pow(s.last.y-n.last.y,2)):null;if(n.id===t.pointerId?n.last={x:e,y:r,data:t}:s.id===t.pointerId&&(s.last={x:e,y:r,data:t}),o){let t;const e=new kt(n.last.x+(s.last.x-n.last.x)/2,n.last.y+(s.last.y-n.last.y)/2);this.options.center||(t=this.parent.toLocal(e));let r=Math.sqrt(Math.pow(s.last.x-n.last.x,2)+Math.pow(s.last.y-n.last.y,2));r=0===r?r=1e-10:r;const i=(1-o/r)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=i),this.isAxisY()&&(this.parent.scale.y+=i),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:e});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=this.parent.toGlobal(t);this.parent.x+=(e.x-r.x)*this.options.factor,this.parent.y+=(e.y-r.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(e.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(e.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const Gi={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class ji extends gi{constructor(t,e,r,i={}){super(t),fi(this,"options"),fi(this,"ease"),fi(this,"x"),fi(this,"y"),fi(this,"percent"),fi(this,"snapping"),fi(this,"deltaX"),fi(this,"deltaY"),fi(this,"startX"),fi(this,"startY"),this.options=Object.assign({},Gi,i),this.ease=xi(i.ease,"easeInOutSine"),this.x=e,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let r,i,n;e.time+=t;const s=this.startX,o=this.startY,a=this.deltaX,l=this.deltaY;if(e.time>this.options.time)r=!0,i=s+a,n=o+l;else{const t=this.ease(e.time,0,1,this.options.time);i=s+a*t,n=o+l*t}this.options.topLeft?this.parent.moveCorner(i,n):this.parent.moveCenter(i,n),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;(t.x!==this.x||t.y!==this.y)&&this.snapStart()}}}const Hi={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class zi extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"ease"),fi(this,"xScale"),fi(this,"yScale"),fi(this,"xIndependent"),fi(this,"yIndependent"),fi(this,"snapping"),this.options=Object.assign({},Hi,e),this.ease=xi(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:r-t,deltaY:i-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&0!==this.parent.input.count())return;let e;if(!this.options.center&&!this.options.noMove&&(e=this.parent.center),this.snapping){if(this.snapping){const r=this.snapping;if(r.time+=t,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping,e=this.ease(t.time,t.startX,t.deltaX,this.options.time),r=this.ease(t.time,t.startY,t.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/e,this.parent.scale.y=this.parent.screenHeight/r}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping()}resume(){this.snapping=null,super.resume()}}const Wi={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class Xi extends gi{constructor(t,e={}){super(t),fi(this,"options"),fi(this,"smoothing"),fi(this,"smoothingCenter"),fi(this,"smoothingCount"),fi(this,"keyIsPressed"),this.options=Object.assign({},Wi,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)})),window.addEventListener("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.toGlobal(r);this.parent.x+=t.x-e.x,this.parent.y+=t.y-e.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),r=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let n;this.options.center||(n=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const t=this.parent.toGlobal(n);this.parent.x+=e.x-t.x,this.parent.y+=e.y-t.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),r=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const r=this.parent.toGlobal(t);this.parent.x+=e.x-r.x,this.parent.y+=e.y-r.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class Yi{constructor(t){fi(this,"viewport"),fi(this,"clickedAvailable"),fi(this,"isMouseDown"),fi(this,"last"),fi(this,"wheelFunction"),fi(this,"touches"),this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new Gt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(t){if(!this.viewport.pause&&this.viewport.worldVisible){if("mouse"===t.pointerType?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),1===this.count()){this.last=t.global.clone();const e=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);e&&e.isActive()||r&&r.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const e=t.global.x-this.last.x,r=t.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;"mouse"===t.pointerType&&(this.isMouseDown=!1),"mouse"!==t.pointerType&&this.remove(t.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new kt;return this.viewport.options.events.mapPositionToPoint(e,t.clientX,t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Vi=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class $i{constructor(t){fi(this,"plugins"),fi(this,"list"),fi(this,"viewport"),this.viewport=t,this.list=[],this.plugins={}}add(t,e,r=Vi.length){const i=this.plugins[t];i&&i.destroy(),this.plugins[t]=e;const n=Vi.indexOf(t);-1!==n&&Vi.splice(n,1),Vi.splice(r,0,t),this.sort()}get(t,e){var r;return e&&null!=(r=this.plugins[t])&&r.paused?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach((t=>{t.destroy()})),this.plugins={},this.sort()}remove(t){var e;this.plugins[t]&&(null==(e=this.plugins[t])||e.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var e;null==(e=this.plugins[t])||e.pause()}resume(t){var e;null==(e=this.plugins[t])||e.resume()}sort(){this.list=[];for(const t of Vi)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const r of this.list)r.down(t)&&(e=!0);return e}move(t){let e=!1;for(const r of this.viewport.plugins.list)r.move(t)&&(e=!0);return e}up(t){let e=!1;for(const r of this.list)r.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const r of this.list)r.wheel(t)&&(e=!0);return e}}const qi={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:zr.shared,allowPreserveDragOutside:!1};class Ki extends di{constructor(t){super(),fi(this,"moving"),fi(this,"screenWidth"),fi(this,"screenHeight"),fi(this,"threshold"),fi(this,"input"),fi(this,"plugins"),fi(this,"zooming"),fi(this,"lastViewport"),fi(this,"options"),fi(this,"_dirty"),fi(this,"_forceHitArea"),fi(this,"_hitAreaDefault"),fi(this,"_pause"),fi(this,"tickerFunction"),fi(this,"_worldWidth"),fi(this,"_worldHeight"),fi(this,"_disableOnContextMenu",(t=>t.preventDefault())),this.options={...qi,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new Yi(this),this.plugins=new $i(this)}destroy(t){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Gt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,e=window.innerHeight,r,i){this.screenWidth=t,this.screenHeight=e,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new Gt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new kt(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new kt(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new kt(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,r;"number"==typeof t[0]?(e=t[0],r=t[1]):(e=t[0].x,r=t[0].y);const i=(this.worldScreenWidth/2-e)*this.scale.x,n=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==n)&&(this.position.set(i,n),this.plugins.reset(),this.dirty=!0),this}get corner(){return new kt(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,r;return 1===t.length?(e=-t[0].x*this.scale.x,r=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,r=-t[1]*this.scale.y),(e!==this.x||r!==this.y)&&(this.position.set(e,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const r=this.screenWidth/t,i=this.screenHeight/e;return Math.min(r,i)}findCover(t,e){const r=this.screenWidth/t,i=this.screenHeight/e;return Math.max(r,i)}fitWidth(t=this.worldWidth,e,r=!0,i){let n;e&&(n=this.center),this.scale.x=this.screenWidth/t,r&&(this.scale.y=this.scale.x);const s=this.plugins.get("clamp-zoom",!0);return!i&&s&&s.clamp(),e&&n&&this.moveCenter(n),this}fitHeight(t=this.worldHeight,e,r=!0,i){let n;e&&(n=this.center),this.scale.y=this.screenHeight/t,r&&(this.scale.x=this.scale.y);const s=this.plugins.get("clamp-zoom",!0);return!i&&s&&s.clamp(),e&&n&&this.moveCenter(n),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,r=this.worldHeight){let i;t&&(i=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&i&&this.moveCenter(i),this}setZoom(t,e){let r;e&&(r=this.center),this.scale.set(t);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),e&&r&&this.moveCenter(r),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new zi(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new kt(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new Gt(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new Di(this,t)),this}clamp(t){return this.plugins.add("clamp",new Ai(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new Oi(this,t)),this}bounce(t){return this.plugins.add("bounce",new Si(this,t)),this}pinch(t){return this.plugins.add("pinch",new Ui(this,t)),this}snap(t,e,r){return this.plugins.add("snap",new ji(this,t,e,r)),this}follow(t,e){return this.plugins.add("follow",new Fi(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new Xi(this,t)),this}animate(t){return this.plugins.add("animate",new Ei(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new Ri(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new Li(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,r,i,n){n&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let s=!1;t<this.left?(this.left=t,s=!0):t+r>this.right&&(this.right=t+r,s=!0),e<this.top?(this.top=e,s=!0):e+i>this.bottom&&(this.bottom=e+i,s=!0),s&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}},1276:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>rt});var i=r(2828);const n=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const s="object"==typeof global&&global&&global.Object===Object&&global;var o="object"==typeof self&&self&&self.Object===Object&&self;const a=s||o||Function("return this")();const l=function(){return a.Date.now()};var h=/\s/;const u=function(t){for(var e=t.length;e--&&h.test(t.charAt(e)););return e};var c=/^\s+/;const d=function(t){return t?t.slice(0,u(t)+1).replace(c,""):t};const p=a.Symbol;var f=Object.prototype,g=f.hasOwnProperty,m=f.toString,v=p?p.toStringTag:void 0;const y=function(t){var e=g.call(t,v),r=t[v];try{t[v]=void 0;var i=!0}catch(t){}var n=m.call(t);return i&&(e?t[v]=r:delete t[v]),n};var _=Object.prototype.toString;const x=function(t){return _.call(t)};var b=p?p.toStringTag:void 0;const E=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":b&&b in Object(t)?y(t):x(t)};const T=function(t){return null!=t&&"object"==typeof t};const S=function(t){return"symbol"==typeof t||T(t)&&"[object Symbol]"==E(t)};var w=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,M=/^0o[0-7]+$/i,R=parseInt;const P=function(t){if("number"==typeof t)return t;if(S(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=d(t);var r=A.test(t);return r||M.test(t)?R(t.slice(2),r?2:8):w.test(t)?NaN:+t};var C=Math.max,O=Math.min;const I=function(t,e,r){var i,s,o,a,h,u,c=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var r=i,n=s;return i=s=void 0,c=e,a=t.apply(n,r)}function m(t){var r=t-u;return void 0===u||r>=e||r<0||p&&t-c>=o}function v(){var t=l();if(m(t))return y(t);h=setTimeout(v,function(t){var r=e-(t-u);return p?O(r,o-(t-c)):r}(t))}function y(t){return h=void 0,f&&i?g(t):(i=s=void 0,a)}function _(){var t=l(),r=m(t);if(i=arguments,s=this,u=t,r){if(void 0===h)return function(t){return c=t,h=setTimeout(v,e),d?g(t):a}(u);if(p)return clearTimeout(h),h=setTimeout(v,e),g(u)}return void 0===h&&(h=setTimeout(v,e)),a}return e=P(e)||0,n(r)&&(d=!!r.leading,o=(p="maxWait"in r)?C(P(r.maxWait)||0,e):o,f="trailing"in r?!!r.trailing:f),_.cancel=function(){void 0!==h&&clearTimeout(h),c=0,i=u=s=h=void 0},_.flush=function(){return void 0===h?a:y(l())},_};const D=function(t,e,r){var i=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),I(t,e,{leading:i,maxWait:e,trailing:s})};var B=function(){return B=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},B.apply(this,arguments)},F=null,N=null;function L(){if(null===F){if("undefined"==typeof document)return F=0;var t=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),t.appendChild(e);var r=e.getBoundingClientRect().right;t.removeChild(e),F=r}return F}function k(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window}function U(t){return t&&t.ownerDocument?t.ownerDocument:document}i&&window.addEventListener("resize",(function(){N!==window.devicePixelRatio&&(N=window.devicePixelRatio,F=null)}));var G=function(t){return Array.prototype.reduce.call(t,(function(t,e){var r=e.name.match(/data-simplebar-(.+)/);if(r){var i=r[1].replace(/\W+(.)/g,(function(t,e){return e.toUpperCase()}));switch(e.value){case"true":t[i]=!0;break;case"false":t[i]=!1;break;case void 0:t[i]=!0;break;default:t[i]=e.value}}return t}),{})};function j(t,e){var r;t&&(r=t.classList).add.apply(r,e.split(" "))}function H(t,e){t&&e.split(" ").forEach((function(e){t.classList.remove(e)}))}function z(t){return".".concat(t.split(" ").join("."))}var W=Object.freeze({__proto__:null,getElementWindow:k,getElementDocument:U,getOptions:G,addClasses:j,removeClasses:H,classNamesToQuery:z}),X=k,Y=U,V=G,$=j,q=H,K=z,Z=function(){function t(e,r){void 0===r&&(r={});var i=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var t=X(i.el);i.scrollXTicking||(t.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0),i.scrollYTicking||(t.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0),i.isScrolling||(i.isScrolling=!0,$(i.el,i.classNames.scrolling)),i.showScrollbar("x"),i.showScrollbar("y"),i.onStopScrolling()},this.scrollX=function(){i.axis.x.isOverflowing&&i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.axis.y.isOverflowing&&i.positionScrollbar("y"),i.scrollYTicking=!1},this._onStopScrolling=function(){q(i.el,i.classNames.scrolling),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isScrolling=!1},this.onMouseEnter=function(){i.isMouseEntering||($(i.el,i.classNames.mouseEntered),i.showScrollbar("x"),i.showScrollbar("y"),i.isMouseEntering=!0),i.onMouseEntered()},this._onMouseEntered=function(){q(i.el,i.classNames.mouseEntered),i.options.autoHide&&(i.hideScrollbar("x"),i.hideScrollbar("y")),i.isMouseEntering=!1},this._onMouseMove=function(t){i.mouseX=t.clientX,i.mouseY=t.clientY,(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseMoveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseMoveForAxis("y")},this.onMouseLeave=function(){i.onMouseMove.cancel(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&i.onMouseLeaveForAxis("x"),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&i.onMouseLeaveForAxis("y"),i.mouseX=-1,i.mouseY=-1},this._onWindowResize=function(){i.scrollbarWidth=i.getScrollbarWidth(),i.hideNativeScrollbar()},this.onPointerEvent=function(t){var e,r;i.axis.x.track.el&&i.axis.y.track.el&&i.axis.x.scrollbar.el&&i.axis.y.scrollbar.el&&(i.axis.x.track.rect=i.axis.x.track.el.getBoundingClientRect(),i.axis.y.track.rect=i.axis.y.track.el.getBoundingClientRect(),(i.axis.x.isOverflowing||i.axis.x.forceVisible)&&(e=i.isWithinBounds(i.axis.x.track.rect)),(i.axis.y.isOverflowing||i.axis.y.forceVisible)&&(r=i.isWithinBounds(i.axis.y.track.rect)),(e||r)&&(t.stopPropagation(),"pointerdown"===t.type&&"touch"!==t.pointerType&&(e&&(i.axis.x.scrollbar.rect=i.axis.x.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.x.scrollbar.rect)?i.onDragStart(t,"x"):i.onTrackClick(t,"x")),r&&(i.axis.y.scrollbar.rect=i.axis.y.scrollbar.el.getBoundingClientRect(),i.isWithinBounds(i.axis.y.scrollbar.rect)?i.onDragStart(t,"y"):i.onTrackClick(t,"y")))))},this.drag=function(e){var r,n,s,o,a,l,h,u,c,d,p;if(i.draggedAxis&&i.contentWrapperEl){var f=i.axis[i.draggedAxis].track,g=null!==(n=null===(r=f.rect)||void 0===r?void 0:r[i.axis[i.draggedAxis].sizeAttr])&&void 0!==n?n:0,m=i.axis[i.draggedAxis].scrollbar,v=null!==(o=null===(s=i.contentWrapperEl)||void 0===s?void 0:s[i.axis[i.draggedAxis].scrollSizeAttr])&&void 0!==o?o:0,y=parseInt(null!==(l=null===(a=i.elStyles)||void 0===a?void 0:a[i.axis[i.draggedAxis].sizeAttr])&&void 0!==l?l:"0px",10);e.preventDefault(),e.stopPropagation();var _=("y"===i.draggedAxis?e.pageY:e.pageX)-(null!==(u=null===(h=f.rect)||void 0===h?void 0:h[i.axis[i.draggedAxis].offsetAttr])&&void 0!==u?u:0)-i.axis[i.draggedAxis].dragOffset,x=(_="x"===i.draggedAxis&&i.isRtl?(null!==(d=null===(c=f.rect)||void 0===c?void 0:c[i.axis[i.draggedAxis].sizeAttr])&&void 0!==d?d:0)-m.size-_:_)/(g-m.size)*(v-y);"x"===i.draggedAxis&&i.isRtl&&(x=(null===(p=t.getRtlHelpers())||void 0===p?void 0:p.isScrollingToNegative)?-x:x),i.contentWrapperEl[i.axis[i.draggedAxis].scrollOffsetAttr]=x}},this.onEndDrag=function(t){var e=Y(i.el),r=X(i.el);t.preventDefault(),t.stopPropagation(),q(i.el,i.classNames.dragging),e.removeEventListener("mousemove",i.drag,!0),e.removeEventListener("mouseup",i.onEndDrag,!0),i.removePreventClickId=r.setTimeout((function(){e.removeEventListener("click",i.preventClick,!0),e.removeEventListener("dblclick",i.preventClick,!0),i.removePreventClickId=null}))},this.preventClick=function(t){t.preventDefault(),t.stopPropagation()},this.el=e,this.options=B(B({},t.defaultOptions),r),this.classNames=B(B({},t.defaultOptions.classNames),r.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!=typeof this.el||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=D(this._onMouseMove,64),this.onWindowResize=I(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=I(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=I(this._onMouseEntered,this.stopScrollDelay),this.init()}return t.getRtlHelpers=function(){if(t.rtlHelpers)return t.rtlHelpers;var e=document.createElement("div");e.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var r=e.firstElementChild,i=null==r?void 0:r.firstElementChild;if(!i)return null;document.body.appendChild(r),r.scrollLeft=0;var n=t.getOffset(r),s=t.getOffset(i);r.scrollLeft=-999;var o=t.getOffset(i);return document.body.removeChild(r),t.rtlHelpers={isScrollOriginAtZero:n.left!==s.left,isScrollingToNegative:s.left!==o.left},t.rtlHelpers},t.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:L()}catch(t){return L()}},t.getOffset=function(t){var e=t.getBoundingClientRect(),r=Y(t),i=X(t);return{top:e.top+(i.pageYOffset||r.documentElement.scrollTop),left:e.left+(i.pageXOffset||r.documentElement.scrollLeft)}},t.prototype.init=function(){i&&(this.initDOM(),this.rtlHelpers=t.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},t.prototype.initDOM=function(){var t,e;this.wrapperEl=this.el.querySelector(K(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(K(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(K(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(K(this.classNames.offset)),this.maskEl=this.el.querySelector(K(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,K(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(K(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(K(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(K(this.classNames.track)).concat(K(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(K(this.classNames.track)).concat(K(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(t=this.axis.x.track.el)||void 0===t?void 0:t.querySelector(K(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(e=this.axis.y.track.el)||void 0===e?void 0:e.querySelector(K(this.classNames.scrollbar)))||null,this.options.autoHide||($(this.axis.x.scrollbar.el,this.classNames.visible),$(this.axis.y.scrollbar.el,this.classNames.visible))},t.prototype.initListeners=function(){var t,e=this,r=X(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(t=this.contentWrapperEl)||void 0===t||t.addEventListener("scroll",this.onScroll),r.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var i=!1,n=r.ResizeObserver||ResizeObserver;this.resizeObserver=new n((function(){i&&r.requestAnimationFrame((function(){e.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),r.requestAnimationFrame((function(){i=!0}))}this.mutationObserver=new r.MutationObserver((function(){r.requestAnimationFrame((function(){e.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},t.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var t=X(this.el);this.elStyles=t.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var e=this.contentEl.offsetWidth,r=this.heightAutoObserverEl.offsetHeight<=1,i=this.heightAutoObserverEl.offsetWidth<=1||e>0,n=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,o=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=r?"auto":"100%",this.placeholderEl.style.width=i?"".concat(e||l,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var h=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==e&&l>e,this.axis.y.isOverflowing=a>h,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==o&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,c=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&l>n-c,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>h-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},t.prototype.getScrollbarSize=function(t){var e,r;if(void 0===t&&(t="y"),!this.axis[t].isOverflowing||!this.contentEl)return 0;var i,n=this.contentEl[this.axis[t].scrollSizeAttr],s=null!==(r=null===(e=this.axis[t].track.el)||void 0===e?void 0:e[this.axis[t].offsetSizeAttr])&&void 0!==r?r:0,o=s/n;return i=Math.max(~~(o*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(i=Math.min(i,this.options.scrollbarMaxSize)),i},t.prototype.positionScrollbar=function(e){var r,i,n;void 0===e&&(e="y");var s=this.axis[e].scrollbar;if(this.axis[e].isOverflowing&&this.contentWrapperEl&&s.el&&this.elStyles){var o=this.contentWrapperEl[this.axis[e].scrollSizeAttr],a=(null===(r=this.axis[e].track.el)||void 0===r?void 0:r[this.axis[e].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[e].sizeAttr],10),h=this.contentWrapperEl[this.axis[e].scrollOffsetAttr];h="x"===e&&this.isRtl&&(null===(i=t.getRtlHelpers())||void 0===i?void 0:i.isScrollOriginAtZero)?-h:h,"x"===e&&this.isRtl&&(h=(null===(n=t.getRtlHelpers())||void 0===n?void 0:n.isScrollingToNegative)?h:-h);var u=h/(o-l),c=~~((a-s.size)*u);c="x"===e&&this.isRtl?-c+(a-s.size):c,s.el.style.transform="x"===e?"translate3d(".concat(c,"px, 0, 0)"):"translate3d(0, ".concat(c,"px, 0)")}},t.prototype.toggleTrackVisibility=function(t){void 0===t&&(t="y");var e=this.axis[t].track.el,r=this.axis[t].scrollbar.el;e&&r&&this.contentWrapperEl&&(this.axis[t].isOverflowing||this.axis[t].forceVisible?(e.style.visibility="visible",this.contentWrapperEl.style[this.axis[t].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(t))):(e.style.visibility="hidden",this.contentWrapperEl.style[this.axis[t].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(t))),this.axis[t].isOverflowing?r.style.display="block":r.style.display="none")},t.prototype.showScrollbar=function(t){void 0===t&&(t="y"),this.axis[t].isOverflowing&&!this.axis[t].scrollbar.isVisible&&($(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!0)},t.prototype.hideScrollbar=function(t){void 0===t&&(t="y"),this.axis[t].isOverflowing&&this.axis[t].scrollbar.isVisible&&(q(this.axis[t].scrollbar.el,this.classNames.visible),this.axis[t].scrollbar.isVisible=!1)},t.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},t.prototype.onMouseMoveForAxis=function(t){void 0===t&&(t="y");var e=this.axis[t];e.track.el&&e.scrollbar.el&&(e.track.rect=e.track.el.getBoundingClientRect(),e.scrollbar.rect=e.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(e.track.rect)?(this.showScrollbar(t),$(e.track.el,this.classNames.hover),this.isWithinBounds(e.scrollbar.rect)?$(e.scrollbar.el,this.classNames.hover):q(e.scrollbar.el,this.classNames.hover)):(q(e.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)))},t.prototype.onMouseLeaveForAxis=function(t){void 0===t&&(t="y"),q(this.axis[t].track.el,this.classNames.hover),q(this.axis[t].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(t)},t.prototype.onDragStart=function(t,e){var r;void 0===e&&(e="y");var i=Y(this.el),n=X(this.el),s=this.axis[e].scrollbar,o="y"===e?t.pageY:t.pageX;this.axis[e].dragOffset=o-((null===(r=s.rect)||void 0===r?void 0:r[this.axis[e].offsetAttr])||0),this.draggedAxis=e,$(this.el,this.classNames.dragging),i.addEventListener("mousemove",this.drag,!0),i.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(i.addEventListener("click",this.preventClick,!0),i.addEventListener("dblclick",this.preventClick,!0)):(n.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.prototype.onTrackClick=function(t,e){var r,i,n,s,o=this;void 0===e&&(e="y");var a=this.axis[e];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){t.preventDefault();var l=X(this.el);this.axis[e].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var h=null!==(i=null===(r=this.axis[e].scrollbar.rect)||void 0===r?void 0:r[this.axis[e].offsetAttr])&&void 0!==i?i:0,u=parseInt(null!==(s=null===(n=this.elStyles)||void 0===n?void 0:n[this.axis[e].sizeAttr])&&void 0!==s?s:"0px",10),c=this.contentWrapperEl[this.axis[e].scrollOffsetAttr],d=("y"===e?this.mouseY-h:this.mouseX-h)<0?-1:1,p=-1===d?c-u:c+u,f=function(){o.contentWrapperEl&&(-1===d?c>p&&(c-=40,o.contentWrapperEl[o.axis[e].scrollOffsetAttr]=c,l.requestAnimationFrame(f)):c<p&&(c+=40,o.contentWrapperEl[o.axis[e].scrollOffsetAttr]=c,l.requestAnimationFrame(f)))};f()}},t.prototype.getContentElement=function(){return this.contentEl},t.prototype.getScrollElement=function(){return this.contentWrapperEl},t.prototype.removeListeners=function(){var t=X(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},t.prototype.unMount=function(){this.removeListeners()},t.prototype.isWithinBounds=function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height},t.prototype.findChild=function(t,e){var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;return Array.prototype.filter.call(t.children,(function(t){return r.call(t,e)}))[0]},t.rtlHelpers=null,t.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},t.getOptions=V,t.helpers=W,t}(),Q=function(t,e){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Q(t,e)};var J=Z.helpers,tt=J.getOptions,et=J.addClasses,rt=function(t){function e(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var n=t.apply(this,r)||this;return e.instances.set(r[0],n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(t){"init"===t.getAttribute("data-simplebar")||e.instances.has(t)||new e(t,tt(t.attributes))}))},e.removeObserver=function(){var t;null===(t=e.globalObserver)||void 0===t||t.disconnect()},e.prototype.initDOM=function(){var t,e,r,i=this;if(!Array.prototype.filter.call(this.el.children,(function(t){return t.classList.contains(i.classNames.wrapper)})).length){for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),et(this.wrapperEl,this.classNames.wrapper),et(this.contentWrapperEl,this.classNames.contentWrapper),et(this.offsetEl,this.classNames.offset),et(this.maskEl,this.classNames.mask),et(this.contentEl,this.classNames.contentEl),et(this.placeholderEl,this.classNames.placeholder),et(this.heightAutoObserverWrapperEl,this.classNames.heightAutoObserverWrapperEl),et(this.heightAutoObserverEl,this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl),null===(t=this.contentWrapperEl)||void 0===t||t.setAttribute("tabindex","0"),null===(e=this.contentWrapperEl)||void 0===e||e.setAttribute("role","region"),null===(r=this.contentWrapperEl)||void 0===r||r.setAttribute("aria-label",this.options.ariaLabel)}if(!this.axis.x.track.el||!this.axis.y.track.el){var n=document.createElement("div"),s=document.createElement("div");et(n,this.classNames.track),et(s,this.classNames.scrollbar),n.appendChild(s),this.axis.x.track.el=n.cloneNode(!0),et(this.axis.x.track.el,this.classNames.horizontal),this.axis.y.track.el=n.cloneNode(!0),et(this.axis.y.track.el,this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}Z.prototype.initDOM.call(this),this.el.setAttribute("data-simplebar","init")},e.prototype.unMount=function(){Z.prototype.unMount.call(this),e.instances.delete(this.el)},e.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(e.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},e.handleMutations=function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?!e.instances.has(t)&&document.documentElement.contains(t)&&new e(t,tt(t.attributes)):t.querySelectorAll("[data-simplebar]").forEach((function(t){"init"!==t.getAttribute("data-simplebar")&&!e.instances.has(t)&&document.documentElement.contains(t)&&new e(t,tt(t.attributes))})))})),t.removedNodes.forEach((function(t){1===t.nodeType&&("init"===t.getAttribute("data-simplebar")?e.instances.has(t)&&!document.documentElement.contains(t)&&e.instances.get(t).unMount():Array.prototype.forEach.call(t.querySelectorAll('[data-simplebar="init"]'),(function(t){e.instances.has(t)&&!document.documentElement.contains(t)&&e.instances.get(t).unMount()})))}))}))},e.instances=new WeakMap,e}(Z);i&&rt.initHtmlApi()}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.nc=void 0;r(5712)})();